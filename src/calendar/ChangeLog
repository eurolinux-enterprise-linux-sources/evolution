2009-04-27  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #491755

	* gui/alarm-notify/config-data.c:
	(config_data_set_last_notification_time),
	(config_data_get_last_notification_time):
	Sanitize values from GConf before using them.

2009-04-27  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #575773

	* gui/e-calendar-table.etspec:
	* gui/e-cal-list-view.etspec:
	* gui/e-memo-table.etspec:
	* gui/e-cal-model.h: (ECalModelField), (struct _ECalModelComponent):
	* gui/e-cal-model.c: (get_datetime_from_utc), (ecm_value_at),
	(ecm_duplicate_value), (ecm_free_value), (ecm_initialize_value),
	(ecm_value_is_empty), (ecm_value_to_string),
	(e_cal_view_objects_modified_cb), (e_cal_model_component_finalize),
	(e_cal_model_component_init):
	Allow showing CREATED and LAST-MODIFIED properties in a table.

	* gui/print.c: (print_comp_draw_real):
	* gui/e-cal-component-preview.c: (write_html):
	* conduits/todo/todo-conduit.c: (local_record_from_comp):
	Possible leak fix.

2009-04-24  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #573704

	* gui/dialogs/comp-editor.c: (action_save_cb), (real_send_comp):
	Do not close editor after error.

2009-04-24  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #571272

	* gui/e-cal-model.c: (search_by_id_and_client):	Possible leak fix.

2009-04-24  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #569652

	* gui/calendar-component.c: (ensure_sources):
	* gui/memos-component.c: (ensure_sources):
	* gui/tasks-component.c: (ensure_sources):
	Use new ESourceList API (simplifies code).

2009-04-24  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #381132

	* gui/apps_evolution_calendar.schemas.in:
	* gui/dialogs/cal-prefs-dialog.glade:
	* gui/dialogs/cal-prefs-dialog.h: (struct _CalendarPrefsDialog):
	* gui/dialogs/cal-prefs-dialog.c: (update_system_tz_widgets),
	(use_system_tz_changed), (setup_changes), (show_config),
	(calendar_prefs_dialog_construct):
	* gui/calendar-config-keys.h:
	* gui/calendar-config.h:
	* gui/calendar-config.c: (calendar_config_get_use_system_timezone),
	(calendar_config_set_use_system_timezone),
	(calendar_config_add_notification_use_system_timezone),
	(calendar_config_get_timezone), (calendar_config_get_timezone_stored):
	Be able to set system timezone as calendar's time zone.

2009-04-24  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #205804

	* gui/e-calendar-view.c: (e_calendar_view_get_tooltips):
	Include timezone information in a tooltip when differs from user's.

2009-04-24  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #577615

	* gui/dialogs/cal-prefs-dialog.h: (struct _CalendarPrefsDialog):
	* gui/dialogs/cal-prefs-dialog.c: (timezone_changed),
	(daylight_saving_changed), (setup_changes), (show_config),
	(calendar_prefs_dialog_construct):
	* gui/dialogs/cal-prefs-dialog.glade:
	* gui/apps_evolution_calendar.schemas.in:
	* gui/calendar-config-keys.h:
	* gui/calendar-config.h:
	* gui/calendar-config.c: (set_standard_offsets),
	(calendar_config_get_icaltimezone),
	(calendar_config_get_daylight_saving),
	(calendar_config_set_daylight_saving),
	(calendar_config_add_notification_daylight_saving):
	Get rid of "Adjust for daylight saving time" option.

2009-04-24  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #572348

	* gui/dialogs/task-page.glade:
	* gui/dialogs/task-page.c:
	* gui/dialogs/task-details-page.glade:
	* gui/dialogs/task-details-page.c:
	* gui/dialogs/recurrence-page.glade:
	* gui/dialogs/recurrence-page.c:
	* gui/dialogs/alarm-dialog.glade:
	* gui/dialogs/alarm-dialog.c:
	* gui/dialogs/event-page.glade:
	* gui/dialogs/event-page.c:
	* gui/dialogs/memo-page.glade:
	* gui/dialogs/memo-page.c:
	* gui/goto-dialog.glade:
	* gui/goto.c:
	* gui/e-itip-control.c:
	Remove deprecated Gtk+ symbols.

	* gui/dialogs/Makefile.am:
	* gui/dialogs/meeting-page.glade:
	Remove death files.

2009-04-13  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #561312
	* calendar/gui/comp-util.c:
	* calendar/gui/comp-util.h: Added a new function to
	sanitize master recurrence event before modifying 
	all instances.
	* calendar/gui/dialogs/comp-editor.c:
	* calendar/gui/e-day-view.c:
	* calendar/gui/e-week-view.c: Used the new util api.
	Do not invoke recurrence dialog while modifying detached
	instances.

2009-04-07  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #523802

	* gui/e-tasks.h: (e_tasks_get_preview):
	* gui/e-tasks.c: (e_tasks_get_preview):
	* gui/e-cal-component-preview.h: (e_cal_component_preview_get_html):
	* gui/e-cal-component-preview.c: (e_cal_component_preview_get_html):
	* gui/tasks-control.c: (tasks_control_new), (tasks_sensitize_table[]),
	(tasks_control_sensitize_commands), (tasks_control_focus_changed),
	(tasks_control_copy_cmd):
	* gui/e-memos.h: (e_memos_get_preview):
	* gui/e-memos.c: (e_memos_get_preview):
	* gui/e-cal-component-memo-preview.h:
	* gui/e-cal-component-memo-preview.c:
	(e_cal_component_memo_preview_get_html):
	* gui/memos-control.c: (memos_control_new),
	(memos_control_sensitize_commands), (memos_control_focus_changed),
	(memos_control_copy_cmd):
	Use copy of the preview panel, when focused, and events' copy otherwise.

2009-04-02  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #577717

	* gui/dialogs/alarm-dialog.c: (alarm_to_dialog),
	(malarm_widgets_to_alarm): Fill some default values
	to mandatory properties of ECalComponentAttendee.

2009-03-06  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #401346

	* gui/e-meeting-time-sel.c: (e_meeting_time_selector_destroy):
	Do not remove notification twice.
	* gui/dialogs/event-editor.c: (create_schedule_page),
	(action_free_busy_cb): Do not show Free/Busy dialog modal.

2009-03-05  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #435455 (bnc)
	* calendar/gui/dialogs/comp-editor.c:
	* calendar/gui/dialogs/event-editor.c:
	* calendar/gui/dialogs/event-page.c:
	* calendar/gui/dialogs/memo-page.c:
	* calendar/gui/dialogs/task-page.c:
	* calendar/gui/e-calendar-view.c:
	* calendar/gui/e-calendar-view.h:
	* calendar/gui/e-day-view.c:
	* calendar/gui/itip-utils.c:
	* calendar/gui/itip-utils.h: Do not allow read-only
	events to be resized.

2009-03-04  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #573119

	* gui/dialogs/comp-editor.c: (set_attendees_for_delegation):
	* gui/e-cal-popup.c: (is_delegated), (needs_to_accept):
	Do not ask value of not included (NULL) parameters.

2009-03-04  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #573193

	* gui/e-calendar-view.c: (error_response): Always destroy dialog.

2009-03-04  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #573122

	* gui/dialogs/cal-prefs-dialog.c: (timezone_changed), (show_config):
	* gui/calendar-config.c: (calendar_config_get_icaltimezone):
	* gui/e-cal-model.c: (ecm_value_at):
	Do not pass NULL to icalcomponent_get_first_component.

2009-02-25  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #558366

	* gui/alarm-notify/alarm-notify.c: (alarm_notify_add_calendar):
	Set default timezone to resolve floating DATE-TIME properly.

2009-02-25  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #238346

	* gui/e-calendar-view.c: (e_calendar_view_add_event): Keep old
	timezone when adding event if possible, use the default one otherwise.
	* gui/e-calendar-view.c: (add_related_timezones), (clipboard_get_text_cb):
	Set timezones from component to the calendar first, then add events. Also
	fetch timezones from the calendar, when not part of the component already.

2009-02-25  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #529037

	* gui/gnome-cal.c: (gnome_calendar_destroy):
	Disconnect signals on ESource-s too, not only on ECal-s.

2009-02-25  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #561465

	* gui/e-meeting-list-view.c: (build_table):
	Expand 'Attendee' column instead of the last.

2009-02-23  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #572543

	* gui/e-cal-popup.c: (ecalp_standard_menu_factory):
	Always look for alternative apps for application/octet-stream.

2009-02-22  Tobias Mueller  <tobiasmue@svn.gnome.org>

	* gui/e-itip-control.c (refresh_options_object):
	Make it use the proper action. Patch by Pawe≈Ç Zembrzuski
	
	** Fixes bug 566556

2009-02-20  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #567949

	* gui/e-day-view.c: (set_text_as_bold):
	* gui/e-week-view.c: (set_text_as_bold):
	Do not free memory before done with it.

2009-02-19  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #572348

	* gui/alarm-notify/alarm-queue.c (display_notification):
	Call gtk_status_icon_set_tooltip_text() instead of
	gtk_status_icon_set_tooltip() (deprecated).

	* gui/weekday-picker.c (configure_items):
	Remove dead code.

2009-02-19  Andre Klapper  <a9016009@gmx.de>

	* /gui/e-day-view.c:
	Remove useless and deprecated gtk_layout_freeze and gtk_layout_thaw
	calls.

2009-02-16  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #550114

	* gui/e-calendar-table.h: (ec_query_tooltip):
	* gui/e-calendar-table.c: (ec_query_tooltip): Offer it to others too.
	* gui/e-calendar-table.c: (query_tooltip_cb): Use above funtion.
	Show proper tooltip in table with grouping columns.
	* gui/e-memo-table.c: (query_tooltip_cb), (e_memo_table_init):
	Show tooltips in memo view too.

2009-02-13  Chow Loong Jin <hyperair@gmail.com>

	** Fixes bug #571625

	* calendar/gui/e-day-view.c
	* calendar/gui/e-week-view.c:
	Use black/white for foreground instead of active/inactive text color

2009-02-11  Andre Klapper  <a9016009@gmx.de>

	* /gui/migration.c:
	* /gui/dialogs/alarm-dialog.c:
	Substitute some deprecated gtk+ functions.

2009-02-09  Milan Crha  <mcrha@redhat.com>

	* gui/dialogs/cal-prefs-dialog.glade:
	Do not use non-zero page size in an adjustment, it's deprecated now.

2009-02-03  Gabor Kelemen  <kelemeng@gnome.hu>

	* gui/alarm-notify/alarm-notify.glade:
	Mark a string for translation. Fixes bug #570364

2009-02-01  Matthew Barnes  <mbarnes@redhat.com>

	* gui/calendar-config.c:
	* gui/calendar-config.h:
	* gui/e-itip-control.c:
	* gui/alarm-notify/alarm-queue.c:
	* gui/dialogs/event-page.c:
	* gui/dialogs/task-details-page.c:
	* gui/dialogs/task-page.c:
	Fix compiler warnings.

2009-01-30  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #450554 (bugzilla.novell.com)

	* gui/dialogs/event-editor.c (event_editor_edit_comp):
	* gui/dialogs/event-page.c (event_page_remove_all_attendees):
	* gui/dialogs/event-page.h:
	Remove all attendees from the list-view and name-selector before
	populating it on 'event_changed' callback.
	* gui/e-meeting-list-view.c
	(e_meeting_list_view_remove_attendee_from_name_selector),
	(e_meeting_list_view_remove_all_attendees_from_name_selector):
	Fix the GtkTreePath when iterating over the attendee list. It used
	to cause a mis-match between the model and the view (critical)
	* gui/e-meeting-list-view.h:
	* gui/e-meeting-store.c (e_meeting_store_remove_all_attendees):
	New function added.

2009-01-30  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #463602 (bnc)
	* calendar/gui/e-day-view-main-item.c: Align the summary
	so that it does not intercept with time.

2009-01-30  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #450535 (bnc)
	* calendar/gui/e-calendar-view.c: If multiple days are
	selected in month view, show same selected times in the
	editor also.

2009-01-30  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #347287
	* calendar/gui/e-cal-model.c:
	* calendar/gui/gnome-cal.c: Increased the number of tries
	to 10 and wait to 500 micro seconds.

2009-01-27  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #318003

	* gui/memos-component.c: (selector_tree_data_dropped):
	* gui/tasks-component.c: (selector_tree_data_dropped):
	* gui/calendar-component.c: (selector_tree_data_dropped),
	(create_component_view):
	* gui/comp-util.h: (cal_comp_process_source_list_drop):
	* gui/comp-util.c: (update_single_object), (update_objects),
	(cal_comp_process_source_list_drop):
	Support move of the event in day view when dropped over the source
	list. Use the same function for events/tasks/memos.

	* gui/e-day-view.c: (e_day_view_on_drag_data_get):
	Encode string data same as memos and tasks do, with a source UID.

	* gui/e-calendar-table.c: (e_calendar_table_copy_clipboard):
	* gui/e-memo-table.c: (e_memo_table_copy_clipboard):
	Removed inappropriate comments.

2009-01-27  Bharath Acharya  <abharath@novell.com>

	** Fix for bug #463597, bug #463594, bug#463599 (BNC) and 
	**	   bug #567824(BGO)

	* gui/print.c (titled_box), (print_day_background),
	(print_day_view), (print_week_view), (print_month_view): Fix all header
	related bugs in calendar printing.

	Bug reports:
	1) Daily Printouts Display Hour In Wrong Spot :
	When you print your daily calendar, it prints the hours in the left 
	column below the :30 time slot

	2) Font Problems On Printout, Days Of Week

	3) Calendar Heading Printout Problems, Overlapping Fonts
	In print preview, short week day names in the header of the page are 
	overlapped.

	Fixes all header issues mentioned at 
	http://www.go-evolution.org/CalendarPrintoutLove

2009-01-23  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #559604

	* gui/itip-utils.h: (itip_organizer_is_user_ex):
	* gui/itip-utils.c: (itip_organizer_is_user_ex),
	(itip_organizer_is_user):
	* gui/e-calendar-view.c: (e_calendar_view_get_attendees_status_info):
	Let the feature work with Groupwise too.

2009-01-23  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #442869

	* gui/dialogs/task-page.c: (attendee_added_cb):
	* gui/dialogs/event-page.c: (attendee_added_cb): Do not work
	with NULL delegator and do not set 'delfrom' with two MAILTO.
	* gui/e-meeting-list-view.c: (name_selector_dialog_close_cb):
	Delete attendee only if we have enough rights for it.

2009-01-21  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #362754

	* gui/tasks-component.c: (ensure_sources):
	* gui/memos-component.c: (ensure_sources):
	* gui/calendar-component.c: (ensure_sources):
	Ensure to show default groups and sources with actual
	localized name, not the one it was stored last time.

2009-01-21  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #541209

	** Adapt to the new APIs from upstream libical. Changes made include
	using the "_r" counterpart for the following APIs:
	+ icalproperty_as_ical_string ()
	+ icalvalue_as_ical_string ()
	+ icalcomponent_as_ical_string ()
	+ icalparameter_as_ical_string ()
	+ icaldurationtype_as_ical_string ()
	+ icalenum_reqstat_code ()
	+ icallangbind_property_eval_string ()
	+ icallangbind_quote_as_ical ()
	+ icalmime_text_end_part ()
	+ icalperiodtype_as_ical_string ()
	+ icalproperty_enum_to_string ()
	+ icalproperty_get_parameter_as_string ()
	+ icalproperty_get_value_as_string ()
	+ icalproperty_get_property_name ()
	+ icalrecurrencetype_as_string ()
	+ icaltime_as_ical_string ()
	+ icalreqstattype_as_string ()
	+ icalvalue_binary_as_ical_string ()
	+ icalvalue_int_as_ical_string ()
	+ icalvalue_utcoffset_as_ical_string ()
	+ icalvalue_string_as_ical_string ()
	+ icalvalue_recur_as_ical_string ()
	+ icalvalue_text_as_ical_string ()
	+ icalvalue_attach_as_ical_string ()
	+ icalvalue_duration_as_ical_string ()
	+ icalvalue_date_as_ical_string ()
	+ icalvalue_datetime_as_ical_string ()
	+ icalvalue_float_as_ical_string ()
	+ icalvalue_geo_as_ical_string ()
	+ icalvalue_datetimeperiod_as_ical_string ()
	+ icalvalue_period_as_ical_string ()
	+ icalvalue_trigger_as_ical_string ()
	+ icalvalue_as_ical_string ()

	* gui/dialogs/e-send-options-utils.c
	(e_sendoptions_utils_fill_component):
	* gui/e-cal-model.c (search_by_id_and_client):
	* gui/e-calendar-table.c (copy_row_cb),
	(e_calendar_table_copy_clipboard):
	* gui/e-calendar-view.c (e_calendar_view_copy_clipboard),
	(transfer_item_to), (icalcomp_contains_category):
	* gui/e-day-view.c (update_row), (model_comps_deleted_cb),
	(e_day_view_find_event_from_uid), (e_day_view_reshape_day_events),
	(e_day_view_on_drag_data_get):
	* gui/e-itip-control.c (update_item):
	* gui/e-memo-table.c (copy_row_cb), (e_memo_table_copy_clipboard):
	* gui/e-memos.c (obtain_list_of_components):
	* gui/e-tasks.c (obtain_list_of_components):
	* gui/e-week-view.c (update_row), (model_comps_deleted_cb),
	(e_week_view_reshape_events), (e_week_view_find_event_from_uid):
	* gui/gnome-cal.c (gnome_calendar_purge):
	* gui/itip-utils.c (comp_limit_attendees), (itip_send_comp),
	(reply_to_calendar_comp), (itip_publish_comp):

2009-01-20  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #353460

	* gui/gnome-cal.c: (setup_widgets):
	Do not allow shrinking of Tasks/Memos components in calendar view.

2009-01-20  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #568331

	* gui/dialogs/comp-editor.c: (classification_changed_cb),
	(comp_editor_init): Notify changes of the classification.
	* gui/dialogs/comp-editor.c: (fill_widgets): Block classification
	change signal when filling widgets with values from a component.

2009-01-19  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #567850

	* gui/e-cal-model.h: (e_cal_model_set_default_time_func):
	* gui/e-cal-model.c: (struct _ECalModelPrivate), (ecm_append_row),
	(e_cal_model_set_default_time_func):
	New functionality to retrieve a default time for a model's new
	event created from a "click-to-add" row.
	* gui/gnome-cal.c: (gc_get_default_time), (setup_widgets):
	Set the new time callback for the memo table.

2009-01-19  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #550735

	* gui/print.c: (get_summary_with_location), (print_day_long_event),
	(print_day_event), (print_week_event):
	Print location with summary in all views, not only in a day view.

2009-01-19  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #260853

	* gui/calendar-config-keys.h:
	* gui/calendar-config.h:
	(calendar_config_get_ba_reminder), (calendar_config_set_ba_reminder):
	* gui/calendar-config.c:
	(calendar_config_get_ba_reminder), (calendar_config_set_ba_reminder),
	(string_to_units), (calendar_config_get_default_reminder_units):
	* gui/dialogs/cal-prefs-dialog.glade:
	* gui/dialogs/cal-prefs-dialog.h: (struct _CalendarPrefsDialog):
	* gui/dialogs/cal-prefs-dialog.c: (ba_reminder_toggled),
	(ba_reminder_interval_changed), (ba_reminder_units_changed),
	(setup_changes), (show_config), (calendar_prefs_dialog_construct):
	User interface and related function to allow use change setup of
	the alarm for Birthdays and Anniversaries calendar.

2009-01-19  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #225712

	* gui/dialogs/comp-editor.h: (CompEditorClass::send_comp),
	(comp_editor_send_comp): Changed function prototypes.
	* gui/dialogs/comp-editor.c: (real_send_comp), (save_comp_with_send),
	(comp_editor_send_comp): Strip alarms based on user's choice.
	* gui/dialogs/send-comp.h: (send_component_dialog):
	* gui/dialogs/send-comp.c: (have_nonprocedural_alarm),
	(send_component_dialog): Show option "Send my alarms with this event"
	when prompting to send event or not, but only if have any non-procedure
	alarms and if it the caller want to know user's opinion. Default is
	to strip all alarms. Procedure alarms are always strip out.
	* gui/dialogs/event-editor.c: (event_editor_send_comp):
	* gui/dialogs/task-editor.c: (task_editor_send_comp):
	Honor function prototype changes and use new parameter strip_alarms.
	* gui/itip-utils.h: (itip_send_comp):
	* gui/itip-utils.c: (comp_compliant), (itip_send_comp),
	(reply_to_calendar_comp):
	New parameter to strip all alarms or only procedure alarms.
	* gui/tasks-control.c: (tasks_control_forward_cmd):
	* gui/e-itip-control.c: (send_item), (send_freebusy), (ok_clicked_cb):
	* gui/e-calendar-table.c: (e_calendar_table_on_forward):
	* gui/e-memo-table.c: (e_memo_table_on_forward):
	* gui/e-calendar-view.c: (e_calendar_view_cut_clipboard),
	(delete_event), (e_calendar_view_delete_selected_occurrence),
	(on_forward):
	Always strip alarms when sending component.
	* gui/e-calendar-view.c: (e_calendar_view_add_event),
	(e_calendar_view_modify_and_send):
	* gui/e-cal-model-calendar.c: (ecmc_set_value_at):
	Strip alarms based on user's choice.

2009-01-19  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #200254

	* gui/apps_evolution_calendar.schemas.in:
	* gui/dialogs/cal-prefs-dialog.glade:
	* gui/dialogs/cal-prefs-dialog.h: (struct _CalendarPrefsDialog):
	* gui/dialogs/cal-prefs-dialog.c: (dview_show_week_no_toggled),
	(setup_changes), (show_config), (calendar_prefs_dialog_construct):
	* gui/calendar-config-keys.h:
	* gui/calendar-config.h:
	* gui/calendar-config.c: (calendar_config_get_dview_show_week_no),
	(calendar_config_set_dview_show_week_no),
	(calendar_config_add_notification_dview_show_week_no):
	New option whether to show week number in Day and Work Week view.
	* gui/e-day-view.h: (struct _EDayView),
	(e_day_view_get_show_week_number), (e_day_view_set_show_week_number):
	* gui/e-day-view.c: (dview_show_week_no_changed_cb), (e_day_view_init),
	(e_day_view_destroy), (e_day_view_recalc_day_starts),
	(e_day_view_get_show_week_number), (e_day_view_set_show_week_number):
	New widget showing week number of the first day in a view.

2009-01-16  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #360813

	* conduits/calendar/calendar-conduit.c: (comp_from_remote_record):
	RFC 2445 - CREATED/DTSTAMP/LAST-MODIFIED always in UTC.

2009-01-16  Milan Crha  <mcrha@redhat.com>

	** Partial fix for bug #310844

	* gui/e-calendar-view.c: (transfer_item_to):
	Transfer master object instead of the instance for recurring events.

2009-01-15  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #303738

	* gui/gnome-cal.c: (client_cal_opened_cb),
	(default_client_cal_opened_cb):
	* gui/e-memos.c: (client_cal_opened_cb),
	(default_client_cal_opened_cb):
	* gui/e-tasks.c: (client_cal_opened_cb),
	(default_client_cal_opened_cb):
	Forget password on AuthFailed or AuthRequired and try to reopen
	on AuthFailed status, which will ask for a password again.

	* gui/comp-editor-factory.c: (cal_opened_cb):
	Show "Authentication Required" on such status returned.

	* common/authentication.c: (auth_cal_forget_password):
	Do not free memory which hold ECal. Also always forget password
	for calendar with the URL key.

2009-01-15  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #245156

	* gui/e-day-view.c: (e_day_view_finish_long_event_resize),
	(e_day_view_finish_resize), (e_day_view_change_event_time),
	(e_day_view_on_top_canvas_drag_data_received),
	(e_day_view_on_main_canvas_drag_data_received):
	* gui/e-week-view.c: (e_week_view_change_event_time):
	* gui/e-calendar-view.c: (on_unrecur_appointment):
	Keep old timezone for dtstart/dtend when changing it.
	* gui/comp-util.h: (cal_comp_set_dtstart_with_oldzone),
	(cal_comp_set_dtend_with_oldzone):
	* gui/comp-util.c: (cal_comp_set_dtstart_with_oldzone),
	(cal_comp_set_dtend_with_oldzone), (datetime_to_zone):
	Helper functions to make it easier.

2009-01-15  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #246313

	* gui/e-day-view.c: (e_day_view_check_if_new_event_fits): Removed.
	* gui/e-day-view.h: (struct _EDayView):
	* gui/e-day-view.c: (e_day_view_init), (e_day_view_size_allocate),
	(e_day_view_recalc_main_canvas_size), (e_day_view_recalc_cell_sizes),
	(e_day_view_update_scroll_regions), (e_day_view_check_layout):
	* gui/e-day-view-layout.h: (e_day_view_layout_day_events):
	* gui/e-day-view-layout.c: (e_day_view_layout_day_events),
	(e_day_view_layout_day_event), (e_day_view_expand_day_event):
	Added ability to show all event in one-day view, but show only up
	to 6 columns in a multi-day view.
	* gui/print.c: (print_day_details): Always print all events.

2009-01-14  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #554454

	* gui/e-cal-model.c: (e_cal_view_objects_modified_cb):
	Do not crash when received 'modified' event for something
	not in a model. And a leak fix.

2009-01-13  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #489437

	* gui/dialogs/recurrence-page.c: (fill_component): Check whether
	the 'until' date is in the future, and report error if not.

2009-01-13  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #567045

	* gui/e-meeting-time-sel.c: (e_meeting_time_selector_construct),
	(e_meeting_time_selector_on_canvas_scroll_event): Escalate scroll
	event's to a scrolled window, to let mouse wheel work over data too.

2009-01-12  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #563364

	* gui/e-day-view-time-item.h: (EDayViewTimeItem):
	* gui/e-day-view-time-item.c: (e_day_view_time_item_class_init),
	(e_day_view_time_item_init), (e_day_view_time_item_finalize),
	(e_day_view_time_item_get_column_width), (edvti_draw_zone),
	(e_day_view_time_item_draw), (edvti_second_zone_changed_cb),
	(edvti_on_select_zone), (edvti_on_set_zone),
	(e_day_view_time_item_show_popup_menu):
	Show two timezones in the day view's time column.

	* gui/apps_evolution_calendar.schemas.in:
	* gui/calendar-config-keys.h:
	* gui/calendar-config.h:
	* gui/calendar-config.c: (calendar_config_get_day_second_zones),
	(calendar_config_free_day_second_zones),
	(calendar_config_set_day_second_zone),
	(calendar_config_get_day_second_zone),
	(calendar_config_select_day_second_zone),
	(calendar_config_add_notification_day_second_zone):
	Access configuration for the second day time zone.

	* gui/dialogs/cal-prefs-dialog.glade:
	* gui/dialogs/cal-prefs-dialog.h: (struct _CalendarPrefsDialog):
	* gui/dialogs/cal-prefs-dialog.c: (update_day_second_zone_caption),
	(on_set_day_second_zone), (on_select_day_second_zone),
	(day_second_zone_clicked), (setup_changes), (show_config),
	(calendar_prefs_dialog_construct):
	Manage the second day zone in a Preferences dialog.

2009-01-12  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #555310

	* importers/icalendar-importer.c: (ivcal_getwidget):
	Localize strings properly.

2009-01-12  Matthew Barnes  <mbarnes@redhat.com>

	** Fix for bug #567148

	* gui/e-timezone-entry.c (e_timezone_entry_init): Use a labelled button
	to bring up the timezone selector widget. 

2009-01-11  Matthew Barnes  <mbarnes@redhat.com>

	* gui/e-cal-component-preview (on_link_clicked):
	* gui/e-cal-component-memo-preview (on_link_clicked):
	* gui/e-memo-table.c (open_url_cb):
	* gui/dialogs/comp-editor.c (open_attachment):
	Call e_show_uri() instead of gnome_url_show().

2009-01-10  Matthew Barnes  <mbarnes@redhat.com>

	* gui/calendar-commands.c:
	* gui/e-cal-list-view.c:
	* gui/e-day-view.c:
	* gui/e-itip-control.c:
	* gui/e-meeting-list-view.c:
	* gui/e-meeting-store.c:
	* gui/e-week-view.c:
	* gui/gnome-cal.c:
	* gui/memos-control.c:
	* gui/tasks-control.c:
	Remove unneeded #include <libgnome/gnome-util.h>.

2009-01-10  Matthew Barnes  <mbarnes@redhat.com>

	* gui/calendar-commands.c:
	* gui/e-cell-date-edit-text.c:
	* gui/e-itip-control.c:
	* gui/memos-control.c:
	* gui/print.c:
	* gui/tasks-control.c:
	Remove unneeded #include <libgnomeui/gnome-stock-icons.h>.

	* gui/alarm-notify/alarm-queue.c:
	* gui/dialogs/cal-attachment-select-file.c:
	* gui/dialogs/cancel-comp.c:
	* gui/dialogs/changed-comp.c:
	* gui/dialogs/delete-error.c:
	* gui/dialogs/recur-comp.c:
	* gui/e-itip-control.c:
	* gui/print.c:
	Remove unneeded #include <libgnomeui/gnome-uidefs.h>.

2009-01-10  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #567281

	* gui/calendar-commands.c:
	* gui/e-cell-date-edit-text.c:
	Remove unneeded #include <libgnomeui/gnome-messagebox.h>.

2009-01-10  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #567276

	* gui/calendar-commands.c:
	* gui/control-factory.c:
	* gui/e-itip-control.c:
	* gui/gnome-cal.c:
	* gui/goto.c:
	* gui/memos-control.c:
	* gui/print.c:
	* gui/tasks-control.c:
	* gui/alarm-notify/alarm-queue.c:
	* gui/dialogs/schedule-page.c:
	Remove unneeded #include <libgnomeui/gnome-dialog-util.h>.

	* gui/calendar-config.c:
	* gui/calendar-config.h:
	Removed unused function calendar_config_check_timezone_set().

2009-01-09  Takao Fujiwara  <takao.fujiwara@sun.com>

	Reviewed by Matthew Barnes  <mbarnes@redhat.com>

	* Fix for bug #566011

	* gui/Makefile.am:
	* gui/calendar-component.c (calendar_component_class_init):
	* gui/dialogs/comp-editor.c:
	* gui/memos-component.c (memos_component_class_init):
	* gui/tasks-component.c (tasks_component_class_init):
	Include <glib/gi18n-lib.h> instead of <glib/gi18n.h> and
	add bindtextdomain().

2009-01-07  Ashish Shrivastava  <shashish@novell.com>

	** Fix for bug #565553, #462372 (bnc)

	* gui/e-cal-popup.c (temp_save_part):
	Add supported URI format.

2009-01-07  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #443544 (bugzilla.novell.com)

	* gui/e-meeting-attendee.c (e_meeting_attendee_add_busy_period):
	* gui/e-meeting-store.c (process_free_busy_comp):
	* gui/e-meeting-time-sel.c (e_meeting_time_selector_construct):
	* gui/e-meeting-types.h:
	Handle E_MEETING_FREE_BUSY_FREE.

2009-01-06  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes bug #566599

	* gui/itip-utils.c (comp_subject):
	Add translator comments and gettext context for meeting mail
	subject prefixes.

2009-01-06  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #458968 (bugzilla.novell.com)

	* gui/dialogs/comp-editor.c (comp_editor_set_summary),
	(comp_editor_set_changed): Don't warn the user about changes being lost
	if he is trying to delegate the meeting. 

2009-01-05  Ashish Shrivastava  <shashish@novell.com>

	** Fix for bug #458153 (bugzilla.novell.com)

	* gui/dialogs/comp-editor.c: Added a separator in the toolbar.
	* gui/dialogs/event-editor.c (action_all_day_event_cb): Toggle 'Show
	time as busy' in all_day_event callback. 

2008-01-04  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes bug #566566

	* gui/e-itip-control.c (insert_rsvp):
	Mark "RSVP" for translation.

2008-12-31  Matthew Barnes  <mbarnes@redhat.com>

	** Fix for bug #562091

	* gui/dialogs/memo-editor.c (memo_editor_constructed),
	(memo_editor_class_init), (memo_editor_init): Create MemoPage
	after the base class object has been created and initialized. 

2008-12-29  Bharath Acharya  <abharath@novell.com>

	** Fix for bug #446285 (bnc)

	* gui/e-select-names-editable.c:
	(e_select_names_editable_get_emails),
	(e_select_names_editable_get_names): Traverse all the entries in the 
	added list.

2008-12-29  Bharath Acharya  <abharath@novell.com>

	** Fix for bug #439998 (bnc)

	* gui/dialogs/comp-editor.c: (remove_event_dialog),
	(action_save_cb): Ask the user if he wants to remove the delegated 
	events or keep a copy.
	
2008-12-22  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #559604

	* gui/e-calendar-view.h: (e_calendar_view_get_attendees_status_info):
	* gui/e-calendar-view.c: (e_calendar_view_get_attendees_status_info),
	(e_calendar_view_get_tooltips):
	* gui/e-calendar-table.c: (query_tooltip_cb): Show additional status
	information for the meeting only when user is an organizer.

2008-12-17  Milan Crha  <mcrha@redhat.com>

	* gui/e-cal-model.c: (update_e_cal_view_for_client):
	Show reason of a failure on a console too.

2008-12-15  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #540181

	* gui/tasks-component.c: (destroy_component_view):
	Do not touch already freed object.

2008-12-15  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #564229

	* gui/dialogs/alarm-dialog.c: (populate_widgets_from_alarm):
	Cast to proper object.
	* gui/alarm-notify/alarm-queue.c: (free_tray_icon_data):
	Do not leak.

2008-12-15  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #563669

	* gui/dialogs/recurrence-page.c: (make_ending_count_special):
	* conduits/todo/todo-conduit.c: (e_todo_gui_new):
	Use zero GtkSpinButton's PageSize, as Gtk+ requires.

2008-12-15  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for BNC bug #435452

	* gui/e-meeting-list-view.c: (ense_update), (editing_started_cb),
	(build_table):

2008-12-09  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #333224

	* gui/e-day-view.c: (e_day_view_on_text_item_event): Sanitize returned
	values from 'e_day_view_convert_position_in_main_canvas', because it
	can let the 'event_num' or 'day' set to -1, which means invalid value.

2008-12-09  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #563669

	* gui/dialogs/recurrence-page.glade:
	* gui/dialogs/alarm-dialog.glade:
	* gui/dialogs/event-page.glade:
	* gui/dialogs/task-details-page.glade:
	* gui/dialogs/cal-prefs-dialog.glade:
	* gui/alarm-notify/alarm-notify.glade:
	* gui/goto-dialog.glade:
	Use zero GtkSpinButton's PageSize, as Gtk+ requires.

2008-12-08  Jeff Cai <jeff.cai@sun.com>

	** Fix for bug #563633

	* gui/e-cal-model.c: Add an unused member for _ECalModelComponentPrivate

2008-12-08  Jennifer Newman  <jennifer.newman@tufts.edu>

	** Fix for bug #555371

	* gui/dialogs/comp-editor.c: Added print menu option to task, memo and
	event editors. 

2008-12-08  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	** Fix for bug #350725

	* gui/e-calendar-view.c (e_calendar_view_class_init),
	(clipboard_clear_calendar_cb), (clipboard_get_calendar_cb),
	(e_calendar_view_copy_clipboard), (clipboard_get_calendar_data),
	(e_calendar_view_paste_text), (clipboard_paste_received_cb),
	(e_calendar_view_paste_clipboard):
	* gui/e-calendar-view.h:
	* gui/e-day-view.c (e_day_view_class_init),
	(e_day_view_add_new_event_in_selected_range),
	(e_day_view_do_key_press), (e_day_view_get_num_events_selected),
	(e_day_view_paste_text):
	* gui/e-week-view.c (e_week_view_class_init),
	(e_week_view_add_new_event_in_selected_range),
	(e_week_view_do_key_press), (e_week_view_is_jump_button_visible),
	(e_week_view_paste_text):

	Copy/Paste support in day/week views. 

2008-12-08  Paul Bolle  <pebolle@tiscali.nl>

	** Fix for bug #551599

	* gui/dialogs/alarm-dialog.c: (populate_widgets_from_alarm):
	Do not fallback to default 15 minutes alarm offset if alarm is
	triggered at start (or end) of appointment.

2008-12-05  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #332629

	* gui/caltypes.xml:
	* gui/memotypes.xml:
	* gui/tasktypes.xml:
	Use dynamically created list of categories in the option's widget.

2008-12-03  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #352287

	* gui/e-day-view-top-item.c: (e_day_view_top_item_draw_long_event):
	Draw top icons in full detail/color depth (for weather, for example).

2008-12-02  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #348299

	* gui/dialogs/event-page.c (get_widgets):
	* gui/dialogs/memo-page.c (get_widgets):
	* gui/dialogs/task-page.c (get_widgets):
	Use category completion in the Categories field.

	* gui/dialogs/event-editor.c:
	* gui/dialogs/memo-editor.c:
	* gui/dialogs/task-editor.c:
	Fix some reference count leaks.

2008-11-28  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #561467

	* gui/dialogs/comp-editor.c (real_send_comp): Don't replace 
	attachment list if backend can CREATE_MESSAGES
	* gui/itip-utils.c (itip_send_comp): Check whether backend 
	could handle sending requests/updates. 

2008-11-25  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #560138

	* gui/e-calendar-table.c: (query_tooltip_cb):
	Let wrap description text in a tooltip.

2008-11-19  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #556224

	* gui/gnome-cal.c: (struct _GnomeCalendarPrivate), (setup_widgets),
	(update_todo_view_async), (update_todo_view), (gnome_calendar_init),
	(gnome_calendar_destroy): Run always 'update_todo_view' in a separate
	thread and guard its body with a mutex.

	* gui/gnome-cal.c: (update_query_async): Do not leak.

2008-11-17  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #557818

	* gui/calendar-component.c:
	* gui/memos-component.c:
	* gui/tasks-component.c:
	ESourceSelector now handles most of the drag-and-drop signals.
	We just have to listen for the new "data-dropped" signal and
	deal with it.  Gets rid of a lot of duplicate logic.

2008-11-17  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #558322

	* gui/calendar-component.c (rename_calendar_cb):
	* gui/memos-component.c (rename_memo_list_cb):
	* gui/tasks-component.c (rename_task_list_cb):
	New "Rename" item in the source selector pop-up menu calls
	the recently added e_source_selector_edit_primary_selection().
	Still need to bind the "F2" key to this action, but I'm not
	sure how whether EPopup supports that.

2008-11-11  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #559604

	* gui/e-calendar-view.h: (e_calendar_view_get_attendees_status_info):
	* gui/e-calendar-view.c: (e_calendar_view_get_attendees_status_info),
	(e_calendar_view_get_tooltips):
	* gui/e-calendar-table.c: (query_tooltip_cb):
	Show attendees' status in the tooltip if available.

2008-11-11  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #490503

	* gui/e-day-view.c (set_text_as_bold),
	(e_day_view_update_event_label),
	(e_day_view_update_long_event_label):
	* gui/e-week-view.c (set_text_as_bold),
	(e_week_view_reshape_event_span):
	Summary of unaccepted meetings in calendar views now appear as bolded. 
	If the meeting was sent to a mailing-list - the summary will always 
	appear as normal. 

2008-11-10  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #443190 (bugzilla.novell.com)

	* gui/dialogs/comp-editor.c (fill_widgets), (real_edit_comp):
	Block signals from attachment-bar while still filling the widgets. 

2008-11-07  Bharath Acharya  <abharath@novell.com>

	** Fix for bug #440007 (bugzilla.novell.com)

	* gui/print.c: (print_comp_draw_real): Print the attendees only if
	its the first page.

2008-11-04  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #558354

	* gui/alarm-notify/alarm-notify.glade:
	* gui/alarm-notify/alarm-notify-dialog.h: (enum AlarmNotifyResult):
	* gui/alarm-notify/alarm-notify-dialog.c: (struct AlarmNotify),
	(dismiss_pressed_cb), (notified_alarms_dialog_new):
	* gui/alarm-notify/alarm-queue.c: (notify_dialog_cb):
	Changed "Close" button to "Dismiss All" and added a "Dismiss" button
	to the alarm notification dialog to be able to dismiss only some of
	the alarms shown in the dialog.

2008-11-04  Matthew Barnes  <mbarnes@redhat.com>

	* gui/calendar-commands.c:
	* gui/calendar-component.h:
	* gui/gnome-cal.c:
	Fix compiler warnings.

2008-11-02  Matthew Barnes  <mbarnes@redhat.com>

	* gui/e-itip-control.c (write_recurrence_piece):
	Remove extra space in translated string.

2008-10-31  Matthew Barnes  <mbarnes@redhat.com>

	* gui/itip-utils.c (itip_send_comp):
	Fix a crash when selecting "Forward as iCalendar".

2008-10-30  Matthew Barnes  <mbarnes@redhat.com>

	* gui/control-factory.c:
	* gui/e-calendar-table.c:
	* gui/e-week-view-event-item.c:
	* gui/weekday-picker.c:
	Only include the toplevel GTK+ header.

2008-10-20  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes bug #555958 (patch by Anis Elleuch)

	* gui/dialogs/comp-editor.c (comp_editor_init):
	Add the UI manager's accelerator group to the editor window
	so that menu shortcut keys work.

2008-10-20  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #553715

	* gui/e-week-view.c: (e_week_view_on_editing_stopped):
	Set end time for the event properly, not same as start time.

2008-10-20  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #528816

	* importers/icalendar-importer.c: (vcal_supported): We do not support
	vCalendar importer when we can parse the iCalendar from the file,
	because the latter holds more information, like timezones.

2008-10-17   Matt Davey  <mcdavey@mrao.cam.ac.uk>

	** Fix for bug #556059

	* conduits/common/Makefile.am:
	* conduits/common/libecalendar-common-conduit.c: Allow building outside
	the source tree.

2008-10-17  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #553609

	* gui/e-week-view.c: (e_week_view_set_selected_time_range):
	Do not do any changes when the view has not been shown yet.

2008-10-17  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #530872

	* gui/e-calendar-table.c: (e_calendar_table_on_open_task):
	Check for NULL soon enough to not crash.

2008-10-14  Sankar P  <psankar@novell.com>

License Changes

	* conduits/calendar/calendar-conduit.c:
	* conduits/memo/memo-conduit.c:
	* conduits/todo/todo-conduit.c:
	* gui/calendar-commands.c:
	* gui/calendar-commands.h:
	* gui/gnome-cal.c:
	* gui/gnome-cal.h:

2008-10-13  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #424818 (bugzilla.novell.com)

	* gui/dialogs/calendar-setup.c (eccp_general_offline): Don't show offline
	availability option for B&A calendars. 
	* gui/e-cal-popup.c (e_cal_popup_target_new_source): Check for the correct 
	property ("offline_sync" instead of "offline") while setting the GUI mask. 
	* gui/calendar-component.c (set_offline_availability),
	(mark_no_offline_cb), (mark_offline_cb):
	* gui/memos-component.c (set_offline_availability),
	(mark_no_offline_cb), (mark_offline_cb):
	* gui/tasks-component.c (set_offline_availability), 
	(mark_no_offline_cb), (mark_offline_cb):
	Integrate the mark-calendar-offline plugin into the main code as we already 
	have a similar per-calendar option which does the same thing. 

2008-10-09  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #555494

	* gui/cal-search-bar.c (generate_viewoption_menu):
	Category icons are not themed.  Load by file, not by icon name.

2008-10-08  Sankar P  <psankar@novell.com>

License Changes

	* gui/alarm-notify/alarm.c:
	* gui/dialogs/comp-editor.c:

2008-10-01  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #554418

	* gui/dialogs/comp-editor.c: (set_attachment_list):
	* gui/e-cal-popup.c: (ecalp_standard_menu_factory):
	Allow/disallow guessing of the mime_type based on the file content.

2008-10-01  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #554458

	* gui/e-cal-popup.c: (ecalp_standard_menu_factory):
	Use content-type to call of g_app_info_get_all_for_type.

2008-10-01  Sankar P  <psankar@novell.com>

License Changes

	* gui/dialogs/recurrence-page.c:
	* importers/icalendar-importer.c:

2008-09-30  Sankar P  <psankar@novell.com>

License Changes

	* gui/e-week-view.c:
	* gui/goto.c:

2008-09-29  Gabor Kelemen  <kelemeng@gnome.hu>

	* shell.error.xml: Unbreak build, sorry for the inconvenience.

2008-09-29  Gabor Kelemen  <kelemeng@gnome.hu>

	* calendar.error.xml: Mark some forgotten strings for translation. Fixes bug #553105

2008-09-26  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #553297

	* gui/e-day-view.c: (e_day_view_on_editing_stopped):
	Do not try to access uninitialized variables.

2008-09-25  Sankar P  <psankar@novell.com>

License Changes

	* gui/e-itip-control.c:
	* gui/e-itip-control.h:
	* gui/itip-utils.c:
	* gui/itip-utils.h:
	* gui/main.c:

2008-09-24  Sankar P  <psankar@novell.com>

License Changes

	* gui/alarm-notify/config-data.c:
	* gui/cal-search-bar.c:
	* gui/calendar-component.c:
	* gui/comp-util.c:
	* gui/comp-util.h:
	* gui/dialogs/cal-prefs-dialog.c:
	* gui/dialogs/e-send-options-utils.c:
	* gui/dialogs/event-page.c:
	* gui/dialogs/memo-page.c:
	* gui/dialogs/task-page.c:
	* gui/e-cal-component-memo-preview.c:
	* gui/e-cal-component-preview.c:
	* gui/e-day-view-main-item.c:
	* gui/e-day-view-top-item.c:
	* gui/e-week-view-event-item.c:
	* gui/e-week-view.h:
	* gui/memos-component.c:
	* gui/tasks-component.c:

2008-09-24  Sankar P  <psankar@novell.com>

License Changes

	* gui/dialogs/delete-comp.c:
	* gui/e-alarm-list.c:

2008-09-23  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #553273

	* gui/alarm-notify/alarm-queue.c: (edit_component):
	* gui/tasks-component.c: (delete_task_list_cb):
	* gui/calendar-component.c: (delete_calendar_cb):
	* gui/memos-component.c: (delete_memo_list_cb):
	Always end e_error_run/e_error_new calls with NULL parameter.

2008-09-19  Sankar P  <psankar@novell.com>

License Changes

	* gui/alarm-notify/alarm-queue.c:
	* gui/e-calendar-view.c:

2008-09-16  Sankar P  <psankar@novell.com>

License Changes

	* gui/alarm-notify/alarm.h:
	* gui/comp-editor-factory.c:
	* gui/dialogs/changed-comp.c:
	* gui/dialogs/copy-source-dialog.c:
	* gui/dialogs/delete-error.c:
	* gui/e-cal-model-tasks.c:
	* gui/e-cal-popup.c:
	* gui/e-calendar-table.c:
	* gui/e-memo-table.c:
	* gui/e-timezone-entry.c:
	* gui/print.c:
	* gui/tasks-control.c:

2008-09-14  Chenthill Palanisamy  <pchenthill@novell.com>

	** Fix for bug #551628

	* gui/e-cal-model.c: (e_cal_view_objects_modified_cb):
	* gui/e-day-view.c: (update_row), (model_comps_deleted_cb):
	* gui/e-week-view.c: (update_row): Remove old events from the 
	view when objects are modified. 

2008-09-12  Paul Bolle  <pebolle@tiscali.nl>

	** Fix for bug #551895

	* gui/dialogs/alarm-list-dialog.c: (edit_clicked_cb):
	Copy paste error.

2008-09-12  Sankar P  <psankar@novell.com>

License Changes

	* gui/alarm-notify/notify-main.c:
	* gui/calendar-config-keys.h:
	* gui/calendar-config.c:
	* gui/calendar-config.h:
	* gui/dialogs/cal-prefs-dialog.h:
	* gui/dialogs/recur-comp.c:
	* gui/e-meeting-store.c:
	* gui/e-meeting-store.h:
	* gui/e-meeting-time-sel.c:
	* gui/e-meeting-time-sel.h:
	* gui/migration.c:

2008-09-09  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #551382

	* gui/e-week-view.c: (model_comps_deleted_cb):
	* gui/e-cal-model.c: (redo_queries):
	Get rid of unused variables.
	* gui/e-cal-model.c: (e_cal_view_objects_modified_cb):
	Use result of g_list_prepend, thus report changes properly.

2008-11-03  Ashish Shrivastava  <shashish@novell.com>

	** Most of the errors are now non-intrusive

	* calendar.error.xml: Added a new error message for
	  non-intrusive backend_died.
	* apps_evolution_calendar.schemas.in:
	* calendar-commands.c: Added new verb for help debug message
	  (help_debug):
	* gnome-cal.c: Support for non-intrusive error.
	  (client_cal_opened_cb), Define fash table and accessing errors:
	* e-calendar-view.c: (error_response):
	  (e_calendar_utils_show_error_silent), (e_calendar_utils_show_info_silent):
	* e-calendar-view.h:
	* calendar-component.c: Added EActivityHandler and ELogger:
	(calendar_component_peek_activity_handler), (calendar_component_show_logger):
	* calendar-component.h:

2008-09-08  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #544187
	* calendar/gui/e-cal-model.c:
	* calendar/gui/e-cal-model.h:
	* calendar/gui/e-day-view.c:
	* calendar/gui/e-week-view.c: Added a new signal
	handler to update the views on comp deletion.

2008-09-06  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #549968

	* gui/dialogs/comp-editor.c (comp_editor_init):
	Use the same mnemonic for "Recent Documents" as composer.

2008-09-04  Sankar P  <psankar@novell.com>

License Changes

	* gui/alarm-notify/util.c:
	* gui/dialogs/calendar-setup.c:
	* gui/e-day-view-time-item.c:
	* gui/e-meeting-list-view.c:
	* gui/misc.c:

2008-09-02  Sankar P  <psankar@novell.com>

License Changes

	* conduits/common/libecalendar-common-conduit.c:
	* gui/alarm-notify/alarm-notify-dialog.c:
	* gui/alarm-notify/alarm-notify-dialog.h:
	* gui/alarm-notify/alarm-notify.c:
	* gui/calendar-component.h:
	* gui/calendar-view-factory.c:
	* gui/calendar-view.c:
	* gui/comp-editor-factory.h:
	* gui/control-factory.c:
	* gui/dialogs/alarm-dialog.c:
	* gui/dialogs/alarm-list-dialog.c:
	* gui/dialogs/cal-attachment-select-file.c:
	* gui/dialogs/cancel-comp.c:
	* gui/dialogs/changed-comp.h:
	* gui/dialogs/comp-editor-page.h:
	* gui/dialogs/comp-editor-util.c:
	* gui/dialogs/comp-editor-util.h:
	* gui/dialogs/comp-editor.h:
	* gui/dialogs/e-delegate-dialog.c:
	* gui/dialogs/e-send-options-utils.h:
	* gui/dialogs/event-editor.c:
	* gui/dialogs/event-editor.h:
	* gui/dialogs/event-page.h:
	* gui/dialogs/memo-editor.c:
	* gui/dialogs/recur-comp.h:
	* gui/dialogs/schedule-page.c:
	* gui/dialogs/schedule-page.h:
	* gui/dialogs/send-comp.c:
	* gui/dialogs/task-details-page.c:
	* gui/dialogs/task-editor.c:
	* gui/dialogs/task-editor.h:
	* gui/e-cal-component-memo-preview.h:
	* gui/e-cal-config.c:
	* gui/e-cal-event.c:
	* gui/e-cal-list-view-config.c:
	* gui/e-cal-list-view.c:
	* gui/e-cal-menu.c:
	* gui/e-cal-model-calendar.c:
	* gui/e-cal-model-memos.c:
	* gui/e-cal-model.c:
	* gui/e-calendar-table-config.c:
	* gui/e-calendar-table.h:
	* gui/e-calendar-view.h:
	* gui/e-cell-date-edit-config.c:
	* gui/e-cell-date-edit-text.c:
	* gui/e-cell-date-edit-text.h:
	* gui/e-comp-editor-registry.c:
	* gui/e-comp-editor-registry.h:
	* gui/e-date-edit-config.c:
	* gui/e-date-time-list.c:
	* gui/e-day-view-config.c:
	* gui/e-day-view-main-item.h:
	* gui/e-meeting-attendee.c:
	* gui/e-meeting-time-sel-item.c:
	* gui/e-memo-table-config.c:
	* gui/e-memo-table-config.h:
	* gui/e-memos.c:
	* gui/e-memos.h:
	* gui/e-mini-calendar-config.c:
	* gui/e-mini-calendar-config.h:
	* gui/e-select-names-editable.c:
	* gui/e-select-names-renderer.c:
	* gui/e-tasks.c:
	* gui/e-tasks.h:
	* gui/e-week-view-config.c:
	* gui/e-week-view-config.h:
	* gui/e-week-view-layout.c:
	* gui/e-week-view-main-item.c:
	* gui/e-week-view-titles-item.c:
	* gui/goto.h:
	* gui/itip-bonobo-control.c:
	* gui/memos-component.h:
	* gui/tasks-component.h:
	* gui/weekday-picker.c:
	* importers/main.c:

2008-08-28  Matthew Barnes  <mbarnes@redhat.com>

	** Related to bug #547822

	* gui/print.c (print_table_draw_page), (print_table):
	Use g_malloc() and g_free() instead of malloc() and free().
	Also fix an "assignment discards qualifiers" compiler warning.

2008-08-27  Sankar P  <psankar@novell.com>

License Changes

	* common/authentication.c:
	* common/authentication.h:
	* conduits/common/libecalendar-common-conduit.h:
	* gui/alarm-notify/alarm-notify.h:
	* gui/alarm-notify/alarm-queue.h:
	* gui/alarm-notify/config-data.h:
	* gui/alarm-notify/util.h:
	* gui/cal-search-bar.h:
	* gui/calendar-view-factory.h:
	* gui/calendar-view.h:
	* gui/control-factory.h:
	* gui/dialogs/alarm-dialog.h:
	* gui/dialogs/alarm-list-dialog.h:
	* gui/dialogs/cal-attachment-select-file.h:
	* gui/dialogs/calendar-setup.h:
	* gui/dialogs/cancel-comp.h:
	* gui/dialogs/comp-editor-page.c:
	* gui/dialogs/copy-source-dialog.h:
	* gui/dialogs/delete-comp.h:
	* gui/dialogs/delete-error.h:
	* gui/dialogs/e-delegate-dialog.h:
	* gui/dialogs/memo-editor.h:
	* gui/dialogs/memo-page.h:
	* gui/dialogs/recurrence-page.h:
	* gui/dialogs/save-comp.c:
	* gui/dialogs/save-comp.h:
	* gui/dialogs/select-source-dialog.c:
	* gui/dialogs/select-source-dialog.h:
	* gui/dialogs/send-comp.h:
	* gui/dialogs/task-details-page.h:
	* gui/dialogs/task-page.h:
	* gui/e-alarm-list.h:
	* gui/e-cal-component-preview.h:
	* gui/e-cal-config.h:
	* gui/e-cal-event.h:
	* gui/e-cal-list-view-config.h:
	* gui/e-cal-list-view.h:
	* gui/e-cal-menu.h:
	* gui/e-cal-model-calendar.h:
	* gui/e-cal-model-memos.h:
	* gui/e-cal-model-tasks.h:
	* gui/e-cal-model.h:
	* gui/e-cal-popup.h:
	* gui/e-calendar-table-config.h:
	* gui/e-cell-date-edit-config.h:
	* gui/e-date-edit-config.h:
	* gui/e-date-time-list.h:
	* gui/e-day-view-config.h:
	* gui/e-day-view-layout.c:
	* gui/e-day-view-layout.h:
	* gui/e-day-view-time-item.h:
	* gui/e-day-view-top-item.h:
	* gui/e-day-view.h:
	* gui/e-meeting-attendee.h:
	* gui/e-meeting-list-view.h:
	* gui/e-meeting-time-sel-item.h:
	* gui/e-meeting-types.h:
	* gui/e-meeting-utils.c:
	* gui/e-meeting-utils.h:
	* gui/e-memo-table.h:
	* gui/e-select-names-editable.h:
	* gui/e-select-names-renderer.h:
	* gui/e-timezone-entry.h:
	* gui/e-week-view-event-item.h:
	* gui/e-week-view-layout.h:
	* gui/e-week-view-main-item.h:
	* gui/e-week-view-titles-item.h:
	* gui/itip-bonobo-control.h:
	* gui/memos-control.c:
	* gui/memos-control.h:
	* gui/migration.h:
	* gui/misc.h:
	* gui/print.h:
	* gui/tag-calendar.c:
	* gui/tag-calendar.h:
	* gui/tasks-control.h:
	* gui/weekday-picker.h:
	* importers/evolution-calendar-importer.h:
	* zones.h:

2008-08-27  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #523327

	* gui/e-cal-component-preview.c: (write_html):
	* gui/e-cal-component-memo-preview.c: (write_html):
	Show description in monospace font and wrap lines too.

2008-08-22  Tobias Mueller  <tobiasmue@svn.gnome.org>

	* gui/print.c (print_table_draw_page):
	Make it show "Tasks" for printing tasks list and "Calendar" for
	printing a calendar. Patch by
	Rouslan Solomakhin <rouslan@solomakhin.net>
	
	** Fixes bug 547822

2008-08-18  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #462242

	* gui/gnome-cal.c: (default_client_cal_opened_cb):
	Do not unref NULL pointers.

2008-08-18  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #508732

	* gui/calendar-component.c (impl_createView):
	* gui/memos-component.c (impl_createView):
	* gui/tasks-component.c (impl_createView):
	Add a "select_item" argument for crash recovery, which these
	components do not use.

2008-08-04  Paul Bolle  <pebolle@tiscali.nl>

	* gui/gui/calendar-component.c: (set_info):
	Use "Calendars" as label for component, not "Calendar", for
	consistency.

2008-08-14  Sebastien Bacher  <seb128@ubuntu.com>

	** Fix for bug #547805

	* gui/e-cal-popup.c: (ecalp_standard_menu_factory):
	don't filter applications using g_app_info_should_show()

2008-08-14  Matthew Barnes  <mbarnes@redhat.com>

	* gui/dialogs/comp-editor.c:
	Use e_display_help() for displaying help.

2008-08-17  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/dialogs/event-page.c: (source_changed_cb):
	* gui/dialogs/memo-page.c: (source_changed_cb):
	* gui/e-cal-model.c: (e_cal_model_set_timezone),
	(e_cal_view_done_cb):
	* gui/e-day-view-config.c: Fixed some warnings.

2008-08-15  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #347287
	* gui/e-cal-list-view-config.c: (e_cal_list_view_config_set_view):
	* gui/e-cal-list-view.c: (e_cal_list_view_new):
	* gui/e-cal-list-view.h:
	* gui/e-cal-model.c: (e_cal_model_set_timezone), (add_instance_cb),
	(e_cal_view_objects_added_cb), (e_cal_view_done_cb),
	(update_e_cal_view_for_client), (cal_opened_cb), (add_new_client),
	(e_cal_model_component_class_init),
	(e_cal_model_component_finalize), (e_cal_model_component_init),
	(e_cal_model_component_get_type),
	(e_cal_model_copy_component_data),
	(e_cal_model_free_component_data):
	* gui/e-cal-model.h:
	* gui/e-calendar-view.c: (e_calendar_view_init),
	(e_calendar_view_set_model):
	* gui/e-calendar-view.h:
	* gui/e-day-view-config.c: (e_day_view_config_set_view):
	* gui/e-day-view.c: (time_range_changed_cb),
	(model_row_changed_cb), (model_cell_changed_cb),
	(model_rows_inserted_cb), (model_rows_deleted_cb),
	(timezone_changed_cb), (e_day_view_init), (init_model),
	(e_day_view_new), (e_day_view_set_mins_per_row),
	(e_day_view_add_event), (e_day_view_check_layout):
	* gui/e-day-view.h:
	* gui/e-week-view-config.c: (e_week_view_config_set_view):
	* gui/e-week-view.c: (time_range_changed_cb),
	(model_row_changed_cb), (model_cell_changed_cb),
	(model_rows_inserted_cb), (model_rows_deleted_cb),
	(timezone_changed_cb), (e_week_view_init), (init_model),
	(e_week_view_new), (e_week_view_add_event),
	(e_week_view_check_layout):
	* gui/e-week-view.h:
	* gui/gnome-cal.c: (message_proxy), (create_thread_pool),
	(message_push), (update_query_async), (update_query),
	(set_search_query), (set_timezone), (setup_widgets),
	(update_view_times), (display_view), (display_view_cb),
	(add_mclient_async), (add_mclient), (client_cal_opened_cb),
	(default_client_cal_opened_cb),
	(gnome_calendar_remove_source_by_uid),
	(gnome_calendar_on_date_navigator_selection_changed): Use a
	single model for all the views.			

2008-08-12  Matthew Barnes  <mbarnes@redhat.com>

	* gui/migration.c:
	Fix TeX-style quotes.  (#547372)

2008-08-12  Dmitrijs Ledkovs  <dmitrij.ledkov@gmail.com>

	** Fixes bug #498095

	* gui/dialogs/event-page.glade: "D_escription" -> "_Description"
	* gui/dialogs/task-page.glade: As above and "_Due Date" -> "D_ue Date"
	Change mnemonics to resolve clash with "_Edit".
	* gui/dialogs/memo-page.glade:
	Set proper mnemonic widget for description label.

2008-08-11  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #546892

	* gui/alarm-notify/alarm-notify-dialog.c:
	* gui/dialogs/alarm-dialog.c:
	* gui/dialogs/alarm-list-dialog.c:
	* gui/dialogs/cal-attachment-select-file.c:
	* gui/dialogs/changed-comp.c:
	* gui/dialogs/delete-error.c:
	* gui/dialogs/select-source-dialog.c:
	Prefer gtk_window_set_icon_name() over gtk_window_set_icon_list().

	* gui/dialogs/event-page.c:
	* gui/e-timezone-entry.c:
	Prefer gtk_image_new_from_icon_name() over e_icon_factory_get_image().

	* gui/alarm-notify/alarm-queue.c:
	Prefer gtk_status_icon_set_from_icon_name() over
	gtk_status_icon_set_from_pixbuf().

	* gui/e-calendar-table.c:
	* gui/e-calendar-view.c:
	* gui/e-memo-table.c:
	e_activity_handler_operation_started() no longer takes a GdkPixbuf.
	It was ignoring the pixbuf anyway ever since we added a spinner icon.

2008-08-08  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #544117

	* gui/itip-utils.c: (itip_send_comp): Initialize variables to NULL,
	to not free uninitialized memory in the cleanup part on the error.

2008-08-06  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #249844

	* gui/tasks-component.c: (impl__get_userCreatableItems):
	* gui/memos-component.c: (impl__get_userCreatableItems):
	Do not let compiler claim.
	* gui/calendar-component.c: (impl__get_userCreatableItems):
	Use C_() macro instead of Q_() macro.
	Use fully qualified names for "New" submenu entries.

2008-08-04  Paul Bolle  <pebolle@tiscali.nl>

	** Fix for bug #544157

	* gui/GNOME_Evolution_Calendar.server.in.in:
	Sort View / Window (sub)menu in shortcut order.

2008-08-04  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes bug #249844

	* gui/memos-component.c (impl__get_userCreatableItems):
	* gui/tasks-component.c (impl__get_userCreatableItems):
	Use C_() macro instead of Q_() macro. 
	Use fully qualified names for "New" submenu entries. 

2008-08-02  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #546057

	* gui/GNOME_Evolution_Calendar.server.in.in:
	* gui/calendar-component.c:
	* gui/e-calendar-view.c:
	* gui/dialogs/alarm-dialog.c:
	* gui/dialogs/alarm-list-dialog.c:
	* gui/dialogs/changed-comp.c:
	* gui/dialogs/comp-editor.c:
	* gui/dialogs/delete-error.c:
	* gui/dialogs/select-source-dialog.c:
	Use "x-office-calendar" icon name instead of "stock_calendar".

2008-08-01  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes bug #544857

	* gui/memotypes.xml: Fix a typo.

2008-08-01  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #353927

	* gui/alarm-notify/alarm-queue.c: (tray_icon_blink_cb),
	(display_notification): Do not blink the icon more than 15 seconds.

2008-07-30  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #211267

	* gui/print.c: (bound_text), (print_attendees), (print_day_event),
	(print_todo_details), (print_comp_draw_real), (print_comp_draw_page),
	(print_comp_begin_print), (print_comp): When printing only one event,
	then divide it to more pages if required, also word-wrap description
	text if necessary to fit the page.

2008-07-29  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #329821

	* gui/e-calendar-table.c: (query_tooltip_cb):
	Recalculate returned row to the model row, if we are sorting.

2008-07-20  Andre Klapper  <a9016009@gmx.de>

	* calendar.error.xml: Fix some strings. See bug #543753.

2008-07-18  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #542125

	** This set of changes migrates CompEditor, CompEditorPage and the
	   various subclasses from using BonoboUI to GtkUIManager for menus
	   and toolbars.  It also substantially cleans up the code and
	   streamlines the CompEditorPage API, making more effective use
	   of GObject properties.

	Core changes:
	* gui/dialogs/comp-editor-page.c:
	* gui/dialogs/comp-editor-page.h:
	* gui/dialogs/comp-editor.c:
	* gui/dialogs/comp-editor.h:
	* gui/dialogs/event-editor.c:
	* gui/dialogs/event-editor.h:
	* gui/dialogs/event-page.c:
	* gui/dialogs/event-page.h:
	* gui/dialogs/memo-editor.c:
	* gui/dialogs/memo-editor.h:
	* gui/dialogs/memo-page.c:
	* gui/dialogs/memo-page.h:
	* gui/dialogs/recurrence-page.c:
	* gui/dialogs/recurrence-page.h:
	* gui/dialogs/schedule-page.c:
	* gui/dialogs/schedule-page.h:
	* gui/dialogs/task-details-page.c:
	* gui/dialogs/task-details-page.h:
	* gui/dialogs/task-editor.c:
	* gui/dialogs/task-editor.h:
	* gui/dialogs/task-page.c:
	* gui/dialogs/task-page.h:

	Supporting changes:
	* gui/calendar-component.c:
	* gui/comp-editor-factory.c:
	* gui/e-cal-popup.c:
	* gui/e-calendar-table.c:
	* gui/e-calendar-view.c:
	* gui/e-comp-editor-registry.c:
	* gui/e-memo-table.c:
	* gui/e-tasks.c:
	* gui/gnome-cal.c:
	* gui/memos-component.c:
	* gui/tasks-component.c:
	* gui/dialogs/alarm-dialog.c:
	* gui/dialogs/comp-editor-util.c:

2008-07-15  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #329821

	* gui/e-calendar-table.c: (get_time_as_text), (query_tooltip_cb),
	(e_calendar_table_init): Show tooltips over task's table.

2008-17-14  Paolo Borelli  <pborelli@katamail.com>

	** Fix for bug #542889

	* gui/dialogs/event-page.c:
	* gui/alarm-notify/alarm-queue.c:
	Port to the new gtk tooltip api.

2008-07-13  Paul Bolle  <pebolle@tiscali.nl>

	** Fix for bug #542101

	* gui/e-calendar-view.c: (e_calendar_view_get_tooltips):
	Escape PlaceOfTheMeeting in the Location: line of the tooltip.

2008-07-13  Keith Packard  <keithp@keithp.com>

	** Fix for bug #541355

	* conduits/calendar/calendar-conduit.c:
	* conduits/memo/memo-conduit.c:
	* conduits/todo/todo-conduit.c:
	The pilot link code does call free_match on data returned from the 
	for_each method, which the evolution conduits aren't prepared to 
	handle. This patch removes any freed objects from the 'locals' list in 
	each conduit which otherwise frees them again when the conduit is closed.

2008-07-09  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #524130

	* gui/e-cal-component-preview.c: (write_html):
	* gui/e-cal-component-memo-preview.c: (write_html): Pass description
	text through 'camel_text_to_html' to have links clickable in a preview.

2008-07-04  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #368038

	* gui/calendar-component.c: (ensure_sources):
	Ensure only one Birthdays & Anniversaries source.

2008-07-03  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #540152

	* gui/calendar-component.c: (ensure_sources):
	Unref sources only when we created it - the list owns the pointer now.
	* gui/tasks-component.c: (ensure_sources):
	* gui/memos-component.c: (ensure_sources): Do not leak ESource.

2008-06-16  Maciej Piechotka <uzytkownik2@gmail.com>

	* gui/caltypes.xml:
	* gui/memotypes.xml:
	* gui/tasktypes.xml:
	Usage _title instead of title to allow translations.

2008-06-10  Matthew Barnes  <mbarnes@redhat.com>

	* common/authentication.c:
	* gui/calendar-component.c:
	* gui/comp-editor-factory.c:
	* gui/dialogs/copy-source-dialog.c:
	* gui/dialogs/select-source-dialog.c:
	* gui/memos-component.c:
	* gui/migration.c:
	* gui/tasks-component.c:
	Use <glib/gi18n.h> instead of <bonobo/bonobo-i18n.h>.

2008-06-09  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #536813

	* gui/comp-util.h: (is_icalcomp_on_the_server):
	* gui/comp-util.c: (is_icalcomp_on_the_server): Similar helper function
	as cal_comp_is_on_server only the parameter is icalcomponent.
	* gui/e-week-view-event-item.c: (e_week_view_event_item_double_click):
	* gui/e-week-view.c: (e_week_view_on_text_item_event):
	Do not start to edit the event on the double click if the event is not
	on the server yet. Storing the event can cause the renumbering events
	so the result can be that the edited event would be different.

2008-06-04  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes security vulnerabilities
	   CVE-2008-1108 and CVE-2008-1109

	* gui/itip-utils.c (html_new_lines_for):
	Do not use a fixed-size buffer for parsing external data.
	Simplify the logic to just split and rejoin the string with a
	different line separator.

	* gui/e-itip-control.c (write_label_piece), (write_recurrence_piece),
	(set_date_label):
	Use a GString rather than a fixed-size buffer to build the HTML
	string to avoid the possibility of an overflow.

2008-06-04  Shuai Liu <shuai.liu@sun.com>

	** Fix for bug #535204

	* gui/tasks-component.c: (destroy_component_view):
	The tasks objects had been destroyed before the call of destroy_
        component in tasks-component.c. No need to call them.

2008-05-29  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #535459

	* gui/itip-utils.h: (is_icalcomp_valid):
	* gui/itip-utils.c: (is_icalcomp_valid), (check_time):
	New function to make some sanity checks on component properties.
	* gui/e-itip-control.c: (e_itip_control_set_data):
	Do not use component when sanity check fails.

2008-05-23  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #534476

	* gui/e-cal-popup.c (ecalp_standard_menu_factory):
	Remove the special check for "winmail.dat".  GIO correctly
	identifies it as "application/ms-tnef".

2008-05-23  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #523402

	* gui/e-calendar-view.c: (e_calendar_view_add_event): Do not leak.
	* conduits/calendar/calendar-conduit.c: (process_multi_day):
	Reassign back the old values before freeing.

2008-05-22  Matthew Barnes  <mbarnes@redhat.com>

	* gui/e-select-names-renderer.c
	(e_select_names_renderer_focus_out_event):
	Remove this unused function.

2008-05-22  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #534360

	* conduits/calendar/calendar-conduit.c:
	* conduits/memo/memo-conduit.c:
	* conduits/todo/todo-conduit.c:
	* gui/cal-search-bar.c:
	* gui/cal-search-bar.h:
	* gui/calendar-commands.c:
	* gui/calendar-view-factory.h:
	* gui/calendar-view.h:
	* gui/comp-editor-factory.h:
	* gui/dialogs/comp-editor-page.c:
	* gui/dialogs/comp-editor-page.h:
	* gui/dialogs/comp-editor.h:
	* gui/dialogs/e-delegate-dialog.h:
	* gui/dialogs/event-editor.h:
	* gui/dialogs/event-page.h:
	* gui/dialogs/memo-editor.h:
	* gui/dialogs/memo-page.h:
	* gui/dialogs/recurrence-page.c:
	* gui/dialogs/recurrence-page.h:
	* gui/dialogs/schedule-page.h:
	* gui/dialogs/task-details-page.h:
	* gui/dialogs/task-editor.h:
	* gui/dialogs/task-page.h:
	* gui/e-alarm-list.c:
	* gui/e-alarm-list.h:
	* gui/e-cal-component-memo-preview.h:
	* gui/e-cal-component-preview.h:
	* gui/e-cal-list-view-config.h:
	* gui/e-cal-list-view.h:
	* gui/e-calendar-table-config.h:
	* gui/e-calendar-table.h:
	* gui/e-cell-date-edit-config.h:
	* gui/e-cell-date-edit-text.h:
	* gui/e-date-edit-config.h:
	* gui/e-date-time-list.c:
	* gui/e-date-time-list.h:
	* gui/e-day-view-config.h:
	* gui/e-day-view-main-item.c:
	* gui/e-day-view-main-item.h:
	* gui/e-day-view-time-item.c:
	* gui/e-day-view-time-item.h:
	* gui/e-day-view-top-item.c:
	* gui/e-day-view-top-item.h:
	* gui/e-day-view.c:
	* gui/e-day-view.h:
	* gui/e-itip-control.h:
	* gui/e-meeting-time-sel-item.c:
	* gui/e-meeting-time-sel-item.h:
	* gui/e-meeting-time-sel.c:
	* gui/e-meeting-time-sel.h:
	* gui/e-memo-table-config.h:
	* gui/e-memo-table.h:
	* gui/e-memos.c:
	* gui/e-memos.h:
	* gui/e-mini-calendar-config.h:
	* gui/e-tasks.c:
	* gui/e-tasks.h:
	* gui/e-timezone-entry.c:
	* gui/e-timezone-entry.h:
	* gui/e-week-view-config.h:
	* gui/e-week-view-event-item.c:
	* gui/e-week-view-event-item.h:
	* gui/e-week-view-main-item.c:
	* gui/e-week-view-main-item.h:
	* gui/e-week-view-titles-item.c:
	* gui/e-week-view-titles-item.h:
	* gui/e-week-view.c:
	* gui/e-week-view.h:
	* gui/gnome-cal.c:
	* gui/gnome-cal.h:
	* gui/weekday-picker.c:
	* gui/weekday-picker.h:
	Migrate from deprecated GtkObject symbols to GObject equivalents.

2008-05-22  Chenthill Palanisamy  <pchenthill@novell.com>

	** Fix for bug #533820

	* gui/e-day-view.c: (e_day_view_update_resize),
	(e_day_view_finish_resize): Fix for a crash on double-clicking the
	border of meetings in day-view. 

2008-05-08  Tor Lillqvist  <tml@novell.com>

	* gui/alarm-notify/alarm-notify-dialog.c: Include e-util-private.h
	for the mapping of EVOLUTION_GLADEDIR to a function call on
	Windows. Construct the glade file pathname at run-time so that it
	is found also on Windows where we don't use compile-time pathnames
	at run-time.

2008-05-05  Johan Euphrosine  <proppy@aminche.com>

	* gui/migration.c: Fix include path for e-dbhash.h, now in libebackend.

2008-04-30  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #316390

	* calendar/gui/e-memos.c: (struct _EMemosPrivate), (categories_changed_cb),
	(setup_widgets), (e_memos_init), (e_memos_destroy):
	* calendar/gui/gnome-cal.c: (struct _GnomeCalendarPrivate), (setup_widgets),
	(categories_changed_cb), (gnome_calendar_init),
	(gnome_calendar_destroy):
	* calendar/gui/e-tasks.c: (struct _ETasksPrivate), (categories_changed_cb),
	(setup_widgets), (e_tasks_init), (e_tasks_destroy):
	Listen for changes in categories setup and propagate them to UI.

2008-04-30  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bnc #363908
	Evolution crashed during exit

	* gui/tasks-component.c: (destroy_component_view):

2008-04-30  Ashish Shrivastava <shashish@novell.com>

	** Fix for bnc #368277
	Can't C & P Email Addresses from an Appt. to a Mail Message

	* gui/e-select-names-renderer.c:
	(e_select_names_renderer_start_editing):

2008-04-29  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #240823

	* gui/itip-utils.c: (comp_to_list):
	Send notification only to individuals and groups.

2008-04-28  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #524121

	* gui/e-calendar-table.c: (copy_row_cb):
	Fixing typo from patch for bug #516408.

2008-04-25  Danny Baumann  <dannybaumann@web.de>

	** Fix for bug #529893

	* gui/e-calendar-view.c: (e_calendar_view_get_tooltips):
	Properly set type hint on tooltip window.

2008-04-18  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #509923

	* gui/dialogs/comp-editor.c: (real_send_comp):
	* gui/e-calendar-view.c: (e_calendar_view_modify_and_send):
	* gui/e-cal-model-calendar.c: (ecmc_set_value_at):
	Send changes based on the user's choice of "all instances" or
	"only this instance" for recurring events.
	* gui/e-cal-model-calendar.c: (ecmc_set_value_at):
	Also modify objects based on the user's choice.

2008-04-17  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #526739

	* gui/e-meeting-store.c: (start_async_read), (freebusy_async),
	(async_read): Read data with gio, not with gnome-vfs.
	* gui/e-meeting-store.c: (async_close): Function removed.
	* gui/migration.c:
	* gui/e-memos.c:
	* gui/alarm-notify/notify-main.c:
	* gui/e-tasks.c:
	* gui/main.c:
	* gui/e-meeting-list-view.c:
	Do not include gnome-vfs.
	* gui/dialogs/comp-editor.c: (set_attachment_list):
	* gui/dialogs/comp-editor.c: (attachment_guess_mime_type):
	Function removed, use e-util function instead.
	* gui/e-cal-popup.c: (temp_save_part):
	Reflect changes in CamelStreamVFS.
	* gui/e-cal-popup.c: (ecalp_apps_open_in), (ecalp_apps_popup_free),
	(ecalp_standard_menu_factory): Use gio to fill popup and launch app.
	* gui/e-cal-component-preview.h: (e_cal_comp_preview_url_requested_cb):
	* gui/e-cal-component-preview.c: (e_cal_comp_preview_url_requested_cb):
	New helper function to manage file:// urls for GtkHTML component.
	* gui/e-cal-component-preview.c: (e_cal_component_preview_init):
	* gui/e-cal-component-memo-preview.c:
	(e_cal_comp_preview_url_requested_cb):
	Use above helper function.
	* gui/e-cal-component-memo-preview.c: (url_requested_cb):
	* gui/e-cal-component-preview.c: (url_requested_cb): Function removed.

2008-04-17  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #523402

	* gui/e-calendar-view.c: (e_calendar_view_add_event):
	Do not free value returned by icaltimezone_get_tzid.

2008-04-16  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #232594

	* gui/e-meeting-list-view.c: (attendee_edited_cb):
	Set status to Needs Action when attendee's address have been changed.

2008-04-11  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #517134

	* gui/dialogs/comp-editor.c: (add_to_bar),
	(menu_insert_attachment_cb), (menu_insert_attach_recent_docs_cb),
	(comp_editor_init): Code re-factoring. Extend the 'Insert' menu to
	show a "Recent Documents" submenu (to quickly add them as
	attachments). New callback to handle these actions. 

2008-04-07  Ondrej Jirman  <megous@megous.com>

	** Fix for bug #525234

	* gui/Makefile.am:
	* gui/dialogs/Makefile.am: Install more include files that are useful
	to the out of tree evolution plugins.

2008-04-02  Matthew Barnes  <mbarnes@redhat.com>

	* gui/Makefile.am:
	Remove CORBA rules for the old composer.

	* gui/itip-utils.c (comp_from), (comp_to_list), (comp_subject),
	(comp_content_type), (comp_filename), (comp_description),
	(append_cal_attachments), (itip_send_comp), (reply_to_calendar_comp):
	Adapt to new Bonobo-less composer widget.

2008-03-31  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #346555

	* gui/dialogs/calendar-setup.c: (eccp_get_source_color): 
	Fixed a mnemonic conflict. 

2008-03-27  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #517492

	* gui/dialogs/calendar-setup.c: (calendar_setup_edit_calendar),
	(calendar_setup_edit_task_list), (calendar_setup_edit_memo_list):
	Set proper dialog caption with New or Properties.

2008-03-27  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #438613

	* calendar.error.xml: New message "prompt-read-only-cal-editor".
	* gui/dialogs/comp-editor.c: (prompt_and_save_changes),
	(menu_file_save_cb): Use different read-only message when checking
	from contact editor and from calendar UI.

2008-03-13  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #512543

	* gui/e-day-view.c:
	* gui/e-week-view-event-item.c:
	* gui/e-calendar-view.c:
	* gui/e-calendar-view.h:
	* gui/e-week-view-main-item.c:
	* gui/e-day-view-time-item.c:
	* gui/e-day-view-top-item.c:
	* gui/e-day-view-main-item.c:
	Get rid of ENABLE_CAIRO define.

2008-03-11  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #513951

	* gui/cal-search-bar.c (cal_search_bar_construct):
	* gui/migration.c (create_calendar_sources), (create_task_sources),
	(migrate_calendars), (migrate_tasks), (create_memo_sources):
	* gui/e-memos.c (e_memos_setup_view_menus):
	* gui/tasks-component.c (ensure_sources):
	* gui/gnome-cal.c (gnome_calendar_setup_view_menus):
	* gui/calendar-component.c (ensure_sources):
	* gui/memos-component.c (ensure_sources):
	Adapt to new meaning of xxx_component_peek_base_directory().

	* gui/tasks-component.c (tasks_component_init):
	* gui/calendar-component.c (calendar_component_init):
	* gui/memos-component.c (memos_component_init):
	Use e_get_user_data_dir() instead of constructing the full path.

	* gui/migration.c (add_gw_esource):
	Emit warnings when saving to GConf fails.

2008-02-25  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #516498
	* gui/comp-util.c: (cal_comp_is_on_server):
	* gui/e-calendar-view.c: (e_calendar_view_cut_clipboard),
	(delete_event), (e_calendar_view_delete_selected_occurrence):
	* gui/e-day-view.c: (process_component):
	* gui/e-week-view.c: (process_component): Free memory returned 
	by e_cal_component_get_recurid_as_string.						  	

2008-02-24  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes#516408
	* gui/dialogs/e-send-options-utils.c
	(e_sendoptions_utils_fill_component):
	* gui/e-cal-model.c (search_by_id_and_client):
	* gui/e-calendar-table.c (copy_row_cb),
	(e_calendar_table_copy_clipboard):
	* gui/e-calendar-view.c (e_calendar_view_copy_clipboard),
	(icalcomp_contains_category):
	* gui/e-day-view.c (model_rows_deleted_cb),
	(e_day_view_find_event_from_uid), (e_day_view_reshape_day_events),
	(e_day_view_on_drag_data_get):
	* gui/e-itip-control.c (update_item):
	* gui/e-memo-table.c (copy_row_cb), (e_memo_table_copy_clipboard):
	* gui/e-memos.c (obtain_list_of_components):
	* gui/e-tasks.c (obtain_list_of_components):
	* gui/e-week-view.c (model_rows_deleted_cb),
	(e_week_view_reshape_events), (e_week_view_find_event_from_uid):
	* gui/gnome-cal.c (gnome_calendar_purge):
	* gui/itip-utils.c (comp_limit_attendees), (itip_send_comp),
	(reply_to_calendar_comp), (itip_publish_comp): Free the memory
	returned by libical

2008-02-20  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #440426

	* gui/e-cal-model.c: (e_cal_model_dispose), (remove_client):
	Unset also default_client if removing it.

2008-02-20  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #515744

	* gui/dialogs/comp-editor.c: (drop_action):
	Fixing previous fix - do not double free.

2008-02-18  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #515744

	* gui/dialogs/comp-editor.c: (drop_action):
	* gui/calendar-config.c:
	(calendar_config_get_hide_completed_tasks_sexp):
	* gui/comp-editor-factory.c: (edit_existing):
	* gui/e-day-view.c: (e_day_view_reshape_long_event),
	(e_day_view_on_top_canvas_drag_data_received):
	* gui/e-day-view-main-item.c:
	(e_day_view_main_item_draw_events_in_vbars),
	(e_day_view_main_item_draw_long_events_in_vbars):
	* gui/e-day-view-top-item.c: (e_day_view_top_item_draw_long_event):
	* gui/e-cal-model.c: (redo_queries):
	* gui/e-calendar-table.c: (e_calendar_table_open_task):
	* gui/e-memo-table.c: (open_memo):
	* gui/print.c: (print_todo_details):
	* gui/migration.c: (get_source_name):
	Memory leak fix.
	* gui/e-week-view.c: (e_week_view_reshape_events): Simplifies things.

2008-02-18  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bnc #178778 

	* gui/dialogs/recurrence-page.c: (preview_recur):

2008-02-18  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bnc #160049. Patch from OpenSUSE.

	* common/authentication.c: (build_pass_key),
	(auth_cal_forget_password):
	* common/authentication.h:
	* gui/e-tasks.c: (client_cal_opened_cb),
	(default_client_cal_opened_cb):
	* gui/gnome-cal.c: (client_cal_opened_cb):

2008-02-18  Srinivasa Ragavan  <sragavan@novell.com>

	** Downstream patches from OpenSUSE

	* conduits/calendar/calendar-conduit.c:
	(local_record_to_pilot_record):
	* conduits/memo/memo-conduit.c: (local_record_to_pilot_record):
	* conduits/todo/todo-conduit.c: (local_record_to_pilot_record):

2008-02-14  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #516453

	* gui/e-cal-model-tasks.c: (set_status):
	Change Not Started status back to Canceled when Canceled requested.

2008-02-14  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #514987

	* gui/e-calendar-table.etspec:
	* gui/e-calendar-table.c: (status_from_string), (status_compare_cb),
	(e_calendar_table_init):
	New sorting by Status based on the index in popup, not on the text.

2008-02-11  Srinivasa Ragavan  <sragavan@novell.com>

	* gui/alarm-notify/alarm-notify.c: (alarm_notify_add_calendar): Google
	Calendar alarm works now.

2008-02-10  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #510642

	* gui/dialogs/comp-editor.c: (prompt_and_save_changes),
	(menu_file_save_cb):
	* gui/e-calendar-view.c: (e_calendar_view_new_appointment_for):
	* calendar.error.xml: Improved string for read-only-calendar 
	error-message. 

2008-02-08  Milan Crha  <mcrha@redhat.com>

	** Part of fixes for bug #395939

	* gui/alarm-notify/alarm-queue.c: (update_cqa):
	* conduits/calendar/calendar-conduit.c: (local_record_from_comp):
	Free alarm properly.

2008-01-28  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #240073

	* gui/e-cal-model-tasks.h: (enum ECalModelTasksField):
	Move strikeout field to known fields, otherwise the "Click to add" row
	will have text strikeouted.

2008-01-28  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/print.c: (print_week_summary): Free the component
	data.

2008-01-28  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #355864

	* gui/e-week-view.c: (e_week_view_remove_event_cb):
	Update span->background_item->event_num properly because of remove
	of the item with lower event_num.

2008-01-25  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #240073

	* gui/e-cal-model-tasks.h:
	* gui/e-cal-model-tasks.c: (is_status_canceled), (ecmt_value_at):
	Define new virtual readonly column to calculate strikeout state.
	* gui/e-calendar-table.c: (e_calendar_table_init):
	Use new virtual column as strikeout column.

2008-01-25  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #475781

	* gui/dialogs/recurrence-page.c: (fill_ending_date),
	(recurrence_page_fill_widgets):
	* gui/dialogs/memo-page.c: (memo_page_fill_widgets):
	* gui/e-day-view.c: 2*(e_day_view_finish_long_event_resize),
	2*(e_day_view_on_editing_stopped):
	* gui/itip-utils.c: (comp_compliant), (reply_to_calendar_comp):
	* gui/e-week-view.c: (e_week_view_on_editing_stopped):
	* gui/e-calendar-view.c: (e_calendar_view_add_event),
	(e_calendar_view_get_tooltips):
	* gui/e-cal-component-preview.c: (write_html):
	* gui/e-cal-component-memo-preview.c: (write_html):
	* gui/e-cal-model.c: (add_instance_cb):
	Fix memory leaks around ECalComponentDateTime.

2008-01-25  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #510409

	* gui/e-memos.c: (obtain_list_of_components):
	* gui/e-tasks.c: (obtain_list_of_components):
	* gui/e-calendar-table.c: (e_calendar_table_copy_clipboard):
	* gui/e-memo-table.c: (e_memo_table_copy_clipboard):
	Do not free memmory owned by libical.
	* gui/e-week-view.c: (e_week_view_reshape_events):
	Free memory before assigning NULL.

2008-01-25  Tor Lillqvist  <tml@novell.com>

	* gui/Makefile.am (libevolution_calendar_la_LIBADD): Link with
	libefilterbar.

2008-01-24  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #402487

	* gui/cal-search-bar.c: (notify_e_cal_view_contains):
	Memory leak fix.

2008-01-22  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #337046

	* gui/dialogs/comp-editor.c: (get_attachment_list): Have a ticking
	filename for attachment, if the mime doesn't carry it.

2008-01-17  Dan Winship  <danw@gnome.org>

	* gui/itip-utils.c (itip_publish_comp): Port to libsoup 2.4. Plug
	a leak.

2008-01-17  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #509879

	* gui/e-memos.c: (struct _EMemosPrivate), (update_view_cb),
	(setup_widgets), (e_memos_destroy):
	Drop code to clear memo preview every 60 seconds.

2008-01-17  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #426159

	* gui/alarm-notify/alarm-notify-dialog.c: (snooze_pressed_cb):
	* gui/alarm-notify/alarm-notify.glade: Allow users to snooze for 
	1+ hour 0 minutes. 

2008-01-15  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #333695

	* gui/print.c: (print_attendees): Print attendee name instead of email
	address if available.

2008-01-14  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #333695

	* gui/print.c: (get_type_as_string), (get_role_as_string),
	(print_attendees), (print_comp_draw_page):
	Helper functions to print attendees and their types and roles
	in detailed print of the event.

2008-01-14  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #507359

	* gui/e-meeting-time-sel.h: (struct _EMeetingTimeSelector):
	* gui/e-meeting-time-sel.c: (e_meeting_time_selector_class_init),
	(e_meeting_time_selector_destroy), (style_change_idle_func),
	(e_meeting_time_selector_style_set): Recalculate sizes in idle queue,
	which will ensure the style is propagated in list_view too, because we
	read from there the height of the row and the style isn't set there
	before it is set in our widget.

2008-01-14  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #490464

	* gui/dialogs/memo-page.c: (get_recipients): New helper function to
	obtain recipients from the component.
	* gui/dialogs/memo-page.c: (memo_page_fill_widgets),
	(memo_page_fill_component), (memo_page_construct):
	Always show recipient's widgets for shared memo, but keep it readonly
	when editing old event. Also make sure the organizer is set by
	the value in the component, not by the default account.

2008-01-14  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #339620

	* gui/dialogs/recurrence-page.c: (recurrence_page_finalize): Disconnect
	signal handlers on destroy.

2008-01-14  Suresh Chandrasekharan  <suresh.chandrasekharan@sun.com>

	** Fix for bug #264404

	* gui/e-day-view.c (e_day_view_on_text_item_event):
	* gui/e-week-view.c (e_week_view_on_text_item_event):
	Pass down Enter if in preedit-mode.

2008-01-11  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #508731

	* gui/e-calendar-view.c: (e_calendar_view_new_appointment_full):
	Have a safe default, if the values from gconf isn't so nice.

2008-01-10  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #457842

	* gui/e-week-view-event-item.c: (e_week_view_event_item_double_click):
	* gui/e-week-view.c: (e_week_view_start_editing_event):
	Do not call edit/start editing of the event when double clicked
	on the same component as is actually editing.

	* gui/calendar-commands.c: (gcal_calendar_selection_changed_cb):
	Removed forgotten printf call.

2008-01-06  Michael Monreal  <michael.monreal@gmx.net>

	** Fix for bug #492188

	* gui/dialogs/comp-editor.c:

	Use the new Tangoized icons instead of deprecated icons from 
	gnome-icon-theme.

2008-01-03  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #270605

	* gui/dialogs/event-page.c: (event_page_init),
	(event_page_select_organizer), (event_page_construct): Code cleanup
	* gui/dialogs/memo-page.c: (memo_page_init), (source_changed_cb),
	(memo_page_select_organizer), (memo_page_construct): Skip disabled 
	accounts.
	* gui/dialogs/task-page.c: (task_page_init),
	(task_page_fill_widgets), (task_page_select_organizer),
	(task_page_construct): Code cleanup, show organizer of assigned tasks,
	if it already exists.

2008-01-03  Srinivasa Ragavan  <sragavan@novell.com>

	* gui/memos-component.c: (create_new_memo): Refix the last patch

2008-01-03  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #506814

	* gui/tasks-component.c: (create_new_todo):
	* gui/tasks-component.c: (create_new_todo): Add the signal only if the
	view is present.

2007-12-20  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #362638

	* gui/alarm-notify/alarm-notify.c:
	* gui/alarm-notify/alarm-notify.h:
	* gui/alarm-notify/alarm-queue.c:
	Rewrite message passing to use GThreadPool instead of EThread.

2007-12-13  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #340267

	* gui/e-cal-component-preview.c: (write_html):
	* gui/e-cal-component-memo-preview.c: (write_html):
	Show description in preview as preformatted text, so
	tabulators are kept instead of treated as white spaces.

2007-12-11  Sankar P  <psankar@novell.com>

	** Fix for bug #501969

	* gui/gnome-cal.c: (client_cal_opened_cb):
	Passwords should not be forgotten on all errors

2007-12-05  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #392747 (extra cleanup work)

	* gui/e-day-view.c (e_day_view_style_set):
	* gui/e-week-view-titles-item.c (e_week_view_titles_item_draw):
	* gui/e-week-view.c (e_week_view_style_set):
	* gui/print.c (print_month_summary):
	* gui/e-meeting-time-sel.c (e_meeting_time_selector_recalc_date_form):
	Call e_get_month_name() or e_get_weekday_name() instead of
	e_utf8_strftime() or g_date_strftime().

2007-12-05  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #501474

	* gui/gnome-cal.c: (update_memo_view):
	Fix wrong expression from bug #359267

2007-12-04  David Turner  <cillian64@googlemail.com>

	** Fix for bug #354265

	* gui/e-calender-table.c:
	* gui/e-memo-table.c:
	* gui/e-calender-view.c:
	Fixed mnemonic clash between print and paste mnemonics

2007-12-04  Wang Xin  <jedy.wang@sun.com>

	Fixes #501182.

	* gui/gnome-cal.c: (update_todo_view): Handle NULL pointer.

2007-12-03  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #440497

	* gui/e-meeting-list-view.h: (e_meeting_list_view_column_set_visible):
	Prototype changed to refer to column based on enum identifier.
	* gui/e-meeting-list-view.c: (build_table): Store column enum
	identifier in column datas, for later use.
	* gui/e-meeting-list-view.c: (e_meeting_list_view_column_set_visible):
	* gui/dialogs/task-page.c:
	* gui/dialogs/event-page.c:
	* gui/e-meeting-time-sel.c:
	Refer for column based on the enum, not on the column title.

2007-12-03  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #392747

	* gui/weekday-picker.c (get_day_text):
	Convert the day_index to GDateWeekday and call e_get_weekday_name().

2007-11-30  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #325730

	* gui/e-calendar-table.c: (hide_completed_rows):
	* gui/e-cal-model.c: (e_cal_view_objects_added_cb),
	(e_cal_view_objects_removed_cb), (remove_client_objects):
	Reverting part of previous patch (2007-11-23) and added
	notifications about model_changed after done with deleting.

2007-11-27  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #500024

	* gui/print.c: (print_comp): Set number of pages first.

2007-11-27  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #214645

	* gui/e-week-view.c: (e_week_view_get_day_position),
	(e_week_view_convert_position_to_day):
	* gui/e-week-view-layout.c: (e_week_view_layout_event),
	(e_week_view_layout_get_span_position):
	Collapses non-working days to occupy one row and expand other days
	if possible.

2007-11-26  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #346693

	* gui/e-day-view.c: (e_day_view_on_editing_started):
	Ensure new event in top canvas will be visible.

2007-11-26  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #380644

	* gui/dialogs/task-page.h: (task_page_add_attendee):
	* gui/dialogs/task-page.c: (task_page_add_attendee):
	* gui/dialogs/event-page.h: (event_page_add_attendee):
	* gui/dialogs/event-page.c: (event_page_add_attendee):
	New function to add attendee to store and name selector.
	* gui/dialogs/task-page.c: (remove_attendee): Remove attendee also
	from name selector (keep consistent).
	* gui/dialogs/task-editor.c: (task_editor_edit_comp):
	Use task_page_add_attendee to add known attendees.
	* gui/dialogs/event-editor.c: (event_editor_edit_comp):
	Use event_page_add_attendee to add known attendees.

	* gui/e-meeting-store.c: (e_meeting_store_remove_all_attendees),
	(e_meeting_store_remove_attendee): Code cleanup by Matthew Barnes.

2007-11-23  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #325730

	* gui/e-memos.c: (table_selection_change_cb):
	* gui/e-tasks.c: (table_selection_change_cb):
	Clear task/memo preview when have more or less than one row selected.
	* gui/e-cal-model.c: (e_cal_view_objects_added_cb),
	(e_cal_view_objects_removed_cb), (remove_client_objects):
	First delete, then notify, so we read from updated store.

2007-11-23  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #484603

	* gui/e-week-view.c: (e_week_view_reshape_event_span):
	Do not forget for organizer icon when counting used icons.

2007-11-19  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #401337

	* gui/dialogs/task-page.glade:
	* gui/dialogs/task-page.c: (sensitize_widgets), (get_widgets):
	Use other mnemonic for Organizer and let it work properly.

2007-11-18  Gilles Dartiguelongue  <gdartigu@svn.gnome.org>

	** Fix bug #495875

	* gui/calendar-component.c:
	* gui/memos-component.c:
	* gui/tasks-component.c:
	right click menu reordering

2007-11-16  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #492793

	* gui/dialogs/task-page.c: (task_page_fill_component):
	* gui/dialogs/comp-editor.c: (page_changed_cb),
	(page_summary_changed_cb), (page_dates_changed_cb):
	* gui/dialogs/event-page.c: (event_page_fill_component):
	* gui/dialogs/memo-page.c: (memo_page_fill_component):
	Pass real widget as parent to e_notice, not a GObject.

2007-11-13  Ondrej Jirman  <megous@megous.com>

	** Fix for bug #494323

	* gui/e-meeting-store.c: removed useless EBook use.

2007-11-12  Andre Klapper  <a9016009@gmx.de>

	** Fix for bug #496248

	* gui/alarm-notify/alarm-notify.glade:
	mark "location" field selectable.

2007-11-10  Michael Monreal  <mmonreal@svn.gnome.org>

	** Fix for bug #209425

	* gui/calendar-commands.c:
	* gui/e-calendar-view.c:
	Don't use gtk-home for the go-today action.

2007-11-05  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #491345

	* gui/e-tasks.c: (config_hide_completed_tasks_changed_cb):
	Also change default filter for tasks, to let this work without restart.

2007-11-05  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #353780

	* gui/dialogs/comp-editor.h: (comp_editor_get_current_comp):
	* gui/dialogs/comp-editor.c: (prompt_and_save_changes),
	(menu_file_save_cb), (comp_editor_append_page),
	(comp_editor_get_current_comp):
	Stop processing immediately when page is filled incorrectly.

2007-11-05  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #341085

	* gui/e-day-view.c: (e_day_view_reshape_day_event):
	Use 'x_offset' instead of changing event size when has icons.

2007-11-05  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #359267

	* gui/gnome-cal.c: (update_memo_view):
	Changed memo_sexp to show always memos without start date.

2007-11-05  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #351932

	* gui/dialogs/task-page.c: (check_start_before_end), (times_updated),
	(start_date_changed_cb), (due_date_changed_cb), (init_widgets):
	Ensure due date is not before start date.

2007-11-05  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #315101

	* drag and drop to other source for multiselect
	* gui/comp-util.h:
	* gui/comp-util.c: (cal_comp_selection_set_string_list),
	(cal_comp_selection_get_string_list): Two new helper functions
	to set and get list of strings into GtkSelectionData.
	* gui/e-tasks.c: (get_selected_components_cb),
	(do_for_selected_components), (obtain_list_of_components),
	(table_drag_data_get):
	* gui/e-memos.c: (get_selected_components_cb),
	(do_for_selected_components), (obtain_list_of_components),
	(table_drag_data_get): Pass list of selected components as data
	for drag and drop instead of focused component from the list.
	* gui/e-tasks.c: (table_drag_data_delete):
	* gui/e-memos.c: (table_drag_data_delete): Obsolete now.
	* gui/tasks-component.c: (selector_tree_drag_data_received):
	* gui/memos-component.c: (selector_tree_drag_data_received):
	Receiving list of components, so made changes here to reflect it.

2007-11-05  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #318604

	* Enable source when adding event to disabled source.
	* gui/gnome-cal.h: (gnome_calendar_emit_user_created_signal):
	New helper function which will store used calendar before emitting
	signal "user_created" on the instance to GnomeCalendar for later use
	and unset it right after the emit.
	* gui/gnome-cal.c: (struct _GnomeCalendarPrivate): New member to store
	used ECal before emitting "user_created" signal.
	* gui/gnome-cal.c: (gnome_calendar_emit_user_created_signal),
	(user_created_cb): Implementation of new helper function and enabling
	last used source instead of default one on "user_created" signal.
	* gui/e-day-view.c: (e_day_view_on_editing_stopped):
	* gui/e-week-view.c: (e_week_view_on_editing_stopped):
	* gui/e-calendar-view.c: (object_created_cb): Use our new
	helper function to emit "user_created" signal with proper ECal.
	* gui/e-calendar-table.h: (struct _ECalendarTable):
	* gui/e-memo-table.h: (struct _EMemoTable): New member added.
	* gui/e-calendar-table.c: (e_calendar_table_init):
	* gui/e-memo-table.c: (e_memo_table_init): Initialize member to NULL.
	* gui/tasks-component.c: (object_created_cb), (create_new_todo):
	* gui/memos-component.c: (object_created_cb), (create_new_memo):
	Add new callback function to notice new object created and emit
	"user_created" signal with proper ECal stored in ECalendarTable.
	* gui/e-tasks.c: (user_created_cb):
	* gui/e-memos.c: (user_created_cb): Use previously stored ECal, which
	has been used to create event, instead of using default ECal.

2007-11-05  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #346693

	* gui/e-day-view-top-item.h: (EDayViewTopItem):
	New property 'show_dates'.
	* gui/e-day-view-top-item.c: (e_day_view_top_item_draw),
	(e_day_view_top_item_class_init), (e_day_view_top_item_init),
	(e_day_view_top_item_set_arg):
	Always draw background rectangle over whole requested place and
	draw dates or event only, based on new property 'show_dates'.
	* gui/e-day-view.h: (struct _EDayView): New properties 'tc_vscrollbar',
	'top_dates_canvas', 'top_dates_canvas_item'.
	* gui/e-day-view.c: (E_DAY_VIEW_MAX_ROWS_AT_TOP),
	(e_day_view_top_scroll), (e_day_view_update_top_scroll),
	(e_day_view_on_top_canvas_scroll), (e_day_view_init),
	(e_day_view_style_set), (e_day_view_size_allocate),
	(e_day_view_check_layout), (e_day_view_on_editing_started):
	Added support for scrolling 'top_canvas' when number of items there
	increases over the 'E_DAY_VIEW_MAX_ROWS_AT_TOP'.
	* gui/e-day-view.c: (e_day_view_set_selected_time_range),
	(e_day_view_set_selected_time_range_in_top_visible),
	(e_day_view_set_selected_time_range_visible),
	(e_day_view_set_selected_time_range), (e_day_view_update_query),
	(e_day_view_goto_start_of_work_day), (e_day_view_goto_end_of_work_day),
	(e_day_view_change_duration_to_start_of_work_day),
	(e_day_view_change_duration_to_end_of_work_day),
	(e_day_view_layout_timeout_cb): Redraw top_dates_canvas if necessary.

2007-11-03  Matthew Barnes  <mbarnes@redhat.com>

	** Remove dead files from source control.  The dates below
	   indicate when the file was removed from Makefile.am.
	   Fixes part of bug #478704.

	* gui/dialogs/calendar-setup.glade	(Nov 2004)
	* gui/dialogs/meeting-page.etspec	(Sep 2003)
	* gui/dialogs/new-calendar.glade	(Jan 2003)
	* gui/dialogs/new-task-list.glade	(Jan 2004)
	* gui/dialogs/url-editor-dialog.c	(Dec 2005)
	* gui/dialogs/url-editor-dialog.glade	(Dec 2005)
	* gui/dialogs/url-editor-dialog.h	(Dec 2005)
	* gui/e-pub-utils.c			(Dec 2005)
	* gui/e-pub-utils.h			(Dec 2005)
	* gui/gnome-calendar-conduit.png	(May 2000)

2007-11-02  Damien Carbery  <damien.carbery@sun.com>

	** Fixes bug #492058

	* gui/e-itip-control.c: Name the anonymous unions to build
	with the Sun Studio compiler.

2007-10-31  Matthew Barnes  <mbarnes@redhat.com>

	* gui/alarm-notify/alarm-notify.glade:
	Fix spacing between alarm description and buttons.

2007-10-29  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #490538

	* gui/dialogs/memo-page.c: (fill_comp_with_recipients):
	* gui/e-meeting-list-view.c: (process_section):
	Free memory properly after call of e_contact_store_get_books.

2007-10-26  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #417999

	* gui/dialogs/task-page.c: (init_widgets): Use "changed" signal,
	instead of old "source_changed" to notify change of selected source.

2007-10-26  Matthew Barnes  <mbarnes@redhat.com>

	* conduits/calendar/calendar-conduit.c (local_record_to_pilot_record):
	* conduits/memo/memo-conduit.c (local_record_to_pilot_record):
	* conduits/todo/todo-conduit.c (local_record_to_pilot_record):
	Zero out the GnomePilotRecord struct to silence a compiler warning.

	* gui/dialogs/memo-page.c (memo_page_select_organizer):
	Initialize def_address.

	* gui/e-itip-control.c:
	Use unions to avoid strict-aliasing violations.

2007-10-23  Kjartan Maraas  <kmaraas@gnome.org>

	* gui/alarm-notify/alarm-notify-dialog.c:
	* gui/alarm-notify/alarm-notify.c: 
	* gui/alarm-notify/alarm-queue.c:
	* gui/alarm-notify/config-data.c:
	* gui/cal-search-bar.c: 
	* gui/calendar-commands.c:
	* gui/calendar-config.c: 
	* gui/dialogs/alarm-dialog.c: 
	* gui/dialogs/alarm-list-dialog.c: 
	* gui/dialogs/cal-prefs-dialog.c: 
	* gui/dialogs/comp-editor.c: 
	* gui/dialogs/event-page.c: 
	* gui/dialogs/recurrence-page.c: 
	* gui/e-alarm-list.c: 
	* gui/e-cal-config.c:
	* gui/e-cal-event.c: 
	* gui/e-cal-menu.c:
	* gui/e-cal-popup.c: 
	* gui/e-calendar-table.c: 
	* gui/e-calendar-view.c:
	* gui/e-date-time-list.c:
	* gui/e-day-view-main-item.c:
	* gui/e-day-view-time-item.c:
	* gui/e-day-view.c: 
	* gui/e-itip-control.c: 
	* gui/e-meeting-list-view.c: 
	* gui/e-memo-table.c:
	* gui/e-select-names-editable.c: 
	* gui/e-week-view-event-item.c: 
	* gui/e-week-view.c: 
	* gui/goto.c:
	* gui/migration.c: 
	* gui/print.c: 
	* gui/tasks-control.c: 
	* importers/icalendar-importer.c: 

	Warning fixes:
	- NULL vs 0 vs FALSE/TRUE
	- ANSIfication of declarations
	- mixing declarations and code
	- mark some code static
	- remove use of some deprecated Gtk+ apis

2007-10-22  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #417999

	* gui/dialogs/event-page.c:
	* gui/dialogs/event-page.glade:
	* gui/dialogs/memo-page.c:
	* gui/dialogs/memo-page.glade:
	* gui/dialogs/task-page.c:
	* gui/dialogs/task-page.glade:
	* gui/e-itip-control.c:
	Use ESourceComboBox instead of ESourceOptionMenu (deprecated).

2007-10-12  Michael Monreal <michael.monreal@gmail.com>

	** New view-calendar icons (bug #479257)

	* calendar/gui/calendar-commands.c: Change icon references.

2007-10-12  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #466659

	* gui/e-cal-list-view.c: (setup_e_table): Do not allow the user to set
	a 'no-date' for start/end of appointments in list view.

2007-10-11  Matthew Barnes  <mbarnes@redhat.com>

	* gui/alarm-notify/alarm-queue.c:
	Fix an implicit GTK+ function declaration on x86_64.

2007-10-09  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #437579

	* conduits/calendar/calendar-conduit.c:
	* conduits/memo/memo-conduit.c:
	* conduits/todo/todo-conduit.c:
	* gui/dialogs/alarm-dialog.c:
	* gui/dialogs/event-page.c:
	* gui/dialogs/memo-page.c:
	* gui/dialogs/task-page.c:
	* gui/e-day-view-layout.c:
	* gui/e-day-view-layout.h:
	* gui/print.c:
	Fix various compiler warnings.  Patch from Milan Crha.

2007-10-09  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #324526

	* gui/print.c: (print_week_event): Draw picture with dots to indicate
	that not all events are printed in a day.

2007-10-07  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	** Fix for bug #455862
	Plugged memory leaks.

	* gui/comp-util.c:
	* gui/comp-util.h:(cal_comp_util_get_n_icons): A new function to
	get the number of icons owned by ECalComponent.

	* gui/e-day-view-main-item.c:
	* gui/e-day-view.c:
	* gui/e-week-view-event-item.c:
	* gui/e-week-view.c: Use cal_comp_util_get_n_icons.

2007-10-05  Milan Crha  <mcrha@redhat.com>

	* gui/alarm-notify/alarm-queue.c: (alarm_queue_remove_client):
	Fixed leak caused by my changes in fix for bug #325685.

2007-10-04  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #477045

	* gui/calendar-component.c:
	* gui/memos-component.c:
	* gui/tasks-component.c:
	Use "edit-copy" and "document-properties" icons in the pop-up menu.

2007-10-04  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #325685

	* gui/print.c: (print_week_day_event): Show end time of the event only
	when printing week view with less than 3 weeks (because of no space).

2007-10-02  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #469657

	* gui/comp-editor-factory.c:
	Use destroy functions in GHashTables to simplify memory management.

2007-10-01  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #428402

	* gui/e-itip-control.c: (show_current): First move to next component,
	then remove last alarm and then free that last component.

	* gui/e-itip-control.c: (update_item): Free component when done.

	* importers/icalendar-importer.c: (prepare_events), (prepare_tasks):
	Really go through every component when removing one.

2007-10-01  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #342283

	* gui/calendar-commands.h: (calendar_command_print): New function.
	* gui/calendar-commands.c: (calendar_command_print), (file_print_cb),
	(file_print_preview_cb):
	* gui/e-calendar-view.c: (on_print):
	Behaves consistently when printing from File->Print and popup->Print.

2007-10-01  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #230339

	* gui/print.c: (print_day_event): Print also location, if present.

2007-09-27  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	** Fix for bug #461195

	* gui/e-calendar-marshal.list: Remove needless marshalers.
	* gui/e-memos.c:
	* gui/e-tasks.c: Use GObject's marshalers.

2007-09-27  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #477045

	* gui/calendar-commands.c:
	* gui/calendar-component.c:
	* gui/dialogs/cal-attachment-select-file.c:
	* gui/dialogs/comp-editor.c:
	* gui/dialogs/event-editor.c:
	* gui/dialogs/task-editor.c:
	* gui/e-cal-popup.c:
	* gui/e-calendar-table.c:
	* gui/e-calendar-view.c:
	* gui/e-day-view.c:
	* gui/e-memo-table.c:
	* gui/e-week-view.c:
	* gui/memos-component.c:
	* gui/memos-control.c:
	* gui/tasks-component.c:
	* gui/tasks-control.c:
	Use standard icon names where applicable.

2007-09-27  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #346686

	* gui/e-cal-model.h: (e_cal_model_test_row_editable):
	* gui/e-cal-model.c: (e_cal_model_test_row_editable): New helper
	function to check if row is editable or not, based on calendar.
	* gui/e-cal-model-memos.c: (ecmm_is_cell_editable):
	* gui/e-cal-model-tasks.c: (ecmt_is_cell_editable):
	* gui/e-cal-model-calendar.c: (ecmc_is_cell_editable):
	* gui/e-cal-model.c: (ecm_is_cell_editable):
	Uses new helper function to determine if row is editable.

2007-09-27  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #324472

	* gui/e-calendar-table.c: (struct AffectedComponents),
	(e_calendar_table_complete_selected),  (get_selected_components_cb),
	(do_for_selected_components), (mark_comp_complete_cb),
	(mark_comp_incomplete_cb): Added new helper structure and functions.
	* gui/e-calendar-table.c: (mark_as_complete_cb),
	(mark_as_incomplete_cb): Using new helper functions.
	* gui/e-cal-model-tasks.h: (e_cal_model_tasks_mark_comp_complete),
	(e_cal_model_tasks_mark_comp_incomplete): New functions (replace old).
	* gui/e-cal-model-tasks.c: (commit_component_changes),
	(ecmt_set_value_at), (e_cal_model_tasks_mark_comp_complete),
	(e_cal_model_tasks_mark_comp_incomplete): Added new functions to work
	with components instead of table's rows and using them.

2007-09-27  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #300693

	* gui/e-calendar-table.c: (task_compare_cb), (e_calendar_table_init):
	* gui/e-calendar-table.etspec:
	* gui/e-memo-table.c: (task_compare_cb):
	* gui/e-memo-table.etspec:
	Removed obsolete code and references to "task-sort" virtual column.

2007-09-27  Milan Crha  <mcrha@redhat.com>

	** Fixes part of bug #228832

	* gui/gnome-cal.h: (gnome_calendar_new_task):
	* gui/gnome-cal.c: (gnome_calendar_new_task): Added parameters to
	inherit selected time for 'dtstart' and 'due' of new task.
	* gui/e-calendar-view.c: (on_new_task): Passing selected time to use.

2007-09-21  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #411125

	* gui/dialogs/meeting-page.etspec:
	* gui/e-meeting-time-sel.etspec:
	* gui/e-memo-table.etspec:
	* gui/e-calendar-table.etspec:
	* gui/e-cal-list-view.etspec:
	Uses 'compare="collate"' instead of 'compare="string"' to handle UTF
	characters correctly.

2007-09-21  Jedy Wang  <jedy.wang@sun.com>

	** Fixes bug #476124.

	* calendar/gui/dialogs/comp-editor.c: Handle NULL pointer.

2007-09-14  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #476231

	* gui/dialogs/cal-attachment-select-file.c:
	Remove non-USE_GTKFILECHOOSER code.
	GtkFileChooser has been around since 2004.

2007-09-12  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #476040

	* gui/e-day-view.c:
	* gui/e-week-view.c:
	* gui/dialogs/comp-editor.c:
	Use "mail-attachment" icon instead of "stock_attach".

2007-09-10  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #300284 (bnc)

	* gui/e-cal-list-view.c: (setup_e_table): Do not allow the user to set
	a 'no-date' for start/end of appointments in list view.

2007-09-10  Milan Crha  <mcrha@redhat.com>
	
	** Fix for bug #368033

	* gui/calendar-component.c: (ensure_sources):
	Assign default color for B&A when no color is set.

2007-09-10  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes#332026
	* gui/e-day-view.c: (e_day_view_do_key_press),
	(e_day_view_start_editing_event): Filter the input context
	key events.					  

	Committing on behalf of Mayank <mayank.gnu@gmail.com>

2007-09-10  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #270605
	* gui/dialogs/event-page.c: (event_page_select_organizer),
	(event_page_construct):
	* gui/dialogs/task-page.c: (task_page_select_organizer),
	(task_page_construct): Skip disabled accounts and choose first available address as 
	organizer.

	Reworked the patch from Milan Crha  <mcrha@redhat.com> to apply properly as the previous
	commit made changes in the same area.		  

2007-09-09  Suman Manjunath  <msuman@novell.com>

	* gui/dialogs/event-page.c: (event_page_init),
	(event_page_finalize), (clear_widgets),
	(event_page_fill_component), (source_changed_cb),
	(event_page_select_organizer), (event_page_construct):
	* gui/dialogs/memo-page.c: (memo_page_init), (memo_page_finalize),
	(clear_widgets), (memo_page_fill_widgets),
	(memo_page_fill_component), (source_changed_cb),
	(set_subscriber_info_string), (memo_page_select_organizer),
	(memo_page_construct):
	* gui/dialogs/task-page.c: (task_page_init), (task_page_finalize),
	(clear_widgets), (task_page_fill_widgets),
	(task_page_fill_component), (task_page_set_info_string),
	(source_changed_cb), (set_subscriber_info_string),
	(task_page_select_organizer), (task_page_construct): code cleanup.

2007-09-07  Gilles Dartiguelongue  <gdartigu@svn.gnome.org>

	* gui/e-itip-control.c: (insert_boxes), (insert_ok):
	fix weak references, pointed by Milan Crha <mcrha@redhat.com>
	which fixes one issue of the patch from bug #439122

2007-09-07  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #473903

	* gui/e-meeting-store.c: (freebusy_async):
	* gui/cal-search-bar.c: (get_current_category ):
	* gui/itip-utils.c: (comp_limit_attendees):
	* gui/e-tasks.c: (e_tasks_open_task_id):
	* gui/print.c: (struct PrintCompItem), (struct PrintCalItem):
	Fixes serious compiler warnings.

2007-01-08  Wang Xin  <jedy.wang@sun.com>
	
	Fixes #470968

	* calendar/gui/e-calendar-table.c: Delete the task with attendee if OK button
	of the confirm dialog is clicked.

2007-09-03  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix a build break.

	* conduits/common/libecalendar-common-conduit.c:
	(e_pilot_remote_category_to_local):
	* conduits/common/libecalendar-common-conduit.h:

2007-09-03  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #201167 by Nathan Owens

	* conduits/todo/Makefile.am:
	* conduits/todo/todo-conduit.c:
	* conduits/common/libecalendar-common-conduit.c:
	* conduits/common/libecalendar-common-conduit.h:
	* conduits/common/Makefile.am:
	* conduits/calendar/Makefile.am:
	* conduits/calendar/calendar-conduit.c:
	* conduits/Makefile.am:
	* conduits/memo/memo-conduit.c:
	* conduits/memo/Makefile.am:

2007-09-03  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #471791 (Move away from asserts to g_ret*)

	* gui/alarm-notify/alarm-queue.c: (alarm_trigger_cb),
	(remove_comp), (notify_dialog_cb), (audio_notification),
	(procedure_notification), (remove_cqa), (remove_client_alarms):
	* gui/alarm-notify/notify-main.c: (alarm_notify_factory_fn),
	(init_alarm_service):
	* gui/cal-search-bar.c: (free_categories), (get_current_category),
	(regen_query), (make_suboptions), (cal_search_bar_set_categories):
	* gui/calendar-commands.c: (sensitize_items),
	(calendar_control_sensitize_calendar_commands),
	(sensitize_taskpad_commands), (gcal_calendar_focus_change_cb),
	(gcal_taskpad_focus_change_cb), (calendar_control_activate),
	(calendar_control_deactivate):
	* gui/calendar-component.c: (set_info):
	* gui/calendar-config.c: (units_to_string),
	(calendar_config_get_hide_completed_tasks_sexp):
	* gui/calendar-view-factory.c: (calendar_view_factory_get_title),
	(calendar_view_factory_get_type_code):
	* gui/calendar-view.c: (calendar_view_get_type_code):
	* gui/comp-editor-factory.c: (free_request), (editor_destroy_cb),
	(edit_existing), (edit_new), (queue_edit_existing),
	(queue_edit_new):
	* gui/comp-util.c: (cal_comp_event_new_with_defaults):
	* gui/dialogs/alarm-dialog.c: (repeat_widgets_to_alarm),
	(dialog_to_alarm), (action_selection_done_cb):
	* gui/dialogs/comp-editor-page.c: (comp_editor_page_get_widget),
	(comp_editor_page_focus_main_widget),
	(comp_editor_page_fill_widgets):
	* gui/dialogs/comp-editor-util.c: (comp_editor_strip_categories):
	* gui/dialogs/comp-editor.c: (comp_editor_append_page),
	(raise_and_focus):
	* gui/dialogs/event-page.c: (event_page_fill_component),
	(event_page_set_all_day_event), (times_updated),
	(alarm_custom_clicked_cb):
	* gui/dialogs/recurrence-page.c: (simple_recur_to_comp),
	(fill_component), (make_weekly_special), (make_monthly_special),
	(make_recurrence_special), (make_ending_until_special),
	(make_ending_count_special), (make_ending_special),
	(recurrence_page_fill_widgets), (exception_add_cb):
	* gui/e-cal-model.c: (clear_objects_array), (ecm_value_at),
	(ecm_set_value_at), (e_cal_model_set_default_client),
	(update_e_cal_view_for_client), (cal_opened_cb),
	(remove_client_objects):
	* gui/e-calendar-table.c: (e_calendar_table_get_selected_comp):
	* gui/e-calendar-view.c: (e_calendar_view_add_event):
	* gui/e-day-view.c: (update_row), (model_rows_inserted_cb),
	(e_day_view_convert_event_coords), (e_day_view_update_query),
	(cancel_editing), (e_day_view_on_editing_stopped):
	* gui/e-itip-control.c: (find_cal_opened_cb),
	(write_recurrence_piece), (get_cancel_options), (show_current),
	(ok_clicked_cb):
	* gui/e-meeting-list-view.c: (name_selector_dialog_close_cb):
	* gui/e-meeting-store.c: (refresh_busy_periods):
	* gui/e-memo-table.c: (get_selected_comp):
	* gui/e-memos.c: (e_memos_setup_view_menus),
	(e_memos_discard_view_menus):
	* gui/e-tasks.c: (e_tasks_setup_view_menus),
	(e_tasks_discard_view_menus):
	* gui/e-week-view-event-item.c: (e_week_view_event_item_draw):
	* gui/e-week-view-layout.c: (e_week_view_find_day):
	* gui/e-week-view.c: (update_row), (model_rows_inserted_cb),
	(e_week_view_update_query), (e_week_view_start_editing_event),
	(cancel_editing), (e_week_view_cursor_key_up),
	(e_week_view_cursor_key_down), (e_week_view_cursor_key_left),
	(e_week_view_cursor_key_right):
	* gui/gnome-cal.c: (get_times_for_views), (get_focus_location),
	(update_query), (gnome_calendar_direction), (set_view),
	(display_view), (gnome_calendar_setup_view_menus),
	(gnome_calendar_discard_view_menus), (client_cal_opened_cb),
	(open_ecal), (backend_died_cb),
	(gnome_calendar_remove_source_by_uid):
	* gui/memos-control.c: (memos_control_sensitize_commands),
	(memos_control_activate), (memos_control_deactivate):
	* gui/print.c: (print_calendar_draw_page):
	* gui/tasks-control.c: (sensitize_items),
	(tasks_control_sensitize_commands), (tasks_control_activate),
	(tasks_control_deactivate):
	* gui/weekday-picker.c: (day_event_cb):
	* importers/icalendar-importer.c: (ivcal_import_items):

2007-08-29  Suman Manjunath  <msuman@novell.com>

	** Fix for bug #466051

	* gui/dialogs/memo-page.c: (memo_page_fill_component): When memo start
	date is set to 'None', do not store DTSTART property.

2007-08-28  Matthew Barnes  <mbarnes@redhat.com>

	* gui/e-cal-popup.c (e_cal_popup_target_new_source):
	g_strncasecmp() is deprecated; use g_ascii_strncasecmp() instead.

2007-08-27  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	** Fix for the same issue of week view of bug #330628

	* gui/e-week-view.h: Add meeting_icon.
	* gui/e-week-view.c: (e_week_view_realize): Load meeting_icon.
	* gui/e-week-view.c: (e_week_view_unrealize): Dispose meeting_icon.
	* gui/e-week-view-event-item.c: (e_week_view_event_item_draw_icons):
	Show meeting icon.

2007-08-24  Srinivasa Ragavan  <sragavan@novell.com>
	
	** Fix for bug #468440

	* gui/e-week-view-event-item.c: Dont popup if the event is destroyed
	(e_week_view_event_item_button_press):
	* gui/e-week-view.c: (e_week_view_init), Init a variable to tell the
	event handler that the event is destroyed
	(e_week_view_on_editing_stopped): Set event_destroyed.
	* gui/e-week-view.h:

2007-08-24  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #468411

	* gui/e-week-view.c: (e_week_view_on_text_item_event): Grab focus to
	main view, so that the even gets created.

2007-08-24  Johnny Jacob  <jjohnny@novell.com>	

	** Fix for bug #466796
	
	* gui/calendar-config.c :  adds calendar_config_init() to the beginning of every function
	that uses the 'config' variable.

	Committing on behalf of Rouslan Solomakhin
	<rouslan@solomakhin.net>
	
2007-08-24  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	** Fix for bug #330628

	* gui/e-day-view-top-item.c: (e_day_view_top_item_draw_long_event):
	Show meeting icon.

2007-08-23  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #385517

	* gui/dialogs/cal-prefs-dialog.c: (show_task_list_config):
	Use actual state to sensitive tasks_hide_completed_* widgets.

2007-08-23  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #329746

	* gui/dialogs/comp-editor.c: (make_icon_from_comp):
	Return proper icon for memo components.
	* gui/dialogs/delete-comp.c: (delete_component_dialog),
	(prompt_retract_dialog):
	* gui/dialogs/changed-comp.c: (changed_component_dialog):
	* gui/dialogs/comp-editor.c: (make_title_from_comp),
	(make_title_from_string):
	* gui/dialogs/cancel-comp.c: (cancel_component_dialog):
	* gui/dialogs/delete-error.c: (delete_error_dialog):
	* gui/dialogs/recur-comp.c: (recur_component_dialog):
	* gui/itip-utils.c: (comp_subject), (comp_description):
	* calendar.error.xml:
	Renamed 'Journal' to 'Memo'.

2007-08-23  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #428110

	* gui/memos-component.c: (update_single_object):
	Added parameter to rather fail on adding same object with drag&drop,
	rather than modify and then delete existing one.
	* gui/memos-component.c: (update_objects): Use new parameter above.
	* gui/memos-component.c: (selector_tree_drag_data_received):
	Use result of call 'update_objects' and prevent delete object when
	the call fails.

2007-08-23  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #201201

	* gui/e-week-view.h: (struct _EWeekView): Added properties.
	* gui/e-week-view.c: (e_week_view_init),
	(e_week_view_on_button_press): First click stores actual selection
	in structure and when second click was inside this selection, then
	the selection is restored and used for new appointment.

	** Fix for bug #201202

	* gui/e-day-view.h: (struct _EDayView): Added properties.
	* gui/e-day-view.c: (e_day_view_init),
	(e_day_view_on_top_canvas_button_press),
	(e_day_view_on_main_canvas_button_press):
	Same as with week view above.

2007-08-23  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #338803

	* gui/e-meeting-time-sel-item.c:
	(e_meeting_time_selector_item_button_press):
	Keeps actual meeting duration, not reset to half/full hour.

	* gui/dialogs/event-page.c: (update_time):
	Updates also duration spin buttons, not only end date/time edits.

2007-08-23  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #347770

	* gui/e-cal-component-memo-preview.c: (write_html):
	Improved description text parsing.

2007-08-23  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #355864

	* gui/e-week-view.c: (e_week_view_remove_event_cb):
	Better remove array item after done with it, not before.

2007-08-23  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #272167

	* gui/e-cal-popup.c: (e_cal_popup_target_new_source):
	Marks both offline flags on local calendars, so both popup menu
	items are hidden.

2007-08-23  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #308636

	* gui/dialogs/calendar-setup.c: (eccp_get_source_type):
	Add only source groups without property 'create_source=no'.
	* gui/dialogs/calendar-setup.c: (cs_load_sources):
	New helper function avoids code copying.
	* gui/dialogs/calendar-setup.c: (calendar_setup_edit_calendar),
	(calendar_setup_edit_task_list), (calendar_setup_edit_memo_list):
	Uses 'cs_load_sources'.
	* gui/calendar-component.c: (ensure_sources):
	Sets 'create_source=no' for contacts when not set before.

2007-08-20  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #262226

	* gui/e-calendar-view.h:
	* gui/e-calendar-view.c: (e_calendar_view_new_appointment_full):
	Changed meaning of the last parameter: no_past_date to indicate if
	we accept past dates (we do not for File->New->items).
	Also changed behavior: when don't need all_day event and there are
	24 hours selected, then change start/end to actual time in actual day,
	or to 'day begins' from pereferences for other selected days,
	instead of setting all_day event to TRUE.
	* gui/calendar-component.c: (create_new_event):
	Don't force all day event.
	* gui/e-week-view.c: (e_week_view_on_button_press):
	Changing call of 'e_calendar_view_new_appointment_full'.

	* gui/dialogs/event-page.c: (clear_widgets):
	Fixed critical warning when no default_address set.
	* gui/dialogs/event-page.c: (event_page_finalize),
	(event_page_select_organizer): Free memory when no longer needed.
	* gui/dialogs/event-page.c: (event_page_init): There was twice the same.

2007-08-17  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #420492
	* gui/dialogs/event-page.c: (event_page_fill_widgets):
	set the free_busy flag properly.		
	
	Committing on behalf of Ebby Wiselyn <ebbywiselyn@gmail.com>

2007-08-17  Suman Manjunath  <msuman@novell.com>

	reviewed by: Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-day-view.c: (e_day_view_do_key_press):
	* gui/e-week-view.c: (e_week_view_do_key_press):
	Set the free/busy info of events entered directly on the canvas, with 
	the editor defaults.

2007-08-17  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #274070 (bnc)
	* gui/e-meeting-attendee.[ch]: (e_meeting_attendee_finalize),
	(e_meeting_attendee_get_fburi), (e_meeting_attendee_set_fburi):
	* gui/e-meeting-list-view.c: (process_section):
	* gui/e-meeting-store.c: (freebusy_async), (start_async_read):
	If the contact has a free busy url specified with it, use it to show
	free busy information.	

2007-08-16  Milan Crha  <mcrha@redhat.com>

	** Part of fix for bug #350539

	* gui/e-cal-popup.c: (ecalp_part_popup_set_background):
	Ensures non-NULL part.

2007-08-16  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #464106

	* gui/goto.c: (goto_dialog):
	Set week_view_start with respect to settings.

2007-08-13  Suman Manjunath  <msuman@novell.com>

	reviewed by: Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/dialogs/event-page.c: (event_page_init),
	(sensitize_widgets), (get_current_account),
	(event_page_fill_widgets), (event_page_fill_component),
	(existing_attendee), (event_page_set_info_string), (get_widgets),
	(source_changed_cb), (init_widgets), (event_page_select_organizer),
	(event_page_construct):
	* gui/dialogs/event-page.glade:
	* gui/dialogs/memo-page.c: (memo_page_init), (sensitize_widgets),
	(memo_page_fill_widgets), (get_current_account),
	(memo_page_fill_component), (memo_page_set_info_string),
	(get_widgets), (source_changed_cb), (init_widgets),
	(memo_page_select_organizer), (memo_page_construct):
	* gui/dialogs/memo-page.glade:
	* gui/dialogs/task-page.c: (task_page_init), (sensitize_widgets),
	(get_current_account), (task_page_fill_widgets),
	(task_page_fill_component), (existing_attendee),
	(task_page_set_info_string), (get_widgets), (source_changed_cb),
	(init_widgets), (task_page_select_organizer),
	(task_page_construct):
	* gui/dialogs/task-page.glade: Add a label on the top to show information string 
	for calendar, task and memo editors. It would be shown while operating on subscribed
	user's folder items.
	 * gui/itip-utils.c: (itip_send_comp), (reply_to_calendar_comp): A
	utility function sanitize_component has been removed. The sentby parameter
	is set in the event pages.										  

2007-08-10  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #351552

	* gui/alarm-notify/alarm-queue.h: (alarm_queue_remove_client):
	* gui/alarm-notify/alarm-queue.c: (alarm_queue_remove_client):
	Added new parameter to free immediately, not by thread.
	* gui/alarm-notify/alarm-notify.c: (dequeue_client),
	(alarm_notify_remove_calendar): Using alarm_queue_remove_client.

	* gui/alarm-notify/alarm-notify.c: (alarm_notify_add_calendar):
	Fixed critical warning with e_passwords for calendars without
	'auth-domain' property (will use name instead).

2007-08-06  Milan Crha  <mcrha@redhat.com>

	** Partially fix bug #401533

	* gui/e-cal-component-memo-preview.c: (write_html):
	Text marked to localize.

2007-08-06  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #463129

	* gui/calendar-component.c: (update_task_memo_selection),
	(destroy_component_view): Frees task_source_selection and
	memo_source_selection in destroy_component_view instead of
	immediately after assigning it to the structure.

2007-08-06  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #454253

	* gui/alarm-notify/alarm.c: (pop_alarm), (alarm_ready_cb),
	(setup_timeout), (alarm_done): Fail safe instead of crash, when it is
	not really required to crash. 

2007-08-03  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	** Fix for bug #377173

	* gui/e-cal-component-memo-preview.c:
	* gui/e-cal-component-preview.c: Show category icon correctly. 

2007-08-02  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #322624

	* gui/alarm-notify/alarm-queue.c: (has_known_notification),
	(add_component_alarms), (query_objects_changed_async):
	Don't add alarms for types with unknown/none notification method.

2007-07-31  Matthew Barnes  <mbarnes@redhat.com>

	* common/authentication.c: Include <libedataserver/e-source.h>
	to fix implicit declaration of e_source_get_duped_property().

2007-07-30  Andre Klapper  <a9016009@gmx.de>

	* gui/dialogs/schedule-page.glade:
	gui/dialogs/memo-page.glade:
	gui/dialogs/meeting-page.glade:
	gui/dialogs/task-page.glade:
	gui/dialogs/task-details-page.glade:
	gui/dialogs/cal-prefs-dialog.glade:
	gui/dialogs/event-page.glade:
	gui/e-itip-control.glade:
	remove "window1" string from translation

2007-07-30  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes a memory corruption.
	* common/authentication.c: (auth_func_cb): Use
	e_source_get_duped_property.						   

2007-07-30  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #343716

	* gui/dialogs/memo-page.c: (memo_page_fill_component):
	Working properly with UTF-8 characters when cutting and
	added ellipsize for longer texts.

2007-07-30  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #453860
	* gui/e-select-names-editable.c:
	(e_select_names_editable_get_emails): Check if contact
	is present before fetching information from it.					      
	
	Committing on behalf of Xiurong Simon Zheng <simon.zheng@sun.com>		

2007-07-29  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #200977

	* gui/e-day-view.c: (time_range_changed_cb):
	Ensures selection start row is visible.

2007-07-29  Rob Bradford  <rob@robster.org.uk>

	Fixes #461474
	* gui/dialogs/task-page.c: (task_page_set_dates):
	Remove redundant code.

2007-07-29  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	** Fix for bug #455862

	* gui/e-memo-table.c: Paste raw text data from clipboard while
	editing column.

2007-07-29  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	** Fix for bug #335881

	* gui/e-calendar-table.c: Paste raw text data from clipboard while
	editing column.

2007-07-27  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	Fixes #460825
	* gui/cal-search-bar.c: (cal_search_bar_class_init): Remove needless
	EFilterBarClass.

2007-07-18  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #326388

	* gui/calendar-component.c: (ensure_sources):
	Set 'delete=no' property for birthdays_source if its not set.

2007-07-29  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #444433 from Lucky

	* gui/cal-search-bar.c: (make_suboptions):
	* gui/caltypes.xml:
	* gui/memotypes.xml:
	* gui/tasktypes.xml:

2007-07-27  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #457394

	* gui/e-calendar-table.c: (hide_completed_rows):
	Properly free component with e_cal_model_free_component_data.
	* gui/e-calendar-table.c: (show_completed_rows):
	Reference 'client' on new component.

2007-07-27  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	* dialogs/cal-prefs-dialog.c: (calendar_prefs_dialog_finalize):
	* dialogs/task-page.c: (task_page_create_source_option_menu):
	* dialogs/e-send-options-utils.c:
	(e_sendoptions_utils_set_default_data):
	* dialogs/url-editor-dialog.c: (init_widgets):
	* dialogs/event-page.c: (event_page_create_source_option_menu):
	* dialogs/memo-page.c: (memo_page_create_source_option_menu):
	* e-week-view-event-item.c: (e_week_view_event_item_draw):
	* e-day-view-top-item.c: (e_day_view_top_item_draw_long_event):
	* e-pub-utils.c: (e_pub_publish): Plugged memory leaks.

2007-07-26  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	* gui/main.c: Do not need to call g_source_remove(). If the callback
	function returns FALSE, the event source is automatically removed.

2007-07-26  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	* gui/alarm-notify/config-data.c, gui/tasks-component.c,
	gui/calendar-component.c, gui/memos-component.c: Plugged memory leaks.

2007-07-26  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #273699

	* gui/alarm-notify/notify-main.c: (main):
	Do g_warning instead of g_error when factory could not be created.

2007-07-18  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	* gui/cal-search-bar.c: (cal_search_bar_construct): Remove "/" as
	separator.

2007-07-09  Chenthill Palanisamy  <pchenthill@novell.com>

	reviewed by: Veerapuram Varadhan <vvaradhan@novell.com>

	* gui/dialogs/comp-editor.c: (save_comp), (save_comp_with_send),
	(real_edit_comp): Organizer/Sentby can save/edit components.
	* gui/dialogs/event-editor.c: (event_editor_edit_comp):
	* gui/e-calendar-view.c: (e_calendar_view_add_event),
	(e_calendar_view_cut_clipboard), (delete_event),
	(e_calendar_view_delete_selected_occurrence),
	(set_attendee_status_for_delegate),
	(e_calendar_view_edit_appointment),
	(e_calendar_view_modify_and_send):
	* gui/itip-utils.c: (get_attendee),
	(get_attendee_if_attendee_sentby_is_user), (sanitize_component),
	(itip_get_comp_attendee), (comp_to_list), (comp_subject),
	(comp_limit_attendees), (comp_sentby), (itip_send_comp),
	(reply_to_calendar_comp): Adding the exchange delegation feature.

	Committing on behalf of Suman Manjunath <msuman@novell.com> 

2007-07-09  Matthew Barnes  <mbarnes@redhat.com>

	* gui/e-memos.c: (e_memos_setup_view_menus)
	* gui/e-tasks.c: (e_tasks_setup_view_menus)
	* gui/gnome-cal.c: (gnome_calendar_setup_view_menus)
	Abort if ETable specification file fails to load.

2007-06-27  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #234294

	* gui/dialogs/cancel-comp.c: (is_past_event): New helper function.
	* gui/dialogs/cancel-comp.c: (cancel_component_dialog):
	Returns FALSE to EVENTs in the past, based on date, not time part.

2007-07-09  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #300584

	* gui/e-calendar-view.h: Added public helper
	function e_calendar_view_get_icalcomponent_summary
	* gui/e-calendar-view.c: (e_calendar_view_get_icalcomponent_summary),
	(icalcomp_contains_category), (e_calendar_view_get_tooltips):
	Implementing helper functions and added year number also into tooltip.
	* gui/e-day-view.c: (e_day_view_update_long_event_label):
	* gui/e-week-view.c: (e_week_view_reshape_event_span),
	(cancel_editing): Using e_calendar_view_get_icalcomponent_summary.

2007-07-09  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #438613 and #329594

	* gui/dialogs/event-page.c: (sensitize_widgets):
	Disable recurrence and free/busy actions with read only calendars.
	* gui/dialogs/comp-editor.c: (prompt_and_save_changes):
	When clicked "Save", then claim on readonly calendars and didn't
	discard changes silently.
	* gui/dialogs/comp-editor.c: (menu_file_save_cb):
	Claims on readonly calendars before validating form datas.

	* gui/e-meeting-list-view.c: (build_table): Fixed runtime warning.
	* gui/dialogs/alarm-list-dialog.glade: Fixed runtime warnings.

2007-07-03  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #321741

	* gui/e-calendar-view.h:
	* gui/e-calendar-view.c: (e_calendar_view_new_appointment_full):
	Added new parameter 'actual_day', with true always use actual day.
	* gui/e-calendar-view.c: (on_new_event), (on_new_meeting),
	(e_calendar_view_new_appointment):
	* gui/calendar-component.c: (create_new_event):
	* gui/e-week-view.c: (e_week_view_on_button_press):
	Changing call of 'e_calendar_view_new_appointment_full'.

2007-06-22  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #328484

	* gui/calendar-component.c: (source_changed_cb):
	New callback to refresh view after source changed.
	* gui/calendar-component.c: (source_added_cb),
	(source_removed_cb): Connecting and disconnecting
	on change callback to source.

2007-07-02  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #445526

	* gui/dialogs/alarm-list-dialog.h: (alarm_list_dialog_set_client):
	* gui/dialogs/alarm-list-dialog.c: (alarm_list_dialog_set_client)
	New function, need to be called when page source changed.
	* gui/dialogs/event-page.c: (struct _EventPagePrivate), (init_widgets),
	(event_page_init), (event_page_finalize), (source_changed_cb):
	New private property alarm_list_dlg_widget points on dialog's box and
	calling new callback in source_changed_cb.

2007-06-18  Srinivasa Ragavan  <sragavan@novell.com>

        ** Fix for bug #448223 from Gilles Dartiguelongue

	* gui/cal-search-bar.c: (generate_viewoption_menu):

2007-06-11  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #325882

	* gui/dialogs/e-delegate-dialog.glade:
	* gui/dialogs/schedule-page.glade:
	* gui/goto-dialog.glade:
	* gui/e-itip-control.glade:
	Changed GTK_WIN_POS_NONE to GTK_WIN_POS_CENTER_ON_PARENT.

2007-06-15  Matthew Barnes  <mbarnes@redhat.com>

	* gui/dialogs/alarm-dialog.c:
	Remove the aalarm_attach widget and retrieve the selected filename
	using the GtkFileChooser API (#440075).

2007-06-06  Nickolay V. Shmyrev  <nshmyrev@yandex.ru>

	* Makefile.am:
	
	Reverted automake 1.6 breakage. Fixes bug 444747. 
	Patch by Patch by Daniel Gryniewicz <dang@nemesis.fprintf.net>.

2007-06-04  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/Makefile.am: Added the filter flags and the new files.
	* gui/cal-search-bar.c: (cal_search_bar_class_init),
	(cal_search_bar_init), (cal_search_bar_destroy),
	(get_current_category), (get_show_option_sexp),
	(notify_e_cal_view_contains), (notify_category_is), (regen_query),
	(setup_category_options), (make_suboptions),
	(search_menu_activated), (cal_search_bar_construct),
	(cal_search_bar_get_category), (cal_search_bar_get_time_range):
	* gui/cal-search-bar.h: 
	* gui/e-cal-model.[ch]:
	(e_cal_model_set_search_query_with_time_range): Set the time range
	and the search query.							
	* gui/gnome-cal.c: (set_search_query),
	(search_bar_sexp_changed_cb), (update_memo_view),
	(gnome_calendar_init), (update_view_times), (display_view),
	(display_view_cb), (gnome_calendar_update_date_navigator): Hide
	the date navigator in list view for searches based on date.	   
	* gui/caltypes.xml:
	* gui/memotypes.xml:
	* gui/tasktypes.xml: Added the Advanced search options.

	Committing on behalf of Keshav Upadhyaya <ukeshav@novell.com> and 
	Abhishek Parwal <pabhishek@novell.com>.

2007-06-03  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #386503 from Matthew Barnes

	* gui/dialogs/comp-editor.c: (comp_editor_show_help):

2007-06-03  Srinivasa Ragavan <sragavan@novell.com>

        ** Fix for version removal from Installed files from Gilles Dartiguelongue 

	* Makefile.am:
	* conduits/calendar/Makefile.am:
	* conduits/memo/Makefile.am:
	* conduits/todo/Makefile.am:
	* gui/Makefile.am:
	* gui/alarm-notify/Makefile.am:

2006-09-08  Ushveen Kaur <kushveen@novell.com>

	** Fixes bug #347767
	
	* gui/dialogs/send-comp.c : (send_component_prompt_subject):
	error id "calendar:prompt-send-no-subject-memo" or
	"calendar:prompt-send-no-subject-memo-to-recipients" is called
	when memo is saved without a summary.
	* calendar.error.xml : error id "prompt-send-no-subject-memo" is
	added.
	
2007-06-02  Gilles Dartiguelongue  <dartigug@esiee.fr>

	** Fixes bug #439122

	* conduits/calendar/calendar-conduit.c:
	(local_record_to_pilot_record):
	* conduits/memo/memo-conduit.c: (local_record_to_pilot_record):
	* conduits/todo/todo-conduit.c: (local_record_to_pilot_record):
	* gui/calendar-component.c: (selector_tree_drag_data_received):
	* gui/dialogs/alarm-list-dialog.c: (edit_clicked_cb):
	* gui/dialogs/cal-prefs-dialog.c: (alarms_selection_changed):
	* gui/dialogs/calendar-setup.c: (eccp_commit):
	* gui/dialogs/comp-editor.c: (drop_action),
	(comp_editor_get_mime_attach_list):
	* gui/dialogs/event-page.c: (remove_clicked_cb):
	* gui/dialogs/task-page.c: (remove_clicked_cb):
	* gui/e-day-view.c: (e_day_view_on_drag_data_get):
	* gui/e-itip-control.c: (url_requested_cb), (insert_boxes),
	(insert_ok):
	* gui/e-meeting-time-sel.c: (e_meeting_time_selector_construct):
	* gui/e-memos.c: (table_drag_data_get), (backend_error_cb):
	* gui/e-tasks.c: (table_drag_data_get), (e_tasks_open_task_id):
	* gui/e-week-view-event-item.c: (e_week_view_event_item_draw):
	* gui/gnome-cal.c: (backend_error_cb):
	* gui/memos-component.c: (selector_tree_drag_data_received):
	* gui/print.c: (print_calendar):
	* gui/tasks-component.c: (selector_tree_drag_data_received):
	compilation warnings cleanup

2007-06-01  Milan Crha  <mcrha@redhat.com>

	** Fix for bug #321741

	* gui/e-calendar-view.c: (e_calendar_view_new_appointment_full):
	Default first date for appointment or meeting is changed on actual
	date if have selected start date in past. (This doesn't affect
	double click in calendar view.)

2007-05-27  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #351729 from Milan Crha

	* gui/dialogs/event-editor.c: (event_editor_construct):
	* gui/dialogs/event-page.glade:
	* gui/dialogs/task-editor.c: (task_editor_construct):

2007-05-27  Srinivasa Ragavan  <sragavan@novell.com>

	* gui/e-cal-popup.c: Addup missing hooks in the previous commit.

2007-05-27  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #326388 from Raghavendaran

	* gui/calendar-component.c: (ensure_sources): Create a popup key for
	readonly calendar.
	* gui/e-cal-popup.c: (e_cal_popup_target_new_source):
	* gui/e-cal-popup.h:

2007-05-25  Matthew Barnes  <mbarnes@redhat.com>

	* gui/migration.c (create_calendar_sources), (create_task_sources),
	(create_memo_sources):
	* gui/tasks-component.c (ensure_sources):
	* gui/calendar-component.c (ensure_sources):
	* gui/memos-component.c (ensure_sources):
	Don't assume the relative URI is non-NULL (#427232).

2007-05-24  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #424562

	* gui/dialogs/recur-comp.c (recur_component_dialog):
	Remove check for obsolete GTK+ version.

	* gui/alarm-notify/alarm-queue.c:
	EggTrayIcon is dead; always use GtkStatusIcon.

2007-05-14  Srinivasa Ragavan  <sragavan@novell.com>

	* gui/GNOME_Evolution_Calendar.server.in.in: Fix for bug #407104

2007-05-14  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #330098 from Naresh

	* gui/dialogs/select-source-dialog.c: (select_source_dialog):

2007-05-12  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #337616

	* gui/Makefile.am: Add $(schema_DATA) to DISTCLEANFILES.

2007-05-12  simon.zheng  <simon.zheng@sun.com>

	** Fix for bug #427789

        * gui/e-calendar-view.c: (e_calendar_view_copy_clipboard):
        The last arguments in API gtk_clipboard_set_text() should be
        the length of string in bytes rather than in characters.

2007-05-11  Srinivasa Ragavan  <sragavan@novell.com>

	* gui/GNOME_Evolution_Calendar.server.in.in: Add tango icon to
	preference window.

2007-05-04  Srinivasa Ragavan  <sragavan@novell.com>

	** Downstream fixes from OpenSUSE

	* gui/dialogs/event-page.c: (update_time):
	* gui/e-cal-component-preview.c: (write_html):

2007-05-04  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #415562

	* gui/alarm-notify/alarm-queue.c: (tray_icon_clicked_cb),
	(popup_menu), (display_notification):

2007-04-28  Kjartan Maraas  <kmaraas@gnome.org>

	* gui/dialogs/task-page.glade: Fix a mnemonic conflict.
	Patch from Jens Knutson. Closes bug #397463.

2007-04-20  Matthew Barnes  <mbarnes@redhat.com>

	* gui/calendar-commands.c:
	* gui/dialogs/comp-editor.c:
	* gui/e-calendar-table.c:
	* gui/e-calendar-view.c:
	* gui/e-memo-table.c:
	* gui/memos-control.c:
	* gui/print.c:
	* gui/print.h:
	* gui/tasks-control.c:
	Refactor the printing infrastructure. (#426816)

2007-04-19  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #429422

	* gui/e-select-names-renderer.c
	(e_select_names_renderer_editing_done):
	Use gtk_cell_renderer_stop_editing() instead of
	gtk_cell_renderer_editing_canceled().

	* gui/dialogs/task-details-page.c (get_widgets):
	* gui/dialogs/schedule-page.c (get_widgets):
	* gui/dialogs/task-page.c (get_widgets):
	* gui/dialogs/recurrence-page.c (get_widgets):
	* gui/dialogs/event-page.c (get_widgets):
	* gui/dialogs/memo-page.c (get_widgets):
	Use g_object_ref() instead of gtk_widget_ref().

	* gui/dialogs/task-details-page.c (task_details_page_finalize):
	* gui/dialogs/schedule-page.c (schedule_page_finalize):
	* gui/dialogs/task-page.c (task_page_finalize):
	* gui/dialogs/recurrence-page.c (recurrence_page_finalize):
	* gui/dialogs/event-page.c (event_page_finalize):
	* gui/dialogs/memo-page.c (memo_page_finalize):
	Use g_object_unref() instead of gtk_widget_unref().

	* gui/dialogs/event-editor.c (create_schedule_page):
	* gui/dialogs/memo-editor.c (memo_editor_construct):
	* gui/dialogs/task-editor.c (task_editor_construct):
	* gui/print.c (print_table):
	* conduits/todo/todo-conduit.c (todoconduit_load_configuration):
	* conduits/calendar/calendar-conduit.c
	(calconduit_load_configuration):
	* conduits/memo/memo-conduit.c (memoconduit_load_configuration):
	Use g_object_ref_sink() instead of gtk_object_sink().

	* gui/dialogs/task-details-page.c (sensitize_widgets):
	* gui/dialogs/task-page.c (sensitize_widgets):
	* gui/dialogs/event-page.c (sensitize_widgets),
	(event_page_fill_widgets):
	* gui/dialogs/memo-page.c (sensitize_widgets),
	(memo_page_fill_widgets):
	* gui/e-timezone-entry.c (e_timezone_entry_init):
	Use gtk_editable_set_editable() instead of gtk_entry_set_editable().

	* gui/dialogs/task-details-page.c (get_widgets):
	* gui/dialogs/schedule-page.c (get_widgets):
	* gui/dialogs/task-page.c (get_widgets):
	* gui/dialogs/recurrence-page.c (get_widgets):
	* gui/dialogs/event-page.c (get_widgets):
	* gui/dialogs/memo-page.c (get_widgets):
	Use g_object_ref() instead of gtk_accel_group_ref().

	* gui/dialogs/comp-editor-page.c (comp_editor_page_destroy):
	Use g_object_unref() instead of gtk_accel_group_unref().

	* gui/dialogs/task-page.c (task_page_new):
	* gui/dialogs/memo-page.c (memo_page_new):
	Use g_object_new() instead of gtk_type_new().

	* gui/dialogs/comp-editor.c (save_comp), (obj_modified_cb):
	* gui/dialogs/comp-editor-page.c
	(comp_editor_page_display_validation_error):
	* gui/e-memos.c (backend_error_cb):
	* gui/e-itip-control.c (update_item), (update_attendee_status),
	(send_item), (send_freebusy):
	* gui/gnome-cal.c (backend_error_cb):
	* gui/e-tasks.c (backend_error_cb):
	* gui/e-cell-date-edit-text.c (show_date_warning):
	Use gtk_message_dialog_new() instead of gnome_error_dialog(),
	gnome_warning_dialog(), gnome_question_dialog(), or gnome_ok_dialog().

	* gui/dialogs/comp-editor.c (comp_editor_show_page):
	* gui/dialogs/alarm-dialog.c (action_selection_done_cb):
	* gui/gnome-cal.c (display_view):
	* importers/icalendar-importer.c (button_toggled_cb):
	Use gtk_notebook_set_current_page() instead of
	gtk_notebook_set_page().

	* gui/dialogs/alarm-dialog.glade:
	* gui/dialogs/alarm-dialog.c:
	Use GtkFileChooserButton instead of GnomeFileEntry.

	* gui/e-memos.c (e_memos_class_init):
	* gui/e-tasks.c (e_tasks_class_init):
	Use g_cclosure_marshal_VOID__INT instead of gtk_marshal_NONE__INT.

	* gui/e-day-view.c (e_day_view_style_set), (e_day_view_check_layout):
	* gui/e-itip-control.c (e_itip_control_init):
	* gui/gnome-cal.c (gnome_calendar_hpane_resized):
	* gui/e-week-view.c (e_week_view_style_set):
	* gui/e-meeting-time-sel (e_meeting_time_selector_construct),
	(e_meeting_time_selector_style_set):
	Use gtk_widget_set_size_request() instead of gtk_widget_set_usize().

	* gui/e-day-view.c (e_day_view_stop_auto_scroll),
	(e_day_view_cancel_layout):
	* gui/e-week-view.c (e_week_view_cancel_layout):
	Use g_source_remove() instead of gtk_timeout_remove().

	* gui/tasks-component.c (task_component_peek):
	* gui/calendar-component.c (calendar_component_peek):
	* gui/memos-component.c (memos_component_peek):
	Use g_mkdir_with_parents() instead of e_util_mkdir_hier().

	* gui/print.c (range_selector_new):
	* gui/e-day-view-time-item.c (e_day_view_time_item_show_popup_menu):
	Use gtk_radio_button_get_group() instead of gtk_radio_button_group().

	* gui/e-day-view-time-item.c (e_day_view_time_item_show_popup_menu):
	* gui/e-meeting-time-sel.c (e_meeting_time_selector_construct):
	Use gtk_menu_shell_append() instead of gtk_menu_append().

	* gui/e-meeting-time-sel.c (e_meeting_time_selector_construct):
	e_button_new_with_stock_icon() is dead; just do it manually.

	* gui/e-meeting-time-sel.c (e_meeting_time_selector_construct):
	Use gtk_radio_menu_item_get_group() instead of
	gtk_radio_menu_item_group().

	* gui/e-meeting-time-sel.c (e_meeting_time_selector_construct),
	(e_meeting_time_selector_draw_shadow):
	Use gtk_paint_shadow() instead of gtk_draw_shadow().

	* gui/e-meeting-time-sel.c (e_meeting_time_selector_timeout_handler):
	Remove gtk_layout_freeze() and gtk_layout_thaw().

2007-04-10  Andre Klapper  <a9016009@gmx.de>

	* gui/dialogs/cal-prefs-dialog.glade: add missing mnemonic widgets. 
	Fixes bug #329168.

2007-04-06  Matthew Barnes  <mbarnes@redhat.com>

	* gui/itip-utils.c (reply_to_calendar_comp):
	Use a GString to construct the body contents and also fix several
	memory leaks.  (#408423)  Based on a patch from Daniel Gryniewicz.

2007-04-06  Matthew Barnes  <mbarnes@redhat.com>

	* gui/memos-component.c (impl__get_userCreatableItems):
	Fix a duplicate keyboard shortcut.  (#353922)
	Patch from Diego Escalante Urrelo

2007-04-05  Matthew Barnes  <mbarnes@redhat.com>

	* gui/print.c (print_calendar): Fix a crasher. (#401539)

2007-04-01  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #373116

	* gui/calendar-component.c (ensure_sources):
	* gui/e-cal-model.c (ecm_get_color_for_component):
	* gui/memos-component.c (ensure_sources):
	* gui/migration.c (create_calendar_contact_source),
	(create_calendar_sources), (create_task_sources),
	(create_memo_sources), (add_gw_esource):
	* gui/tasks-component.c (ensure_sources):
	Use the new ESource color API.

	* gui/calendar-component.c
	(calendar_config_get_tasks_due_today_color),
	(calendar_config_get_tasks_overdue_color):
	Return a GdkColor instead of an X color specification.

	* gui/calendar-component.c
	(calendar_config_set_tasks_due_today_color),
	(calendar_config_set_tasks_overdue_color):
	Accept a GdkColor instead of an X color specification.

	* gui/e-cal-model-tasks.c (ecmt_get_color_for_component):
	Adapt to modified color API in calendar-component.c by converting
	the GdkColor to an X color specification.  This is an ugly hack to
	be fixed later.

	* gui/dialogs/cal-prefs-dialog.c:
	* gui/dialogs/cal-prefs-dialog.glade:
	* gui/dialogs/calendar-setup.c:
	* gui/dialogs/calendar-setup.glade:
	Migrate from GnomeColorPicker to GtkColorButton.

2007-03-29  Matthew Barnes  <mbarnes@redhat.com>

	* gui/e-cal-component-memo-preview.c (write_html):
	Use a format string ("%s") when passing uncontrolled data to a
	printf-style function (CVE-2007-1002).

2007-03-29  Matthew Barnes  <mbarnes@redhat.com>

	* gui/e-day-view.c:
	* gui/e-week-view.c:
	* gui/tasks-control.c:
	Fix "incompatible pointer type" warnings (#360619).

2007-03-27  Matthew Barnes  <mbarnes@redhat.com>

	* gui/alarm-notify/alarm-queue.c:
	* gui/dialogs/comp-editor.c:
	* gui/dialogs/event-page.c:
	* gui/dialogs/memo-page.c:
	* gui/dialogs/task-page.c:
	* gui/e-cal-popup.c:
	* gui/e-meeting-list-view.c:
	* gui/e-tasks.c:
	* gui/gnome-cal.c:
	Don't mix declarations and code (#405495).

2007-03-20  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes part of bug #419524

	* Include <glib/gi18n.h> instead of <libgnome/gnome-i18n.h>.

2007-03-05  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/dialogs/event-page.c: (event_page_fill_component): Set the
	description only if summary has some value.								
	* gui/dialogs/schedule-page.c: (schedule_page_update_free_busy):
	* gui/dialogs/schedule-page.h:
	* gui/e-meeting-time-sel.[ch]: exposed e_meeting_time_selector_refresh_free_busy.
	* gui/dialogs/event-editor.c: (menu_action_freebusy_cb),
	(create_schedule_page), (menu_action_freebusy_cmd),
	(event_editor_construct): Form the FreeBusy dialog only when the button is
	clicked. The FreeBusy queries would not start until the button is clicked. So
	the users can choose the appropriate dates in the editor before the clicking 
	the button.

2007-02-12  Kjartan Maraas  <kmaraas@gnome.org>

	* gui/e-meeting-list-view.c: (e_meeting_list_view_init):
	Fix window title. Patch from Matthias Clasen. Closes
	bug #381498.

2007-02-12  Srinivasa Ragavan  <sragavan@novell.com>

	** Print migration updates from Ebby Wiselyn

	* gui/print.c: (print_day_view), (print_calendar), (print_comp),
	(print_table), (comp_draw_page), (cal_draw_page),
	(table_draw_page), (create_custom_widget), (apply_custom_widget):

2007-01-22  Srinivasa Ragavan  <sragavan@novell.com>

	Committing GtkPrint migration from Ebby Wiselyn.

	* gui/print.c: (evo_calendar_print_cal_data_new),
	(evo_calendar_print_data_new),
	(evo_calendar_print_renderer_get_width),
	(print_border_with_triangles), (print_border_rgb), (print_border),
	(print_rectangle), (print_text), (print_text_size),
	(print_text_size_bold), (titled_box), (print_month_small),
	(bound_text), (print_day_background), (print_day_add_event),
	(print_day_long_event), (print_day_event), (print_day_details),
	(print_week_long_event), (print_week_day_event),
	(print_week_event), (print_week_view_background),
	(print_week_summary), (print_month_summary), (print_todo_details),
	(print_day_view), (print_week_view), (print_month_view),
	(print_year_view), (print_comp_item), (print_calendar),
	(print_comp), (print_title), (print_table), (comp_draw_page),
	(cal_draw_page), (table_draw_page):

2007-01-08  Veerapuram Varadhan  <vvaradhan@novell.com>

	Patch submitted by Nathan Owens <pianocomp81@yahoo.com> and 
	Jerry Yu <jijun.yu@sun.com>

	* conduits/calendar/calendar-conduit.c: 
	* conduits/todo/todo-conduit.c:
	* conduits/memo/memo-conduit.c:Add pilot-link 0.12
	compatibility
	
2007-01-08  Matthew Barnes  <mbarnes@redhat.com>
	
	Fixes #383027
	* gui/itip-utils.c: (itip_get_comp_attendee): Handle the case
 	when there is no default account.						      

2007-01-08  Matthew Barnes  <mbarnes@redhat.com>

	Fixes #377511
	* gui/e-meeting-list-view.c: (get_index_from_role):
	Return the default value 1.
	(role_edited_cb): Move the attendee to the right section
	in the name selector.			  

2007-01-08  Wang Xin  <jedy.wang@sun.com>
	
	Fixes #389966
	* gui/e-cal-model-tasks.c: (set_status):
	Do not create the status property if its pointing to None.

2007-01-08  Wang Xin  <jedy.wang@sun.com>

	Fixes #389961
	* gui/e-cal-model.c: (e_cal_model_set_instance_times):
	Check if the item is a event before processing the end time.

2006-12-04  Matthew Barnes  <mbarnes@redhat.com>

	Fixes bug #357970

	* gui/e-alarm-list.c:
	* gui/e-calendar-table.c:
	* gui/e-day-view.c:
	* gui/e-meeting-attendee.c:
	* gui/e-meeting-store.c:
	* gui/e-meeting-time-sel-item.c:
	* gui/e-meeting-time-sel.c:
	* gui/e-week-view-main-item.c:
	* gui/e-week-view.c:
	* gui/gnome-cal.c:
	* gui/goto.c:
	* gui/dialogs/event-page.c:
	* gui/dialogs/task-page.c:
	Don't call deprecated GLib / GDK functions.

2006-12-04 Nickolay V. Shmyrev <nshmyrev@yandex.ru>

	Fixes #270751.
	Adds support for command line uri in tasks.
	* gui/GNOME_Evolution_Calendar.server.in.in: Added the specification
	for task uri.
	* gui/e-calendar-table.c: (e_calendar_table_open_selected),
	(e_calendar_table_open_task), (open_task_by_row),
	(e_calendar_table_on_open_task), (e_calendar_table_on_assign):
	* gui/e-calendar-table.h:
	* gui/tasks-control.c: (tasks_control_assign_cmd): 
	* gui/e-tasks.c: (e_tasks_open_task_id):
	* gui/e-tasks.h: Pass just the required arguments.
	* gui/tasks-component.c: (impl_handleURI),
	(tasks_component_class_init): Implement the uri interface

2006-11-28  Wang Xin  <jedy.wang@sun.com>

	Fix for bug #380064

	* gui/alarm-notify/alarm-queue.c: (mail_notification): Only
	popup the dialog if calendar backend does not support
	email alarm.

2006-12-03  Harish Krishnaswamy  <kharish@novell.com>

	* gui/calendar-config.c:
	(calendar_config_get_icaltimezone): Fix leaks of
	'location' at various exit points. 

2006-11-28  Srinivasa Ragavan  <sragavan@novell.com>

	Added support to print/preview from Calendar Editor.

	* gui/dialogs/comp-editor.c: (menu_file_print_cb),
	(menu_file_print_preview_cb):

2006-11-28  Daniel Gryniewicz <dang@gentoo.org>

	** Fix for bug #349966

	* gui/apps_evolution_calendar.schemas.in.in:
	* gui/calendar-config-keys.h:
	* gui/dialogs/alarm-dialog.c: (action_selection_done_cb):

2006-11-20  Carlos Garcia Campos  <carlosgc@gnome.org>
	
	Fixes bug #367183
	* gui/e-cal-model.c: (e_cal_model_set_instance_times): Make end_time a
	valid date for all day events when ical file doesn't provide neither
	DTEND nor DURATION for such events. 

2006-11-15  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/gnome-cal.c: (client_cal_opened_cb),
	(default_client_cal_opened_cb): Diplay a warning
	if calendar fails to open.

2006-11-14  Harish Krishnaswamy  <kharish@novell.com>

	* gui/gnome-cal.c: (gnome_calendar_destroy):
	Disconnect signal handlers before gcal is destroyed.
	Fixes #208959 (bugzilla.novell.com).

2006-11-07  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/alarm-notify/alarm-notify.c: (list_changed_cb),
	(load_calendars), (cal_opened_cb), (alarm_notify_add_calendar):
	* gui/dialogs/cal-prefs-dialog.c: (alarms_selection_changed):
	Disable alarms for subscribed exchange calendars.
	Fixes #208318 (bugzilla.novell.com)

2006-11-06  Chenthill Palanisamy  <pchenthill@novell.com>

	Committing for Ben Gamari <bgamari@gmail.com>

	* recurrence-page.c: Correct recurrence editor default behavior.
	Fixes #354875 

2006-10-16  Kjartan Maraas  <kmaraas@gnome.org>

	* gui/cal-search-bar.c: (notify_e_cal_view_contains),
	(regen_query), (generate_viewoption_menu), (make_suboptions):
	Add missing header, #if 0 out some unused code, copy and free
	some data to avoid warnings.
	* gui/dialogs/cal-attachment-select-file.c: (run_selector):
	* gui/dialogs/comp-editor.c: (fill_widgets):
	* gui/dialogs/delete-comp.c: (prompt_retract_dialog):
	Typecasting fixes.
	* gui/dialogs/event-page.c: (init_widgets):
	* gui/dialogs/memo-editor.c: (memo_editor_edit_comp):
	Remove some unused code.
	* gui/dialogs/memo-page.c: (fill_comp_with_recipients):
	More GString changes.
	* gui/e-cal-component-memo-preview.c: (write_html):
	Micro-optimization of GString handling.
	* gui/e-cal-component-preview.c: (write_html):
	Same as above.
	* gui/e-cal-model-tasks.c:
	(e_cal_model_tasks_mark_task_incomplete):
	Remove unused variables.
	* gui/e-cal-model.c: (get_description),
	(e_cal_model_set_instance_times):
	More GString stuff and constification of the timezone arg.
	* gui/e-cal-model.h:
	Constify
	* gui/e-cal-popup.c: (ecalp_standard_menu_factory):
	Remove unused code.
	* gui/e-day-view-config.c: (e_day_view_config_set_view):
	Fix signedness warnings.
	* gui/e-day-view-main-item.c:
	(e_day_view_main_item_draw_day_event):
	Init a variable to NULL to avoid a compiler warning.
	* gui/e-day-view-time-item.c:
	(e_day_view_time_item_get_column_width):
	Remove unused var.
	* gui/e-day-view.c: (e_day_view_update_event_label),
	(e_day_view_on_text_item_event):
	Add braces and a cast to get rid of compiler warnings.
	* gui/e-meeting-list-view.c:
	(e_meeting_list_view_remove_attendee_from_name_selector),
	(attendee_edited_cb), (row_activated_cb), (add_to_list):
	Add some typecasts to avoid compiler warnings and remove an unused var.
	* gui/e-meeting-store.c: (e_meeting_store_get_num_queries):
	Return a value when checking the arguments.
	* gui/e-tasks.c: (setup_widgets):
	Add a cast to fix a compiler warning.
	* gui/e-week-view.c: (tooltip_event_cb),
	(e_week_view_on_text_item_event):
	More typecasting.
	* gui/gnome-cal.c: (gnome_calendar_get_tag),
	(gnome_calendar_cut_clipboard), (gnome_calendar_copy_clipboard):
	More typecasting and fix cutting/copying memos.
	* gui/gnome-cal.h:
	Add a prototype for gnome_calendar_get_tag().
	* gui/itip-utils.c: (comp_to_list):
	Fix shadowed variable.
	* gui/memos-component.c: (set_info):
	* gui/migration.c: (get_source_name):
	* gui/tasks-component.c: (set_info):
	GString fixes.

2006-10-16  Ushveen Kaur <kushveen@novell.com>

	** Fixes bug #347768
	
	* gui/dialogs/memo-page.glade : Label changed from "_Memo Content"
	to "_Description".

2006-10-16 Ushveen Kaur <kushveen@novell.com>

	** Fixes bug #329696
	* gui/e-itip-control.c : (show_current_event),(show_current_todo):
	String change to make it more clear.

2006-10-16  Harish Krishnaswamy  <kharish@novell.com>

	* gui/e-day-view.c: (e_day_view_init),
	(e_day_view_on_top_canvas_button_press),
	(e_day_view_on_main_canvas_button_press),
	(e_day_view_on_long_event_button_press),
	(e_day_view_on_event_button_press),
	(e_day_view_on_text_item_event): Disable tooltips
	on drag, resize and edit. Fixes #333224. Patch 
	submitted by Srinivasa Ragavan.

2006-10-14  Matthew Barnes  <mbarnes@redhat.com>

	Fixes bug #352546

	* gui/dialogs/event-page.c: (init_widgets) Fix typo in a
	translated string ("appointement").

2006-10-03  Francisco Javier F. Serrador  <serrador@openshine.com>

	* gui/dialogs/recurrence-page.c: Fix to allow translate some
	strings (Closes: #359271)

2006-09-30  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #343369
	* gui/dialogs/comp-editor.c: (attach_message), (drop_action):
	Set the filename as email followed the number of the attachment.

2006-09-28  Ushveen Kaur <kushveen@novell.com>

	** Fixes bug #261082

	* gui/e-itip-control.c: (write_recurrence_piece): Translator
	comments added.

2006-08-24 Ushveen Kaur <kushveen@novell.com>

	** Fixes bug #261980, #325611

	* gui/e-itip-control.c (write_recurrence_piece) (set_date_label) :
	Translator comment added.

2006-08-24 Ushveen Kaur <kushveen@novell.com>

	** Fixes bug #325613

	* gui/dialogs/recurrence-page.c (make_recur_month_menu) :
	Translator comment added.

2006-09-28  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #334692
	
	* gui/e-week-view.c: (e_week_view_on_scroll), (tooltip_destroy),
	(tooltip_event_cb), (e_week_view_on_text_item_event): Remove the
	timers that are left out when using scroll. They seem to trigger
	crashes.

2006-09-21  Srinivasa Ragavan  <sragavan@novell.com>
	
	** Fix for bug #354775
	
	* gui/calendar-component.c: (create_component_view): Fix to restore
	the pane position.

2006-09-18  Matthew Barnes  <mbarnes@redhat.com>

	Fixes #351332

	* gui/cal-search-bar.c:
	* gui/e-cal-model-tasks.h:
	* gui/e-calendar-view.h:
	* gui/gnome-cal.h:
	* gui/dialogs/memo-page.h:
	Fix implicit function declarations.

2006-09-18  Matthew Barnes  <mbarnes@redhat.com>

	** Fixes bug #352450

	* gui/calendar-commands.c:
	* gui/e-day-view-main-item.c:
	* gui/e-day-view-top-item.c:
	* gui/e-meeting-list-view.c:
	* gui/e-meeting-time-sel-item.c:
	* gui/e-meeting-time-sel.c:
	* gui/e-week-view-event-item.c:
	Replace deprecated GLib and GDK function calls.

2006-09-11  Chenthill Palanisamy  <pchenthill@novell.com>
	
	Fixes #344276
	* gui/e-cal-component-memo-preview.c: (write_html): made 
	the memo preview work fine with special char.
	Committing on behalf of Arvind <sa.phoenix@gmail.com>.

2006-09-08  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #343409
	* gui/e-select-names-editable.c:
	(e_select_names_editable_get_emails),
	(e_select_names_editable_get_name),
	(e_select_names_editable_get_names): Reverting the 
	fix for the bug 320101 as it breaks delegation feature.
	* gui/e-meeting-list-view.c: (attendee_edited_cb): copy
	the delfrom parameter from the attendee being edited.							   

2006-09-01  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #353763
	* gui/dialogs/memo-page.c: (sensitize_widgets):
	set sens to TRUE if its not a shared memo.

2006-08-30  Srinivasa Ragavan  <sragavan@novell.com>
	
	** Fix for bug #344463

	* gui/alarm-notify/alarm-queue.c: (open_alarm_dialog),
	(tray_icon_clicked_cb): Use unref to remove GtkStatusIcon.

2006-08-29  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-cal-model-memos.c: (ecmm_fill_component_from_model):
	set dtstart while creating memos using quick add.

2006-08-28  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/migration.c: (is_groupwise_account), (add_gw_esource),
	(migrate_memos): Create e-sources for the Groupwise reminder
	notes while migrating to 2.8 from a lower version.			

2006-08-28  Andre Klapper  <a9016009@gmx.de>

	** Fix for bug #352988
	
	* gui/gnome-cal.c: (setup_widgets): Marking two strings for 
	translation. 

2006-08-24  Ross Burton  <ross@openedhand.com>

	* gui/e-week-view-main-item.c:
	Don't manipulate the style's font description and don't use custom
	sizes (#347933).

2006-08-23  Kjartan Maraas  <kmaraas@gnome.org>

	* gui/alarm-notify/alarm-notify-dialog.c: (dialog_response_cb):
	* gui/alarm-notify/alarm-notify.c: (list_changed_cb),
	(dequeue_client), (alarm_msgport_replied),
	(alarm_notify_add_calendar), (alarm_notify_remove_calendar):
	* gui/alarm-notify/alarm-queue.c: (queue_midnight_refresh),
	(add_client_alarms_cb), (midnight_refresh_async),
	(remove_queued_alarm), (add_component_alarms), (cal_opened_cb),
	(remove_alarms), (remove_comp), (query_objects_changed_async),
	(edit_component), (tray_list_remove_cqa_async),
	(tray_list_remove_data_async), (notify_dialog_cb),
	(open_alarm_dialog), (tray_icon_clicked_cb), (tray_list_add_async),
	(free_client_alarms_cb), (alarm_queue_add_async), (remove_cqa),
	(remove_client_alarms):
	* gui/dialogs/alarm-dialog.c: (alarm_to_dalarm_widgets),
	(populate_widgets_from_alarm), (action_selection_done_cb):
	* gui/dialogs/alarm-list-dialog.c: (alarm_list_dialog_peek):
	* gui/dialogs/cal-prefs-dialog.c: (show_alarms_config):
	* gui/dialogs/memo-editor.c: (memo_editor_finalize):
	* gui/dialogs/memo-page.c: (sensitize_widgets):
	* gui/dialogs/task-page.c: (edit_clicked_cb):
	Fix all compiler warnings and correct some other issues.

2006-08-23  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #341691
	* gui/comp-util.c: (cal_comp_is_on_server):
	Do not send the recurrence id for backends which
	support recurrence with master object.

2006-08-23  Matthew Barnes  <mbarnes@redhat.com>
  	 
	* gui/e-itip-control.c:
	fix an uninitialized GError - fixes bug 352423.

2006-02-14  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>

	**Fixes #325935

	* gui/memos-component.c: (selector_tree_drag_motion):
	Edited code to move the memo from one task list to another.

2006-08-22  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #351263
	* gui/dialogs/event-page.c: (init_widgets):
	do not add  duplicate items in menu.

	Committing the patch from Sebastien Bacher <seb123@debian.org> 

2006-08-22  Kjartan Maraas  <kmaraas@gnome.org>

	* gui/calendar-component.c (ensure_sources): Plug a leak.
	* gui/migration.c (create_calendar_sources): Same thing here.

2006-08-21  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #346549
	* gui/dialogs/task-details-page.c (priority_index_to_value):
	set the priority to undefined if its value does not match the cases.
	Removed the assertion so that we don't quit.

2006-08-21  Srinivasa Ragavan  <sragavan@novell.com>

	* gui/cal-search-bar.c: (string_without_underscores),
	(generate_viewoption_menu), (make_suboptions): Fixes few search
	issues.

2006-08-18  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #343369
	* gui/itip-utils.c: (append_cal_attachments):
	Set the file name to empty string in its absence.

2006-08-17  Kjartan Maraas  <kmaraas@gnome.org>

	* gui/e-week-view-event-item.c:
	(e_week_view_event_item_draw_icons): Plug a leak.

2006-08-14  Li Yuan  <li.yuan@sun.com>

	* gui/alarm-notify/alarm-queue.c: (mail_notification):
	Fixes #351253, make the dialog shows the label and 
	can be closed.

2006-08-10  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-cal-model-calendar.c: (ecmc_set_value_at):
	* gui/e-calendar-table.c: (e_calendar_table_on_forward):
	* gui/e-calendar-view.c: (e_calendar_view_add_event),
	(e_calendar_view_cut_clipboard), (delete_event),
	(e_calendar_view_delete_selected_occurrence), (on_forward),
	(e_calendar_view_modify_and_send):
	* gui/e-itip-control.c: (send_item), (send_freebusy),
	(ok_clicked_cb):
	* gui/e-memo-table.c: (e_memo_table_on_forward):
	* gui/tasks-control.c: (tasks_control_forward_cmd):
	* gui/dialogs/task-editor.c: (task_editor_send_comp):
	* gui/dialogs/event-editor.c: (event_editor_send_comp):
	Updated the itip_send_comp.
	* gui/dialogs/memo-page.c: (fill_comp_with_recipients),
	(memo_page_fill_component), (summary_changed_cb), (init_widgets):
	Connect the changed signal to summary, date and group widgets.
	Fill the list of users from the component and send the component.
	* gui/dialogs/send-comp.c: (send_component_dialog):
	* gui/dialogs/comp-editor.c: (save_comp_with_send),
	(get_users_from_memo_comp), (real_send_comp):
	* gui/itip-utils.c: (comp_to_list), 
	Fill the recipient list while sharing memos.	
	* gui/itip-utils.h (itip_send_comp):
	adding an argument to send the list of users.
	
2006-08-09  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/alarm-list-dialog.h: Add missing
	declaration. Fixes #350391 (Patch from ÿystein GisnÂs).

2006-08-08  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes bug #235909
	* gui/e-cal-model-tasks.c (get_due_status): Get the timezone for
	the due date field correctly.

	Committing for  Mubeen Jukaku  <jmubeen@novell.com>

2006-08-07  Srinivasa Ragavan  <sragavan@novell.com>
	
	** Fix for bug #350267
	
	* gui/calendar-component.c: (calcomp_vpane_realized): Fix the
	miscalculation becoz of convertion from float to int.

2006-08-04  Johnny Jacob <jjohnny@novell.com>

	* gui/cal-search-bar.h : Changed the CAL_SEARCH items mask for
	tasks, memos, calendar.

2006-07-31  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #335276
	* gui/dialogs/event-editor.c: (event_editor_edit_comp):
	Set the meeting time in the time selector.
	* gui/dialogs/schedule-page.c: (schedule_page_set_meeting_time):
	* gui/dialogs/schedule-page.h: Added a function to set the meeting
	time in the time selector.

2006-07-31  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #344927
	* gui/dialogs/event-page.c: 
	(event_page_fill_widgets): Set the classification.

2006-07-31  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #333423
	* gui/alarm-notify/alarm-queue.c: 
	(notify_dialog_cb): Need not get the next iter through
	the tree model, as gtk list store would store the next 
	valid iter in iter.

2006-07-31  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #323499
	* gui/dialogs/recurrence-page.c: (interval_selection_done_cb),
	(ending_selection_done_cb), (init_widgets): Listen to the
	changed signal from the GtkOptionMenu.

2006-07-27  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #345646
	* gui/dialogs/recurrence-page.c: 
	(recurrence_page_finalize): Diconnect the signal handler
	while destroying the page.

2006-07-27  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>

	* gui/e-calendar-view.h: Removed the hardcoded ENABLE_CAIRO
	* gui/e-day-view.c (e_day_view_style_set) (e_day_view_init) 
	(e_day_view_realize) (e_day_view_update_event_label) 
	(e_day_view_on_long_event_click) (e_day_view_reshape_resize_long_event_rec) 
	(e_day_view_reshape_resize_rect_item) (e_day_view_on_top_canvas_motion) 
	(e_day_view_on_main_canvas_motion) (e_day_view_finish_long_event_resize) 
	(e_day_view_finish_resize) (e_day_view_abort_resize)
	 (e_day_view_reshape_main_canvas_resize_bars) (e_day_view_change_event_time) 
	(e_day_view_on_editing_stopped) (e_day_view_on_main_canvas_drag_leave):
	This adds a macro ENABLE_CAIRO to
        disable cairo for slow rendering machines.	

2006-07-27  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>

	* gui/e-day-view.c (e_day_view_update_event_label):
	* gui/e-day-view-main-item.c (e_day_view_main_item_draw_day_event):
	Added code to draw time on top border with cairo, because of text reposition
	when drawn in pango when events are overlapped.
	
2006-07-26  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>

	* gui/apps_evolution_calendar.schemas.in.in: Fix for bug #348486. 
	Corrected wrong description in /apps/evolution/calendar/display/
	event_transparency GConf key.

2006-07-26  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #347772
	* gui/apps_evolution_calendar.schemas.in.in: Set the adjust
	for daylight savings by default.

2006-07-24  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>

	* gui/e-day-view-main-item.c (e_day_view_main_item_draw_day_event):
	Free the gconf client after use.
	* gui/e-day-view.c (e_day_view_update_event_label) 
	(e_day_view_on_text_item_event): Fix the gal tooltip and show the appt
	header if the event spans over minutes per row.

2006-07-22  Chenthill Palanisamy  <pchenthill@novell.com>

	* calendar.error.xml:
	* gui/calendar-component.c: (update_task_memo_selection),
	(update_primary_task_memo_selection),
	(config_tasks_selection_changed_cb),
	(config_primary_tasks_selection_changed_cb),
	(config_memos_selection_changed_cb),
	(config_primary_memos_selection_changed_cb),
	(create_component_view), (destroy_component_view),
	(calendar_component_init):
	* gui/dialogs/comp-editor-page.h:
	* gui/dialogs/comp-editor.h:
	* gui/dialogs/memo-editor.c: (memo_editor_construct),
	(memo_editor_edit_comp), (memo_editor_new):
	* gui/dialogs/memo-editor.h:
	* gui/dialogs/memo-page.c: (memo_page_init), (memo_page_finalize),
	(memo_page_focus_main_widget), (clear_widgets),
	(sensitize_widgets), (memo_page_fill_widgets),
	(fill_comp_with_recipients), (get_current_account),
	(memo_page_fill_component), (get_widgets), (to_button_clicked_cb),
	(response_cb), (init_widgets), (get_to_entry),
	(memo_page_construct), (memo_page_new),
	(memo_page_create_date_edit):
	* gui/dialogs/memo-page.glade:
	* gui/dialogs/memo-page.h:
	* gui/e-cal-component-memo-preview.c: (timet_to_str_with_zone),
	(write_html):
	* gui/e-cal-model.c: (ecm_value_at):
	* gui/e-memo-table-config.c: (e_memo_table_config_set_table):
	* gui/e-memo-table.c: (date_compare_cb), (e_memo_table_init),
	(open_memo), (e_memo_table_get_current_time):
	* gui/e-memo-table.etspec:
	* gui/e-memo-table.h:
	* gui/gnome-cal.c: (gnome_calendar_class_init),
	(get_focus_location), (memo_canvas_focus_change_cb),
	(memo_selection_change_cb), (update_memo_view), (setup_config),
	(view_progress_cb), (view_done_cb), (setup_widgets),
	(gnome_calendar_init), (gnome_calendar_destroy),
	(gnome_calendar_set_pane_positions), (client_cal_opened_cb),
	(default_client_cal_opened_cb), (open_ecal), (backend_died_cb),
	(gnome_calendar_remove_source_by_uid),
	(gnome_calendar_vpane_realized), (gnome_calendar_vpane_resized),
	(gnome_calendar_cut_clipboard), (gnome_calendar_copy_clipboard),
	(gnome_calendar_paste_clipboard),
	(gnome_calendar_notify_dates_shown_changed),
	(gnome_calendar_delete_selection),
	(gnome_calendar_get_memopad_menu):
	* gui/gnome-cal.h:
	* gui/memos-component.c: (create_new_memo), (create_local_item_cb),
	(impl__get_userCreatableItems), (impl_requestCreateItem): Added support
	shared memos, Gw notes.							

2006-07-21  Andre Klapper  <a9016009@gmx.de>

	* calendar.error.xml: improve calendar read-only error message.
	Fixes bug #342281.

2006-07-19  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>

	* gui/e-meeting-time-sel.c :(e_meeting_time_selector_construct)
	* gui/e-meeting-time-sel-item.c : Drawn freebusy view in calendar with cairo,
	and changed colors for better look and feel.

2006-07-20  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>

	* gui/e-day-view.c: Fixed the embossing issue on item selection.

2006-07-19  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>

	** Fixes bug #347773

	* gui/e-day-view-main-item.c: Bug in Appointment resize preview in calendar 
	day/work-week view is fixed.

2006-07-19  Andre Klapper  <a9016009@gmx.de>

	* gui/dialogs/calendar-setup.c: harmonize strings.
	Fixes bug #346552.

2006-07-18  Andre Klapper  <a9016009@gmx.de>

	* calendar.error.xml: removing duplicated error messages, fixing
	default answers. Fixes bug #347765.

2006-07-18  Andre Klapper  <a9016009@gmx.de>

	* gui/dialogs/calendar-setup.glade:
	* gui/dialogs/new-calendar.glade:
	* gui/dialogs/new-task-list.glade:
	* gui/dialogs/url-editor-dialog.glade:
	remove "*" from translation. Fixes bug #331147.

2006-07-17  Srinivasa Ragavan  <sragavan@novell.com>

	* gui/apps_evolution_calendar.schemas.in.in: Corrected the text in the
	schema.

2006-07-17  Li Yuan <li.yuan@sun.com>

	* gui/dialogs/task-page.glade:
	Add labelled_by relation to start-date and due-date.
	Fix for #347473.

2006-07-17  Srinivasa Ragavan  <sragavan@novell.com>

	* gui/apps_evolution_calendar.schemas.in.in: Added key for storing tag
	calendar position in the left pane.
	* gui/calendar-component.c: (calcomp_vpane_realized),
	(calcomp_vpane_resized), (create_component_view),
	(calendar_component_init): Added tag calendar in the left pane
	* gui/calendar-config-keys.h: Added keys to fetch conf 
	* gui/calendar-config.c: (calendar_config_get_tag_vpane_pos),
	(calendar_config_set_tag_vpane_pos):
	* gui/calendar-config.h:
	* gui/gnome-cal.c: (setup_config), (gnome_calendar_get_tag),
	(setup_widgets), (gnome_calendar_set_pane_positions),
	(gnome_calendar_hpane_realized): Removed code for tag calendar.

2006-07-14   Arvind <sa.phoenix@gmail.com>

        ** Fix for bug#330633
	* gui/dialogs/event-page.c : Enabled save button when the timezone
	  is changed from an existing meeting/appointment

	* gui/e-timezone-entry.c : prevented the shrinking of the timezone
	field when the timezone is set to the default timezone

2006-06-14 Ushveen Kaur <kushveen@novell.com>

	** Fixes bug #329772
	
	* gui/e-cal-model-tasks.c: function added to change status of a task 
	as incomplete.
	* gui/e-cal-popup.c: status of task checked and changed to incomplete 
	if option selected.
	* gui/e-cal-popup.h: E_CAL_POPUP_SELECT_COMPLETE added
	* gui/e-calendar-table.c: function added to mark the task in selected 
	row as incomplete.

2006-07-11  Li Yuan <li.yuan@sun.com>

	* gui/e-week-view.c: (e_week_view_remove_event_cb):
	remove week_view->comp_data first, since garray is not thread
	safe and the event's address may be changed.
	Fix for #345969.

2006-07-11  Li Yuan	<li.yuan@sun.com>

	* gui/dialogs/event-page.c: (sensitize_widgets):
	* gui/dialogs/event-page.glade:
	Add mnemonic widget to widget, and change calendar's shortcut key.

	Fix for #345510.

2006-07-11  Li Yuan  <li.yuan@sun.com>

	* gui/e-week-view.c: (e_week_view_focus):
	Fix for 345923.
	If there is not any event in week view,
	just grab week view itself.

2006-07-10  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>

	* gui/e-day-view.c:(e_day_view_update_event_label)
	Added code for Day/Work Week view item, top border showing time
	(e_day_view_realize), (e_day_view_on_event_click), 
	(e_day_view_on_long_event_click), (e_day_view_reshape_resize_long_event_rect),
	(e_day_view_reshape_resize_rect_item),(e_day_view_on_top_canvas_motion),
	(e_day_view_finish_resize),(e_day_view_abort_resize),
	(e_day_view_reshape_main_canvas_resize_bar):
	Added code for Resize Transparency with Cairo drawing.

	(e_day_view_on_text_item_event):
	Fixed crashes because of tooltip during editing and resize.

	* gui/e-day-view-main-canvas.c:
	(e_day_view_main_item_draw_day_event):
	Added code for Time displayed on resizing events and for Shadow 
	Effect for item selection

2006-07-10  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #332911
	* gui/apps_evolution_calendar.schemas.in.in:
	* gui/calendar-config-keys.h:
	* gui/calendar-config.c: (set_standard_offsets),
	(calendar_config_get_icaltimezone),
	(calendar_config_add_notification_timezone),
	(calendar_config_get_daylight_saving),
	(calendar_config_set_daylight_saving),
	(calendar_config_add_notification_daylight_saving):
	* gui/calendar-config.h:
	* gui/dialogs/cal-prefs-dialog.c: (timezone_changed),
	(daylight_saving_changed), (setup_changes), (show_config),
	(calendar_prefs_dialog_construct):
	* gui/dialogs/cal-prefs-dialog.glade:
	* gui/dialogs/cal-prefs-dialog.h: Added the support
	for optional daylight savings time with timezones.

2006-07-08  Ushveen Kaur  <kushveen@novell.com>

	Fixes #332230.
	* gui/memos-component.c:
	* gui/tasks-component.c:
	Fixes mnemonic conflicts in the "New" menu.

2006-07-07  Harish Krishnaswamy  <kharish@novell.com>

	* gui/e-cal-model.c: (e_cal_model_set_instance_times):
	Handle the start_time_zone != end_time_zone scenario.
	Fixes bugzilla.novell.com #190421.

2006-07-07  Wang Xin  <jedy.wang@sun.com>

	Fixes #345222

	* gui/dialogs/alarm-dialog.c: (alarm_to_dialog),
	(alarm_to_malarm_widgets); (populate_widgets_from_alarm):
	Handle mail alarm.

2006-06-30  Johnny Jacob  <jjohnny@novell.com>
	* gui/cal-search-bar.c: (get_current_category),
	(get_category_sexp), (notify_e_cal_view_contains),
	(notify_category_is), (regen_query), (regen_view_query),
	(make_suboptions), (cal_search_bar_construct): Added/Removed code
	for new search ui.
	* gui/e-tasks.c: (search_bar_sexp_changed_cb):
	Added/Removed code for search ui.

2006-06-28  Andre Klapper  <a9016009@gmx.de>

	* gui/e-itip-control.glade: Adding translator comments to the
	"--to--" string. Removing three strings from translations.
	Fixes bug #325126.

2006-06-28  Rajeev ramanathan  <rajeevramanathan_2004@yahoo.co.in>

	**Fixes bug #329305

	*gui/dialogs/event-page.glade: Changed mnemonic Atte_ndees to 
	Attendee_s

2006-06-19  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/calendar-setup.c: (calendar_setup_edit_calendar):
	Remove GroupWise from the Calendar ESource Groups as it supports
	a single calendar only. 

2006-06-19  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/comp-editor.c (fill_widgets):
	Free GSList and its data after calling 
	e_cal_component_get_attachment_list.

2006-06-14  Arvind_evo <sa.phoenix@gmail.com>

	* gui/dialogs/event-page.c : Enabled save button when the group is 
	changed from a previously saved meeting.

2006-06-14  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/calendar-setup.c: (calendar_setup_edit_task_list):
	Remove GroupWise from the list Task ESource Groups as it supports
	a single Task list only. Fixes bug #176596 in bugzilla.novell.com.

2006-06-14  Aishwarya k <aishkalyan@gmail.com>

	 *Fix for bug #339217
	 * gui/dialogs/cal-prefs-dialog.glade:
	 Added translator comments for weekdays.

2006-06-14  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/print.c: (evo_calendar_print_data_new),
	(evo_calendar_print_data_free),
	(evo_calendar_print_renderer_get_width), (get_font_size),
	(get_font_for_size), (print_text), (print_text_size),
	(print_text_size_bold), (titled_box), (print_month_small),
	(bound_text), (print_day_background), (print_day_long_event),
	(print_day_event), (print_day_details), (print_week_long_event),
	(print_week_day_event), (print_week_event),
	(print_week_view_background), (print_week_summary),
	(print_year_summary), (print_month_summary), (print_todo_details),
	(print_day_view), (print_week_view), (print_month_view),
	(print_year_view), (print_date_label), (print_comp_item),
	(print_calendar), (print_comp), (print_title), (print_table):
	Use the pango layout for printing. Do not use gnome_print_show
	as it is broken on i18n character set.
	
	Committing the patch from Dave Malcolm <dmalcolm@redhat.com>
	Fixed some compiler warnings.

2006-06-12  Wang Xin  <jedy.wang@sun.com>

	**Fixes bug #344630
	Change key confirm_expunge to confirm_purge.
	* gui/apps_evolution_calendar.schemas.in.in:
	* gui/migration.c:

2006-06-12  Srinivasa Ragavan  <sragavan@novell.com>

	* gui/alarm-notify/alarm-queue.c: (remove_queued_alarm),
	(alarm_trigger_cb), (tray_list_remove_async): 	Fixed atleast
	6 crashes, that were in bnc.
	
2006-06-08  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	** Fixes bug #341961.
	* gui/dialogs/event-page.c: (event_page_fill_widgets):
	Removed unnecessary e_cal_component_clone.

2006-06-05  Li Yuan <li.yuan@sun.com>

	* gui/dialogs/cal-prefs-dialog.glade:
	add labelled by relationship between label and e-timezone-entry.
	* gui/e-timezone-entry.c: (add_relation),
	(e_timezone_entry_set_timezone):
	add relationship between label and entry.

2006-06-05  Srinivasa Ragavan  <sragavan@novell.com>

	** Fixed bug #268884
	
	* gui/e-calendar-table.c: (on_new_task): Added a new popup entry.
	* gui/e-tasks.c: (setup_widgets): Added a reference to table

2006-06-01  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/Makefile.am, gui/dialogs/event-editor.c,
	gui/dialogs/task-editor.c: Remove redundant files 
	meeting-page.[ch], cal-attachment.glade and references
	in includes.

2006-05-25  Srinivasa Ragavan  <sragavan@novell.com>

	** Added support to save calendar/events/attachments to remote
	shares in Calenda/Memo/Tasks components.

	* gui/dialogs/cal-attachment-select-file.c: (run_selector),
	(comp_editor_select_file_attachments):
	* gui/dialogs/comp-editor.c: (drop_action), (cab_add),
	(menu_insert_attachment_cb):
	* gui/e-cal-popup.c: (temp_save_part):
	* gui/e-calendar-table.c: (e_calendar_table_on_save_as):
	* gui/e-calendar-view.c: (on_save_as),
	(e_calendar_view_get_tooltips):
	* gui/e-memo-table.c: (e_memo_table_on_save_as):

2006-05-23  Srinivasa Ragavan  <sragavan@novell.com>

	More alarm fixes

	* gui/alarm-notify/alarm-notify-dialog.c: (dialog_response_cb),
	(notified_alarms_dialog_new), (tree_selection_changed_cb):
	* gui/alarm-notify/alarm-queue.c: (query_objects_changed_async),
	(free_tray_icon_data):

2006-05-22  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	**Fixes bug #331418
	* gui/memos-component.c: Set mnemonics in popup menu.

2006-05-13  Harish Krishnaswamy  <kharish@novell.com>

	Patch suggested by Yu-Hui Liu
	* conduits/todo/todo-conduit.c: (pre_sync):
	Check for timezone before passing the context.

2006-04-20  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes the events appearing in different timezone appear in
	right time slot. Partially fixes #332911
	* gui/e-cal-model.c: (e_cal_model_set_instance_times):
	* gui/e-calendar-view.c: (get_label),
	(e_calendar_view_get_tooltips): Get the timezone from the backend
	using the tzid if its not present in the icalcomponent.

2006-05-04  Rajeev Ramanathan <rajeevramanathan_2004@yahoo.co.in>
	
	Commited few pending cairo stuff. This adds a macro ENABLE_CAIRO to
	disable cairo for slow performing machines. Also added a patch to
	disable gradient and select foreground color based on the back ground
	color.
	
	* gui/apps_evolution_calendar.schemas.in.in:
	* gui/e-calendar-view.c:
	* gui/e-calendar-view.h:
	* gui/e-day-view-main-item.c: (e_day_view_main_item_draw),
	(e_day_view_main_item_draw_events_in_vbars),
	(e_day_view_main_item_draw_long_events_in_vbars),
	(e_day_view_main_item_draw_day_events),
	(e_day_view_main_item_draw_day_event):
	* gui/e-day-view-time-item.c: (e_day_view_time_item_draw):
	* gui/e-day-view-top-item.c: (e_day_view_top_item_draw),
	(e_day_view_top_item_draw_long_event),
	(e_day_view_top_item_draw_triangle):
	* gui/e-day-view.c: (e_day_view_get_text_color),
	(e_day_view_style_set), (e_day_view_reshape_long_event),
	(e_day_view_reshape_day_event):
	* gui/e-week-view-event-item.c: (e_week_view_event_item_draw),
	(e_week_view_draw_time), (e_week_view_event_item_draw_icons),
	(e_week_view_event_item_draw_triangle):
	* gui/e-week-view-main-item.c: (e_week_view_main_item_draw_day):
	* gui/e-week-view.c: (e_week_view_get_text_color),
	(e_week_view_reshape_event_span):

2006-05-04  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/event-page.glade: Set mnemonic to
	L instead of the conflicting 'i'. Fixes #334056.

2006-05-04  Chenthill Palanisamy  <pchenthill novell com>

	Fixes #333689
	* gui/dialogs/event-page.c
	(init_widgets): Check if the units is -1 before
	adding the menu item.

2006-05-02  Chenthill Palanisamy  <pchenthill@novell.com>

	Committing change pointed by Li Yuan <Li.Yuan@Sun.COM>	
	
	* gui/e-calendar-table.c: (e_calendar_table_delete_selected): Corrected
	argument passed to delete_component_dialog while deleting multiple
	tasks.	

2006-04-27  Tor Lillqvist  <tml@novell.com>

	* gui/e-day-view-main-item.c
	(e_day_view_main_item_draw_long_events_in_vbars): Fix crash:
	Should use a GdkColor struct as such here, not a pointer.

	* gui/dialogs/event-editor.c (event_editor_init): Construct
	pathname to query-free-busy.png at run-time. Fixes Win32 build
	broken by the fix for #321832 below.

2006-04-26  Srinivasa Ragavan  <sragavan@novell.com>
	
	** Fixes bug #328194

	* gui/dialogs/calendar-setup.c: Added mnemonics.

2006-04-26  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #331510 from Victor
	
	* gui/cal-search-bar.h: Added a new flag for Memo Search
	* gui/e-memos.c: (setup_widgets): Initiate memo search.

2006-04-26  Srinivasa Ragavan  <sragavan@novell.com>

	** Patch from PR Suman to add icons missing in menu items.

	* gui/tasks-control.c: (tasks_control_activate): Added icon for
	forward task.

2006-04-26  Srinivasa Ragavan  <sragavan@novell.com>

	** Patch from PR Suman to add icons missing in menu items.

	* gui/dialogs/comp-editor.c: Added Attach icon to menu.
	* gui/dialogs/event-editor.c: Added free/busy and recurrence icons.

2006-04-26  Srinivasa Ragavan  <sragavan@novell.com>
	
	Cairo Updates from Rajeev. Now it draws a solid border around the
	event.

	* gui/e-day-view-main-item.c:
	(e_day_view_main_item_draw_day_event):
	* gui/e-day-view-top-item.c: (e_day_view_top_item_draw_long_event):
	* gui/e-week-view-event-item.c: (e_week_view_event_item_draw):

2006-04-24  Srinivasa Ragavan  <sragavan@novell.com>

	Cairo support for Calendar (Rajeev Ramanathan)
	
	* gui/apps_evolution_calendar.schemas.in.in: Added key for
	transparency control.
	* gui/e-calendar-view.c: (draw_curved_rectangle): A common code for
	drawing curved rectangles
	* gui/e-day-view-main-item.c: (e_day_view_main_item_draw),
	(e_day_view_main_item_draw_events_in_vbars),
	(e_day_view_main_item_draw_long_events_in_vbars),
	(e_day_view_main_item_draw_day_event): Used cairo to draw day view events.
	* gui/e-day-view-time-item.c: 
	(e_day_view_time_item_get_column_width),
	(e_day_view_time_item_draw): Used cairo to draw day view time items.
	* gui/e-day-view-top-item.c: (e_day_view_top_item_draw),
	(e_day_view_top_item_draw_long_event),
	(e_day_view_top_item_draw_triangle): Used cairo to draw day view long events.
	* gui/e-day-view.c: (e_day_view_init), (e_day_view_destroy),
	(e_day_view_style_set),
	(e_day_view_reshape_main_canvas_resize_bars),
	(e_day_view_get_num_events_selected): Used cairo to draw day controls.
	* gui/e-day-view.h: Added a new font size variable
	* gui/e-week-view-event-item.c: (e_week_view_event_item_draw),
	(e_week_view_draw_time), (e_week_view_event_item_draw_icons),
	(e_week_view_event_item_draw_triangle): Used cairo to draw week view
	controls.
	* gui/e-week-view-main-item.c: (e_week_view_main_item_draw_day): Used 
	cairo to draw week view events.

2006-04-24  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #332409
	* gui/calendar-component.c: (setup_create_ecal): Reset the ecal to NULL.
	* gui/e-calendar-view.c: 
	(e_calendar_view_new_appointment_for): If the default client does not
	exist do not open the dialog.

2006-04-22  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/event-page.c (attendee_added_cb):
	Added the delfrom property to the delegatee. Fixes
	#165714 (bugzilla.novell.com)

2006-04-22  Srinivasa Ragavan  <sragavan@novell.com>

	** Fixes bug #326434
	
	* gui/e-calendar-view.c: (e_calendar_view_move_tip),
	(e_calendar_view_get_tooltips): Added New function to move tooltip
	with respect to screen size.
	* gui/e-day-view.c: (e_day_view_on_text_item_event): move the tooltip
	* gui/e-week-view.c: (tooltip_event_cb),
	(e_week_view_on_text_item_event): Move the tooltip

2006-04-22  Srinivasa Ragavan  <sragavan@novell.com>

	Rewrite of Alarm daemon with EThread to make it thread safe. It also
	fixes a lot of random crashes.

	* gui/alarm-notify/alarm-notify.c: (process_removal_in_hash),
	(list_changed_cb), (load_calendars), (alarm_notify_init),
	(dequeue_client), (alarm_notify_finalize), (alarm_channel_setup),
	(alarm_msg_destroy), (alarm_msgport_replied), (alarm_msg_received),
	(alarm_notify_new), (cal_opened_cb), (alarm_notify_add_calendar),
	(alarm_notify_remove_calendar):
	* gui/alarm-notify/alarm-notify.h:
	* gui/alarm-notify/alarm-queue.c: (queue_midnight_refresh),
	(add_client_alarms_cb), (midnight_refresh_async),
	(midnight_refresh_cb), (remove_queued_alarm), (alarm_trigger_cb),
	(add_component_alarms), (load_alarms), (load_alarms_for_today),
	(cal_opened_cb), (remove_alarms), (remove_comp), (duplicate_ical),
	(duplicate_ecal), (query_objects_changed_async),
	(query_objects_changed_cb), (query_objects_removed_async),
	(query_objects_removed_cb), (create_snooze), (edit_component),
	(on_dialog_objs_removed_async), (on_dialog_objs_removed_cb),
	(tray_list_remove_cqa_async), (tray_list_remove_cqa),
	(tray_list_remove_async), (tray_list_remove_icons),
	(tray_list_remove_data_async), (tray_list_remove_data),
	(notify_dialog_cb), (open_alarm_dialog), (tray_icon_clicked_cb),
	(tray_list_add_async), (tray_list_add_new), (display_notification),
	(popup_notification), (audio_notification), (mail_notification),
	(procedure_notification_dialog), (procedure_notification),
	(check_midnight_refresh), (alarm_queue_init),
	(free_client_alarms_cb), (alarm_queue_done), (compare_ids),
	(hash_ids), (alarm_queue_add_async), (alarm_queue_add_client),
	(remove_cqa), (remove_comp_by_id), (remove_client_alarms),
	(alarm_queue_remove_async), (alarm_queue_remove_client),
	(update_cqa), (update_qa):
	* gui/alarm-notify/alarm.c: (alarm_remove):

2006-02-16  Johnny Jacob  <johnnyjacob@gmail.com>

	** Fixes #330955

	* gui/e-memo-table.etspec : Change the column from summary to 
	description.
	* gui/e-cal-model.c : (ecm_duplicate_value) : Dup value for
	description also.
	(e_cal_model_create_component_with_defaults) : create a memo
	component with defaults.
	* gui/e-cal-model-memos.c : (ecmm_is_cell_editable).

2006-04-10  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #163039
	* gui/e-meeting-store.c: (ems_finalize), (ems_init),
	(process_callbacks), (refresh_busy_periods): Removed the
	async queue, updated the gui via the callback function in a
	idle loop as and when we receive the free busy information.
	(e_meeting_store_get_num_queries): Fixed a warning.
	* gui/e-meeting-store.h:
	* gui/e-meeting-time-sel.c: 
	(e_meeting_time_selector_refresh_cb): Changed the return type of 
	the function to return a boolean variable.

2006-04-05  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #328808
	* gui/dialogs/event-editor.c: 
	(event_editor_construct): Set the name selector dialog present in the schedule page
	in event page also.
	* gui/dialogs/event-page.[ch] 
	(event_page_get_name_selector): Gets the name selector from the meeting list
	view.
	* gui/dialogs/schedule-page.[ch]
	(schedule_page_set_name_selector): Sets the name selector to the meeting
	list view.
	* gui/e-meeting-list-view.[ch]:
	(e_meeting_list_view_get_name_selector),
	(e_meeting_list_view_set_name_selector): Functions to get and set the name
	selector.

2006-04-06  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-day-view.c: (e_day_view_on_main_canvas_motion):
	Enable drag and drop of recurring appointments.

2006-04-06  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #162005
	* gui/comp-util.c: (cal_comp_is_on_server): Pass the recurrence
	id to find if the object is on the server.

2006-04-05  Simon Zheng  <simon.zheng@sun.com>

	Fixes bug #333704
	* gui/dialogs/comp-editor-util.c: (comp_editor_strip_categories):
	Because the passing text is in UTF-8 encoding, it should be traversed
	by utf-8 char order rather than one by one byte.

2006-04-04  Irene Huang <Irene.Huang@sun.com>

       	Fixes bug 335214

	* gui/e-cal-model.c: (e_cal_view_objects_added_cb):
        Call e_table_model_pre_change (E_TABLE_MODEL (model)); before
       	deleting row.

2006-04-03  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #158107
	* gui/dialogs/delete-comp.c: (delete_component_dialog),
	(cb_toggled_cb), (prompt_retract_dialog):
	* gui/dialogs/delete-comp.h:
	* gui/e-calendar-table.c: (add_retract_data), (check_for_retract),
	(e_calendar_table_delete_selected):
	* gui/e-calendar-view.c: (add_retract_data), (check_for_retract),
	(delete_event), (e_calendar_view_delete_selected_occurrence): Added
	retract support.

2006-03-29  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #160357 [b.n.c]
	* gui/e-meeting-store.c: 
	(ems_init): Initialize the num queries.
	(freebusy_async): maintain the num queries count.
	(refresh_busy_periods): Set the store to FreeBusy data.
	* gui/e-meeting-store.[ch]: 
	(e_meeting_store_get_num_queries): Get the number of freebusy
	queries currently going on.
	* gui/e-meeting-time-sel-item.c:
	(e_meeting_time_selector_item_init): Added a busy cursor.
	(e_meeting_time_selector_item_destroy):
	* gui/e-meeting-time-sel-item.h: Added a busy cursor and a function
	to reset the normal cursor.
	* gui/e-meeting-time-sel.c: 
	* gui/e-meeting-time-sel.h:
	(e_meeting_time_selector_construct): Get the main and top canvas items.
	(e_meeting_time_selector_refresh_cb): Set the normal cursor checking the number
	of FreeBusy queries.
	(e_meeting_time_selector_refresh_free_busy):Set the Busy cursor.

2006-03-28  Jeff Cai  <jeff.cai@sun.com> 
	
	Fixes #333877
	* gui/e-meeting-list-view.c: (row_activated_cb):
	Use gtk_tree_selection_get_selected_rows instead of 
	gtk_tree_selection_get_selected to get selected rows from
	a multi-row selection.

2006-03-28  Harry Lu  <harry.lu@sun.com>

	Fix for 333693.
	* gui/calendar-component.c: (update_task_selection): need to see if
	source is NULL to avoid a CRITICAL warning.

2006-03-23  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #329502
	* gui/e-meeting-list-view.c: (attendee_edited_cb):
	Include MAILTO: with the email id while adding
	it to the list view.
	* gui/dialogs/task-page.c: (task_page_fill_widgets):
	add the organizer to the name selector dialog.
	
2006-03-22  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #330842
	* gui/e-cal-model.c: 
	(e_cal_view_objects_added_cb): Check if the icalcomp
	is set to ECalComponent.

2006-03-22  Harry Lu  <harry.lu@sun.com>

	Fix for 333697
	* gui/dialogs/task-page.c: (task_page_init), (sensitize_widgets):
	remove two useless widgets: sendoptions_frame and sendoptions_button.

2006-03-22  Harry Lu  <harry.lu@sun.com>

	Fix for 333706

	* gui/dialogs/alarm-dialog.c: (alarm_to_dalarm_widgets): call
	set_text only when description.value is not NULL.

2006-03-20  Boby Wang <boby.wang@sun.com>

	** Fix for bug #268584

	* gui/dialogs/cal-attachment-select-file.c: (run_selector):
	* gui/dialogs/cal-attachment.glade:
	set the accelerate key for "Suggest Suggest automatic display of
	attachment"

2006-03-09  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #334003
	* gui/e-cal-model.c: 
	(e_cal_model_set_instance_times): Use the timezone present in
	the appointment.

2006-03-06  Veerapuram Varadhan  <vvaradhan@novell.com>

	**Fixes #321832
	* gui/dialogs/event-editor.c: Pickup the right-icon for f/b.
	* gui/dialgos/Makefile.am: Define EVOLUTION_ICONSDIR to pickup f/b icon.
	
2006-03-06  Simon Zheng  <simon.zheng@sun.com>

	Fixes bug #332140
	* gui/dialogs/comp-editor.c: (get_attachment_list):
	* gui/e-cal-popup.c: (temp_save_part):
	Transfer filenames from utf-8 to glib encoding before really
	saving files.

2006-03-06  Simon Zheng  <simon.zheng@sun.com>

	Fixes #311482
	* gui/dialogs/comp-editor.c: (set_attachment_list): As uri is 
	encaped ASCII-encoded, it can't be recognized when setting 
	mime part. Use filename instead of uri.

2006-03-06  Theppitak Karoonboonyanan  <thep@linux.thai.net>

	** Fixes bug #328988
	
	* gui/alarm-notify/util.c: (calculate_time):
	* gui/misc.c: (calculate_time): Added code to simplify the function
	calculate_time and made strings translatable.

2006-03-06  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #330448
	* gui/e-meeting-list-view.c: (attendee_edited_cb): Remove
	attendees from the e-name-selector when its removed from
	meeting list view.

2006-03-06  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #329353	
	* gui/gnome-cal.c:
	(gnome_calendar_on_date_navigator_selection_changed): If the previous
	selection is not list view, set the view as month view.

2006-03-04  Jeff Cai <jeff.cai@sun.com>

	Fixes #333234
	* gui/calendar-config.c: (calendar_config_get_primary_tasks),
	(calendar_config_get_primary_memos):
	Initialize calendar to ensure gconf_client is valid.

2006-03-04  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #331089
	* gui/dialogs/event-page.c: (sensitize_widgets):
	Let the recurrence button in tool bar remain
	active always.

2006-03-03  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #330448
	* gui/e-meeting-list-view.c: (attendee_edited_cb): Remove
	attendees from the e-name-selector when its removed from
	meeting list view.	

2006-03-03  Sam Yang  <sam.yang@sun.com>

	Fixes #324560
	* gui/calendar-config.[ch]:
	(calendar_config_add_notification_preview_state): Request 
	notification of changes to show_task_preview.
	* gui/e-tasks.c: (config_preview_state_changed_cb): Callback function.
	(setup_config): Send notification request and store connection ID.

2006-02-17  Johnny Jacob  <johnnyjacob@gmail.com>

	Fixes #312423, #329749
	* gui/dialogs/event-page.c: (sensitize_widgets): Enable/Disable
	based on read_only status.
	(alarm_store_changed_cb): Added. Changed signal handler for alarm list.
	* gui/dialogs/alamm-list-dialog.c: (edit_clicked_cb): Emit changed 
	signal for alarm list.

2006-02-28  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #332726
	* gui/dialogs/recur-comp.c: (recur_component_dialog): Dont
	remove the recurrence id, the backend would remove it.							     

2006-02-23  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #330677
	* gui/itip-utils.c: 
	(comp_content_type): Removed the content setting as text/plain.
	(itip_send_comp): Changed the reply all to FALSE.
	(reply_to_calendar_comp): Set the content type as text/plain.

2006-02-15  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>

	* gui/dialogs/memo-page.glade: Changed the layout spacing of memo 
	editor.

2006-02-14  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>

	**Fixes #330374

	* gui/tasks-control.c: (tasks_control_complete_cmd): Added code
	to disable Edit->Mark as complete for completed events.

2006-02-14  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>

	**Fixes #326477

	* gui/dialogs/task-page.glade: Changed size of the new task popup 
	window to display Status Details in its default size.

2006-02-14  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>
	
	**Fixes #325935

	* gui/dialogs/task-page.c: (source_changed_cb): Added code to
	enable Save button if group is changed in task editor

2006-02-14  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #330931 #331029
	
	* gui/e-calendar-view.c: (e_calendar_view_get_tooltips):

2006-02-13  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/task-page.c: (sensitize_widgets):
	sensitize should be initialized to TRUE since it is
	being ANDed to compute sens.
	Fixes #330957 and #330958.

2006-02-13  Karsten Br‰ckelmann  <guenther@rudersport.de>

	* calendar.error.xml: Added mnemonics. Fixes bug #330933.

2006-02-12  Karsten Br‰ckelmann  <guenther@rudersport.de>

	* gui/dialogs/recurrence-page.c (make_recur_month_num_menu): 
	Marked strings for translation. Fixes bug #330863.

2006-02-12  Andre Klapper  <a9016009@gmx.de>

	* gui/dialogs/recurrence-page.glade:
	* gui/dialogs/recurrence-page.c:	
	added translator comments for some occurrences of heavy sentence 
	splitting. Hopefully fixes bug 329695.

2006-02-11  Andre Klapper  <a9016009@gmx.de>
	* gui/dialogs/recurrence-page.c:
	* gui/alarm-notify/util.c:
	* gui/misc.c:
	adding translator comments to "second" strings to distinguish
	ordinal numbers and time divisions. Fixes bug 328988.

2006-02-11  Karsten Br‰ckelmann  <guenther@rudersport.de>

	* gui/dialogs/comp-editor.c (setup_widgets): 
	* gui/e-memo-table.c (e_memo_table_init): 
	* gui/e-calendar-table.c (e_calendar_table_init): 
	Change a11y names and add description. Fixes part of bug #330723.

2006-02-10  Karsten Br‰ckelmann  <guenther@rudersport.de>

	* gui/e-timezone-entry.c (e_timezone_entry_init): Correct the a11y
	string for the Timezone button to not include its role and to be
	more descriptive, fixes bug #330712.

2006-02-12  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #329570
	* gui/e-calendar-view.c: (on_unrecur_appointment):
	Just remove the instances pass the rid. The exception
	date will be set in the backend.

2006-02-09  Johnny Jacob  <johnnyjacob@gmail.com>

	Fixes #330521
	* gui/dialogs/alarm-dialog.c: (alarm_to_aalarm_widgets), 
	(alarm_to_palarm_widgets): use icalattach_unref. 

2006-02-09  Harish Krishnaswamy  <kharish@novell.com>

	* gui/e-cal-model.c: (e_cal_view_objects_added_cb):
	Pass the client along with the id for search to handle 
	cases where the same backend source has multiple clients 
	in the view. Remove the FIXME.

2006-01-09  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>

	Fixes #329768
	* gui/dialogs/comp-editor.c: (key_press_event): Corrected problem with 
	casting EAttachmentBar.

2006-02-09  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #330465
	* gui/dialogs/event-page.c: (event_page_fill_widgets): Fixes the build
	break.

2006-02-08  Tor Lillqvist  <tml@novell.com>

	* gui/dialogs/task-editor.c (task_editor_init): Construct the
	pathname to the xml file at run-time to avoid using compile-time
	paths on Windows.

2006-01-09  Kjartan Maraas  <kmaraas@gnome.org>

	* gui/alarm-notify/alarm-notify-dialog.c:
	(add_alarm_to_notified_alarms_dialog):
	* gui/alarm-notify/alarm-queue.c: (remove_queued_alarm),
	(open_alarm_dialog), (menu_item_toggle_callback), (populate):
	* gui/alarm-notify/alarm.c: (pop_alarm), (alarm_remove):
	* gui/alarm-notify/config-data.c:
	(config_data_replace_string_list):
	* gui/cal-search-bar.c: (regen_query):
	* gui/calendar-view-factory.c:
	* gui/calendar-view.c:
	* gui/comp-editor-factory.c: (edit_existing),
	(resolve_pending_requests), (impl_editExisting), (impl_editNew):
	* gui/control-factory.c:
	* gui/dialogs/cal-attachment-select-file.c:
	(comp_editor_select_file_attachments):
	* gui/dialogs/calendar-setup.c: (eccp_get_source_type):
	* gui/dialogs/comp-editor.c: (comp_editor_class_init),
	(commit_all_fields), (delete_event_cb), (editor_key_press_event),
	(menu_file_save_cb), (menu_file_close_cb), (make_icon_from_comp),
	(comp_editor_focus), (needs_send_cb):
	* gui/dialogs/delete-comp.c: (delete_component_dialog):
	* gui/dialogs/e-delegate-dialog.c:
	* gui/dialogs/event-editor.c:
	* gui/dialogs/event-page.c: (event_page_fill_widgets),
	(popup_delete_cb), (list_key_press):
	* gui/dialogs/meeting-page.c: (remove_clicked_cb),
	(popup_delete_cb), (button_press_event), (list_key_press),
	(meeting_page_construct):
	* gui/dialogs/memo-editor.c: (init_widgets),
	(memo_editor_set_e_cal), (memo_editor_edit_comp),
	(memo_editor_send_comp):
	* gui/dialogs/memo-page.c:
	* gui/dialogs/recurrence-page.c: (fill_exception_widgets),
	(exception_add_cb):
	* gui/dialogs/schedule-page.c: (clear_widgets),
	(schedule_page_fill_component):
	* gui/dialogs/task-details-page.c:
	(task_details_page_fill_timezones), (complete_date_changed):
	* gui/dialogs/task-editor.c:
	* gui/dialogs/task-page.c: (task_page_fill_widgets),
	(popup_delete_cb), (list_key_press):
	* gui/e-alarm-list.c: (get_alarm_string):
	* gui/e-cal-component-memo-preview.c: (write_html):
	* gui/e-cal-component-preview.c: (write_html):
	* gui/e-cal-list-view-config.c:
	(e_cal_list_view_config_set_property),
	(e_cal_list_view_config_get_property),
	(e_cal_list_view_config_dispose):
	* gui/e-cal-list-view.c:
	* gui/e-cal-model-calendar.c: (ecmc_value_at):
	* gui/e-cal-model-memos.c: (ecmm_value_at):
	* gui/e-cal-model-tasks.c: (get_due_status), (ecmt_value_at),
	(ecmt_set_value_at), (ecmt_is_cell_editable),
	(ecmt_value_is_empty), (e_cal_model_tasks_mark_task_complete),
	(e_cal_model_tasks_update_due_tasks):
	* gui/e-cal-model.c: (get_classification),
	(ecm_get_color_for_component), (e_cal_model_set_default_client),
	(e_cal_view_objects_modified_cb), (e_cal_model_add_client),
	(e_cal_model_remove_client), (e_cal_model_set_instance_times):
	* gui/e-cal-popup.c: (ecalp_part_popup_saveas):
	* gui/e-calendar-table-config.c:
	(e_calendar_table_config_set_property),
	(e_calendar_table_config_get_property),
	(e_calendar_table_config_dispose):
	* gui/e-calendar-table.c: (e_calendar_table_class_init):
	* gui/e-calendar-table.h:
	* gui/e-calendar-view.c: (e_calendar_view_set_property),
	(e_calendar_view_get_property), (open_event_with_flags),
	(e_calendar_view_get_tooltips):
	* gui/e-cell-date-edit-config.c:
	(e_cell_date_edit_config_set_property),
	(e_cell_date_edit_config_get_property),
	(e_cell_date_edit_config_dispose):
	* gui/e-cell-date-edit-text.c:
	* gui/e-comp-editor-registry.c:
	* gui/e-date-edit-config.c: (e_date_edit_config_set_property),
	(e_date_edit_config_get_property), (e_date_edit_config_dispose):
	* gui/e-day-view-config.c: (e_day_view_config_set_property),
	(e_day_view_config_get_property), (e_day_view_config_dispose):
	* gui/e-day-view-main-item.c: (e_day_view_main_item_set_arg),
	(e_day_view_main_item_draw_day_event),
	(e_day_view_main_item_event):
	* gui/e-day-view-time-item.c: (e_day_view_time_item_set_arg),
	(e_day_view_time_item_get_column_width):
	* gui/e-day-view-top-item.c: (e_day_view_top_item_set_arg),
	(e_day_view_top_item_draw_long_event),
	(e_day_view_top_item_draw_triangle), (e_day_view_top_item_event):
	* gui/e-day-view.c: (process_component), (e_day_view_style_set),
	(e_day_view_recalc_cell_sizes), (e_day_view_foreach_event),
	(e_day_view_reshape_resize_long_event_rect_item),
	(e_day_view_update_long_event_resize), (e_day_view_update_resize),
	(e_day_view_reshape_long_event), (e_day_view_reshape_day_event),
	(e_day_view_change_duration_to_start_of_work_day),
	(tooltip_destroy), (e_day_view_on_text_item_event),
	(e_day_view_on_editing_stopped):
	* gui/e-itip-control.c: (e_itip_control_class_init),
	(find_cal_opened_cb), (find_server), (set_date_label),
	(ok_clicked_cb):
	* gui/e-meeting-attendee.c:
	* gui/e-meeting-list-view.c:
	(e_meeting_list_view_remove_attendee_from_name_selector):
	* gui/e-meeting-store.c: (role_to_text), (partstat_to_text),
	(e_meeting_store_set_value):
	* gui/e-meeting-time-sel-item.c:
	(e_meeting_time_selector_item_set_arg),
	(e_meeting_time_selector_item_paint_all_attendees_busy_periods):
	* gui/e-meeting-time-sel.c: (e_meeting_time_selector_construct),
	(e_meeting_time_selector_recalc_date_format):
	* gui/e-memo-table-config.c: (e_memo_table_config_set_property),
	(e_memo_table_config_get_property), (e_memo_table_config_dispose):
	* gui/e-memo-table.c: (e_memo_table_class_init), (task_compare_cb):
	* gui/e-memos.c: (update_view), (backend_error_cb), (open_ecal):
	* gui/e-mini-calendar-config.c:
	(e_mini_calendar_config_set_property),
	(e_mini_calendar_config_get_property),
	(e_mini_calendar_config_dispose):
	* gui/e-pub-utils.c: (is_publish_time), (e_pub_publish):
	* gui/e-tasks.c: (process_completed_tasks), (backend_error_cb):
	* gui/e-timezone-entry.c: (e_timezone_entry_destroy):
	* gui/e-week-view-config.c: (e_week_view_config_set_property),
	(e_week_view_config_get_property), (e_week_view_config_dispose):
	* gui/e-week-view-event-item.c: (e_week_view_event_item_draw),
	(e_week_view_event_item_draw_icons):
	* gui/e-week-view-main-item.c: (e_week_view_main_item_set_arg):
	* gui/e-week-view-titles-item.c: (e_week_view_titles_item_set_arg),
	(e_week_view_titles_item_draw):
	* gui/e-week-view.c: (process_component), (tooltip_destroy),
	(tooltip_event_cb), (e_week_view_reshape_event_span),
	(e_week_view_on_text_item_event), (e_week_view_event_move),
	(e_week_view_on_editing_stopped), (e_week_view_do_key_press):
	* gui/gnome-cal.c: (dn_e_cal_view_objects_modified_cb),
	(dn_e_cal_view_done_cb), (table_selection_change_cb),
	(gnome_calendar_goto), (focus_current_view), (backend_error_cb),
	(gnome_calendar_set_selected_time_range),
	(gnome_calendar_get_current_time_range),
	(gnome_calendar_get_visible_time_range),
	(gnome_calendar_delete_selected_occurrence):
	* gui/goto.c: (goto_dialog):
	* gui/itip-utils.c: (comp_fb_normalize):
	* gui/memos-component.c: (create_new_memo),
	(impl_requestCreateItem):
	* gui/migration.c: (migrate_memos):
	* gui/print.c: (print_month_small), (print_day_details),
	(print_todo_details), (print_comp_item):
	* gui/tasks-component.c: (create_new_todo),
	(impl_requestCreateItem):
	* gui/weekday-picker.c: Cleanups:
	- remove unused vars
	- remove extraneous semi-colons
	- add some comments where assignments were done without using
	  the results later
	- remove break; statements after return foo;
	- add casts in some places to be more type correct
	- rename variables with name clashes
	- s/if/ifdef in some cases
	- mark some code static
	- remove some unused functions
	- use guint for 1-bit bitfields

2006-02-01  Johnny Jacob  <johnnyjacob@gmail.com>

	** Fixes #326997
	* gui/dialogs/event-page.c (sensitize_widgets):
	set/unset the editability of description.

2006-01-17  Ranjan Somani  <sranjan@novell.com>

	** Fixes #322009
	* gui/e-meeting-time-sel.c: line 431: Changed Label "Contacts..." to "Attendees..."

2006-01-06  Johnny Jacob  <johnnyjacob@gmail.com>
	
	** Fixes #325941

	* gui/dialogs/event-page.c (sensitize_widgets) : Handle the 
	sensitivity of hour_selector and minute_selector.

2006-01-31  Johnny Jacob  <johnnyjacob@gmail.com>

	** Fixes #327723
	
	* gui/dialogs/event-page.c (init_widgets): Handle the
	delete-event for alarm dialog.

2006-01-31  Oswald Rodrigues <ozzy_rodrigues@yahoo.com>

	** Fixes #328515
	
	* gui/dialogs/comp-editor.c (attachment_bar_changed_cb):Changed Attachment 
	bar behaivour to expand when attachment is present and collapse when no 
	attachment is present.
	
2006-02-03  Johnny Jacob  <johnnyjacob@gmail.com>
	
	** Fixes bug #329775
	
	* gui/dialogs/task-editor.c (task_editor_construct): Handle
	delete-event signal for task_details_window.

2006-02-05  Karsten Br‰ckelmann  <guenther@rudersport.de>

	* gui/dialogs/event-page.glade: Correct typo, fixes bug #329748.

2006-01-31  Tor Lillqvist  <tml@novell.com>

	* gui/alarm-notify/alarm-queue.c (open_alarm_dialog,
	tray_icon_clicked_cb): Fix compilation against HEAD gtk and on
	Win32, where we use the GtkStatusIcon API and there is no
	tray_image variable.

2006-01-31  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/dialogs/cal-prefs-dialog.c: (show_alarms_config):
	Show the widget.

2006-01-30  Harish Krishnaswamy <kharish@novell.com>

	* gui/e-week-view.c : Reverting Chakravarthi's
	commit on Jan 17 to fix miscellaneous problems
	manifesting in the week/month views.
	
2006-01-30  Johnny Jacob  <johnnyjacob@gmail.com>

	* gui/dialogs/event-page.c: (sensitize_widgets),
	(alarm_changed_cb):
	* gui/dialogs/event-page.glade:
	* gui/dialogs/task-page.c: (sensitize_widgets):
	* gui/dialogs/task-page.glade:

	Fixed the page layouts as per HIG spacing.

2006-01-30  Johnny Jacob  <johnnyjacob@gmail.com>
 
 	Fixes #328285
 	* gui/dialogs/memo-page.c (widget_focus_out_cb), 
 	(widget_focus_out_cb) : Added. Handle focus in and out
 	events.
 	(init_widgets): Connect focus in and out signals for 
 	memo_content .

	Committed to HEAD on behalf of johnny since he does not
	have commit rights - partha
 
2006-01-18  Johnny Jacob  <johnnyjacob@gmail.com>

	Fixes #225816
	* gui/dialogs/alatm-list-dialog.glade : Added edit button.
	* gui/dialogs/alarm-list-dialog.c (init_widgets), (get_widgets) : 
	Get and connect signals for edit button.
	(sensitize_buttons) : Handle the sesitivity of edit button.
	(edit_clicked_cb) : Added. Handle edit button click event.
	* gui/dialogs/alarm-dialogs.c (populate_widgets) : Added. Extract data
	from alarm and fill in the widgets.
	(alarm_to_repeat_widgets): Added. Alarm data to repeat widgets.
	(alarm_to_aalarm_widgets): Added. Alarm data to audio alarm widgets.
	(alarm_to_dalarm_widgets): Added. Alarm data to display alarm widgets.
	(alarm_to_palarm_widgets): Added. Alarm data to procedure alarm widgets.
	(alarm_to_dialog): call populate_widgets.

2006-01-28  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>

	** Fixes Bug #327347

	* calendar/gui/dialogs/cal-prefs-dialog.glade:
	Changed W_eek starts mnemonic to Wee_k starts on and added a 
	translation string to that.

2006-01-30  Johnny Jacob <johnnyjacob@gmail.com>

	Fixes #327344
	* gui/dialogs/cal-prefs-dialog.c: (cal_prefs_dialog_create_time_edit):
	Show date edit component.
	* gui/main.c: (factory): changed gtk_widget_ahow_all to 
	gtk_widget_show.

2006-01-29  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>

	** Fixes Bug #327304
	
	* gui/calendar-commands.c :Next" and "Previous" buttons in toolbar for 
	calendar and mail are made same.

2006-01-28  Rajeev ramanathan <rajeevramanathan_2004@yahoo.co.in>

	** Fixes bug #328510, #328885

	* calendar.error.xml: Added error for saving memos.
	* gui/dialogs/event-editor.c: (menu_class_public_cb),
	(menu_class_private_cb), (menu_class_confidential_cb):
	Added change notification for event page.
	* gui/dialogs/memo-editor.c: (menu_show_categories_cb),
	(menu_class_public_cb), (menu_class_private_cb),
	(menu_class_confidential_cb), (memo_editor_init),
	(memo_editor_construct), (memo_editor_set_e_cal),
	(memo_editor_finalize): Added menus to memo.
	* gui/dialogs/memo-page.c: (memo_page_init), (memo_page_finalize),
	(set_classification_menu), (memo_page_get_widget),
	(memo_page_focus_main_widget), (clear_widgets),
	(memo_page_set_classification), (sensitize_widgets),
	(memo_page_fill_widgets), (memo_page_fill_component),
	(memo_page_set_show_categories), (get_widgets),
	(categories_clicked_cb), (field_changed_cb), (source_changed_cb),
	(init_widgets), (memo_page_construct), (memo_page_new): Added code to 
	handle memos.
	* gui/dialogs/memo-page.glade:
	* gui/dialogs/memo-page.h: 
	* gui/dialogs/save-comp.c: (save_component_dialog):
	* gui/dialogs/task-editor.c: (menu_class_public_cb),
	(menu_class_private_cb), (menu_class_confidential_cb): Added code to
	change notification for task page.

2006-01-27  Srinivasa Ragavan  <sragavan@novell.com>

	* gui/dialogs/alarm-list-dialog.c (get_widgets),
	(alarm_list_dialog_run), (alarm_list_dialog_peek): Added a function to
	peek parts of a dialog.
	* gui/dialogs/alarm-list-dialog.glade: Changed the layout of the alarm
	dialog.
	* gui/dialogs/event-page.c (event_page_init), (clear_widgets),
	(sensitize_widgets), (event_page_fill_widgets),
	(event_page_fill_component), (get_widgets), (alarm_changed_cb),
	(alarm_store_inserted_cb), (alarm_store_deleted_cb),
	(alarm_custom_clicked_cb), (init_widgets): Added code to handle the
	new alarm dialog layout.
	* gui/dialogs/event-page.glade: Changed the alarm dialog layout.

2006-01-23  Tino Meinen <a.t.meinen@chello.nl>
	Fixes #325831
	* calendar.error.xml: Corrected a grammatical error in a message
	for saving changed appointments, and changed the corresponding
	message for tasks correspondingly

2006-01-25  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/alarm-notify/alarm-queue.c: (popup_notification):
	Removed the unsed variable filename. Do not set the icon
	from pixbuf. Just pass the icon name to notification_new.
	
2006-01-25  Srinivasa Ragavan  <sragavan@novell.com>

	Fixes #325762
	* gui/alarm-notify/alarm-notify.c: (process_removal_in_hash),
	(list_changed_cb), (load_calendars), (alarm_notify_init):
	* gui/alarm-notify/alarm-queue.c: (open_alarm_dialog),
	(tray_icon_clicked_cb), (icon_activated), (tray_icon_blink_cb),
	(display_notification), , (alarm_queue_init),
	(alarm_queue_remove_client):
	* gui/dialogs/cal-prefs-dialog.c: (alarms_selection_changed),
	(setup_changes), (initialize_selection), (show_alarms_config),
	(show_config), (calendar_prefs_dialog_construct):
	* gui/dialogs/cal-prefs-dialog.glade:
	* gui/dialogs/cal-prefs-dialog.h: The alarms icon is show in the 
	notification tray only when there is an alarm. The selection
	of calendars for alarms is moved to preferences.

2006-01-25  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #327879
	
	* gui/dialogs/recurrence-page.c: (clear_widgets):
	Use make_ending_special to fill the ending fields 
	properly.

2006-01-24  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #323700
	* gui/gnome-cal.c:
	(gnome_calendar_on_date_navigator_selection_changed),
	(gnome_calendar_purge): For clients which have no master object
	for recurrences need not call generate instances. Pass the 
	recurrence id to remove the detached instances.

2005-09-17  Jon Ander Hernandez <hernandez@movimage.com>
	
	** Fixes bug #313118

	* calendar/gui/alarm-notify/alarm-notify-dialog.c 
	(add_alarm_to_notified_alarms_dialog): Don't use mark-up for
	translatable strings.

2006-01-24  Andre Klapper <a9016009@gmx.de>

	* gui/dialogs/meeting-page.c: removed surrounding
	markup. Fixes bug 313120. Committing on behalf of
	Pablo Arroyo.

2006-01-23  Andre Klapper <a9016009@gmx.de>

	* gui/e-day-view-time-item.c: added translator comment
	to a string. Fixes bug 328006.

2006-01-23  Andre Klapper <a9016009@gmx.de>

	* gui/print.c: added translator comments to workday
	abbreviations. Fixes bug 328007.

2006-01-23  Pavithran <pavithran@gmx.de>

	** Fixes bug #327713 , #327730
	
	* gui/dialogs/event-editor.c: (event_editor_construct):
	* gui/dialogs/task-editor.c: (task_editor_construct):
	Removes extra seperator. 
	
2006-01-23  Irene Huang <Irene.Huang@sun.com>

	Fixes #327958

	* gui/e-calendar-view.c: (e_calendar_view_get_tooltips):
	Check if ptr==NULL, for special occassion with SunOne 
	accouts.

2006-01-16  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #326478
	* gui/dialogs/cal-prefs-dialog.c: (spec_from_picker),
	(tasks_due_today_set_color), (tasks_overdue_set_color),
	(set_color_picker):
	* gui/dialogs/cal-prefs-dialog.glade: Changed the gtk color
	button to gnome color picker.

2006-01-20  Andre Klapper <a9016009@gmx.de>
	* gui/dialogs/task-page.c (field_changed_cb):
	Removed wrong parameter to be able compile again.

2006-01-17  Johnny Jacob <johnnyjacob@gmail.com>

	* gui/dialogs/event-page.c (edit_button_cb): Added.
	edit the selected attendee.
	(sensitize_widgets): enable/disable edit button and 
	Attendee list view.
	(button_press_event): don't popup the menu if editing is
	disabled.
	(get_widgets): get and connect signals for edit button

2006-01-19  Johnny Jacob  <johnnyjacob@gmail.com>

	Fixes #327487
	* gui/dialogs/cal-prefs-dialog.c (default_reminder_units_changed),
	(time_divisions_changed), (week_start_day_changed) : Use 
	e_dialog_combo_box functions to access the widgets.
	(default_reminder_interval_changed): Hack to update the spin
	 button value

2006-01-19  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #327293
	* gui/dialogs/event-editor.c: (window_delete_event),
	(event_editor_construct): handle delete event to just
	hide the window.

2006-01-17  P S Chakravarthi <pchakravarthi@novell.com>

	* gui/e-week-view.c : added some code in e_week_view_on_button_press ()
	to handle double click on an event in week and month view.

2006-01-16  Johnny Jacob <johnnyjacob@gmail.com>

	* gui/dialogs/event-page.c (edit_button_cb): Added.
	edit the selected attendee.
	(sensitize_widgets) : enable/disable edit button and 
	Attendee list view.
	(button_press_event) : don't popup the menu if editing is
	disabled.
	(get_widgets) : get and connect signals for edit button
	* gui/e-meetings-list-view.ch (e_meeting_list_view_set_editable ) :
	Added. set/unset the editable property of list view.

2006-01-16  Harish Krishnaswamy  <kharish@novell.com>

	* gui/calendar-component.c: (impl__get_userCreatableItems):
	* gui/memos-component.c: (impl__get_userCreatableItems):
	* gui/tasks-component.c: (impl__get_userCreatableItems):
	remove shortcut keys (UI Hackfest -
	See http://go-evolution.org/Shortcut_Keys_Review).

2006-01-16  Srinivasa Ragavan  <sragavan@novell.com>

	Fixes #324739
	* gui/e-calendar-view.c: (tooltip_grab),
	(e_calendar_view_get_tooltips):
	* gui/e-day-view.c: (e_day_view_convert_event_coords),
	(e_day_view_on_time_canvas_scroll), (tooltip_get_view_event),
	(tooltip_destroy), (e_day_view_on_text_item_event),
	(e_day_view_on_editing_stopped):
	* gui/e-week-view.c: (e_week_view_on_scroll), (tooltip_destroy),
	(tooltip_event_cb), (e_week_view_on_text_item_event),
	(e_week_view_on_editing_stopped):

2006-01-16  Chenthill Palanisamy  <pchenthill@novell.com>

	Patch submitted by Sebastien Bacher <seb128@debian.org>
	
	Fixes #325629
	* gui/alarm-notify/alarm-queue.c: (popup_notification): Use the new
	apis in libnotify.
	
2006-01-16 P S Chakravarthi <pchakravarthi@novell.com>

	Fixes #324816 #324889

	* gui/alarm-notify/alarm-queue.c : menu_item_toggle_callback :
	revised the code to use only e_source_group_add_source and
	e_source_group_remove_source alone to update gconf rather than
	explicit updating of the gconf xml
	[along with a patch in e-source-list.c]


2006-01-16 P S Chakravarthi <pchakravarthi@novell.com>

	Minor Feature: Reply and Reply all for calendar items of clients
	that support such facility (personal, exchange).

	* gui/e-cal-popup.[ch] : added a definition for
	E_CAL_POPUP_SELECT_NOSAVESCHEDULES which separates out calendar items
	of clients without the static capability of saving schedules.
	* gui/itip-utils.c:
	reply_to_calendar_comp (), html_new_lines_for (): added.
	comp_to_list (): added another boolean parameter called reply_all which
	indicates if reply to everyone is wanted or not.
	added code for E_CAL_COMPONENT_METHOD_REPLY
	itip_get_comp_attendee () : added code for E_CAL_COMPONENT_METHOD_REPLY
	comp_content_type () : added code for E_CAL_COMPONENT_METHOD_REPLY
	* gui/e-calendar-view.c on_reply (), on_reply_all (): added.
	modified E_CAL_POPUP_* menu items to include Reply and Reply All


2006-01-16 P S Chakravarthi <pchakravarthi@novell.com>

	Fixes a crash in alarm-daemon on selecting "Quit" in panel options
	* gui/alarm-notify/alarm-queue.c  (remove_client_alarms):
	Removed the code loops through a list of ids generated.
	used g_hash_table_foreach instead.
	* gui/alarm-notify/alarm-queue.c (add_id_cb) : removed.
	* gui/alarm-notify/alarm-queue.c (remove_comp_by_id) : added
	* gui/alarm-notify/alarm-queue.c (alarm_queue_add_client) :
	replaced g_str_equal with g_direct_equal in g_hash_table_new
	to consider structure pointers rather than strings for keys.


2006-01-13  Johnny Jacob  <johnnyjacob@gmail.com>

	Fixes #213660
	* gui/dialogs/alarm-dialog.c (check_custom_sound):
	Save the directory path in gconf.
	(action_selection_done_cb) : Read from gconf and set
	the default path for the file entry.
	* gui/dialogs/calendar-config.ch (calendar_config_set_dir): Added.
	save the path in gconf.
	(calendar_config_get_dir_path): Added. Retrive the path from gconf.

2006-01-13  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #320101
	* gui/e-select-names-editable.c:
	(e_select_names_editable_get_emails),
	(e_select_names_editable_get_names): Append the list of email ids
	and names.

2006-01-13  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #311888
	* gui/dialogs/recurrence-page.c: (recurrence_page_set_dates):
	Set the selection based on the start date of the appointment.

2006-01-13  Johnny Jacob  <johnnyjacob@gmail.com>

	* gui/dialogs/comp-editor-page.c: (comp_editor_page_class_init),
	(comp_editor_page_unset_focused_widget),
	(comp_editor_page_set_focused_widget):
	* gui/dialogs/comp-editor-page.h:
	* gui/dialogs/comp-editor.c: (menu_edit_copy_cb),
	(menu_edit_paste_cb), (menu_edit_selectall_cb), (menu_edit_cut_cb),
	(comp_editor_init), (comp_editor_append_page),
	(page_focus_out_widget_cb), (page_focus_in_widget_cb):
	* gui/dialogs/event-page.c: (widget_focus_in_cb),
	(widget_focus_out_cb), (init_widgets):
	* gui/dialogs/task-page.c: (widget_focus_in_cb),
	(widget_focus_out_cb), (init_widgets): Implementation for the edit button.

2006-01-13  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #313112
	* gui/e-calendar-view.c: (on_unrecur_appointment):
	Remove the old instance if its a detached instance.

2006-01-13  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #259505
	* gui/gnome-cal.c:
	(gnome_calendar_on_date_navigator_selection_changed): Check 
	the previous selection before setting the view.

2006-01-13  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #271810
	* gui/dialogs/comp-editor.c: (comp_editor_class_init), (save_comp):
	* gui/dialogs/comp-editor.h: Added to signal to indicate the object
	has been created.
	* gui/e-calendar-view.c: (user_created_cb),
	(open_event_with_flags): Emit the user_created signal if object
	is created to ensure the calendar is selected.

2006-01-13  Srinivasa Ragavan  <sragavan@novell.com>

	** Fixes bug #274234
	
	* gui/e-week-view-main-item.c: (e_week_view_main_item_draw_day): Bolds 
	the date if drawing Today.
	* gui/gnome-cal.c (gnome_calendar_goto)
	(gnome_calendar_on_date_navigator_selection_changed): Call the parent
	views to update the selection.

2006-01-13  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #271541
	* calendar.error.xml: Added a new message for displaying 
	error message while trying to create a new event in read only
	calendars
	* gui/e-calendar-view.c: (e_calendar_view_new_appointment_for):
	Run the error dialog using the message.

2006-01-13  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #326735
	* gui/dialogs/event-page.c: (event_page_fill_widgets): If
	the user is not the organizer, set the orignal organizer in
	the combobox and make it non-editable.

2006-01-12  Srinivasa Ragavan  <sragavan@novell.com>

	* gui/GNOME_Evolution_Calendar.server.in.in:

	Changes accels for Calendar (C+F3 -> C+3), Tasks (C+F4 ->C+4) and
	Memo (C+F6 to C+5).

2006-01-12  Harish Krishnaswamy  <kharish@novell.com>

	* gui/gnome-cal.c: (gnome_calendar_class_init):
	Re-define keyboard shortcuts for switching between views.
	UI Hackfest - Refer http://go-evolution.org/Shortcut_Keys_Review

2006-01-10  Simon Zheng  <simon.zheng@sun.com>

	* gui/calendar-component.c: (calendar_component_peek): 
	* gui/calendar-config.c:
	* gui/e-cal-model-tasks.c:
	* gui/e-cal-popup.c:
	* gui/e-cell-date-edit-text.c:
	* gui/e-meeting-store.c:
	* gui/memos-component.c: (memos_component_peek):
	* gui/print.c:
	* gui/tasks-component.c: (tasks_component_peek):
	Use e_util_mkdir_hier() instead of e_mkdir_hier().

        Use e_util_strstrcase() instead of e_strstrcasea().
    
        use e_strftime() in evolution-data-server/
        libedataserver/e-data-server-util.c instead of the copy in 
        evolution/e-util/e-util.c.
 
 	use e_filename_make_safe() in evolution-data-server/
        libedataserver/e-data-server-util.c instead of the copy in 
        evolution/e-util/e-util.c.
        
        use e_utf8_strftime() in evolution-data-server/
        libedataserver/e-data-server-util.c instead of the copy in 
        evolution/e-util/e-util.c.

2006-01-08  Tor Lillqvist  <tml@novell.com>

	* gui/migration.c: Bypass most of this file on Win32, as there are
	no 1.x installations on Win32 to migrate from. Use
	g_filename_to_uri() in a couple places instead of just prefixing
	file://.

2006-01-08  Srinivasa Ragavan  <sragavan@novell.com>

	* gui/dialogs/alarm-dialog.glade: Added code to hscroll the custom
	message of alarm. Fixes bug #325446
	
	* gui/dialogs/task-page.glade: Added code to expand the description
	scrolled window when the parent window is dragged. Fixes bug #325502
	
2005-01-06  Andre Klapper <a9016009@gmx.de>
	* gui/e-alarm-list.c: added translator comments to several strings.
	Fixes bug 325612.

2006-01-06  Andre Klapper <a9016009@gmx.de>
	* evolution/calendar/calendar.error.xml:
	* evolution/calendar/gui/e-itip-control.c:
	* evolution/calendar/gui/dialogs/task-details-page.glade:
	* evolution/calendar/gui/e-cal-component-preview.c:
	* evolution/calendar/gui/e-cal-model-tasks.c:
	* evolution/calendar/gui/e-calendar-table.c:
	* evolution/calendar/gui/print.c:
	changing "cancelled" (British English)
	to "canceled" (American English). Fixes bug 325334.

2005-01-06  Andre Klapper <a9016009@gmx.de>
	* calendar.error.xml: changed "RSVP" to "reply". Fixes bug 261071.

2006-01-06  Simon Zheng <simon.zheng@sun.com>

	* gui/itip-utils.h: use libedataserver/e-account-list.h instead
	of e-util/e-account-list.h.

2006-01-06  Johnny Jacob  <johnnyjacob@gmail.com>

	* gui/dialog/event-page.c: (set_all_day), (sensitize_widgets)
	(time_sel_changed), (update_end_time_selector), (hour_minute_changed),
	(event_page_set_all_day_event), (alarm_changed_cb), (init_widgets) :
	Fixed warnings.

2005-01-06  Boby Wang <boby.wang@sun.com>

	* gui/e-day-view.c: (e_day_view_on_text_item_event):
	Change the keys which need to be pressed to alter the end time
	of the event selected. Now: Ctrl+Shift+Up(or Down)
	Before: Ctrl+Alt+Shift+Up(or Down) conflict with switching
	the workspace in Gnome Desktop.
 
2006-01-05  Johnny Jacob  <johnnyjacob@gmail.com>

	* gui/dialogs/event-page.c (init_widgets): Set alarm-dialog as
	modal.

2006-01-05  Johnny Jacob  <johnnyjacob@gmail.com>

	Fixes #216535
	* gui/dialogs/event-page.c (end_date_changed_cb ): Added. Signal
	handler for end_time.
	(start_date_changed_cb) : Added. Changes the end_time according to 
	the duration.

2006-01-05  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/alarm-notify/alarm-notify-dialog.c: 
	Include the e-time-utils.h from libedataserver
	as it has been removed from e-util. Fixes a build
	break.
	(snooze_pressed_cb):Fixed a warning.

2006-01-05  Johnny Jacob  <johnnyjacob@gmail.com>

	Fixes #258786 
	* gui/e-cal-popup.c (e_cal_popup_target_new_select) : When more than
	one event is selected, check for ICAL_COMPLETED_PROPERTY and set the bit
	accordingly.
	* gui/e-calendar-table.c (tasks_popup_items) : Enable "b0.markmanycomplete" menu item
	only if E_CAL_POPUP_SELECT_NOTCOMPLETE is set.

2006-01-05  Johnny Jacob  <johnnyjacob@gmail.com>

	Fixes #303193
	* gui/alarm-notify/alarm-notify-dialog.c (notified_alarms_dialog_new):
	Changed events handled for edit_btn, snooze_btn from pressed to
	clicked
	(snooze_pressed_callback) : Grab keyboard focus to snooze_btn.
	
2006-01-05  P S Chakravarthi <pchakravarthi@novell.com>

	Fixes 317808

	* gui/alarm-notify/alarm-notify.glade : added hours as a 
	spin button for snooze
	* gui/alarm-notify/alarm-notify-dialog.c : added code to 
	include hours in calculation of snooze time.

2006-01-04  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-day-view.c: (e_day_view_convert_event_coords),
	(tooltip_get_view_event), (tooltip_destroy),
	(e_day_view_on_text_item_event): Reverting the patch as it
	causes crash while viewing the tooltip in top canvas.

2006-01-04  Tor Lillqvist  <tml@novell.com>

	* gui/dialogs/cal-prefs-dialog.c: Reinstate the run-time glade
	file pathname lookup change from 2005-11-26. It had been
	overwritten on 2005-12-19.

2006-01-03  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #325416
	
	* gui/e-day-view.c: (e_day_view_convert_event_coords),
	(tooltip_get_view_event), (tooltip_destroy),
	(e_day_view_on_text_item_event): Read the event num from the position
	of x,y.

2006-01-02  Srinivasa Ragavan  <sragavan@novell.com>

	** Fix for bug #325414

	* gui/e-calendar-view.c: (e_calendar_view_get_tooltips): Added null
	check for the string before creating the tooltips and stopped showing
	it.
	* gui/e-day-view.c: (e_day_view_on_editing_stopped):
	* gui/e-week-view.c: (e_week_view_on_editing_stopped): Added code to
	hide tooltips window when start/stop hiding

2006-01-02  Harish Krishnaswamy  <kharish@novell.com>

	reviewed by: Chenthill Palanisamy <pchenthill@novell.com> 

	* gui/e-tasks.c: (open_ecal): The timezone should be set on
	the task we are trying to open - not on the default.
	Fixes #325489.

2006-01-02  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/cal-prefs-dialog.c: (show_fb_config):
	Fixes #325468 (critical warning crasher).

2005-12-30  Andre Klapper <a9016009@gmx.de>

	* icalendar-importer.c: removed a duplicated exclamation mark.
	  Fixes bug 325123.

2005-12-30  Andre Klapper <a9016009@gmx.de>

	* gui/apps_evolution_calendar.schemas.in.in:
 	  harmonized "URL", "Url" and "url". Fixes bug 325125.

2005-12-30  Andre Klapper <a9016009@gmx.de>

	* calendar.error.xml:
	  changing "canceled" to "cancelled" to stay consistant to the rest.
	  Fixes bug 325116.

2005-12-20  Andre Klapper  <a9016009@gmx.de>

	* calendar.error.xml: Adding punctation to some error messages.
	  Fixes bug 313144.

2005-12-20  Andre Klapper  <a9016009@gmx.de>

	* gui/dialogs/recur-comp.c: fixing string bug 308851

2005-12-23  Harish Krishnaswamy  <kharish@novell.com>

	* conduits/calendar/calendar-conduit.c
	(calconduit_load_configuration): Fix a build breaker.
	g_filename_to_uri takes 3 arguments.

2005-12-21  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #306150
	* gui/apps_evolution_calendar.schemas.in.in: Changed the 
	message id to be gramatically correct.
	
2005-12-21  P S Chakravarthi <pchakravarthi@novell.com>

	Fixes #248133
	* gui/e-meeting-time-sel.c :
	modified the code in options and autopick call backs
	so that the menu that drops is at appropriate position
	as suggested in the bug report.

2005-12-21  Johnny Jacob <johnnyjacob@gmail.com>

	* gui/memos-component.c (impl_createControls): -> createView for
	new shell apis.

2005-12-21  Not Zed  <NotZed@Ximian.com>

	* gui/tasks-component.c (impl_createControls): same.

	* gui/calendar-component.c (impl_createControls): ->createView for
	new shell apis.

2005-12-20  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #324525
	* calendar.error.xml: Set the default response while deleting a
	calendar item to Cancel. Reverting fix for #320210. 

2005-12-20  Veerapuram Varadhan	 <vvaradhan@novell.com>

	Fixes #323125, #323126
	* gui/cal-search-bar.c: Re-order the search-bar menu items and
	make "Summary contains", which is what most people use to search
	for an item (be it a calendar/task/memo), as default.
	(cal_search_bar_construct): Do not set "Category is" as default
	option in search-bar menu.

	* gui/cal-search-bar.h: Re-order the bit-values in accordance to
	re-ordered search-bar menu items.
	
2005-12-20  P S Chakravarthi <pchakravarthi@novell.com>  

	Fixes #323955
	
	* gui/alarm-notify/notify-main.c main (), init_alarm_service (), 
	  alarm_notify_factory_fn ():
	Removed the mutex code for creating alarm_notify_service and
	made init_alarm_service a simple function call rather than in 
	a g_idle_add () to avoid evolution hang.

2005-12-19  Johnny Jacob  <johnnyjacob@gmail.com>

	Fixes Bug #324196 

	* gui/dialogs/comp-editor.c: (prompt_and_save_changes) :
	Renamed from prompt_to_save_changes. Check wheather the 
	summary is empty and prompt.

2005-12-21  Sam Yang  <sam.yang@sun.com>

	Fixes #323984
	* gui/dialogs/task-page.c: (task_page_fill_widgets): Invoke 
	task_page_set_show_timezone() to check whether to show timezone 
	widgets on task page. Just like what we did in init_widgets(). 
	(init_widgets): Since we have called task_page_set_show_timezone() 
	before, remove its duplicate code. Invoke 
	task_page_set_show_categories() directly other than copy its code here.
    	    

2005-12-19  Chenthill Palanisamy  <pchenthill@novell.com>
	
	Committing for David Trowbridge <trowbrds cs colorado edu>

	* gui/Makefile.am, gui/calendar-commands.c,
	gui/calendar-componet.[hc], gui/calendar-config-keys.h,
	gui/calendar-config.c, gui/e-calendar-view.c: remove references to the
	old f/b publishing code

	* gui/e-cal-config.[hc]: add 'prefs' target

	* gui/main.c: remove calls to publishing, use new EConfig-based
	preferences dialog

	* gui/dialogs/Makefile.am, gui/dialogs/cal-prefs-dialog.[ch]: Convert
	to use EConfig

	* gui/dialogs/cal-prefs-dialog.glade: reorganize for EConfig and clean
	up UI for better HIG compliance

2005-12-19  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #324195
	* gui/e-cal-model.c: (e_cal_model_set_instance_times): If the 
	start and end times are same dates, increment the enddate by one.

2005-12-17  Tor Lillqvist  <tml@novell.com>

	* conduits/calendar/calendar-conduit.c
	* gui/e-cal-component-memo-preview.c
	* gui/e-cal-component-preview.c: Use GLib to construct
	filenames from URIs and vice versa.

	* gui/e-cal-list-view.c
	* gui/e-calendar-table.c
	* gui/e-calendar-view.c
	* gui/e-itip-control.c
	* gui/e-memo-table.c: Use gstdio wrappers.

	* gui/e-cal-model-tasks.c
	* gui/e-meeting-store.c: Use e_util_utf8_strcasecmp() to do
	proper casefolded comparison of translated (UTF-8) strings.

	* gui/migration.c: Use gstdio wrappers. Use GDir API instead of
	dirent. Use g_filename_{to,from}_uri(). Open files in binary
	mode. Use e_xml_parse_file() instead of xmlParseFile().

	* gui/alarm-notify/alarm-queue.c: When building against GTK+ 2.9.0
	or later, and always on Win32, use the GtkStatusIcon API instead
	of EggTrayIcon.

	* gui/dialogs/cal-attachment.h
	* gui/dialogs/cal-attachment.c
	* gui/dialogs/cal-attachment-bar.h
	* gui/dialogs/cal-attachment-bar.c: Remove unused files from CVS.

	* gui/dialogs/comp-editor.c: : Use gstdio wrappers. Use
	g_filename_from_uri().

	* importers/icalendar-importer.c: Use g_build_filename(),
	g_filename_from_uri(), g_usleep().

2005-12-15  Srinivasa Ragavan  <sragavan@novell.com>

	** Fixes bug #324094

	* gui/e-calendar-view.c: (e_calendar_view_get_tooltips): Added
	comments to few strings for translation.

2005-12-15  Srinivasa Ragavan  <sragavan@novell.com>

	* gui/e-week-view.c: (e_week_view_reshape_event_span),
	(e_week_view_on_text_item_event): Added event-num to the
	CanvasItem to be picked up by the event handler. This causes 
	crash in the tooltip in the week/month view.

2005-12-15  Srinivasa Ragavan  <sragavan@novell.com>


	* gui/e-calendar-view.c: (e_calendar_view_get_tooltips): Removed
	markup from translatable strings.

2005-12-15  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #324058
	* gui/dialogs/comp-editor.c: (key_press_event),
	(editor_key_press_event), (real_send_comp): Removed the 
	obsolete code which caused the crash. Corrected an invalid type
	cast.

2005-12-15  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #321739
	* gui/dialogs/event-page.c: (event_page_fill_widgets),
	(remove_attendee): Add/remove attendee from e-name-selector also.
	* gui/e-meeting-list-view.h:
	* gui/e-meeting-list-view.c: (get_index_from_role),
	(e_meeting_list_view_add_attendee_to_name_selector),
	(e_meeting_list_view_remove_attendee_from_name_selector),
	(attendee_edited_cb), (process_section), (add_to_list),
	(name_selector_dialog_close_cb): Syncronize the adding/removing
	attendees between EMeetingListView and ENameSelector dialog.	

2005-12-15  Srinivasa Ragavan  <sragavan@novell.com>

	* gui/e-calendar-view.c: (e_calendar_view_get_tooltips): Added 
	code to make the tooltips strings translatable. Also picked up
	the color from the theme for the tooltip instead of hardcoded
	colors.

2005-12-09  Johnny Jacob <johnnyjacob@gmail.com>

	* gui/dialogs/event-page.c : 
	(hour_sel_changed) : Added. Event handler for hour_selector
	(minute_sel_changed) : Added. Event handler for minute_selector
	(update_end_time_selector) : Added. Updates hour_selector 
	& minute_selector  
	(hour_minute_changed) : Added. Updates DateEdit based on hour 
	and minute selectors
	(sensitize_widgets) : Handle end_time_selector's sensitivity.
	(get_widgets) : Get minute_selector.
	(init_widgets) : Initialize hour_selector and minute_selector.
	gui/dialogs/event-page.glade : minute_selector GtkSpinButton added.

	* gui/dialogs/event-page.glade: Added the widgets to the glade
	
2005-11-27  Johnny Jacob  <johnnyjacob@gmail.com>

	** Fixes bug #324060

	* gui/dialogs/comp-editor.c (menu_file_close_cb): 
	Check wheather the summary is empty and prompt accordingly,

2005-11-28  Srinivasa Ragavan <sragavan@novell.com>

	** Refixes the bug #320210

	* calendar.error.xml : Default button is changed to GTK_RESPONSE_YES
	in "prompt-delete-appointment". It was missed out in the earlier
	patch.

2005-11-28  Johnny Jacob  <johnnyjacob@gmail.com>

	** Fixes the bug #320210

	* calendar.error.xml : Default button is changed to GTK_RESPONSE_YES
	in "prompt-delete-titled-appointment".

2005-12-09  Srinivasa Ragavan  <sragavan@novell.com>

	reviewed by: Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/dialogs/comp-editor.c: (editor_key_press_event),
	(setup_widgets):
	* gui/dialogs/event-page.c: (event_page_init),
	(create_image_event_box), (sensitize_widgets), (get_widgets),
	(alarm_changed_cb), (init_widgets),
	(event_page_create_source_option_menu), (make_status_icons):
	* gui/dialogs/event-page.glade:
	* gui/e-calendar-view.c: (e_calendar_view_get_tooltips):
	* gui/e-calendar-view.h:
	* gui/e-day-view.c: (e_day_view_reshape_long_event),
	(e_day_view_reshape_day_event), (tooltip_get_view_event),
	(tooltip_destroy), (e_day_view_on_text_item_event):
	* gui/e-timezone-entry.c: (e_timezone_entry_init):
	* gui/e-week-view.c: (tooltip_get_view_event), (tooltip_destroy),
	(tooltip_event_cb), (e_week_view_on_text_item_event): Fixes tooltip
	crash while editing a component in view. Fixes for layout issues
	and added the alarm icon in the editor.

2005-12-06  Veerapuram Varadhan <vvaradhan@novell.com>

	* conduits/todo/todo-conduit.c (start_calendar_server):
	Authenticate by reading the stored-password for tasks that has
	"auth" property set.  
	(pre_sync): Moved setting of timezone to start_calendar_server as
	per the current e-d-s requirements.
	** Fixes #316315

2005-12-06  Veerapuram Varadhan <vvaradhan@novell.com>

	* conduits/calendar/calendar-conduit.c (start_calendar_server):
	Authenticate by reading the stored-password for calendar that has
	"auth" property set.  
	(pre_sync): Moved setting of timezone to start_calendar_server as
	per the current e-d-s requirements.
	** Fixes #316315
	
2005-12-06  Tor Lillqvist  <tml@novell.com>

	* gui/e-cal-config.c (ecph_class_init)
	* gui/memos-component.c (memos_component_init): Remove stray
	leftover debugging output.

	* gui/memos-component.c (ensure_sources): Use g_filename_to_uri()
	instead of just prefixing "file://".

2005-11-29  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #322616
	* gui/e-cal-model-calendar.c: (get_dtend): Convert to
	proper time zone.

2005-11-28  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #317322
	* gui/e-calendar-view.c:
	(e_calendar_view_delete_selected_occurrence): Do not
	set a new rid if the component already has it. If an 
	instance is removed from master component, send a modify
	request setting the exception for that instance. Cleaned
	up the code.
	
2005-11-28  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #314639
	* gui/e-calendar-view.c: 
	(e_calendar_view_new_appointment_for): Check if the default
	client is loaded before creating the appointment.

2005-11-28  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #318777
	* gui/e-cal-model.c: 
	(add_instance_cb): Set the instance start as the started date for
	the recurring instance.
	(e_cal_view_objects_added_cb): 
	(e_cal_view_objects_removed_cb): Check if the comp_data is removed
	from the array before freeing the data.

2005-11-26  Tor Lillqvist  <tml@novell.com>

	* gui/calendar-commands.c
	* gui/e-cal-list-view.c
	* gui/e-calendar-table.c
	* gui/e-memo-table.c
	* gui/e-memos.c
	* gui/e-tasks.c
	* gui/gnome-cal.c
	* gui/goto.c
	* gui/memos-control.c
	* gui/tasks-control.c
	* gui/alarm-notify/alarm-notify-dialog.c
	* gui/alarm-notify/notify-main.c
	* gui/dialogs/alarm-dialog.c
	* gui/dialogs/alarm-list-dialog.c
	* gui/dialogs/cal-attachment.c
	* gui/dialogs/cal-prefs-dialog.c
	* gui/dialogs/comp-editor.c
	* gui/dialogs/e-delegate-dialog.c
	* gui/dialogs/event-editor.c
	* gui/dialogs/event-page.c
	* gui/dialogs/meeting-page.c
	* gui/dialogs/memo-page.c
	* gui/dialogs/recurrence-page.c
	* gui/dialogs/schedule-page.c
	* gui/dialogs/task-details-page.c
	* gui/dialogs/task-page.c
	* gui/dialogs/url-editor-dialog.c: Include e-util-private.h to get
	redefinition of compile-time pathnames as calls to functions on
	Windows. Construct the pathnames of files and directories under
	the installation prefix at run-time to enable install-anywhere on
	Windows. No effect on functionality on Unix.

2005-11-25  Tor Lillqvist  <tml@novell.com>

	* gui/calendar-component.c (ensure_sources)
	* gui/tasks-component.c (ensure_sources): Use g_filename_to_uri()
	instead of just prefixing "file://" for Win32 portability.

	* gui/e-itip-control.c
	* gui/itip-utils.c: Use g_ascii_strcasecmp() instead of
	strcasecmp() for portability.

2005-11-24  Srinivasa Ragavan and P.S.Chakravarthi <sragavan@novell.com>, <pchakravarthi@novell.com>

	(simultaneously a patch for configure.in in evolution source dir is
	 applied to include libnotify, if present)
	* gui/alarm-notify/alarm-notify.c (alarm_notify_get_selected_calendars):
	added a field in _AlarmNotifyPrivate called selected_calendars and relevant
	code elsewhere for use in disabling and enabling alarms for particular calendars.
	* gui/alarm-notify/alarm-queue.c (free_tray_icon_data):added
	(notify_dialog_cb): modified to free the non snoozed alarms on close.
	(open_alarm_dialog): code added to set up tooltip on the panel icon if there
	are alarms present.
	(alarm_quit): added. Call back when "Quit" option is chosen on right click of the
	panel icon.
	(alarms_configure): added. The call back function for generating the "Configure Alarms"
	dialog on right click on the panel icon.
	(menu_item_toggle_cb): added. Call back when a particular calendar is selected
	or deselected in the "Configure Alarms" dialog.
	(populate): added. Function to populate the view in the dialog that appears when
	"Configure Alarms" option is chosen on right click of the panel icon.
	(alarm_preference_response):added. Called when the "Configure Alarms" dialog is
	closed.
	(tray_icon_clicked_cb): modified to get tooltip, giving alarm summary on mouse over
	the panel icon, to have the panel icon blink in case of active alarms.
	(display_notification): modified the code to change the strings shown in the alarm
	dialog.
	(popup_notification): added. Compiles if there is libnotify. If present, gives
	a small notification bubble on alarm trigger giving necesary information on the
	appointment.
	(alarm_queue_init): modified to add the panel icon that is being used in above
	functions.
	* gui/alarm-notify/config-data.[ch](config_data_get_calendars):added. Gets calendar
	information for notification from a gconf key.
	(config_data_replace_string_list): added. To replace an old gconf key with a new one.
	* gui/alarm-notify/util.[ch] (calculate_time):added. An utility function which
	gives a time difference between two time_t instances in hours, minutes and seconds.


2005-11-24  Tor Lillqvist  <tml@novell.com>

	* gui/e-alarm-list.c
	* gui/e-cal-component-memo-preview.c
	* gui/e-cal-component-preview.c
	* gui/e-cal-model.c
	* gui/e-cell-date-edit-text.c
	* gui/e-date-time-list.c
	* gui/e-itip-control.c
	* gui/e-memos.c
	* gui/e-tasks.c
	* gui/itip-utils.c
	* gui/print.c
	* gui/alarm-notify/alarm-notify-dialog.c
	* gui/alarm-notify/util.c
	* gui/e-calendar-view.c
	* gui/dialogs/alarm-dialog.c
	* gui/dialogs/alarm-list-dialog.c
	* gui/dialogs/comp-editor-util.c
	* gui/dialogs/recurrence-page.c: Include e-time-utils.h from
	libedataserver instead of using evolution's copy which is going
	away.

2005-11-23  Srinivasa Ragavan  <sragavan@novell.com>

	* gui/e-calendar-view.c (tooltip_grab), (get_label),
	(e_calendar_view_get_tooltips): Added a function to get tooltip
	tooltip widget
	* gui/e-calendar-view.h:
	* gui/e-day-view.c (e_day_view_add_event),
	(e_day_view_reshape_long_event), (e_day_view_reshape_day_event),
	(e_day_view_on_text_item_event): Added tooltip for day/work week
	view.
	* gui/e-week-view.c (e_week_view_add_event), (tooltip_event_cb),
	(e_week_view_reshape_event_span), (e_week_view_on_text_item_event):
	Added tooltip for week/month view.
	* gui/e-week-view.h:
	* gui/misc.c (get_position_in_array), (calculate_time): Added a 
	function for converting time to string.
	* gui/misc.h:

2005-11-22  Boby Wang <boby.wang@sun.com>
	Fixes #321237
	* gui/dialogs/event-page.glade: Add the categories' name
	The name of categories in new appointment dialog was missed.

2005-11-17  P. S. Chakravarthi <pchakravarthi@novell.com>

	Fixes #314550
	* gui/alarm-notify/alarm-notify.glade: modified the
	description widget to a scrolled window.
	* gui/alarm-notify/alarm-notify-dialog.c (fill_in_labels):
	modified the way in which description needs to be filled
	to reflect the change of the description from a GtkLabel
	to a GtkScrolledWindow.

2005-11-16  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/dialogs/task-editor.c: (menu_option_status_cmd):
	Modified the body of the function to show the details page.

2005-11-16  Chenthill Palanisamy  <pchenthill@novell.com>

	Reviewed/Edited the patch from Srinivasa Ragavan <sragavan@novell.com>
	
	* gui/apps_evolution_calendar.schemas.in.in:
	* gui/calendar-config.c:
	* gui/calendar-config.h: Removed the view_attendee function and its
	gconf keys.
	* gui/dialogs/event-editor.c: (menu_action_recurrence_cb),
	(menu_action_recurrence_cmd), (event_editor_init),
	(event_editor_construct): 
	* gui/dialogs/event-page.c: (sensitize_widgets): Do not sensitize
	labels.
	(set_classification_menu), (event_page_set_classification), 
	(event_page_fill_widgets), (event_page_fill_component),
	(init_widgets):
	* gui/dialogs/event-page.h:Corrected the spelling of recurrence and
	removed the printf's.
	* gui/dialogs/task-editor.c: (menu_view_role_cb),
	(menu_view_status_cb), (menu_view_type_cb), (menu_view_rsvp_cb),
	(menu_show_time_zone_cb), (menu_show_categories_cb),
	(menu_class_public_cb), (menu_class_private_cb),
	(menu_class_confidential_cb), (menu_option_status_cb),
	(menu_insert_send_options_cmd), (menu_show_time_zone_cmd),
	(menu_option_status_cmd), (task_editor_init),
	(task_editor_construct), (task_editor_edit_comp),
	(task_editor_send_comp), (task_editor_finalize), (show_assignment),
	(task_editor_show_assignment):
	* gui/dialogs/task-page.c: (task_page_init), (cleanup_attendees),
	(task_page_finalize), (set_classification_menu), (clear_widgets),
	(task_page_set_view_role), (task_page_set_view_status),
	(task_page_set_view_type), (task_page_set_view_rsvp),
	(task_page_set_classification), (sensitize_widgets),
	(task_page_hide_options), (task_page_show_options),
	(task_page_set_assignment), (get_current_account),
	(task_page_fill_widgets), (set_attendees),
	(task_page_fill_component), (add_clicked_cb), (existing_attendee),
	(remove_attendee), (remove_clicked_cb), (invite_cb),
	(attendee_added_cb), (popup_add_cb), (popup_delete_cb),
	(context_popup_free), (button_press_event), (list_view_event),
	(list_key_press), (task_page_set_show_timezone),
	(task_page_set_show_categories), (task_page_fill_timezones),
	(get_widgets), (date_changed_cb), (timezone_changed_cb),
	(task_page_sendoptions_clicked_cb), (init_widgets),
	(task_page_construct), (task_page_new),
	(task_page_get_cancel_comp):
	* gui/dialogs/task-page.glade:
	* gui/dialogs/task-page.h: UI changes for task editor.

2005-11-16 Irene Huang <Irene.Huang@sun.com>

	* gui/e-cal-model-memos.c: struct _ECalModelMemosPrivate
	should not be zero sized.

2005-11-16  Irene Huang <Irene.Huang@sun.com>

	* gui/dialogs/cal-prefs-dialog.c:
	(cal_prefs_dialog_url_add_clicked): Use strcmp instead of !=.
	(cal_prefs_dialog_url_remove_clicked):
	When new a dialog of confirm, set parent to
	PREFS_WINDOW (dialog_data->page)
	instead of using PREFS_WINDOW (dialog_data).

2005-11-14  Srinivasa Ragavan <sragavan@novell.com>
 
	reviewed by: Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/apps_evolution_calendar.schemas.in.in:
	* gui/calendar-config-keys.h:
	* gui/calendar-config.h:
	* gui/calendar-config.c: (calendar_config_get_show_attendee),
	(calendar_config_set_show_attendee),
	(calendar_config_get_show_rsvp), (calendar_config_set_show_rsvp),
	(calendar_config_get_show_role), (calendar_config_set_show_role),
	(calendar_config_get_show_type), (calendar_config_set_show_type),
	(calendar_config_get_show_status),
	(calendar_config_set_show_status),
	(calendar_config_get_show_timezone),
	(calendar_config_set_show_timezone),
	(calendar_config_get_show_categories),
	(calendar_config_set_show_categories): Gconf keys to store the last
	modified state.
	* gui/dialogs/Makefile.am: Added the evolution UI directory.
	* gui/dialogs/comp-editor.h:
	* gui/dialogs/comp-editor.c: (menu_file_save_cb),
	(menu_file_close_cb), (menu_edit_copy_cb), (menu_edit_paste_cb),
	(menu_edit_cut_cb), (menu_insert_attachment_cb), (menu_help_cb),
	(setup_widgets), (comp_editor_init), (comp_editor_set_changed),
	(comp_editor_append_page), (comp_editor_notify_client_changed):
	Add only the event page into the notebook.
	* gui/dialogs/event-editor.c: (menu_view_attendee_cb),
	(menu_view_role_cb), (menu_view_status_cb), (menu_view_type_cb),
	(menu_view_rsvp_cb), (menu_action_alarm_cb),
	(menu_show_time_busy_cb), (menu_all_day_event_cb),
	(menu_show_time_zone_cb), (menu_show_categories_cb),
	(menu_class_public_cb), (menu_class_private_cb),
	(menu_class_confidential_cb), (menu_action_recurrance_cb),
	(menu_action_freebusy_cb), (menu_action_alarm_cmd),
	(menu_all_day_event_cmd), (menu_show_time_zone_cmd),
	(menu_action_recurrance_cmd), (menu_action_freebusy_cmd),
	(menu_insert_send_options_cmd), (event_editor_init),
	(event_editor_construct), (event_editor_edit_comp),
	(event_editor_send_comp), (event_editor_finalize), (show_meeting),
	(event_editor_show_meeting): Added the menu and tool bar. Schedule
       	page and recurrence page are shown as dialogs.	
	* gui/dialogs/event-page.h:
	* gui/dialogs/event-page.c: (event_page_init), (cleanup_attendees),
	(event_page_finalize), (set_classification_menu),
	(set_busy_time_menu), (enable_busy_time_menu),
	(set_all_day_event_menu), (set_all_day), (update_time),
	(clear_widgets), (event_page_set_view_attendee),
	(event_page_set_view_role), (event_page_set_view_status),
	(event_page_set_view_type), (event_page_set_view_rsvp),
	(event_page_set_classification), (sensitize_widgets),
	(event_page_hide_options), (event_page_show_options),
	(event_page_set_meeting), (event_page_set_delegate),
	(get_current_account), (event_page_fill_widgets),
	(event_page_fill_component), (time_sel_changed), (add_clicked_cb),
	(existing_attendee), (remove_attendee), (remove_clicked_cb),
	(invite_cb), (attendee_added_cb), (popup_add_cb),
	(popup_delete_cb), (context_popup_free), (button_press_event),
	(list_view_event), (list_key_press),
	(event_page_set_all_day_event), (event_page_set_show_time_busy),
	(event_page_show_alarm), (event_page_set_show_timezone),
	(event_page_set_show_categories), (get_widgets),
	(summary_changed_cb), (notify_dates_changed), (times_updated),
	(start_timezone_changed_cb), (event_page_sendoptions_clicked_cb),
	(init_widgets), (event_page_construct), (event_page_new),
	(event_page_create_source_option_menu), (set_attendees),
	(event_page_get_cancel_comp):
	* gui/dialogs/event-page.glade: UI Changes to have the event 
	page alone.
	* gui/dialogs/task-editor.c: (task_editor_construct),
	(task_editor_edit_comp), (show_assignment):
	* gui/dialogs/memo-editor.c: (memo_editor_construct): Make changes
	for append page function.
	* gui/dialogs/schedule-page.c: (schedule_page_construct): Set the 
	size of the meeting time selector.

2005-11-09  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #313538
	* gui/dialogs/event-editor.c: 
	(event_editor_edit_comp): Do not remove the attendees. Removed
	the obsolete code as scheduling and meeting pages will be created
	only for meetings now.

2005-11-10  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #321088
	* gui/e-meeting-time-sel.c (e_meeting_time_selector_construct):
	(e_meeting_time_selector_style_set),
	(e_meeting_time_selector_ensure_meeting_time_shown): Set the 
	scroll_increment to days width. Show only 35 days in the canvas
	since we query freebusy only for those. Set the canvas view to 
	meetings day start instead of time.

2005-11-09  Veerapuram Varadhan <vvaradhan@novell.com>

	Committing for Nathan Owens <pianocomp81@yahoo.com>	
	
	* calendar/conduit/todo/todo-conduit.c (local_record_from_comp)
	(comp_from_remote_record) (post_sync) (add_category_if_possible):
	Category syncing in todo-conduits.
	
2005-11-09  Dinesh Layek <LDinesh@novell.com>

	Fixes #273322
	* gui/e-pub-utils.c
	(e_pub_publish): removed the source from uri->calendars when the 
	calendar backend no longer exists.
	
2005-11-08  P. S. Chakravarthi <pchakravarthi@novell.com>

	Fixes #316710
	* gui/alarm-notify/alarm-notify.c 
	(alarm_notify_add_calendars): modified the code to
	generate the correct key for obtaining the password
	for an authenticated calendar.

2005-11-08  P. S. Chakravarthi <pchakravarthi@novell.com>

	Fixes 319217
	* gui/alarm-notify/alarm-queue.c (load_alarms_for_today):
	changed the code to load alarms from current day beginning if
	last notification time is beyond current day's begin time and
	* gui/alarm-notify/alarm.c (setup_timeout):
	removed the check which sees if the alarm's trigger time has
	got past current time so that alarms missed in current day are
	always shown.

2005-10-21  Mubeen Jukaku  <jmubeen@novell.com>

	Sankar Committting for Mubeen
	
	Fixes #310495
	* gui/e-calendar-table.etspec: Do string case comparison for Summary
	and Categories field

2005-10-21  Viren.L  <lviren@novell.com>

	Sankar committing for Viren

	Fixes #272920

	* gui/gnome-cal.c (setup_widgets):
	Connect signal to catch the scroll-event on the widget of date navigator 
	and handle the GDK_SCROLL_UP,GDK_SCROLL_DOWN in the callback.

		
2005-10-19  Harish Krishnaswamy <kharish@novell.com>

	Committing for Nathan Owens <pianocomp81@yahoo.com>
	
	* calendar.error.xml: Added strings for memos
	* calendar/conduits/Makefile.am: added 'memo' to SUBDIRS
	* calendar/conduits/memo/*: initial memo conduit
	* calendar/gui/calendar-config.[ch]: (calendar_config_get_memos_selected)
	(calendar_config_set_memos_selected) (calendar_config_add_notification_memos_selected): 
	gconf get/set for memos lists
	* calendar/gui/calendar-config-keys.h: added gconf keys for Memos component
	* calendar/gui/comp-util.[ch] (cal_comp_memo_new_with_defaults): added function
	to create memo component with defaults
	* calendar/gui/e-cal-component-memo-preview.[ch]: initial file for preview of a memo
	* calendar/gui/e-cal-model-memos.[ch]: initial model for the memos component.
	* calendar/gui/e-memos.[ch]: initial memos base
	* calendar/gui/e-memo-table.[ch]: initial view for memos component
	* calendar/gui/e-memo-table.etspec: etspec for memos e-table
	* calendar/gui/e-memo-table-config.[ch]: initial configuration for memos e-table view
	* calendar/gui/GNOME_Evolution_Calendar.server.in.in: added Memos component
	* calendar/gui/main.c: added initialization code for Memos component
	* calendar/gui/Makefile.am: added entries for new files for Memos component
	* calendar/gui/memos-component.[ch]: Memos component base code
	* calendar/gui/memos-control.[ch]: initial user control code. Used for printing,
	copying, etc.
	* calendar/gui/migration.c: added migration for memos component - also takes care
	of initialization for the first time the Memos component is run.
	* calendar/gui/dialogs/calendar-setup.[ch]: added code to create a new Memo List
	* calendar/gui/dialogs/Makefile.am: added files for build
	* calendar/gui/dialogs/memo-editor.[ch]: initial memo editor
	* calendar/gui/dialogs/memo-page.[ch]: page in editor for editing a memo
	* calendar/gui/dialogs/memo-page.glade: glade file for memo-editor-page
	* calendar/gui/dialogs/send-comp.c: added E_CAL_COMPONENT_JOURNAL support for Memo
	component
	
2005-10-18  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #308802
	* gui/calendar-component.c: (setup_create_ecal):
	* gui/dialogs/event-page.c: (source_changed_cb):
	* gui/dialogs/task-page.c: (source_changed_cb):
	* gui/e-itip-control.c: (cal_opened_cb), (start_calendar_server),
	(find_cal_opened_cb):
	* gui/e-tasks.c: (set_timezone), (client_cal_opened_cb),
	(default_client_cal_opened_cb), (open_ecal):
	* gui/gnome-cal.c: (client_cal_opened_cb),
	(default_client_cal_opened_cb), (open_ecal),
	(gnome_calendar_set_default_source):
	* gui/tasks-component.c: (setup_create_ecal): Set the default
	timezone in the ecal once its created and before opening ecal.

2005-10-18  Srinivasa Ragavan <sragavan@novell.com>

	* gui/dialogs/comp-editor.c: (open_attachment)
	(attachment_bar_icon_clicked_cb), (cab_open), (cab_popup),
	(button_press_event): Handles the popup menu on the attachment
	bar.
	* gui/e-cal-popup.c: (temp_save_part), (ecalp_part_popup_saveas),
	(ecalp_part_popup_save_selected),
	(ecalp_part_popup_set_background), (ecalp_apps_open_in),
	(ecalp_apps_popup_free), (ecalp_standard_items_free),
	(ecalp_standard_menu_factory), (ecalp_class_init),
	(e_cal_popup_target_new_attachments): Provides the background
	image setting, open with application for each attachment.
	* gui/e-cal-popup.h:
	* gui/e-calendar-table.c: (e_calendar_table_on_save_as)
	* gui/e-calendar-view.c: (on_save_as): Change the parameters to
	e_file_dialog_save.

2005-10-17 Irene Huang <Irene.Huang@sun.com> 

	* gui/e-tasks.c: (e_tasks_show_preview): Should not return a value, so, 
	change all the g_return_val_if_fail to g_return_if_fail.

2005-10-10  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #266144, 317575, 313725.
	* gui/alarm-notify/alarm-queue.c: (remove_queued_alarm),
	(add_component_alarms), (lookup_comp_queued_alarms), (remove_comp),
	(query_objects_changed_cb), (compare_ids),
	(alarm_queue_add_client), (add_id_cb), (remove_client_alarms),
	(update_cqa): 
	* gui/e-cal-model.c (search_by_id_and_client):Use ECalComponentId.
	(e_cal_view_objects_added_cb), (e_cal_view_objects_modified_cb),
	(e_cal_view_objects_removed_cb),
	(e_cal_model_get_component_for_uid),
	(e_cal_model_set_instance_times): set the proper timezone.
	* gui/e-cal-model.h:
	* gui/e-calendar-view.c: (delete_event): Do not remove the 
	recurrence id.
	* gui/e-calendar-table.c (hide_completed_rows),
	(show_completed_rows): Use ECalComponentId to get a component
	for model.
	* gui/gnome-cal.c: (dn_e_cal_view_objects_removed_cb):

2005-10-06  Srinivasa Ragavan <sragavan@novell.com>

	* calendar.error.xml: Added accels to the Disard new event/
	task dialog.

	* gui/apps_evolution_calendar.schemas.in.in: Added new key
	for storing the presence of preview.

	* gui/calendar-config-keys.h: Added key for preview status

	* gui/calendar-config.[ch] (calendar_config_set_vpane_pos): Added
	functions to get preview status.

	* gui/e-meeting-list-view.c (build_table): makes the invites
	tab list view tabs resizable and reorderable.

	* gui/e-meeting-time-sel.c (e_meeting_time_selector_construct): Made
	the recursive not show status and type.

	* gui/e-tasks.[ch] (setup_widgets) (e_tasks_new_task): made a provsion
	to show/hide the preview.

	* gui/tasks-control.c (tasks_control_activate)
	(tasks_control_forward_cmd): Added bonobo interface to show/hide
	preview pane.

	* gui/dialogs/comp-editor.c (attachment_bar_changed_cb) (setup_widgets) 
	(comp_editor_append_page) (set_attachment_list): Added expander
	for attachment bar.

	* gui/dialogs/event-editor.c (event_editor_construct) (event_editor_edit_comp)
	(show_meeting): Added accelerators for the comp editor dialogs for
	tasks, event, meeting etc.

	* gui/dialogs/event-page.glade: key accelerator for 'busy'

	* gui/dialogs/meeting-page.c (remove_clicked_cb) (client_changed_cb) 
	(popup_delete_cb) (button_press_event) (meeting_page_construct) 
	
	* gui/dialogs/meeting-page.glade: key accelerators for dialog.
	
	* gui/dialogs/task-details-page.glade: key accelerators for dialog.

	* gui/dialogs/task-editor.c (task_editor_construct) (task_editor_edit_comp)
	(show_assignment): Key accelerators for task tab 

	* gui/dialogs/task-page.glade: key accelerators for task dialog


2005-10-02  Srinivasa Ragavan <sragavan@novell.com>
	
	Provides across calendars keyboard accelerators for popup menus

	* gui/calendar-component.c (ecc_source_popups):
	* gui/e-calendar-view.c (ecv_main_items) (ecv_main_items):
	* gui/gnome-cal.c (gc_popups):
	* gui/tasks-component.c (etc_source_popups):
	Added Keybinding for popup menu.
	
2005-09-30  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #315095
	* gui/e-pub-utils.c: Added a global variable to check
	if the publish time is modified in gconf and removed
	just_published function.
	(is_publish_time): cleaned up the code. 
	(e_pub_publish): send the list of users in the get_freebusy
	information.

2005-10-03  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #271480
	* gui/alarm-notify/notify-main.c: (alarm_notify_factory_fn),
	(init_alarm_service): Added a global static mutex to ensure 
	the alarm_notify object is created only once.

2005-10-03  Mubeen Jukaku  <jmubeen@novell.com>

	Fixes #264449
	* gui/e-tasks.c: (update_view_cb),
	(config_process_completed_tasks_changed_cb): Use process_completed_tasks
	instead of update_view
	* gui/gnome-cal.c (update_todo_view_cb),
	(config_process_completed_tasks_changed_cb): ditto
	* gui/e-calendar-table.[ch]:
	(e_cal_model_process_completed_tasks): New function to hide
	completed tasks
	* gui/calendar-config.[ch]: 
	(calendar_config_get_process_completed_tasks_sexp): Added a parameter
	get_completed to get completed or not completed tasks
	* gui/misc.[ch]: 
	(get_position_in_array): Moved from gui/e-cal-model.c
	* gui/e-cal-model.[ch]:
	(e_cal_model_set_instance_times): Renamed from static function
	set_instance_times
	(search_by_uid_and_client): fix for client is NULL
	* gui/e-cal-model-tasks.[ch]:
	(e_cal_model_tasks_update_due_tasks): Update due tasks

2005-10-01  Viren.L  <lviren@novell.com>
	
	Fixes #257649
	* gui/e-calendar-view.h:
	  Added E_CAL_VIEW_MOVE_PAGE_UP & E_CAL_VIEW_MOVE_PAGE_DOWN to ECalViewMoveDirection.
	* gui/e-week-view.c (e_week_view_do_key_press), (e_week_view_scroll_a_step):
	Handled PageUp & PageDown cases and compute new value for
	adjustment using the current page size value.

2005-10-01  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #244981
	* gui/print.c: (print_week_day_event): Add the end date
	while printing in the week view.

2005-10-01  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #316954
	* gui/e-calendar-view.c: (e_calendar_view_edit_appointment): Set
	the USER_ORG flag if the appointment is converted to a meeting.

2005-10-01  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #301391
	* gui/e-calendar-view.c: (clipboard_get_text_cb):
	Remove the X-EVOLUTION-ENDDATE property, so that
	the copy/paste of recurrence event expands properly in 
	the view.
2005-10-01  P. S. Chakravarthi <pchakravarthi@novell.com>

	Fixes #269685
	* gui/alarm-notify/alarm-queue.c:
	(update_cqa): added.
	(update_qa): added. Invoked by update_cqa ()
	(query_objects_changed_cb): Modified to invoke update_cqa ()
	inorder to update the local alarm structures whenver any
	non time related modifications are made to an existing calendar
	component.

2005-09-30  Veerapuram Varadhan <vvaradhan@novell.com>

	Fixes #303702
	* calendar/conduits/calendar/calendar-conduit.c:
	(process_multi_day): Call e_cal_component_commit_sequence() after
	modifying the properties of an ECalComponent and before fetching
	its icalcomponent.

	Reworked the patch from Dave Malcolm <dmalcolm@redhat.com>
	
2005-09-30  Viren.L  <lviren@novell.com>

	Fixes #258786
	* gui/e-cal-popup.[ch] (e_cal_popup_target_new_select) : Added 
	E_CAL_POPUP_SELECT_NOTCOMPLETE flag.
	* gui/e-cal-menu.[ch] (e_cal_menu_target_new_select) : Added 
	E_CAL_MENU_SELECT_NOTCOMPLETE flag.
	* gui/tasks-control.c (tasks_sensitize_table):
	* gui/e-calendar-table.c (tasks_popup_items): Added the NOT_COMPLETE
	flag.

2005-09-30  Viren.L  <lviren@novell.com>

	Fixes #314599.
	* gui/dialogs/recurrence-page.c (clear_widgets):
	Changed parameter ENDING_FOREVER to ENDING_FOR while invoking 
	e_dialog_option_menu_set, invoked make_ending_count_special ().

2005-09-30  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #273781
	* gui/alarm-notify/alarm-notify-dialog.c:
	(notified_alarms_dialog_new): Set the alarm window to
	appear on the top.

2005-09-30  P. S. Chakravarthi <pchakravarthi@novell.com>

	Fix #274188
	* gui/e-cal-model.c
	(get_dtstart): make use of internal zone information so that
	previous date is not shown in list view for an all-day event.

2005-09-30  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #273847
	* gui/dialogs/comp-editor.c: (comp_editor_get_mime_attach_list): set
	the disposition from the attachment.
	* gui/itip-utils.c: (append_cal_attachments): Send the right disposition
	value.
	* gui/itip-utils.h: Adding variable dipostion to CalMimeAttach structure.

2005-09-30  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #246480
	* gui/e-calendar-view.c: (e_calendar_view_add_event): Remember
       the time if the event is copy pasted in week or month views.	

2005-08-30  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #270036
	(init_widgets): added the missing signal handler when
	the list selection changes.

	Reworked the patch from Dinesh Layek <ldinesh@novell.com>

2005-08-29  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-calendar-table.c (e_calendar_table_open_task): Set the 
	USER_ORG flag while converting a personal task to assigned one.

2005-09-28  Viren.L  <lviren@novell.com>

	Fixes #317014
	* gui/e-calendar-table.c (e_calendar_table_open_task):
	Set the flags in e_calendar_table_open_task.
	* gui/gnome-cal.c (gnome_calendar_new_task):set the NEW_ITEM flag.
	* gui/tasks-component.c (create_new_todo),
	* gui/e-tasks.c (e_tasks_new_task): set NEW_ITEM & USER_ORG flag.
	* gui/comp-editor-factory.c (edit_existing):check itip_organizer_is_user
	  for tasks as well. 
	* gui/dialogs/comp-editor.h: Added COMP_EDITOR_IS_ASSIGNED to CompEditorFlags.
	* gui/dialogs/comp-editor-page.h: Added COMP_EDITOR_PAGE_IS_ASSIGNED to page flags.
	* gui/dialogs/task-editor.[ch]: Changed parameters for task_editor_new and
	  task_editor_construct.

2005-09-28  Tor Lillqvist  <tml@novell.com>

	* gui/e-cal-model-calendar.c (set_transparency)
	* gui/e-cal-model.c (set_classification)
	* gui/itip-bonobo-control.c (pstream_load, pstream_save): Use
	g_ascii_strcasecmp() instead of strcasecmp(). We are comparing to
	literal ASCII strings, just casefolding ASCII is enough. Also
	better for portability.

2005-09-08  P. S. Chakravarthi <pchakravarthi@novell.com>

	Fix #261625
	* gui/alarm-notify/alarm.c
	(queue_alarm): add the alarm in the queue only when the 
	the alarm trigger time is after the current time.

2005-09-01  Dinesh Layek  <ldinesh@novell.com>

	Fixes #314922, 311694, 314918
	* calendar-component.c (create_new_event): Set the USER_ORG and MEETING flag properly.

2005-08-24  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #313705
	* gui/alarm-notify/Makefile.am: Added CAMEL_LIBS.
	* gui/alarm-notify/notify-main.c: (main): Initialize
	the camel object.

2005-08-23  Not Zed  <NotZed@Ximian.com>

	* gui/e-cal-config.h: source-type is an enum not a pointer!

	* gui/tasks-component.c (selector_tree_drag_data_received):
	constify uid.

	* gui/itip-utils.c (comp_sentby): use the right list type for
	attendees.

	* gui/gnome-cal.c (config_categories_changed_cb): fix cast.
	(setup_widgets): fix casts.

	* gui/e-tasks.c: add missing e-categories.h include.
	(config_categories_changed_cb): fix cast.

	* gui/e-week-view.c (e_week_view_realize): remove unused.

	* gui/e-select-names-editable.c
	(e_select_names_editable_get_emails): remve unused.

	* gui/e-meeting-time-sel.c (e_meeting_time_selector_style_set):
	remove/comment unused.

	* gui/e-meeting-store.c (freebusy_async): g* strikes again, use
	the right lock/unlock function for the g-spastic-mutex.
	(process_callbacks_main_thread): fix signature to match usage.
	(refresh_queue_add): cast off warning

	* gui/e-itip-control.c (cleanup_ecal): fix signature to match use

	* gui/e-day-view.c (process_component): remove unused vars.
	(e_day_view_realize): more.
	(e_day_view_on_event_double_click): cast
	(e_day_view_update_calendar_selection_time): define out unused

	* gui/e-calendar-table.c (e_calendar_table_init): more a11y
	related casts.

	* gui/e-calendar-view.c (on_edit_appointment): proper boolean
	conversion of a pointer.
	(transfer_selected_items): cast
	(on_unrecur_appointment): remove unused prop
	(e_calendar_view_open_event): proper boolean conversion of pointer.

	* gui/e-cal-popup.c (needs_to_accept): remove unused.

	* gui/e-cal-model.c (set_instance_times): remove unused.
	:include missing calendar-config.

	* gui/dialogs/meeting-page.c (clear_widgets): yawn, another
	gtklabel wawrning.
	(meeting_page_fill_component): constify attendees.

	* gui/dialogs/e-send-options-utils.c: remove unused global sod,
	add missing string.h

	* gui/dialogs/e-delegate-dialog.c (e_delegate_dialog_construct):
	remove unused.

	* gui/dialogs/comp-editor.c (response_cb): wtf, this can't use
	em_utils!!!  #if 0 it out and add a build warning.
	(cab_popup_position): pointer cast.
	(set_attachment_list): remove unused.

	* gui/dialogs/calendar-setup.c (eccp_general_offline): change very
	incorrect N_ macro to _.
	(CalendarSourceDialog): Umm, source_type is an enum, not a
	pointer.
	(eccp_get_source_color): remove unused.

2005-08-19  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/comp-editor.h: Remove unwanted include of
	header that also borks the build.

2005-08-02  Viren.l  <lviren@novell.com>

	* gui/dialogs/meeting-page.c:(meeting_page_fill_widgets):
	  Removed sensitizing of Add, Remove & Invite buttons.
	  Assigned user_org using CompEditorPageFlags.
	* gui/dialogs/recurrence-page.c: (sensitize_button):
	  Added a check for COMP_EDITOR_PAGE_MEETING.    	
	* gui/dialogs/event-page.c: (sensitize_widgets):
	  Added sensitize boolean variable to store the && operation of
	  user_org,!read_only.	  
	* gui/dialogs/event-editor.c: (show_meeting):
	  If user is not organizer dont allow the widget to receive 
	  notification of drags.
	* gui/e-cal-popup.[ch]: (e_cal_popup_target_new_attachments):
	  Added a flag E_CAL_POPUP_ATTACHMENTS_MODIFY and set it in the
	  e_cal_popup_target_new_attachments function.
	* gui/dialogs/comp-editor.c: Added visibility mask 
	  to Remove and Add attachments popup menus.
	  Removed function comp_editor_sensitize_attachment_bar which
	  is no longer required.
	* gui/dialogs/task-editor.c: (task_editor_construct):
	  Removed call made to comp_editor_sensitize_attachment_bar.		
2005-08-16  Not Zed  <NotZed@Ximian.com>

	** See bug #312668.

	* gui/calendar-offline-handler.[ch]: removed.  Not even used
	anyway, god knows how it works.

2005-08-17  Carsten Guenther <carsten.guenther@scalix.com>

	Fixes http://bugzilla.gnome.org/show_bug.cgi?id=313555
	* gui/dialogs/comp-editor.c:
	(get_attachment_list): Only save attachment to file
	if file does not exist yet.

2005-08-17  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #311904
	* gui/dialogs/task-details-page.c:
	(task_details_page_fill_component): Check if the date is
	set before comparing it with current day for validation.

2005-08-12  Viren.L  <lviren@novell.com>

	Fixes #312739
	* gui/e-day-view.c: (e_day_view_on_event_double_click):
	Removed the checks for event_num, editing_event_day and ical_component_get_current_property. 

2005-08-12  Viren.L  <lviren@novell.com>

	Fixes #310338
	* gui/alarm-notify-dialog.c:(notified_alarms_dialog_new),
	(edit_pressed_cb),(snooze_pressed_cb),(dialog_response_cb):	
	Get the widget and connected "pressed" signal.
	Removed AN_ALARM_EDIT and AN_ALARM_SNOOZE enums.
	Removed check of these enums in dialog_response_cb and
	moved the code to it's associated call backs.
	* gui/alarm-notify/alarm-notify.glade:
	Changed the button name to button-edit and button-snooze.
	* gui/comp-editor-factory.c: (edit_existing):
	Added CompEditorFlags and used to invoke event_editor_new.		

2005-08-11  Carsten Guenther <carsten.guenther@scalix.com>

	* gui/dialogs/comp-editor.c: (get_attachment_list),
	(attachment_bar_icon_clicked_cb): Use g_build_path
	instead of g_strconcat to build the pathname to the
	attachment file.
	(set_attachment_list): Fixed how mime filename gets
	extracted from attachments pathname.

2005-08-10  Tor Lillqvist  <tml@novell.com>

	* importers/Makefile.am: Use privsolib instead of privlib (they
	are the same on Unix, on Win32 privsolibdir is libdir). Use
	NO_UNDEFINED.

2005-08-10  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/dialogs/comp-editor.c: (get_attachment_list),
	(set_attachment_list), (comp_editor_get_mime_attach_list):
	Removed the warnings.

2005-08-10  Dinesh Layek  < LDinesh@novell.com >

        Fixes #310438
	* gui/e-tasks.c:
        (table_drag_data_delete): removing e_cal_object only when the 
	success flag is true
        * gui/tasks-component.c:
	(selector_tree_drag_data_received): made the success flag FALSE 
	when the data is already present in the destination calendar, 
	and TRUE otherwise.

2005-08-05  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-cal-component-preview.c: (write_html): Using format
	specifier with gtk_html_stream_printf ().
	* gui/e-calendar-table.c: (e_calendar_table_on_save_as):
	* gui/e-calendar-view.c: (on_save_as): Using format
	specifier for fprintf.
	Vulnerability patch submitted by 
	"Sitic Vulnerability Advisory <sitic@pts.se>"

2005-08-05  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #311686
	* gui/e-meeting-list-view.c (row_activated_cb):Added
	a null check for path.

2005-08-05  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #312460
	* gui/itip-utils.c (itip_get_comp_attendee): Removed
	a double free.


2005-08-04  Viren.l <lviren@novell.com>

	Fixes #302460
	* gui/e-day-view.c (e_day_view_on_event_double_click):
	  use icalcomponent_get_current_property and invoke 
	  e_calendar_view_edit_appointment with appropriate 
	  parameters.	  

2005-08-03  Harry Lu  <harry.lu@sun.com>

	Fix for #312447.

	* gui/gnome-cal.c: (notify_selected_time_changed): new function
	to emit "selected_time_changed" signal for all views.
	(gnome_calendar_goto_date): call notify_selected_time_changed
	after date changing.

2005-08-03  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #309601
	* gui/e-day-view.c (e_day_view_on_top_canvas_drag_data_received):
	 (e_day_view_on_main_canvas_drag_data_received):
	 (e_day_view_finish_long_event_resize):
	 (e_day_view_finish_resize):
	 (e_day_view_change_event_time): Allow modification of the item only 
	 for organizer.	
	 * gui/itip-utils.c (itip_organizer_is_user): added the check for the 
	 static capability "no-organizer".
	
	 commiting for viren.l <lviren@novell.com>	
	 
2005-08-03  P. S. Chakravarthi	<pchakravarthi@novell.com>

	Fixes #306017
	* gui/e-calendar-view.c: (e_calendar_view_delete_selected_occurrence):
	Obtain the default zone information from cal-view and eventually use it to 
	determine the correct rid for an all-day event.

2005-08-01  Shakti Sen <shprasad@novell.com>

	* gui/tasks-control.c (tasks_control_sensitize_commands): Added support
	for the Target selection for 'Tasks'.
	* gui/e-calendar-table.c (e_calendar_table_open_selected): Resolved
	one undefined symbol.
	* gui/e-tasks.c: Renamed the function name from 'e_tasks_get_tasks_menu'
	to 'e_tasks_get_tasks_menu'
	* gui/e-tasks.h: Added the declaration for 'e_tasks_get_tasks_menu'.
	Thus fixes few warning messages.
	* gui/e-cal-menu.c (e_cal_menu_target_new_select): Set the mask for
	E_CAL_MENU_SELECT_ASSIGNABLE.

	Fixes bug #231968

2005-07-29  Chenthill Palanisamy  <pchenthill@novell.com>


	* gui/e-day-view.c: (e_day_view_update_event_label),
	(e_day_view_update_long_event_label):
	* gui/e-week-view.c: (e_week_view_reshape_event_span):
	Commenting the code for marking the summary of unaccepted
	meetings as bold, since pango crashes for some meetings.

2005-07-27  Mengjie Yu  <meng-jie.yu@sun.com>

	* gui/e-cal-model-calendar.c:
	Add reserved field for an empty structure.
	* gui/e-cal-model-tasks.c:
	Add reserved field for an empty structure.

	Fixes #310198

2005-07-25  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-cal-popup.c: 
	(e_cal_popup_target_new_select): send the comp_data->client
	to itip_get_comp_attendee.

2005-07-25  Viren.l  <lviren@novel.com>

	Fixes:248126
	* gui/tasks-control.c (tasks_control_assign_cmd)
	(tasks_control_forward_cmd): Added 2 Bonobo UI verbs for Assign Task and Forward as iCalendar
        and the definitions to commands.
        * gui/e-calendar-table.[ch] (e_calendar_table_open_task)
        (e_calendar_table_get_selected_comp): renamed static functions open_task and get_selected_comp
        and made them public.

2005-07-23  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-cal-popup.[ch]: (needs_to_accept),
	(e_cal_popup_target_new_select): Added a mask 
	to check if the meeting needs to be accepted.
	* gui/e-calendar-view.c: Increased the index of the 
	labels.
	* gui/e-day-view.c: (set_text_as_bold):
	* gui/e-week-view.c: (set_text_as_bold): Show as bold
	even if the attendee property is not found, since it might
	be a mailing list. The attendee will be added once he accepts 
	meeting.

2005-07-22  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #309991
	* gui/e-cal-model.c: (ensure_dates_are_in_default_zone),
	(e_cal_view_objects_added_cb): 
	* gui/gnome-cal.c: (ensure_dates_are_in_default_zone),
	(dn_e_cal_view_objects_added_cb): If the start date and end
	date are in UTC convert them to default zone while displaying.

2005-07-21  Shakti Sen  <shprasad@novell.com>

	* gui/e-tasks.c (e_tasks_init): Creating the tasks-menu.
	* gui/tasks-control.c (tasks_control_activate,
	tasks_control_deactivate): Activated/deactivated the menu.
	In brief, added support for 'Tasks' menu creation.

	Fixes bug #310985.

2005-07-21  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #309602
	* gui/e-day-view.c: (set_text_as_bold),
	(e_day_view_update_event_label),
	(e_day_view_update_long_event_label),
	(e_day_view_ensure_rows_visible):
	* gui/e-week-view.c: (set_text_as_bold),
	(e_week_view_update_event_cb): Check if the backend
	allows to adding the unaccepted appointments to calendar
	and show its summary as bold text.
	
2005-07-21  Harish Krishnaswamy  <kharish@novell.com>

	* gui/gnome-cal.c (gnome_calendar_class_init),
	(adjust_e_cal_view_sexp), (display_view),
	(gnome_calendar_change_view):
	* gui/gnome-cal.h:
	Fixes #245331. Keybindings for switching b/w
	calendar views.

2005-07-20  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #310340
	* gui/e-calendar-view.c:
	(e_calendar_view_delete_selected_occurrence): Check if the 
	backend supports having master object for recurrences and set
	the recurrence id accordingly.

2005-07-20  Srinivasa Ragavan <sragavan@novell.com>
	
	* gui/dialogs/comp-editor.c: (get_attachment_list) (comp_editor_get_mime_attach_list)
	made it use e_attachment_bar_get_parts instead of the old api

2005-07-20  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #309680
	* gui/e-calendar-view.c (on_unrecur_appointment): Remove 
	the recurrence id only from e_cal_comp.

2005-07-08  Kjartan Maraas  <kmaraas@gnome.org>

	* gui/alarm-notify/alarm-notify.c: (alarm_notify_add_calendar):
	Free the uri to the source in a few cases. 
	* gui/calendar-config.c: (calendar_config_get_icaltimezone):
	Free the timezone location.

2005-07-12  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-meeting-list-view.c: 
	(process_section): Expand the mailing list into list of email
	ids if the server has not expanded them while autocompletion.

2005-07-12  Srinivasa Ragavan <sragavan@novell.com>

	* gui/dialogs/comp-editor.c: (get_attachment_list) (attachment_guess_mime_type)
	(comp_editor_close) (comp_editor_get_mime_attach_list): Fixed some compiler 
	warning and checked some negative cases
	
2005-07-11  Srinivasa Ragavan <sragavan@novell.com>

	* gui/dialogs/comp-editor.c:(get_attachment_list) (attachment_bar_changed_cb)
	(attachment_bar_icon_clicked_cb) (cab_popups_free) (setup_widgets)
	(set_attachment_list) (comp_editor_get_mime_attach_list)
	Fixed huge memory leak, and come compile warnings. Also fixed
	a crash, when double click on attachments.
	
2005-07-11  Srinivasa Ragavan <sragavan@novell.com>

	* gui/itip-utils.[ch]: Added a structure.
	* gui/dialogs/Makefile.am: Removed cal-attachment*
	* gui/dialogs/comp-editor.[ch]: (attach_message) (drop_action)
	(send_timezone) (save_comp) (response_cb) (delete_event_cb) 
	(attachment_bar_changed_cb) (attachment_bar_icon_clicked_cb)
	(setup_widgets) (set_icon_from_comp) (fill_widgets) (real_edit_comp)
	Removed the attachment bar specific to calendar and made a merged
	one at widgets/misc/e-attachment*

2005-07-11  Chenthill Palanisamy  <pchenthill@novell.com>

	* conduits/calendar/calendar-conduit.c: (process_multi_day),
	(delete_record):
	* gui/dialogs/comp-editor.c: (save_comp), (delete_comp):
	* gui/e-calendar-view.c: (e_calendar_view_cut_clipboard),
	(delete_event), (transfer_item_to):
	* gui/e-itip-control.c: (remove_item):
	* gui/gnome-cal.c: (gnome_calendar_purge):
	* gui/dialogs/meeting-page.c: (meeting_page_construct): Use 
	e_cal_remove_with_mod for removing recurring apppointment and call
       	e_cal_remove_object for non-recurring ones.
	* gui/itip-utils.c: (itip_organizer_is_user),
	(itip_get_comp_attendee): Fixed some memory leaks.

2005-07-07  Veerapuram Varadhan <vvaradhan@novell.com>

	* gui/calendar-component.c: (impl_handleURI): Added support for
	opening a calendar-item in the editor when its source-UID and UID/RID
	is passed in the command-line.
	* gui/gnome-cal.[c,h]: (gnome_calendar_edit_appointment): Newly added
	for the above functionality.
	
2005-07-06  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/dialogs/event-page.c: (sensitize_widgets): Enable alarms
	even if we are not organizer.

2005-07-06  Sankar P  <psankar@novell.com>

	* gui/dialogs/comp-editor.c (response_cb):
	Changed the way in which calendars having null summary are handled.
	Fixes #237844
	
	* calendar-errors.xml:
	Changed the button label from Send to Save

2005-07-05  Srinivasa Ragavan <sragavan@novell.com>
	
	* gui/e-cal-popup.c: Created new target type
	* gui/e-cal-popup.h: Added #define for the new target type
	* gui/dialogs/cal-attachment-bar.c: (cab_popup) Poped e-cal instead of 
	em_*. Removed mailer code from calendar
	* gui/dialogs/comp-editor.c: (drag_data_received) Poped e-cal instead of
	em_*. Removed mailer code from calendar.

2005-07-04  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/calendar-component.c: (create_new_event): Set
	the new item flag.
	* gui/dialogs/event-editor.c: (event_editor_construct): 
	Check the new item flag and create the scheduling page.

2005-07-04  Srinivasa Ragavan <sragavan@novell.com>

	* gui/dialogs/meeting-page.c: (meeting_page_construct) Added 
	vertical scrollbar policy of list view to always so that it does
	not extend the view when there are more contacts.

2005-07-02  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-meeting-list-view.c: (process_section):
	* gui/e-select-names-editable.c:
	(e_select_names_editable_get_emails): If the contact list
	does not have all the mail ids, use the name of the contact
	list as the email id.

2005-07-01  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-cal-model.c: (e_cal_model_class_init),
	(e_cal_view_progress_cb), (e_cal_view_done_cb):
	* gui/e-cal-model.h: Added two new signals to notify
	the progress information from the model to UI.
	* gui/e-calendar-marshal.list: Added a new item to marshal
	the string,int,int arguments.
	* gui/e-calendar-table.h:
	* gui/e-calendar-table.c: (delete_selected_components),
	(clipboard_get_text_cb), (e_calendar_table_set_status_message):
	* gui/e-calendar-view.h:
	* gui/e-calendar-view.c: (e_calendar_view_set_status_message),
	(e_calendar_view_cut_clipboard), (clipboard_get_text_cb),
	(transfer_selected_items):
	* gui/e-tasks.c: (view_progress_cb), (view_done_cb),
	(setup_widgets), (set_status_message), (backend_died_cb):
	* gui/gnome-cal.c: (update_query), (view_progress_cb),
	(view_done_cb), (setup_widgets), (client_cal_opened_cb),
	(default_client_cal_opened_cb), (open_ecal), (backend_died_cb),
	(gnome_calendar_purge): Added a new variable to 
	e_calendar_view_set_status_message and
       	e_calendar_table_set_status_message methods to show the progress
	information.

2005-06-27  Mark G. Adams <mark.g.adams@sympatico.ca>

	* conduits/todo/todo-conduit.c: (add_record): Fix leak of uids
	* conduits/calendar/calendar-conduit.c: (process_multi_day): Fix leak of uids

2005-07-01  Praveen Kumar <kpraveen@novell.com>

	* gui/e-cal-config.h : Added the source type field in
	_ECalConfigTargetSource
	* gui/dialogs/calendar-setup.c (calendar_setup_edit_calendar) : Set
	the source type as calendar
	(calendar_setup_edit_task_list) : Set the source type as tasks.

2005-06-25  Chenthill Palanisamy  <pchenthill@novell.com>
	
	* gui/dialogs/event-editor.c
       	(event_editor_construct): Do not desensitize the attachment
	bar as there will be no way to open an attachement.

2005-07-06  Not Zed  <NotZed@Ximian.com>

	* importers/icalendar-importer.c (ivcal_getwidget): fix a missing
	init on sd.
	(ivcal_getwidget): pack the notebook with fill on.

	* importers/Makefile.am: remove -module flags.

	* Makefile.am: build importers before the gui.

	* gui/main.c (initialize): register the inbuild calendar importers.

	* importers/icalendar-importer.c: Converted to eplugin, cleaned up
	some stuff as well.  Put the selectors in scrolledwindows so they
	dont grow unbounded.
	(gnome_calendar_getwidget): set the default actions based on
	wether we've run or not.
	(update_single_object): removed dead code?

2005-07-05  Not Zed  <NotZed@Ximian.com>

	* importers/icalendar-importer.c: start work on e-plugin importer.

2005-06-27  Tor Lillqvist  <tml@novell.com>

	* */Makefile.am: Prune unnecessary and nonexistent directories
	from the -I options. Prune pathname macros not used in the sources
	in that directory from the -D options. Use NO_UNDEFINED. Link with
	all necessary libraries. On Win32 link with bootstrap libraries
	where necessary.

	* common/Makefile.am: As this is a noinst library, no use for
	LDFLAGS or LIBADD.

	* gui/Makefile.am: Use Win32-specific hack to work around MSYS
	feature in the gconftool invokation.

	* gui/calendar-commands.c: Remove superfluous inclusion of <pwd.h>.

	* gui/e-cal-list-view.c
	* gui/e-day-view.c: Remove superfluous inclusion of <gdk/gdkx.h>.

	* gui/gnome-cal.c: Remove superfluous inclusion of <sys/wait.h>.
	
	* importers/icalendar-importer.c: Use g_usleep() instead of sleep().

2005-06-25  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/dialogs/comp-editor.c: 
	(real_send_comp): check save schedules before sending
	the comp through send_comp.

2005-06-23  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/dialogs/event-page.c: (sensitize_widgets): 
	desensitize the source selector if a meeting is
	delegated.

2005-06-22  viren.l <viren@novell.com>

	Fixes #305590 
	* gui/e-meeting-store.c: (freebusy_async):
	Lock the mutex before invoking e_cal_get_free_busy(),
	unlock the mutex after the function call.
 
2005-06-22  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/dialogs/comp-editor.c: (real_edit_comp): Do
	not sensitize the attachment bar here.
	* gui/dialogs/event-editor.c (event_editor_construct):
	 Do not construct the scheduling page for non organizer
	 and sensitize the attachment bar.
	* gui/dialogs/event-page.c: (event_page_fill_widgets): Need
	not call the e_cal_get_object to find if the event is existing
	one or not.
	* gui/e-calendar-view.c: (e_calendar_view_new_appointment_for),
	(e_calendar_view_edit_appointment): Set the user org flags
	here itslef.

2005-06-22  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/dialogs/comp-editor.c 
	(save_comp): Commit the sequence all the fields event if 
	the delegator is delegating a paticular instance.
	(prompt_to_save_changes): Send FALSE to recur_comp_dialog 
	for last argument.
	(response_cb): Send the delegate as true if the 
	event is being delegated.
       	(delete_event_cb),(set_attendees_for_delegation): removed the warning.
	* gui/dialogs/event-page.c: (sensitize_widgets),
	(event_page_fill_widgets): Do not sensitize the send options 
	button if the item is being delegated.
	* gui/dialogs/recur-comp.c: (recur_component_dialog):
	* gui/dialogs/recur-comp.h: Added a new boolean argument
	to recurrence dialog to indicate the item is delegated.
	* gui/e-cal-model-calendar.c: (ecmc_set_value_at):
	* gui/e-day-view.c: (e_day_view_finish_long_event_resize),
	(e_day_view_finish_resize), (e_day_view_change_event_time),
	(e_day_view_on_editing_stopped),
	(e_day_view_on_top_canvas_drag_data_received),
	(e_day_view_on_main_canvas_drag_data_received):
	* gui/e-week-view.c: (e_week_view_change_event_time),
	(e_week_view_on_editing_stopped): Send FALSE to delegate
	if the delegate in the call recur_component_dialog.

2005-06-20  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/dialogs/comp-editor.c (save_comp_with_send),
	(real_edit_comp), (set_attendees_for_delegation), (real_send_comp):
	If a meeting is delegated. Send a Request to the delegate and a
	reply to the organizer.
	* gui/dialogs/event-editor.c: (event_editor_edit_comp): Add the 
	delegator alone in the meeting editor for personal calendar.
	(event_editor_send_comp), (show_meeting): Show the scheduling
	page if the meeting is being delegated. 
	* gui/dialogs/meeting-page.c: (clear_widgets),
	(meeting_page_fill_widgets), (meeting_page_fill_component),
	(add_clicked_cb), (remove_attendee), (remove_clicked_cb),
	(init_widgets), (attendee_added_cb), (meeting_page_construct):
	Do not allow only non-attendees to be added as delegatees.
	While sending the delegated item remove the other attendees.
	Allow only one delegate to be added for personal calendar.
	* gui/e-cal-popup.c: (get_attendee_prop), (is_delegated)
	(e_cal_popup_target_new_select):Disabled
	the popup menu item if the meeting is already delegated.
	* gui/e-cal-popup.h: Added a new mask to check if the meeting
	is already delegated.
	* gui/e-calendar-view.c: (set_attendee_status_for_delegate),
	(on_delegate): Change the status of the attendee to delegated.
	Set the new mask for the delegate popup menu item.
	* gui/e-meeting-list-view.c: (e_meeting_list_view_class_init),
	(attendee_edited_cb): Added a new signal to identify the attendee
	added in meeting page. Do not remove the attendee if the user
	modifies the existing email id to NULL value.
	* gui/e-meeting-list-view.h: Added the notification signal.
	* gui/itip-utils.h: Added a new function to get our email id
	from the list of attendees.
	* gui/itip-utils.c (get_attendee), (itip_get_comp_attendee),
	(comp_from), (comp_to_list), (comp_subject), (comp_sentby),
	(itip_send_comp):  Send udpates to delegator only
        if the rsvp is enabled. Set the status of the attendee
	properly in the REPLY method, since there will two attendees
 	unlike the updating attendee status.	

2005-06-18  Tor Lillqvist  <tml@novell.com>

	* gui/GNOME_Evolution_Calendar.server.in.in
	* importers/GNOME_Evolution_Calendar_Importer.server.in.in: Use SOEXT.

2005-06-13  Jedy Wang  <jedy.wang@sun.com>

	We need compare backend for long events too.

	* gui/e-day-view.c: (e_day_view_find_event_from_uid):

2005-06-08 viren.l <viren@novell.com>

	 * gui/dialogs/event-editor.c (event_editor_edit_comp): set COMP_EDITOR_PAGE_USER_ORG
	   flag. sensitizing attachment bar if user is organizer.
	 * gui/dialogs/event-page.c, gui/dialogs/recurrencepage.c, 
	   gui/dialogs/meeting-page.c 
	   (fill_widgets)
	   (sensitize_widget) 
	   (sensitize_button): 
	   sensitizing widgets if user is not an organizer.Boolean check 
	   for user_org is achieved by using the flags in CompEditorPage structure.
	   check that variable while sensitizing widgets.Remove the scheduling page 
	   if user is not organizer.Retrive values based on a key using hash table. 
	   Added a call back for row_activation. Enabling and disabling the 
	   "editing" property of the renderers based E_MEETING_STORE_EDIT_STATUS.
	   Also check whether user is creating new meeting or openning an existing 
	   meeting and hence disable widgets appropriate.
	 * gui/e-meeting-list-view.c (build_table, edit_col_for_user, 
	   edit_col_for_organizer, row_activation_cb): store renderers in hash table
	   using direct hashing since we can to enable/disable only column-wise since 
	   tree view is used here.
		
2005-06-07  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/calendar-component.c: (create_new_event):
	call the event_editor_new with comp editor flags.
	* gui/dialogs/comp-editor-page.h:
	* gui/dialogs/comp-editor.c: (comp_editor_set_flags), 
	(comp_editor_get_flags), (comp_editor_append_page):
	* gui/dialogs/comp-editor.h: Set the comp editor
	flags, to indicate whether the item is a meeting, appointment,
	a new event, or a delegated item etc.
	* gui/dialogs/event-editor.c: (event_editor_construct),
	(event_editor_edit_comp): Do not show the existing attendees
	while delegating.
	(event_editor_new): Replaced the meeting variable  with 
	the comp editor flags
       	(show_meeting): Show the delegate page while delegating a
	meeting.
	* gui/dialogs/event-editor.h: Modified the event_editor_new
	function.
	* gui/dialogs/meeting-page.c: 
	(set_attendees):
	(meeting_page_finalize),(clear_widgets),
	(sensitize_widgets),(meeting_page_fill_widgets), 
	(meeting_page_fill_component), (get_widgets), 
	(add_clicked_cb), (meeting_page_construct): Set the label
	for the meeting page to Delegatee. Changed the organizer label
	to From since groupwise does have a concept of organizer.
       	Enabled Add, remove buttons for delegation. Added the delegte's
	to the exiting attendee list while filling the component. Added
	a boolean variable to the private structure to store the user's
	address. Modified the label for meeting page as Attendees. If 
	the meeting is delegated, then to delegatees.
	* gui/dialogs/meeting-page.glade: Added a reference to organizer
	widget as org-label.
	* gui/e-cal-popup.c: (e_cal_popup_target_new_select):
	* gui/e-cal-popup.h: Added new masks for supporring delegation.
	* gui/e-calendar-view.c: (set_attendee_status_for_delegate),
	(on_delegate), (e_calendar_view_new_appointment_for),
	(open_event_with_flags), (e_calendar_view_edit_appointment):
	Call the event editor with comp editor flags. Set the users
	partstat to delegated.

2005-05-30  Thouis R. Jones  <thouis@csail.mit.edu>

	Fixes #272301

	* gui/apps_evolution_calendar.schemas.in.in: 
	* gui/calendar-config-keys.h:
	* gui/calendar-config.c: (calendar_config_get_marcus_bains,
	calendar_config_add_notification_marcus_bains): 
	* gui/calendar-config.h:
	* gui/e-day-view-config.c: (set_marcus_bains,
	marcus_bains_changed_cb, e_day_view_config_set_view): 
	* gui/e-day-view-main-item.c: (e_day_view_main_item_draw):
	* gui/e-day-view-time-item.c: (e_day_view_time_item_draw):
	* gui/e-day-view.c: (e_day_view_init, e_day_view_set_colors,
	e_day_view_get_show_marcus_bains, e_day_view_set_marcus_bains,
	e_day_view_update_marcus_bains):
	* gui/e-day-view.h:
	* gui/gnome-cal.c: (update_marcus_bains_line_cb, setup_widgets,
	gnome_calendar_destroy):  Added Marcus Bains Line to main item
	view and time bar.
	
2005-05-30  Harry Lu  <harry.lu@sun.com>

	* gui/itip-utils.c: (itip_send_comp): check whether backend could 
	handle sending resuests/updates, and if so, just return.

2005-05-24  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #272114
	* gui/dialogs/calendar-setup.c: (eccp_commit),
	(calendar_setup_edit_calendar): Check if the color is 
	present in the source before setting it.

2005-05-24  Srinivasa Ragavan <sragavan@novell.com>
	* gui/dialogs/cal-attachment-bar.c, gui/dialogs/cal-attachment-bar.h,
	  gui/dialogs/cal-attachment.c, gui/dialogs/cal-attachment.h, 
	  gui/dialogs/comp-editor.c, calendar.error.xml: Added the support to DnD
	  remote URL to the attachment window. It downloads asynchronously and
	  attaches.

2005-05-16  Srinivasa Ragavan <sragavan@novell.com>

	* gui/dialogs/comp-editor.c (attachment_bar_changed_cb) 
	  (attachment_bar_icon_clicked_cb)   (setup_widgets) 
	  (comp_editor_sensitize_attachment_bar) (fill_widgets): 
	  Removed the expander in calendar attachment. It keeps showing
	  now, to ease DnD.
	  
2005-05-16  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/gnome-cal.c: (client_cal_opened_cb),
	(default_client_cal_opened_cb): Removed the debug 
	messages.

2005-05-16  Not Zed  <NotZed@Ximian.com>

	* moved e-error to e-util/

2005-05-16: Srinivasa Ragavan <sragavan@novell.com>

	* gui/GNOME_Evolution_Calendar.server.in.in: Added tooltips

2005-05-13  Sushma Rai  <rsushma@novell.com>

	* gui/dialogs/recurrence-page.c (make_ending_until_special): Setting
	two weeks after the start date as default "until" date. 
	Fixes #268906

2005-05-12  Harish Krishnaswamy  <kharish@novell.com>

	on behalf of jack jia <jack.jia@sun.com>
	fixes #229794

	* gui/dialogs/recurrence-page.c: (make_weekly_special):
	Allow deselection of the current day while scheduling
	recurrences based on weeek days.

2005-05-12  Sushma Rai  <rsushma@novell.com>

	* gui/e-cal-model-tasks.c (get_geo): Not marking geographical locations
	for translation.
	Fixes #261080
 
2005-05-12 Vivek Jain <jvivek@novell.com>

	Fixes #271523

	* gui/dialogs/calendar-setup.c:
	(CalendarSourceDialog):	included an ECalSourceType member in
	the structure 
	(calendar_setup_edit_calendar): set source_type as EVENT
	(calendar_setup_edit_task_list): set source_type as TODO
	(eccp_general_offline): Change the label according to the type

2005-05-12  Srinivasa Ragavan <sragavan@novell.com>
	* gui/task-component.c (selector_tree_drag_motion): Fixes the bug 269416
	It makes the DnD to move tasks instead copying.


2005-05-09  Rodrigo Moya <rodrigo@novell.com>

	Fixes #301350

	* gui/alarm-notify/alarm-queue.c (alarm_queue_init): install a timeout
	handler to check, every 30 minutes, for not losing the midnight refresh.
	(check_midnight_refresh): check the midnight refresh and if we missed it,
	reload alarms.
	(queue_midnight_refresh): made the midnight value be global.

2005-05-09  Philip Van Hoof <pvanhoof@gnome.org>

	* gui/alarm-notify/*: Made the alarm-notify dialog
	multi-alarm aware
	
2005-05-09  Rodrigo Moya <rodrigo@novell.com>

	* gui/migration.c (migrate_ical_folder_to_source): cover the case when
	there is no calendar.ics/tasks.ics file in the folder to migrate.
	
2005-05-06  Vivek Jain <jvivek@novell.com>
	
	**Fixes #261079
	* gui/e-alarm-list.c:(get_alarm_string)
	 Added translator comments.

2005-05-06  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/apps_evolution_calendar.schemas.in.in: Fixing a 
	grammar mistake.
	See 301459

2005-05-06  Changwoo Ryu  <cwryu@debian.org>

	* gui/apps_evolution_calendar.schemas.in.in: added a missing
	period in long description. and fixed an invalid tag.

2005-05-06  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #272464
	* calendar-errors.xml:
	* calendar-errors.xml.h: Changed the primary and secondary
	messages to make it more clear.

2005-05-06  Vivek Jain <jvivek@novell.com>
	
	**Fixes #272566
	* gui/dialogs/event-page.glade:
	removed unwanted space in button label

2005-05-06  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-cal-model.c (e_cal_view_objects_added_cb): uncomment code that
	shouldn't be.

2005-05-06  Rodrigo Moya <rodrigo@novell.com>

	Fixes #271679

	* gui/dialogs/comp-editor.c (save_comp):
	* gui/e-week-view.c (e_week_view_on_editing_stopped,
	e_week_view_change_event_time): set correct start/end times for
	individual instances and remove all rules and exceptions.
	(e_week_view_reshape_event_span): show recurrence icons for
	detached instances also.

	* gui/e-day-view.c (e_day_view_finish_resize,
	e_day_view_finish_long_event_resize, e_day_view_on_editing_stopped,
	e_day_view_on_top_canvas_drag_data_received,
	e_day_view_on_main_canvas_drag_data_received,
	e_day_view_change_event_time): set the correct start/end times when
	modifying individual instances and remove all rules and exceptions.
	(e_day_view_on_top_canvas_motion, e_day_view_on_main_canvas_motion):
	disable D&D for recurring events.
	(e_day_view_reshape_long_event, e_day_view_reshape_day_event):
	check for detached instances and show recurrence icons for them also.

	* gui/e-week-view-event-item.c (e_week_view_event_item_draw_icons):
	* gui/e-day-view-top-item.c (e_day_view_top_item_draw_long_event):
	* gui/e-day-view-main-item.c (e_day_view_main_item_draw_day_event):
	check for detached instances and show recurrence icons for them also.

	* gui/e-cal-model.c (set_instance_times): don't use the RECURRENCE-ID
	to get the datetime.

	* gui/e-calendar-view.c (e_calendar_view_delete_selected_occurrence):
	exceptions need to be date only.
	(e_calendar_view_copy_clipboard): remove RECURRENCE-IDs from components
	we copy to the clipboard.
	(e_calendar_view_cut_clipboard): when cutting instances, remove only
	the selected instances.
	(on_unrecur_appointment): use MOD_ALL to modify the master object and
	remove recurrence-id from detached event.

	* gui/dialogs/recur-comp.c (recur_component_dialog): re-enabled.

2005-05-05  Rodrigo Moya <rodrigo@novell.com>

	* gui/dialogs/event-page.c:
	* gui/dialogs/task-page.c: removed GAL's e-categories.h include.

2005-05-01  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #274406
	* gui/alarm-notify/alarm-notify.c: (cal_opened_cb): Removed the
	additional unref present.

2005-04-18  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #274476
	* gui/e-calendar-view.c: (e_calendar_view_open_event): Send the
	right value boolean variable meeting to e_calendar_view_edit_appointment
	method.

2005-04-08  Rodrigo Moya <rodrigo@novell.com>

	Fixes #70035

	* importers/icalendar-importer.c (support_format_fn, load_file_fn):
	use e_cal_util_parse_ics_string instead of icalparser_parse_string.

2005-04-05  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-cal-model.c: (cal_opened_cb): If the status
	is busy call open method again, do not remove the
	client.
	* gui/gnome-cal.c: (client_cal_opened_cb),
	(default_client_cal_opened_cb): IF the status is busy
	and the load_state is not loaded call open method.

2005-04-04  Rodrigo Moya <rodrigo@novell.com>

	Fixes #68423

	* gui/migration.c (migrate_ical):
	* gui/e-tasks,c (e_tasks_expunge):
	* gui/gnome-cal.c (gnome_calendar_purge): fixed huge (in some cases)
	memory leaks.

2005-04-01  Rodrigo Moya <rodrigo@novell.com>

	Fixes #41740

	* gui/calendar-errors.xml:
	* gui/calendar-errors.xml.h: added editor error.

	* gui/alarm-notify/alarm-queue.c (edit_component): display error messages
	when we can't load the component in the editor.

	* gui/alarm-notify/Makefile.am: linked against libemiscwidgets.la.

2005-04-01  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #73879
	* gui/dialogs/comp-editor.[ch]:
	(comp_editor_sensitize_attachment_bar): Added a function
	to sensitize/desensitize the attachment bar.
	(comp_editor_notify_client_changed): When client changes
	sensitize the attachment bar.
	* gui/dialogs/event-editor.c: (event_editor_construct): 
	* gui/dialogs/task-editor.c: (task_editor_construct): Sensitize
	the attachment bar.

2005-03-31  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #73969
	* gui/e-calendar-view.c: (delete_event): Remove the
	recurrence id property if its present.

2005-03-30  Li Yuan  <li.yuan@sun.com>

	Fixes #73914

	* gui/dialogs/cal-prefs-dialog.glade:
	add a11y name to Publishing Table.

2005-03-28  Rodrigo Moya <rodrigo@novell.com>

	Fixes #44719

	* gui/alarm-queue.c (display_notification): make the alarm dialog sticky
	when not using the system tray.

2005-03-24  JP Rosevear  <jpr@novell.com>
 
 	Fixes #69272
 	
 	* gui/comp-util.c (cal_comp_event_new_with_defaults): ensure we
 	always return a valid comp
 
 	* gui/comp-util.c (cal_comp_task_new_with_defaults): ditto; fix
 	obvious pasto that would cause a leak
	
2005-03-24  Chenthill Palanisamy  <pchenthill@novell.com>
	
	Fixes #73320
	* gui/e-meeting-list-view.c: (attendee_edited_cb): Check if
	we are editing the same row and if so do not remove the attendee.

2005-03-24  Chenthill Palanisamy  <pchenthill@novell.com>
	
	Fixes #73508
	* gui/dialogs/meeting-page.c: (meeting_page_fill_widgets): Set the 
	organizers status as NEEDS ACTION, checking for the static capability.

2005-03-16  Li Yuan  <li.yuan@sun.com>

	* gui/calendar-view.c: (calendar_view_class_init):
	remove the edit function.

	Fixes # 40762

2005-03-22  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/calendar-component.c: (popup_event_cb): Popup all the 
	menu items when clicked on the source. 

2005-03-21  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #73031
	* gui/dialogs/event-editor.c: (event_editor_finalize):
	* gui/dialogs/task-editor.c: (task_editor_finalize): Added
	a check for the presence of the object before unreffing it.

2005-03-21  JP Rosevear  <jpr@novell.com> 
 
 	* gui/gnome-cal.c (default_client_cal_opened_cb): if its busy, try
 	again
 	(client_cal_opened_cb): ditto
  
2005-03-21  JP Rosevear  <jpr@novell.com> 
 
 	* gui/e-day-view.c (e_day_view_on_main_canvas_drag_data_received):
 	abort sequence
 	(e_day_view_on_top_canvas_motion): prevent drag of recurring events
 	(e_day_view_on_main_canvas_motion): ditto
 
 	* gui/e-calendar-view.c (on_unrecur_appointment): clear recur id
	
2005-03-21  JP Rosevear  <jpr@novell.com>
  
 	* gui/tasks-component.c (ensure_sources): ensure the color and
 	primary config are set on the personal source
 
 	* gui/calendar-component.c (ensure_sources): ditto
	
2005-03-21  Li Yuan  <li.yuan@sun.com>

	* gui/print.c: (print_comp_item):
	Fixes #44579

2005-03-17  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #68525, 68580
	* gui/gnome-cal.c (update_query), (gnome_calendar_init):
	Added a boolean variable to avoid crash when a race condition
	occurs.

2005-03-16  Rodrigo Moya <rodrigo@novell.com>

	Fixes #73101

	* calendar-errors.xml:
	* calendar-errors.xml.h: removed unnecessary leading space.

2005-03-16  Rodrigo Moya <rodrigo@novell.com>

	Fixes #72983

	* gui/e-cal-list-view.c (e_cal_list_view_new): set EXPAND_RECURRENCES
	flag on the model.

2005-03-15  JP Rosevear  <jpr@novell.com>

	* gui/itip-utils.c (itip_send_comp): when publishing, the to_list
	will always be null so don't error out then

2005-03-13  JP Rosevear  <jpr@novell.com>

	Fixes #73563
	
	* gui/alarm-notify/alarm-queue.c (notify_dialog_cb): make sure in
	the snooze case the tray (and via callbacks then) the dialog is
	destroyed

2005-03-14  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #72979
	* gui/e-cal-list-view.c (find_meeting),
	(e_cal_list_view_on_table_double_click): Check whether its a
	meeting and send appropriate boolean variable.

2005-03-11  Sushma Rai  <rsushma@novell.com>

	* gui/dialogs/event-page.c (event_page_show_options): Removed the check
	for general options page static capability. Send options dialog will
	not be created at this point.
	(e_sendoptions_clicked_cb): Checking for the general options page
	static capability, when used clicks send options button.

	* gui/dialogs/task-page.c (task_page_show_options)
	(e_sendoptions_clicked_cb): Similar.
	Fixes #73501

2005-03-09  Not Zed  <NotZed@Ximian.com>

	* gui/e-week-view-event-item.c (e_week_view_event_item_draw_icons):
	* gui/e-day-view.c (e_day_view_reshape_day_event): free the ecalcomponent
	after using it.

2005-03-08  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #73141
	* gui/dialogs/comp-editor.c: 
	(comp_editor_notify_client_changed):Assign the updated client
	to priv->client and unref the old one.	

2005-03-07  JP Rosevear  <jpr@novell.com>

	* gui/alarm-notify/alarm-queue.c: add remove_client_alarms prototype
	
2005-03-06  Rodrigo Moya <rodrigo@novell.com>

	* gui/dialogs/recur-comp.c (recur_component_dialog): disable dialog for
	asking user which instance(s) to modify.

2005-03-04  Rodrigo Moya <rodrigo@novell.com>

	Fixes #72835

	* gui/alarm-notify/alarm-notify-dialog.[ch] (alarm_notify_dialog):
	changed to return the dialog we create, and to run in the background.
	(dialog_response_cb): response callback for the dialog.

	* gui/alarm-notify/alarm-queue.c (alarm_queue_done): don't g_assert,
	just check for midnight_refresh pointer, and clear it up if not NULL.
	Also, traverse all clients with g_hash_table_foreach_remove.
	(free_client_alarms_cb, alarm_queue_remove_client, load_alarms): added
	missing cleanup code.
	(queue_midnight_refresh): don't g_assert, just check for midnigh_refresh
	pointer and clear it up if not NULL.
	(open_alarm_dialog): store the dialog returned by alarm_notify_dialog().
	(tray_icon_destroyed_cb): destroy the dialog if still around.

2005-02-28  Harish Krishnaswamy  <kharish@novell.com>

        Fixes #69556
        * gui/dialogs/cal-attachment-bar.c:
        (cal_attachment_bar_attach_mime_part): Add missing call to
        attach_mime_part.

2005-02-28  Rodrigo Moya <rodrigo@novell.com>

	Fixes #72928

	* gui/alarm-notify/notify-main.c (main): don't call alarm_queue_done...

	* gui/alarm-notify/alarm-notify.c (alarm_notify_finalize): ...do it at
	the same level than alarm_queue_init.

2005-02-28  JP Rosevear  <jpr@novell.com>

	* gui/gnome-cal.c (gnome_calendar_goto_today): revert fix for
	70000, its a ui change

2005-02-28  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/dialogs/comp-editor.c: (attachment_bar_icon_clicked_cb),
	(setup_widgets): Connect the signal to "event", and open the attachment
	only if its a double click from the cal attachment bar.

2005-02-28  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #72958
	* gui/dialogs/comp-editor.c: (save_comp): If the backend
	returns success, if the delay delivery is set, do not
	show them in the view, since it will not be created in the 
	server.
	
2005-02-25  Sivaiah Nallagatla <snallagatla@novell.com>

	* gui/calendar-component.c (ensure_sources) :
	Make sure the base uri is same as the one
	migration code uses. Avoids two "On This Computer"
	groups when both migration and this code runs.
	
2005-02-23  Hans Petter Jansson  <hpj@novell.com>

	* common/authentication.c:
	* gui/e-pub-utils.c:
	* gui/alarm-notify/alarm-notify.c:
	* gui/alarm-notify/notify-main.c:
	* gui/dialogs/url-editor-dialog.c:
	Include <libedataserverui/e-passwords.h>.
	* gui/itip-utils.c: Remove e-passwords.h include, it's not
	needed.

2005-02-23  JP Rosevear  <jpr@novell.com>

	Fixes #70000
	
	* gui/gnome-cal.c (gnome_calendar_goto_today): set the view type
	to day view

2005-02-23  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #72006	
	* gui/dialogs/comp-editor.c: (real_edit_comp):
	* gui/dialogs/event-editor.c: (show_meeting):
	* gui/dialogs/task-editor.c: (show_assignment): Reset
	the changed state, to suppress the promt_to_changes
	dialog when the fields are not changed.

2005-02-21  JP Rosevear  <jpr@novell.com>
 
 	Fixes #63866, #67714, #62089, #47747, #61495, #28947
 	
 	* gui/e-select-names-renderer.h: update signal
 
 	* gui/e-select-names-renderer.c
 	(e_select_names_renderer_editing_done): emit the cancelled signal
 	properly and don't update if it was cancelled
 	(e_select_names_renderer_focus_out_event): if the cell loses focus
 	the editing is done
 	(e_select_names_renderer_start_editing): listen for focus out
 	event, and only set the address if appropriate
 	(e_select_names_renderer_get_property): handle name/email props
 	(e_select_names_renderer_set_property): ditto
 	(e_select_names_renderer_finalize): free name/email
 	(e_select_names_renderer_class_init): install name/email props;
 	cell_edited returns lists now
 
 	* gui/e-select-names-editable.h: update protos
 
 	* gui/e-select-names-editable.c: don't really override any of the
 	gtkentry editable cell routines since we directly inherit from
 	ENameSelectorEntry
 	(e_select_names_editable_get_emails): get all the email addresses
 	(e_select_names_editable_get_names): get all the names
 	(e_select_names_editable_set_address): set the destination
 	correctly for editing
 
 	* gui/e-meeting-list-view.c (attendee_edited_cb): handle a blank
 	entry by removing it and don't allow an entry that already exists
 	to be entered
 	(attendee_editing_canceled_cb): if the item editing is cancelled
 	and it has no name or email address, remove it
 	(process_section): if the contact has multiple addresses (ie a
 	mailing list), expand the entries
 
 	* gui/e-calendar-marshal.list: add new marshaller
	
2005-02-19  Sivaiah Nallagatla <snallagatla@novell.com>

	* gui/calendar-component.c (ensure_sources) :
	Make sure all the default source groups and sources
	are present by adding missing ones. Also update the
	base uri of "On This Computer" group to take care 
	of change in user home dir.
	(calendar_component_init) : call ensure_sources 

	* gui/tasks-component.c (ensure_sources)
	(tasks_component_init) : ditto

	Takes care of #67411 & #67724 for
	calendar and tasks components. 


2005-02-18  Rodrigo Moya <rodrigo@novell.com>

	* gui/alarm-notify/alarm-notify.c (cal_opened_cb): if opening
	the calendar failed, disconnect signals and unref it.

2005-02-18  Chenthill Palanisamy  <pchenthill@novell.com>

	* _EventPagePrivate: added a boolean variable is_meeting.
	* _TaskPagePrivate: added a boolean variable is_assignment.
	* gui/dialogs/task-page.h:
	* gui/dialogs/event-page.h: Added a function to set
	the is_meeting boolean variable.
	* gui/dialogs/event-editor.c: (show_meeting):
	* gui/dialogs/task-editor.c: (show_assignment): Called
	the function to set the boolean variable.
	* gui/dialogs/event-page.c: (event_page_init),
	(event_page_set_meeting), (source_changed_cb):
	* gui/dialogs/task-page.c: (task_page_init),
	(task_page_set_assignment), (source_changed_cb):
	If the source is changed and only if its a group
	event show the send options frame.
	* gui/gnome-cal.c: (client_cal_opened_cb): Do not
	popup the offline error dialog for tasks.

2005-02-15  Rodrigo Moya <rodrigo@novell.com>

	* gui/migration.c (migrate_ical_folder_to_source): check return value
	from e_cal_new, to display a better warning message.

2005-02-11  Rodrigo Moya <rodrigo@novell.com>

	Fixes #72038

	* gui/itip-utils.c (itip_send_comp): when we get no recipients, don't
	send the message and return an error.

2005-02-10  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-cal-model.c: (e_cal_view_objects_added_cb): Remove
	the component from the view, if its already present before 
	adding it.

2005-02-09  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/event-editor.c: (event_editor_edit_comp):
	Always remove the meeting and scheduling pages when there are no
	attendees. This allows the sender to be added to the attendees list 
	by default while creating new meetings.

2005-02-08  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-cal-model.c (set_instance_times): set instance times correctly.

2005-02-07  JP Rosevear  <jpr@novell.com>

	Fixes #61075
	
	* gui/apps_evolution_calendar.schemas.in.in: add long descriptions
	and clean up short items

2005-02-05  Harish Krishnaswamy  <kharish@novell.com>

	* calendar-errors.xml:
	* calendar-errors.xml.h:
	* gui/e-tasks.c: (client_cal_opened_cb):
	* gui/gnome-cal.c: (client_cal_opened_cb),
	(default_client_cal_opened_cb): add messages for
	calendar/tasks not marked for offline usage.
	

2005-02-05  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/comp-editor.c (attach_message), (drop_action),
	(drop_popup_copy), (drop_popup_move), (drop_popup_cancel),
	(drop_popup_free), (drag_data_received), (drag_motion),
	(comp_editor_class_init), (comp_editor_init), (real_edit_comp):
	fix the dnd woes on calendar attachments.
	* gui/dialogs/cal-attachment-bar.c (add_from_file): reuse  
	mail composer's error message.
	
2005-02-04  Harry Lu  <harry.lu@sun.com>

	Add a11y name for attachment button and bars.

	* gui/dialogs/cal-attachment-bar.c: (cal_attachment_bar_new):
	* gui/dialogs/comp-editor.c: (setup_widgets):

2005-02-04  Rodney Dawes  <dobey@novell.com>

	* gui/dialogs/comp-editor.[ch]: Add a string to CompEditorPrivate to
	store the name of the help section we need to refer for derived dialogs
	(response_cb): Handle the GTK_RESPONSE_HELP response and show help
	(setup_widgets): Add a button to the dialog for Help
	(comp_editor_init): Default to the "usage-calendar" help section
	(comp_editor_finalize): Free the help_section variable
	(comp_editor_show_help): Add a new method to actually open the help
	(comp_editor_set_help_section): Add a method for derivatives to set the
	help section they want to open

	* gui/dialogs/event-editor.c (event_editor_init): Set the help section
	we want to open for the event editor to "usage-calendar-apts"

	* gui/dialogs/task-editor.c (task_editor_init): Set the help section
	we want to open for the event editor to "usage-calendar-todo"
	
2005-02-04  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-tasks.c (update_view): clear the component preview when we
	update the view.

	* gui/e-cal-model.c (set_instance_times): use the correct timezone.
	Removed commented code.

2005-02-04  Rodrigo Moya <rodrigo@novell.com>

	Fixes #71265

	* gui/e-week-view.c (e_week_view_remove_event_cb):
	* gui/e-day-view.c (e_day_view_remove_event_cb): if we remove the
	event we were editing, update internal pointers.

2005-02-04  Vivek Jain <jvivek@novell.com>
	
	* calendar-errors.xml.h
	* calendar-errors.xml : changed the warning message string for
	server-version

2005-02-04  Yong Sun <yong.sun@sun.com>

	Fix for #56901

	* gui/print.c: (bound_text): When the width>maxwidth, the 
	pointer 'p' should also be backwarded, same as 'o'.

2005-02-03  Rodney Dawes  <dobey@novell.com>

	* calendar-errors.xml.h: Update to include new strings from the
	calendar-errors.xml file

2005-02-03  Li Yuan  <li.yuan@sun.com>

	* gui/dialogs/task-details-page.c: (get_widgets):
	add a11y name to url.
	* gui/dialogs/task-details-page.glade:
	add a11y name to date completed.
	* gui/dialogs/task-page.glade:
	add a11y names to due date and start date.

2005-02-03  Vivek Jain <jvivek@novell.com>
	
	* calendar-errors.xml : added a warning message for invalid server
	version
	* gui/gnome-cal.c (default_client_cal_opened_cb)
	(client_cal_opened_cb): added a case to check the
	call status and display warning	

2005-02-02  Rodney Dawes  <dobey@novell.com>

	* gui/dialogs/alarm-dialog.c (alarm_dialog_run): Set the border width
	for the internal dialog containers to be HIG compliant

	* gui/dialogs/alarm-dialog.glade: Remove the separator in the dialog
	and fix some spacing/padding issues to be HIG compliant

	* gui/dialogs/alarm-list-dialog.c (alarm_list_dialog_run): Set the
	border width for the internal dialog containers to be HIG compliant
	
	* gui/dialogs/alarm-list-dialog.glade: Remove the separator in the
	dialog and fix some spacing/padding issues to be HIG compliant

2005-02-02  Rodrigo Moya <rodrigo@novell.com>

	Fixes #72090

	* gui/calendar-component.c (impl_handleURI): don't assume the URI is
	always correct.

2005-02-01  Rodney Dawes  <dobey@novell.com>

	* gui/dialogs/comp-editor.c (setup_widgets): Clean up the spacing
	and padding, and shove the notebook and expander arrow into a vbox
	so that we can be HIG compliant
	(comp_editor_init): Remove the separator from the "dialog" and set
	the border width for the internal dialog widgets appropriately to
	be compliant with the HIG for dialog borders
	
2005-02-01  JP Rosevear  <jpr@novell.com>

	* gui/e-tasks.c (e_tasks_destroy): fix typo

	* gui/gnome-cal.c (gnome_calendar_destroy): ditto
	
2005-02-01  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-cal-menu.c (e_cal_menu_target_new_select):
	* gui/e-cal-popup.c (e_cal_popup_target_new_select): add correct mask
	for detached recurrences.

2005-02-01  Rodrigo Moya <rodrigo@novell.com>

	* gui/calendar-commands.c
	(calendar_control_sensitize_calendar_commands): only add real data
	to the array.

2005-02-01  JP Rosevear  <jpr@novell.com>

	Fixes #71944
	
	* gui/e-tasks.c: declare config_categories_changed_cb before its
	used

2005-01-31  Hans Petter Jansson  <hpj@novell.com>

	* common/Makefile.am (libevolution_calendarprivate_la_LDFLAGS):
	Remove the -module flag, this isn't supposed to be a module.

2005-01-31  Hans Petter Jansson  <hpj@novell.com>

	* idl/evolution-calendar.idl: Remove definition of CalObjUID and
	include that from Evolution-DataServer-Calendar.idl instead. This
	prevents the typecode from being defined twice.

2005-01-31  Hans Petter Jansson  <hpj@novell.com>

	* gui/e-cal-config.c (_ECalConfigPrivate): Use guint instead of ulong
	for signal ID.

2005-01-31  Priit Laes <amd@tt.ee>

	Fixes #61078

	* gui/dialogs/task-page.glade: use consistent style for markup.

2005-01-31  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #64682
	* gui/e-calendar-view.c: (transfer_item_to): Added an 
	X property to identify if the appointment is moved from 
	another calendar.

2005-01-28  JP Rosevear  <jpr@novell.com>

	Fixes #71452
	
	* gui/dialogs/comp-editor.c (setup_widgets): listen for
	delete_event signal and handle it outside of the response signal
	so that cancel works properly

2005-01-28  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-tasks.c (setup_widgets):
	* gui/gnome-cal.c (setup_widgets): use correct key name.

2005-01-28  Rodrigo Moya <rodrigo@novell.com>

	Fixes #33078

	* gui/gnome-cal.c: deal now with categories entirely here, no more
	"categories_changed" signal from the backends.
	(free_categories, add_categories, append_category_cb,
	client_categories_changed_cb, copy_categories): removed.
	(gnome_calendar_add_source): don't connect to removed signal.
	(gnome_calendar_destroy): destroy the config listener.
	(gnome_calendar_init): create a listener for the categories list
	GConf key.
	(config_categories_changed_cb): callback for configuration changes
	in category list.
	(setup_widgets): initialize the search bar with categories from
	the configuration.

	* gui/e-tasks.c (client_categories_changed_cb, e_tasks_add_todo_source,
	e_tasks_init, config_categories_changed_cb, e_tasks_destroy,
	setup_widgets): same as gnome-cal.c.

2005-01-26  JP Rosevear  <jpr@novell.com>

	Fixes #71485
	
	* calendar-errors.xml: fix paste-o

2005-01-27  Harry Lu <harry.lu@sun.com>

	Fix a runtime invalid cast warning.

	* gui/e-calendar-table.c: (e_calendar_table_init): only set
	a11y name if atk is enabled.

2005-01-26  Rodrigo Moya <rodrigo@novell.com>

	* gui/dialogs/recurrence-page.c (sensitize_buttons): objects returned
	from e_cal_get_objects_for_uid are ECalComponent's, so use
	g_object_unref to free them, not icalcomponent_free.

2005-01-26  Li Yuan  <li.yuan@sun.com>

	* gui/dialogs/cal-prefs-dialog.glade:
	use full name for the weekday checkbox.

	Fixes #71729.


2005-01-26  JP Rosevear  <jpr@novell.com>

	* gui/itip-utils.c (itip_send_comp): make sure we free the user
	list

2005-01-25  Li Yuan  <li.yuan@sun.com>

	* gui/e-calendar-table.c: (e_calendar_table_init):
	add a11y name to task table.

2005-01-24  Rodrigo Moya <rodrigo@novell.com>

	* gui/dialogs/recurrence-page.c (sensitize_buttons): if there are
	detached instances, disable recurrence date widgets.

2005-01-21  JP Rosevear  <jpr@novell.com>

	Fixes #46404
	
	* gui/tasks-control.c (tasks_control_print_cmd): just call print
	tasks, we don't do the dialog here

	* gui/print.h: update protos

	* gui/print.c (print_calendar): use e_print routines for config
	and dialog and make copies and range settings properly available
	(print_comp): ditto
	(print_table): bring up dialog here so that printing for calendar
	list view works correctly

	* gui/calendar-commands.c (print): pass extra params to print
	table

2005-01-19  Rodrigo Moya <rodrigo@novell.com>

	* importers/icalendar-importer.c (update_objects): use receive_objects
	method instead of individually updating objects. Set the method on the
	VCALENDAR object we create.

2005-01-18  Rodrigo Moya <rodrigo@novell.com>

	Fixes #71407

	* gui/e-week-view.c (process_component): killed warnings.
	(e_week_view_start_editing_event): do nothing if the calendar is
	read only.

	* gui/e-day-view.c (e_day_view_start_editing_event): ditto.

2005-01-18  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/cal-attachment-bar.c 
	(cal_attachment_bar_get_attachment_list): handle error conditions more
	gracefully.

2005-01-17  Rodrigo Moya <rodrigo@novell.com>

	* gui/calendar-component.c:
	* gui/calendar-offline-handler.c:
	* gui/comp-editor-factory.c:
	* gui/e-tasks.c:
	* gui/gnome-cal.c:
	* gui/misc.c:
	* gui/alarm-notify/alarm-notify.c: use libedataserver's e-url.

2005-01-17  Nat Friedman  <nat@novell.com>

	* gui/dialogs/url-editor-dialog.glade: Changed the title for the
	free/busy publishing settings dialog to "Free/Busy Publishing
	Settings" (away from "Free/Busy Editor" which made no sense).

2005-01-17  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-calendar-view.c (on_unrecur_appointment): removed the
	e_day_view_... prefix in warning messages.

2005-01-17  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/cal-attachment-bar.c (destroy):
	fixed a kludge.

2005-01-12  JP Rosevear  <jpr@novell.com>

	Fixes #65820
	
	* gui/weekday-picker.c (get_day_text): add translator comment

2005-01-08  Not Zed  <NotZed@Ximian.com>

	* gui/e-day-view.c (e_day_view_finish_resize): set
	last_Edited_comp_string to NULL, not test it for null.

2005-01-12  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/cal-attachment-bar.c:
	(cal_attachment_bar_set_attachment_list):
	reverting the offset 'hyphen' fix - not required anymore.	

2005-01-10  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-day-view.c (e_day_view_on_editing_stopped): remove the
	temporary object from the view when stopping editing.

	* gui/e-week-view.c (e_week_view_on_editing_stopped): ditto.
	
2005-01-10  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/cal-attachment-bar.c:
	(cal_attachment_bar_set_attachment_list):
	offset the file name to account for the 'hyphen'.

2005-01-10  Chenthill Palanisamy <pchenthill@novell.com>

	* gui/dialogs/event-page.glade
	* gui/dialogs/task-page.glade: Showed the send options
	button and label. Hided the Send options Frame.

2005-01-10  Harish Krishnaswamy  <kharish@novell.com>

	* gui/dialogs/cal-attachment-bar.[ch]: (destroy), (init),
	(cal_attachment_bar_set_local_attachment_store),
	(cal_attachment_bar_get_attachment_list),
	(cal_attachment_bar_get_nth_attachment_filename),
	(cal_attachment_bar_set_attachment_list):
	Modified cal-attachment-bar to allow the path to 
	the local attachment store be set externally, thereby
	hiding the storage policy of different backends from it.
	* gui/dialogs/comp-editor.c: (real_edit_comp):
	set the local attachment store after obtaining it from 
	the calendar.

2005-01-09  JP Rosevear  <jpr@novell.com>

	* gui/calendar-component.c (impl_handleURI): handle calendar://
	uris

2005-01-07  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/event-editor.c (event_editor_edit_comp): clear the
	attendees, somehow I remove this in an earlier commit

2005-01-07  Rodrigo Moya <rodrigo@novell.com>

	* gui/dialogs/event-page.glade:
	* gui/dialogs/task-page.glade: put a name to the 'Send options' frame.

	* gui/dialogs/event-page.c (event_page_init): initialize reference to
	the 'Send options' frame.
	(get_widgets): get the 'Send options' frame from the .glade file.
	(event_page_hide_options): just hide the frame.
	(event_page_show_options): just show the frame.

	* gui/dialogs/task-page.c (task_page_init): initialize reference to the
	'Send options' frame.
	(get_widgets): get the 'Send options' frame from the .glade file.
	(task_page_hide_options): just hide the frame.
	(task_page_show_options): just show the frame.

2005-01-06  David Trowbridge  <trowbrds@cs.colorado.edu>

	* gui/e-cal-event[hc]: initial import of ECalEvent targets

	* gui/migration.c (migrate_calendars): add component.migration event

2005-01-06  JP Rosevear  <jpr@novell.com>

	* gui/Makefile.am: install schemas properly

2005-01-06  Chenthill Palanisamy <pchenthill@novell.com>
	
	merging send options
	* gui/dialogs/Makefile.am: Added two new files for send options.
	* gui/dialogs/e-send-options-utils.{ch}:
	(e_sendoptions_utils_set_default_data),
	(e_sendoptions_utils_fill_component): For setting and gettings the 
	send options.
	* gui/dialogs/event-editor.c (event_editor_construct): Check for the static
	capabilities before showing send options.
	* gui/dialogs/event-page.c: (event_page_show_options),
	(event_page_fill_component), (e_sendoptions_clicked_cb):
	* gui/dialogs/event-page.glade:
	* gui/dialogs/event-page.h: Added function to show/hide the send options button
	and label and run the send options dialog. 
	* gui/dialogs/task-editor.c: (task_editor_construct),
	(task_editor_edit_comp):
	* gui/dialogs/task-page.c: (task_page_init), (task_page_finalize),
	(sensitize_widgets), (task_page_hide_options),
	(task_page_show_options), (task_page_fill_widgets),
	(task_page_fill_component), (get_widgets), (source_changed_cb),
	(e_sendoptions_clicked_cb), (init_widgets): Same as event-page.
	* gui/dialogs/task-page.glade: Added the send options button
	* gui/dialogs/task-page.h: Added functions hiding and showing send
	options button

2005-01-05  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-day-view.c (e_day_view_find_event_from_uid): added a new
	argument to pass the calendar client, since it might happen to have
	events with the same UID on different calendars.
	(e_day_view_do_key_press, model_rows_deleted_cb): added new argument
	to e_day_view_find_event_from_uid.

	* gui/e-week-view.c (e_week_view_find_event_from_uid): same as
	e-day-view.c.
	(e_week_view_do_key_press, model_rows_deleted_cb): added new argument
	to e_week_view_find_event_from_uid.

2005-01-04  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-cal-component-preview.c (write_html): use the new e-categories
	API in e-d-s.

2005-01-04  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-week-view.c (model_rows_deleted_cb): search our internal data
	for the correct event.

2005-01-04  Harry Lu  <harry.lu@sun.com>

	* gui/calendar-component.c: (create_component_view): add a11y name 
	to calendar sidebar selector.
	* gui/tasks-component.c: (create_component_view): add a11y name 
	to task sidebar selector.

2005-01-03  JP Rosevear  <jpr@novell.com>

	Fixes #69663
	
	* gui/e-cal-model-tasks.c (is_complete): look at the percent
	complete and status properties as well for completeness clues

2005-01-03  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-cal-model.c (e_cal_model_set_time_range): redo the queries
	after emitting the 'time_range_changed' signal, since now the
	views will only update their internal data but not redraw the
	events on that signal.

	* gui/e-day-view.c (model_changed_cb): removed, no longer needed.
	(e_day_view_recalc_day_starts): no need to call e_day_view_update_query.
	(e_day_view_init): no need to connect to 'model_changed' signal
	on the model, we already connect to the row/cell_changed ones.

	* gui/e-week-view.c (time_range_changed_cb): no need to call
	e_week_view_update_query.
	(model_changed_cb): removed, no longer needed.
	(e_week_view_init): no need to connect to 'model_changed' signal
	on the model, we already connect to the row/cell_changed ones.

2004-12-31  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/schedule-page.c: add necessary include

	* gui/dialogs/meeting-page.c (sensitize_widgets): kill warning

	* gui/dialogs/cal-prefs-dialog.c (template_url_changed): kill warning

	* gui/dialogs/alarm-dialog.c (malarm_widgets_to_alarm): kill warnings
	(init_widgets): ditto

	* gui/main.c (initialize): no need to init the config system now

	* gui/e-cell-date-edit-config.h: include date edit text header

	* gui/e-cal-config.c (ecp_target_free): kill warning

	* gui/calendar-config.c: clean up includes, internally initialize
	the config setup to make it easier for others; kill dead functions

2004-12-26  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-cal-model.c (search_by_uid_and_client): removed superfluous if
	check.
	(e_cal_view_objects_modified_cb): add all objects at once.

	* gui/e-day-view.c (e_day_view_remove_event_cb): set fields we
	free to NULL.

2004-12-24  Harish Krishnaswamy <kharish@novell.com>

	* gui/dialogs/event-editor.c (event_editor_edit_comp):
	Check for the existence of the meet/sched pages before
	attempting to remove them.

2004-12-23  Chenthill Palanisamy <pchenthill@novell.com>

	Part of merge from offline branch 
	
	* gui/dialogs/calendar-setup.c
	(eccp_general_offline): function to add the check box for
	folder offline settings.
	(offline_status_changed_cb): call back function for the same.
	(ECalConfigItem eccp_items[]), (ECalConfigItem ectp_items[]):
	 Added the check box function call in both the structures.
	
2004-12-23  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-cal-model.c (set_instance_times): get instance times using
	the correct timezone.
	(redo_queries): emit signals before clearing the array.

	* gui/e-day-view.c (process_component):
	* gui/e-week-view.c (process_component): no need to try to update,
	always add.

2004-12-23  Hans Petter Jansson  <hpj@novell.com>

	* gui/e-select-names-editable.c: Correct bad include.

	* gui/dialogs/Makefile.am (IDL_GENERATED_H)
	(IDL_GENERATED)
	(BUILT_SOURCES): No longer needed, removed.

2004-12-22  Hans Petter Jansson  <hpj@novell.com>

	* gui/Makefile.am (IDLS)
	(SELECT_NAMES_IDL_GENERATED_H)
	(SELECT_NAMES_IDL_GENERATED_C)
	(SELECT_NAMES_IDL_GENERATED)
	(IDL_GENERATED): Remove the addressbook IDL.

	* gui/e-meeting-list-view.c (e_meeting_list_finalize)
	(add_section)
	(e_meeting_list_view_init)
	(process_section)
	(name_selector_dialog_close_cb)
	(get_select_name_dialog): Adapt to new ENameSelector.

	* gui/e-select-names-editable.c (esne_start_editing)
	(esne_finalize)
	(esne_init)
	(e_select_names_editable_get_type)
	(entry_activate)
	(e_select_names_editable_construct)
	(e_select_names_editable_get_address)
	(e_select_names_editable_get_name)
	(e_select_names_editable_set_address): Adapt to new ENameSelector.

	* gui/e-select-names-renderer.c (e_select_names_renderer_editing_done)
	(e_select_names_renderer_activated)
	(e_select_names_renderer_start_editing): Adapt to new ENameSelector.

	* gui/dialogs/alarm-dialog.c (malarm_widgets_to_alarm)
	(addressbook_clicked_cb)
	(addressbook_response_cb)
	(setup_select_names)
	(check_custom_email)
	(malarm_addresses_changed_cb): Adapt to new ENameSelector.

	* gui/dialogs/e-delegate-dialog.c (e_delegate_dialog_finalize)
	(e_delegate_dialog_construct)
	(addressbook_clicked_cb)
	(addressbook_response_cb)
	(e_delegate_dialog_get_delegate)
	(e_delegate_dialog_get_delegate_name): Adapt to new ENameSelector.
	
2004-12-22  JP Rosevear  <jpr@novell.com>

	* gui/e-meeting-store.c (freebusy_async): prevent compare against
	null default_fb_uri and fix thinko

2004-12-22  JP Rosevear  <jpr@novell.com>
	
	* gui/e-cal-model.c: Change copyright from ximian to novell

2004-12-17  Not Zed  <NotZed@Ximian.com>

	* gui/e-calendar-table.c (e_calendar_table_show_popup_menu): 

	* gui/tasks-component.c (popup_event_cb): 

	* gui/gnome-cal.c (gnome_calendar_view_popup_factory): 

	* gui/e-calendar-view.c (e_calendar_view_create_popup_menu): 

	* gui/alarm-notify/alarm-queue.c (tray_icon_clicked_cb): 

	* gui/dialogs/meeting-page.c (button_press_event): 

	* gui/calendar-component.c (popup_event_cb): 

2004-12-22  JP Rosevear  <jpr@novell.com>

	Fixes #61077
	
	* gui/dialogs/task-details-page.glade: remove extraneous tab

	* gui/dialogs/alarm-dialog.c: ditto
	
2004-12-22  JP Rosevear  <jpr@novell.com>
	
	Fixes #61076
	
	* gui/comp-editor-factory.c (open_client): don't translate command
	line warnings

	* gui/calendar-offline-handler.c (backend_go_online): ditto
	(backend_go_offline): ditto
	
2004-12-21  JP Rosevear  <jpr@novell.com>

	Fixes #41624
	
	* conduits/calendar/calendar-conduit.c (local_record_from_comp):
	append the exceptions, don't keep overwriting the first

2004-12-21  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-cal-model.c (set_instance_times): no need to convert times now.
	(add_instance_cb): no need to convert here.

2004-12-21  Rodrigo Moya <rodrigo@novell.com>

	Merge from recurrences-work-branch

	* gui/e-cal-model.c (free_comp_data): renamed to
	e_cal_model_free_component_data and made it public.
	(clear_objects_array, e_cal_view_objects_removed_cb,
	remove_client_objects): use e_cal_model_free_component_data.
	(get_dtstart): get the DTSTART correctly for recurrences.
	(add_instance_cb): initialize all members of ECalModelComponent, and
	use the correct icalcomponent when setting the field.
	(set_instance_times): new function to set the instance_* fields of
	the ECalModelComponent when not expanding recurrences.
	(e_cal_view_objects_added_cb): expand recurrences for all objects when
	the model is set to expand. Call set_instance_times when not
	expanding recurrences.
	(e_cal_view_objects_modified_cb): made it remove objects and re-add
	them.
	(copy_ecdv): check values before using them.
	(e_cal_model_copy_component_data): Added code to copy the instance_* and
	color fields.

	* gui/e-cal-model-calendar.c (get_dtend): get the DTEND correctly for
	recurrences.
	(ecmc_set_value_at): ask user which instances to modify.

	* gui/e-day-view.c (e_day_view_find_event_from_uid): changed to search
	by UID and RID if given.
	(process_component): changed to not expand recurrences at all, this is
	now done on the model.
	(row_deleted_check_cb, remove_uid_cb): removed these functions.
	(model_rows_deleted_cb): changed to just remove the rows signalled from
	the model, which is the responsible for the recurrence expansion.
	(e_day_view_new): set the model to expand recurrences.
	(e_day_view_remove_event_cb): check the value searched in the array.
	(e_day_view_do_key_press): use e_day_view_find_event_from_uid correctly.

	* gui/e-week-view.c (e_week_view_find_event_from_uid): changed to search
	by UID and RID if given.
	(process_component_recur_cb): removed.
	(process_component): changed to not expand recurrences at all, this is
	now done on the model.
	(row_deleted_check_cb, remove_uid_cb): removed these functions.
	(model_rows_deleted_cb): changed to just remove the rows signalled from
	the model, which is the responsible for the recurrence expansion.
	(e_week_view_new): set the model to expand recurrences.
	(e_week_view_remove_event_cb): check the value searched in the array.
	Set the ECalModelComponent field to NULL after freeing it.
	(e_week_view_do_key_press): use e_week_view_find_event_from_uid
	correctly.

	* gui/dialogs/recur-comp.c (recur_component_dialog): remove the
	RECURRENCE-ID from the object when modifying all instances.

2004-12-18  James Bowes  <bowes@cs.dal.ca>

	* gui/apps_evolution_calendar.schemas.in.in: Add schema for Free/Busy
	template uri.
	* gui/calendar-config-keys.h:
	* gui/calendar-config.c: (calendar_config_get_free_busy_template),
	(calendar_config_set_free_busy_template),
	(calendar_config_add_notification_free_busy_template):
	* gui/calendar-config.h: Functions to get, set and monitor the 
	Free/Busy template uri gconf setting.
	* gui/dialogs/cal-prefs-dialog.c: (template_url_changed),
	(setup_changes), (get_widgets), (show_fb_config):
	* gui/dialogs/cal-prefs-dialog.glade:
	* gui/dialogs/cal-prefs-dialog.h: Change 'Free/Busy Publish' tab to
	'Free/Busy'. Add an entry for setting the default Free/Busy uri. 
	Only change the gconf setting on 'focus out' event
	* gui/e-meeting-store.c: (refresh_queue_remove): Check the hash using
	the attendee's mailto: address, rather than the memory address of the 
	attendee object as the key.
	(e_meeting_store_get_fb_uri), (e_meeting_store_set_fb_uri): Get and set
	the EMeetingStore's Free/Busy template string.
	(process_callbacks_main_thread), (process_callbacks): Process callbacks
	in the main thread, so that widgets can be redrawn properly.
	(replace_string): Utility function for replacing wildcards in the
	default Free/Busy uri.
	(ems_finalize),	(ems_init), (freebusy_async), (refresh_busy_periods), 
	(refresh_queue_add), (e_meeting_store_refresh_busy_periods): Add the 
	ability to check for Free/Busy information from a default location, 
	if all else fails.
	(start_async_read): Use gnome-vfs to read the Free/Busy information.
	* gui/e-meeting-store.h: Add function prototypes for get and set fb_uri
	* gui/e-meeting-time-sel.c: (e_meeting_time_selector_init),
	(e_meeting_time_selector_destroy), (free_busy_timeout_refresh), 
	(free_busy_template_changed_cb): Watch for a change in the Free/Busy 
	template gconf setting, and check for new Free/Busy data if it occurs.
	* gui/e-meeting-time-sel.h: Include variable for notification function
	id on changes to the Free/Busy uri in the EMeetingTimeSelector .
 
2004-12-17  Rodney Dawes  <dobey@novell.com>

	* gui/alarm-notify/alarm-notify-dialog.c (an_minutes_update_label):
	Add callback function for doing ngettext on the "minutes" label
	(alarm_notify_dialog): Get the "minutes" label from the glade file
	and set the callback for its "value_changed" signal

	Fixes #47535

2004-12-13  Harish Krishnaswamy <kharish@novell.com>

	* gui/dialogs/calendar-setup.c : Correct some white space 
	ugliness in the previous commit.

2004-12-13  Vivek Jain <jvivek@novell.com>

	* gui/dialogs/calendar-setup.c : Changed the window title based upon
	the source.

2003-12-09  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-calendar-view.c (on_unrecur_appointment): keep a local copy
	of the ECal.

2004-12-08  Hans Petter Jansson  <hpj@novell.com>

	* gui/e-meeting-list-view.c
	* gui/e-select-names-editable.c
	* gui/dialogs/alarm-dialog.c
	* gui/dialogs/e-delegate-dialog.c: Include <libebook/e-destination.h>
	from evolution-data-server.

2004-12-08  Harish Krishnaswamy <kharish@novell.com>
	
	* gui/e-week.c (time_range_changed_cb, e_week_view_set_first_day_shown):
	update the query so currently held events can be cleared off.

2004-12-08  David Mosberger <davidm@napali.hpl.hp.com>

	* gui/main.c: include plugin headers to fix 64 bit problems.

2004-12-06  Rodrigo Moya <rodrigo@novell.com>

	Fixes #67403

	* gui/dialogs/event-page.c (sensitize_widgets): don't unsensitize
	the 'Customize' button, to allow users to look at the alarm list
	for read only events.

	* gui/dialogs/alarm-list-dialog.c (sensitize_buttons): unsensitize
	buttons if the event is read only.

2004-12-02  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/dialogs/task-editor.[ch] (task_editor_new), (task_editor_construct),
	(show_assignment):
	Add a boolean variable to denote assigned task and construct the 
	meeting page only for the assigned task. Set it as a group item
	in component editor.
	(_TaskEditorPrivate): added the boolean variable (is_assigned).
	(task_editor_init): initialized the variable.
	* gui/dialogs/comp-editor.[ch]: Added functions to set and get whether comp
	 is a group item or individual item.
	* gui/comp-editor.c (make_title_from_string), (make_title_from_comp):
	Set the Title for the appointment editor window as "Meeting" or "Assigned
	Task" if its a group calendar/task item.
	(_CompEditorPrivate): added a boolean variable (is_group_item).
	(comp_editor_init): initialized the same.
	* gui/dialogs/event-editor.c (event_editor_construct), (show_meeting): Set whether
	the component is a group item or not in comp editor.
	* gui/e-calendar-table.c (e_calendar_table_open_task), (e_calendar_table_open_selected),
	(open_task_by_row): Check whether the component being opened is an assigned task by
	checking for attendees and call open_task with proper value for boolean variable assign.
	* gui/comp-editor-factory.c (edit_existing):
	* gui/e-calendar-table.c (open_task):
	* gui/e-tasks.c (e_tasks_new_task):
	* gui/gnome-cal.c (gnome_calendar_new_task):
	* gui/tasks-component.c (create_new_todo):
	Called the function task_editor_new with a added argument.

2004-12-02  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-day-view.c (e_day_view_finish_resize), (e_day_view_reshape_day_event)
       	(e_day_view_change_event_time): Free the string day_view->last_edited_comp_string
	before changing assigning it another value.
	* gui/e-week-view.c (e_week_view_change_event_time): Free the string
	week_view->last_edited_comp_string for the same reason above.
	
2004-11-29  Chenthill Palanisamy  <pchenthill@novell.com>

	* calendar-errors.xml.h: committng this file. Missed to
	commit this one.

2004-11-29  Chenthill Palanisamy  <pchenthill@novell.com>
	
	* gui/dialogs/comp-editor.c (response_cb): Moved the call
	for the warning dialog (send_component_prompt_subject) after 
	the component is saved (save_comp_with_send). 
	
2004-11-26  JP Rosevear  <jpr@novell.com>

	* gui/alarm-notify/alarm-queue.c (display_notification): ditto

	* gui/e-timezone-entry.c (e_timezone_entry_init): get the image
	directly from the icon factory

2004-11-26  JP Rosevear  <jpr@novell.com>
	
	* gui/alarm-notify/alarm-queue.c (display_notification): prevent
	crash if there is no description

2004-11-25  Harish Krishnaswamy  <kharish@novell.com>

	* gui/calendar-component.c: 
	(new_calendar_cb), (edit_calendar_cb): Use modified_setup_edit_calendar call.
	(popup_event_cb): If source is null (Rt click on a source group), show the new 
	calendar popup menu item. Else, do not show the new calendar option. 
	* gui/dialogs/calendar-setup.[ch] (eccp_get_source_type): Compare the
	source_groups by their uid and not the pointers, so that the correct option
	is activated on the combo box.
	(calendar_setup_edit_calendar) : add a source_group parameter to the function.
	(calendar_setup_new_calendar): Use modified signature of the above function.
	* gui/e-calendar-view.c (on_edit_appointment): check the icalcomponent
	to see if it is a meeting and set the argument to e_calendar_view_edit_appointment
	correctly.

2004-11-25  Chenthill Palanisamy  <pchenthill@novell.com>
		
	* gui/dialogs/event-deitor.c (show_meeting): removed the
	call for comp_editor_show_page, so that the event page
	shows up at first instead of meeting page when a meeting
	is opened.

2004-11-25  Chenthill Palanisamy  <pchenthill@novell.com>

	* calendar-errors.xml: Added two error ids to display use
	it when the meeting is created without a summary.
	* gui/dialogs/send-comp.[ch] (send_component_prompt_subject): Added a 
	function to prompt for a dialog when a meeting/assigned task is sent 
	without a summary.
	* gui/dialogs/comp-editor.c (response_cb): Called the above mentioned
	function when the summary is not present.
	
2004-11-23  Rodney Dawes  <dobey@novell.com>

	* gui/alarm-notify/alarm-notify-dialog.[ch]:
	Add gtkimage.h to includes, and remove gtkhtml headers
	Add and remove some widgets in the AlarmNotify struct
	(dialog_destroy_cb, delete_event_cb, close_clicked_cb):
	(snooze_clicked_cb, edit_clicked_cb, url_requested_cb):
	(make_html_display, write_times, write_html_heading):
	(alarm_notify_dialog_disable_buttons): 
	Remove all these unneeded functions (no more GtkHTML in the dialog)
	(alarm_notify_dialog): Add description and location arguments
	Rename message argument to summary
	Update gtk-doc comment block to reflect API changes
	Clean up code to use gtk_dialog_run () and use a HIG compliant dialog

	* gui/alarm-notify/alarm-notify.glade: Update the alarm notify
	dialog to be HIG compliant and not use GtkHTML, and display more
	information that is relevant to the appointment we are alerting of

	* gui/alarm-notify/alarm-queue.c: Add new variables to the
	TrayIconData structure so we can access the description and location
	(on_dialog_objs_removed_cb): Remove alarm_dialog bits
	(notify_dialog_cb): Remove alarm_dialog bits
	(tray_icon_destroyed_cb): Free the description and location as well
	(open_alarm_dialog): alarm_notify_dialog does all the work now, we
	don't need to trap the dialog widget here
	(display_notification): Add code to get the description and location
	information from the cal component
	Avoid using an alarm component which has less useful API
	Fix a warning when creating the tray_icon widget
	
2004-11-15  Not Zed  <NotZed@Ximian.com>

	* gui/dialogs/Makefile.am (libcal_dialogs_la_LIBADD): add
	libeabutil, since we use e-destination.

2004-11-08  Rodney Dawes  <dobey@novell.com>

	* gui/alarm-notify/alarm-notify-dialog.c (write_html_heading):
	Don't try to convert the results of timet_to_str_with_zone to UTF-8,
	since the return value is already encoded in UTF-8

	Fixes #47529

2004-11-04  Rodrigo Moya <rodrigo@novell.com>

	* gui/dialogs/event-page.glade:
	* gui/dialogs/task-page.glade: expand the horizontal box so that it
	fills all available space.

2004-11-03  David Trowbridge  <trowbrds@cs.colorado.edu>

	* gui/e-cal-config.c: added EConfig subclass for calendars
	* gui/calendar-component.c, gui/tasks-component.c: initialize
	  plugin hooks on component startup.
	* gui/dialogs/calendar-setup.c: Converted to use EConfig

2004-11-04  Li Yuan  <li.yuan@sun.com>

	Fixes #6767

	* gui/e-day-view-main-item.c:
	(e_day_view_main_item_draw_day_event):
	use widget->style instead of hard code colors.
	* gui/e-day-view.c: (e_day_view_realize), (e_day_view_set_colors),
	(e_day_view_style_set), (e_day_view_reshape_long_event),
	(e_day_view_reshape_day_event):
	ditto.
	* gui/e-week-view.c: (e_week_view_realize),
	(e_week_view_set_colors), (e_week_view_style_set),
	(e_week_view_reshape_event_span):
	ditto.

2004-11-02  JP Rosevear  <jpr@novell.com>

	* gui/e-day-view-config.c (set_twentyfour_hour): make sure the day
	view times redraw themselves if we switch 24/12 hour modes

2004-11-02  JP Rosevear  <jpr@novell.com>
	
	Fixes #68707
	
	* gui/e-week-view-event-item.c (e_week_view_event_item_draw):
	restrict the range to 0-23 (midnight end times became '24')

2004-10-28  Not Zed  <NotZed@Ximian.com>

	* gui/tasks-component.c (popup_event_cb): 
	* gui/e-calendar-view.c (e_calendar_view_create_popup_menu): 
	* gui/e-calendar-table.c (e_calendar_table_show_popup_menu):
	* gui/calendar-component.c (popup_event_cb): added hook doco.

2004-10-27  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-cal-list-view.c (e_cal_list_view_new): don't expand recurrences
	for the list view.

2004-10-21  Harish Krishnaswamy  <kharish@novell.com>

	* gui/e-cal-popup.[ch]: (e_cal_popup_target_new_source):
	Add status bits to denote if the calendar source is available offline
	so that plugins to calendar popups can use the status qualifier to denote 
	their visibility preferences.

2004-10-21  Rodrigo Moya <rodrigo@novell.com>

	* gui/dialogs/select-source-dialog.c: use the new source selector
	dialog in libedataserverui.

2004-10-20  JP Rosevear  <jpr@novell.com>

	* gui/calendar-component.c: put an icon on the properties menu item

	* gui/tasks-component.c: ditto
	
	* gui/main.c (initialize): register plugin hooks for tasks and
	calendar

2004-10-20  JP Rosevear  <jpr@novell.com>
	
	* gui/e-cal-popup.c (ecalph_class_init): correct classid

2004-10-19  JP Rosevear  <jpr@novell.com>

	* gui/calendar-component.c, gui/e-cal-menu.c, gui/e-cal-popup.c,
	gui/e-calendar-table.c, gui/e-calendar-view.c, gui/gnome-cal.c,
	gui/tasks-component.c, gui/alarm-notify/alarm-queue.c,
	gui/dialogs/meeting-page.c: convert to org.gnome hook names

2004-10-19  Harish Krishnaswamy  <kharish@novell.com>

	* gui/comp-editor-factory.c: (edit_existing):
	Use e_cal_component_has_attendees to test if it is a meeting.
	* gui/dialogs/event-editor.c: (event_editor_init):
	By default, the event is not a meeting.
	(event_editor_construct): Do not add the invitation, scheduling pages
	to the editor if it is not a meeting. 
	* gui/e-day-view.c: (e_day_view_on_event_double_click):
	check the icalproperty to test if the event is a meeting.
	
2004-10-19  JP Rosevear  <jpr@novell.com>

	* gui/gnome-cal.c (connect_list_view_focus): listen to the canvas
	for focus events
	(setup_widgets): listen for listen view selection changes

	* gui/e-cal-list-view.c (setup_e_table): listen for the cursor to
	move
	(e_cal_list_view_cursor_change_cb): indicate the selection changed

2004-10-19  Harish Krishnaswamy  <kharish@novell.com>

	* gui/calendar-component.c (create_new_event):
	* gui/e-calendar-view.c: (e_calendar_view_edit_appointment):
	* gui/comp-editor-factory.c (edit_existing), (edit_new):
	* gui/dialogs/event-editor.c (event_editor_edit_comp),
	 (event_editor_new): updated the calls to event_editor_new 
	with additional argument.
	* gui/dialogs/event-editor.h: add parameter is_meeting to
	distinguish between events and  meetings.
	* gui/dialogs/meeting-page.c: (sensitize_widgets):
	use explicit GError variable so that BUSY_ERROR
	conditions do not lead us to think the calendar is readonly.
	* gui/e-meeting-store.c: (refresh_queue_remove), (ems_init),
	(e_meeting_store_remove_attendee), (freebusy_async),
	(refresh_busy_periods), (refresh_queue_add): Make free-busy calls 
	to backends async. Fixed the problem of spurious attendees getting 
	added to the refresh_data.
	
2004-10-14  Not Zed  <NotZed@Ximian.com>

	* gui/e-cal-menu.c (e_cal_menu_target_new_select): dont access a
	NULL client.

	* gui/gnome-cal.c (gnome_calendar_get_taskpad_menu)
	(gnome_calendar_get_calendar_menu): accessors to get the menu
	managers.
	(gnome_calendar_init): setup menu managers.

2004-10-13  Not Zed  <NotZed@Ximian.com>

	* gui/calendar-commands.c (calendar_control_activate)
	(calendar_control_deactivate): activate and deactivate the
	calendar and taskpad menu handlers.
	(sensitize_items): helper to sensitise items based on target
	masks.
	(calendar_control_sensitize_calendar_commands): update the
	calendar menu manager target appropriately.
	(sensitize_taskpad_commands): same for the taskpad.

	* gui/e-cal-menu.[ch]: Targets for main menu management.

	* gui/e-cal-popup.c (e_cal_popup_target_new_select): fix cast.
	Also include the tasks stuff in the hook metadata.

2004-10-15  JP Rosevear  <jpr@novell.com>

	* gui/calendar-commands.c (calendar_control_activate): remove
	useless ifdef'd out statement (its been unused for 3+ years)
	
2004-10-15  JP Rosevear  <jpr@novell.com>
	
	* gui/calendar-commands.h (calendar_goto_today): remove prototype

	* gui/calendar-commands.c: remove dead function

2004-10-14  JP Rosevear  <jpr@novell.com>

	* gui/e-meeting-attendee.c: convert to G_DEFINE_TYPE

	* gui/e-meeting-list-view.c: ditto

	* gui/e-meeting-time-sel.c: ditto

	* gui/e-meeting-time-sel-item.c: ditto

	* gui/e-select-names-renderer.c: ditto

	* gui/e-timezone-entry.c: ditto

	* gui/e-tasks.c: ditto

	* gui/gnome-cal.c: ditto

	* gui/weekday-picker.c: ditto

2004-10-14  JP Rosevear  <jpr@novell.com>
	
	* gui/e-cell-date-edit-config.c: convert to G_DEFINE_TYPE

	* gui/e-cell-date-edit-text.c: ditto

	* gui/e-comp-editor-registry.c: ditto

	* gui/e-date-edit-config.c: ditto

	* gui/e-mini-calendar-config.c: ditto

2004-10-14  JP Rosevear  <jpr@novell.com>
	
	* gui/e-cal-list-view-config.c: convert to G_DEFINE_TYPE

	* gui/e-cal-list-view.c: ditto

	* gui/e-cal-model-calendar.c: ditto

	* gui/e-cal-model-tasks.c: ditto

	* gui/e-cal-model.c: ditto

	* gui/e-calendar-table-config.c: ditto

	* gui/e-calendar-table.c: ditto

	* gui/e-calendar-view.c: ditto

2004-10-14  JP Rosevear  <jpr@novell.com>
	
	* gui/calendar-view.c: convert to G_DEFINE_TYPE

	* gui/calendar-view-factory.c: ditto

	* gui/cal-search-bar.c: ditto

	* gui/e-cal-component-preview.c: ditto

2004-10-14  JP Rosevear  <jpr@novell.com>
	
	* gui/e-week-view-config.c: convert to G_DEFINE_TYPE

	* gui/e-week-view-event-item.c: ditto

	* gui/e-week-view-main-item.c: ditto

	* gui/e-week-view-titles-item.c: ditto

	* gui/e-week-view.c: ditto

2004-10-14  JP Rosevear  <jpr@novell.com>
	
	* gui/e-day-view.c: convert to G_DEFINE_TYPE
	
	* gui/e-day-view-config.c: ditto

	* gui/e-day-view-main-item.c: ditto

	* gui/e-day-view-time-item.c: ditto

	* gui/e-day-view-top-item.c: ditto

2004-10-14  JP Rosevear  <jpr@novell.com>
	
	* gui/dialogs/comp-editor.c: convert to G_DEFINE_TYPE
	
	* gui/dialogs/meeting-page.c: ditto

	* gui/dialogs/recurrence-page.c: ditto

	* gui/dialogs/schedule-page.c: ditto

	* gui/dialogs/e-delegate-dialog.c: ditto

	* gui/dialogs/event-editor.c: ditto

	* gui/dialogs/task-editor.c: ditto

	* gui/dialogs/task-details-page.c: ditto

	* gui/dialogs/select-source-dialog.c
	(primary_selection_changed_cb): fix warning
	
2004-10-13  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/task-page.c: ditto

	* gui/calendar-component.h: remove e-source-selector include

	* gui/tasks-component.h: ditto
	
	* gui/calendar-component.c: update include to libedataserverui for
	source selector and option menus
	
	* gui/e-cal-popup.c: ditto

	* gui/dialogs/url-editor-dialog.h: ditto

	* gui/dialogs/select-source-dialog.c: ditto

	* gui/tasks-component.c: ditto

	* importers/icalendar-importer.c: ditto
	
	* gui/e-itip-control.c: ditto; use G_DEFINE_TYPE instead of
	E_MAKE_TYPE
	
	* gui/dialogs/event-page.c: ditto	

	* gui/dialogs/task-page.c: ditto
	
2004-10-12  Li Yuan  <li.yuan@sun.com>

	* gui/e-day-view.c: (e_day_view_on_main_canvas_button_press):
	* gui/e-week-view.c: (e_week_view_on_button_press):
	If main_canvas has focus, do not grub it. Emit the 
	selected_time_changed signal after the selection day changed.

2004-10-12  Not Zed  <NotZed@Ximian.com>

	* gui/dialogs/meeting-page.c (button_press_event): convert menu to
	epopup.

2004-10-12  Not Zed  <NotZed@Ximian.com>

	* gui/e-calendar-table.c (setup_popup_icons): removed.
	(e_calendar_table_show_popup_menu): convert to use e-popup for
	pluggable popup menu.
	(e_calendar_table_on_open_task, e_calendar_table_on_save_as)
	(e_calendar_table_on_print_task, e_calendar_table_on_cut)
	(e_calendar_table_on_copy, e_calendar_table_on_paste)
	(e_calendar_table_on_assign, e_calendar_table_on_forward)
	(delete_cb):
	(mark_as_complete_cb, open_url_cb): convert to epopup callbacks.
	Moved all of the callbacks above the table rather than maintaining
	forward declarations for some of them.

	* gui/e-cal-popup.c (e_cal_popup_target_new_select): add the task
	required masks, and make one vs many mutally exclusive.

	* gui/e-calendar-view.c (e_calendar_view_create_popup_menu):
	copy/setup the event list here.

	* gui/e-cal-popup.c (e_cal_popup_target_new_select): take model +
	events rather than the calendar view.

2004-10-12  Li Yuan  <li.yuan@sun.com>

	* gui/calendar-commands.c:
	(calendar_get_text_for_folder_bar_label):
	When the start year and the end year are the same, the num should
	be displayed in start time.
	* gui/dialogs/alarm-dialog.glade:
	Add names to comboxes in alarm-dialog page.
	* gui/dialogs/cal-prefs-dialog.glade:
	Add labbled_by relation for e_date_edit.
	Add names to comboxes in general tab and display tab.
	Add shortcut keys to start_of_day_label and end_of_day_label.
	* gui/dialogs/event-page.c: (init_widgets):
	Use the default text_buffer of gtk_text_view instead of
	creating one.
	* gui/dialogs/event-page.glade:
	Add labbled_by relation for e_date_edit.
	* gui/dialogs/meeting-page.glade:
	Set an atk name for organizer widget.
	* gui/dialogs/task-page.c: (init_widgets):
	Use the default text_buffer of gtk_text_view instead of
	creating one.
	* gui/dialogs/task-page.glade:
	Add labbled_by relation for e_date_edit.
	Add a11y names to task description and categories.
	* gui/e-alarm-list.c: (e_alarm_list_iter_n_children):
	Remove the iter checker. The iter can't have a valid value at this time.
	* gui/e-date-time-list.c: (e_date_time_list_iter_n_children):
	Remove the iter checker. The iter can't have a valid value at this time.
	* gui/e-meeting-time-sel.c: (e_meeting_time_selector_construct):
	Add labbled_by relation for e_date_edit.
	* gui/e-timezone-entry.c: (e_timezone_entry_class_init),
	(e_timezone_entry_init), (e_timezone_entry_mnemonic_activate),
	(e_timezone_entry_focus):
	Add a focus handler for e-timezone-entry. Set an atk name for the
	button.
	* gui/e-week-view.c: (e_week_view_do_cursor_key_up),
	(e_week_view_do_cursor_key_down), (e_week_view_do_cursor_key_left),
	(e_week_view_do_cursor_key_right), (e_month_view_do_cursor_key_up),
	(e_month_view_do_cursor_key_down),
	(e_month_view_do_cursor_key_left),
	(e_month_view_do_cursor_key_right):
	Emit the selected_time_changed signal after the selection day changed.

2004-10-11  Not Zed  <NotZed@Ximian.com>

	* gui/alarm-notify/alarm-queue.c (tray_icon_clicked_cb): convert
	to epopup.
	(add_popup_menu_item): removed, now redundant.

2004-10-08  Rodrigo Moya <rodrigo@novell.com>

	Fixes #45951

	* gui/dialogs/event-page.glade:
	* gui/dialogs/task-page.glade: attach the description field correctly
	to the table so that it scrolls correctly instead of making the dialog
	bigger as you write.

	* gui/dialogs/comp-editor.c (setup_widgets): no need to create an extra
	GtkVBox, just use the GtkDialog's one.

2004-10-07  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/cal-prefs-dialog.c: remove useless include

	* gui/dialogs/url-editor-dialog.c: ditto
	
2004-10-07  JP Rosevear  <jpr@novell.com>
	
	* gui/print.c: guard config.h

	* gui/tasks-control.c: guard config.h, remove useless include

	* gui/migration.c: remove useless include

	* gui/main.c: remove useless include

	* gui/e-calendar-view.h: #define the type

	* gui/calendar-offline-handler.c: remove useless include

	* gui/calendar-config.c: tidy header

2004-10-07  JP Rosevear  <jpr@novell.com>
	
	* gui/calendar-commands.c: guard config.h include, kill warning
	and remove useless include

2004-10-06  Rodrigo Moya <rodrigo@novell.com>

	Fixes #65932

	* common/authentication.c: keep a hash table of all the source lists.
	(auth_new_cal_from_uri): do a search in the source list for the given
	URI, and use that ESource if we find it. Also, keep the hash table of
	source lists up to date.

	* gui/comp-editor-factory.c (cal_opened_cb): don't assert on error
	cases, just display an error dialog.

2004-10-06  Not Zed  <NotZed@Ximian.com>

	* gui/gnome-cal.c (gnome_calendar_setup_view_popup): rename to
	view_popup_factory.  Make it build an epopup item list directly.
	Can't re-use the galview cruft :-/
	(gnome_calendar_discard_view_popup): no longer needed.
	(gc_set_view, gc_save_custom_view, gc_define_views_response) 
	(gc_define_views): implement the gal-view popup menu items.

	* gui/gnome-cal.h:
	* gui/e-week-view.h:
	* gui/e-day-view.h:
	* gui/e-cal-list-view.h: removed old e-popup-menu header.

	* gui/e-calendar-view.c (setup_popup_icons): removed.
	(e_calendar_view_create_popup_menu): converted to use e-popup.
	(on_paste, on_copy, on_cut, on_delete_occurrence) 
	(on_unrecur_appointment, on_delete_appointment, on_publish) 
	(on_forward, on_meeting, on_move_to, on_copy_to, on_print_event) 
	(on_save_as, on_print, on_edit_appointment, on_goto_today) 
	(on_goto_date, on_new_task, on_new_meeting, on_new_event) 
	(on_new_appointment): convert to use e-popup stuff.

	* gui/tasks-component.c (popup_event_cb): e-popup api changes.

	* gui/e-cal-popup.c (e_cal_popup_target_new_select): implement the
	selection target.
	(ecalp_target_free): and free it.

	* gui/e-cal-model.h: Make the ECalModel struct non-anonymous so it
	can be forward-declared.

	* gui/calendar-component.c (popup_event_cb): e-popup api changes.

2004-10-06  Rodrigo Moya <rodrigo@novell.com>

	Revert fix for #60551

	* gui/dialogs/task-page.c (task_page_fill_component): start date
	can be after the due date, no need to compare.

2004-10-02  Iv·n Frade <frade@asturlinux.org>

	Fixes #48116

	* gui/dialogs/task-details.page.c (task_details_page_fill_component):
	Validation: completed date is not a future date.
	
2004-10-01  Not Zed  <NotZed@Ximian.com>

	* gui/tasks-component.c (create_component_view): cast warning
	away.
	(create_component_view): connect to popup_event rather than
	fill_popup_menu.

	* gui/calendar-component.c (create_component_view): cast a warning
	away.

	* calendar-errors.xml: add prompt-delete-task-list.

	* gui/tasks-component.c (fill_popup_menu_cb): renamed to
	popup_event_cb, make use e-cal-popup.
	(edit_task_list_cb, new_task_list_cb, delete_task_list_cb) 
	(copy_task_list_cb): deja-vu.  update for api.
	(add_popup_menu_item): killed. murdered. drawn and quatered.
	(delete_task_list_cb): use e-error for the delete prompt.

	* gui/calendar-component.c (create_component_view): hook onto
	popup event instead of fill_popup_menu.

	* calendar-errors.xml: added prompt-delete-calendar.

	* gui/calendar-component.c (fill_popup_menu_cb): rename to
	popup_event_cb, make use e-cal-popup.
	(edit_calendar_cb, new_calendar_cb, delete_calendar_cb) 
	(copy_calendar_cb): fix for api changes.
	(add_popup_menu_item): removed.
	(delete_calendar_cb): use e-error for the delete thing.

	* gui/e-cal-popup.[ch]: calendar popup driver.

2004-09-29  Rodrigo Moya <rodrigo@novell.com>

	Fixes #64683

	* gui/e-meeting-time-sel.c (e_meeting_time_selector_construct): create
	a scrolled window for the attendees list, and synchronize it with the
	scrolling in the F/B area.

2004-09-28  Not Zed  <NotZed@Ximian.com>

	** See bug #66736.

	* gui/e-itip-control.c (e_itip_control_set_data): noop if we were
	destroyed (priv == null).

2004-09-28  JP Rosevear  <jpr@novell.com>
 
 	Fixes #61766
 	
 	* gui/migration.c (create_calendar_contact_source): set a color
 	for the contacts
 	(create_calendar_sources): set a color for the personal source and
 	make in primary and default if nothing else is either
 	(create_task_sources): ditto for tasks personal source
	
2004-09-24  Rodrigo Moya <rodrigo@novell.com>

	Fixes #65599

	* gui/itip-utils.c (comp_fb_normalize): don't use NULL properties.

	* gui/e-pub-utils.c (e_pub_publish): use auth_new_cal_from_source()
	instead of auth_new_cal_from_uri().

2004-09-24  JP Rosevear  <jpr@novell.com>

	Fixes #64955, Vincent Noel <vnoel@cox.net>
	
	* libecal/e-cal.c (e_cal_get_alarms_in_range): fix c99-ism

2004-09-24  JP Rosevear  <jpr@novell.com>
 
 	Fixes #66344
 
 	* gui/e-cal-model-calendar.c (get_dtend): check for existence of
 	property and null time instead of sending through bad data
 
 	* gui/e-cal-model.c (get_dtstart): ditto
 
 	* gui/e-cal-model-tasks.c (get_completed): ditto
 	(get_due): ditto

2004-09-24  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #63513
	* gui/e-itip-control.c
	(ok_clicked_cb): Now the myaddress can be set to ecal address
	since ok will be sentized only when ecal is loaded.

2004-09-22  JP Rosevear  <jpr@novell.com>

	* gui/calendar-component.c (fill_popup_menu_cb): ditto

	* gui/tasks-component.c (fill_popup_menu_cb): don't allow a delete
	of the system calendar

2004-09-21  JP Rosevear  <jpr@novell.com>
 
 	Fixes #60904
 	
 	* gui/gnome-cal.c (set_week_start): update the view
 	(get_times_for_views): mimic the work week guessing code exactly
 	for calculating the time range needed instead of hardcoding 5 days
 	(set_working_days): new routine to update the view
 	(working_days_changed_cb): use above when getting config change
 	notification
 	(setup_config): set working days and add notification
	
2004-09-21  JP Rosevear  <jpr@novell.com>
 
 	Fixes #66158
 	
 	* gui/e-cal-model-tasks.c (e_cal_model_tasks_mark_task_complete):
 	notify of change so completion status updates immediately
	
2004-09-21  JP Rosevear  <jpr@novell.com>
 
	Fixes #59194
 	
 	* gui/e-cal-model-calendar.c (get_location): return "" instead of
 	NULL
	
2004-09-21  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #65682
	* gui/itip-utils.c 
	(itip_send_comp): check the static capability before
	booking the deletion.

2004-09-15  JP Rosevear  <jpr@novell.com>
 
 	Fixes #55172
 	
 	* conduits/calendar/calendar-conduit.c (local_record_from_comp):
 	handle -1 (last) for monthly recurrences and check both by_set_pos
 	and by_day since either can indicate this type of recurrence
	
2004-09-20  Tony Tsui <ttsui9@gmail.com>

	Fixes #66174

	* gui/dialogs/meeting-page.c (existing_attendee): fixed memory leak.

2004-09-10   Hannah & Fazlu <hannah_lins@yahoo.co.in>

	Fixes bug #65051

	* calendar/gui/dialogs/task-page.c (task_page_fill_component):
	Compared the dates and time

2004-09-10  Rodrigo Moya <rodrigo@novell.com>

	Fixes #62374

	* gui/alarm-notify/alarm-queue.c (load_missed_alarms): removed this
	function.
	(cal_opened_cb): no need to call load_missed_alarms,
	load_alarms_for_today will do everything.
	(alarm_queue_add_client): ditto.
	(load_alarms_for_today): take into account the last saved notification
	time.
	(load_alarms): unref the previous query, this function should now
	only be called once per time range.

2004-09-09  JP Rosevear  <jpr@novell.com>
 
 	Fixes #65454
 	
 	* gui/e-itip-control.c (class_init): only use a destroy function,
 	no finalize
 	(cleanup_ecal): util function
 	(init): use above for hash table and killed destroyed flag
 	(weren't using it anywhere)
 	(destroy): collapse finalize work into here and guard against
 	multiple destroy calls

2004-09-08  JP Rosevear  <jpr@novell.com>

	Fixes #62728
	
	* gui/e-week-view.c (e_week_view_set_week_start_day): trigger a
	redraw when changing the start day

2004-09-05  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-calendar-table.c
	(e_calendar_table_show_popup_menu): Check the
	static capability to enable or disable the assign
	tasks in the popup menu.

	* gui/dialogs/recurrence-page.c
	(sensitize_buttons): Check for the static capability
	to convert a existing appointment to recurrence appointment
	for enabling or diabling the recurrence widgets.

2004-08-31  Rodrigo Moya <rodrigo@novell.com>

	Fixes #62392

	* gui/alarm-notify/alarm-queue.c (display_notification): ref the
	client's query object so that it doesn't disappear on us.
	(tray_icon_destroyed_cb): unref the query previously ref'ed.

2004-08-31  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-cal-model-tasks.c: include missing string.h, to avoid
	problems in 64 bit builds.
	
2004-08-27  Not Zed  <NotZed@Ximian.com>

	* common/authentication.c (auth_func_cb): constify the strings to
	remove a warning.

	** See bug #64856 (workaround).

	* common/authentication.c (auth_func_cb): 
	* gui/e-pub-utils.c(e_pub_publish): add ONLINE flag to password
	request.

2004-08-28  JP Rosevear  <jpr@novell.com>

	* gui/e-itip-control.c (rsvp_clicked_cb): get the active state
	(insert_rsvp): set inital rsvp state

	* gui/alarm-notify/alarm-queue.c (alarm_queue_add_client): load
	immediately if they are loaded

2004-08-27  Rodrigo Moya <rodrigo@novell.com>

	* gui/alarm-notify/alarm-queue.c (load_alarms): use the
	new 'has-alarms-in-range' query.
	(alarm_queue_add_client): make sure we don't add twice the same alarm.

2004-08-27  JP Rosevear  <jpr@novell.com>

	Fixes #62911, #54101
	
	* gui/e-itip-control.c (set_ok_sens): util routine to set
	sensitivity of OK button
	(cal_opened_cb): cal back when calendar opens, sensitize ok button
	(start_calendar_server): open async and take call back arg
	(source_selected_cb): desensitize ok button until calendar is
	loaded
	(find_cal_opened_cb): check to see if the calendar contains the
	object we are looking for, if none do show the source selector
	option menu
	(find_server): search async for the server
	(destroy): clean up html widget
	(finalize): instead of here
	(get_publish_options): use only object tag
	(get_request_options): ditto
	(get_request_fb_options): ditto
	(get_reply_options): ditto
	(get_refresh_options): ditto
	(get_cancel_options): ditto
	(show_current_event): use new options, remove groupwise NEEDS
	ACTION check, handle async loading
	(show_current_todo): use new options, handle async loading
	(option_activated_cb): record action
	(add_option): add action item
	(insert_boxes): layout widgets
	(insert_label): insert label
	(rsvp_clicked_cb): record rsvp status
	(insert_rsvp): insert rsvp check box
	(insert_ok): insert ok button
	(publish_options_object): spit out relevant options
	(request_options_object): ditto
	(freebusy_options_object): ditto
	(reply_options_object): ditto
	(refresh_options_object): ditto
	(cancel_options_object): ditto
	(object_requested_cb): handle object requests
	(ok_clicked_cb): use recorded actions

2004-08-27  JP Rosevear  <jpr@novell.com>
	
	* gui/alarm-notify/alarm-notify.h: update proto

	* gui/alarm-notify/alarm-notify.c (list_changed_cb): use per
	source type client hash
	(alarm_notify_init): ditto
	(alarm_notify_finalize): ditto
	(cal_opened_cb): ditto
	(alarm_notify_add_calendar): ditto
	(alarm_notify_remove_calendar): ditto, take source_type arg
	(load_calendars_cb): don't call list_changed if the source list is
	NULL
	
2004-08-26  Christian Neumair  <chris@gnome-de.org>

	* gui/GNOME_Evolution_Calendar.server.in.in:
	Don't mark component menu accels for translation.

2004-08-25  JP Rosevear  <jpr@novell.com>

	* conduits/todo/todo-conduit.c (for_each): prepare the local
	record correctly, should fix copy to/from problems when syncing

	* conduits/calendar/calendar-conduit.c (for_each): ditto

2004-08-25  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* gui/dialogs/recur-comp.c: (recur_component_dialog):
	Don't call gtk_dialog_set_has_separator on Gtk Message Dialog
        with GTK+ >= 2.4.0.

2004-08-25  Chenthill Palanisamy  <pchenthill@novell.com>

	* gui/e-tasks.c
	(default_client_cal_opened_cb): Reset the Status Bar message to
	NUll, if the status of the Calendar is returned OK.

2004-08-24  Rodrigo Moya <rodrigo@novell.com>

	Fixes #58824

	* gui/gnome-cal.c (open_ecal): Only try to open the calendar if not
	loaded yet.
	(update_query, client_cal_opened_cb, default_client_cal_opened_cb,
	backend_died_cb): use always the same view for status messages.
	(gnome_calendar_set_activity_handler): set the activity handlers on
	all views, not just the current one.
	(display_view): no need to set the activity handler here.

2004-08-13  Jeffrey Stedfast  <fejj@novell.com>

	* gui/dialogs/event-page.glade: Make the description scrolled
	window scroll policy "automatic" rather than "never". Fixes bug
	#62063.

2004-08-18  Sivaiah Nallagatla <snallagatla@novell.com>

	* gui/alarm-notify/alarm-notify.c (alarm-notify_init) :
	initialize the mutext needed to prevent concurrect access 
	priv->uri_clients_hash. Also install a timeout handler for
        loading sources which requires  auth later
	(alarm_notify_finalize) : free the new mutex
	(load_calendars_cb) : call back which adds sources again after
	one minute
	(alarm_notify_add_calendar) : lock ad unlock the new mutex
	before and after accessing uri_clients_hash  

2004-08-16  JP Rosevear  <jpr@ximian.com>

	Fixes #62706
	
	* gui/e-cal-model.c (e_cal_model_set_timezone): set the default
	timezone on the server

2004-08-16  Sivaiah Nallagatla <snallagatla@novell.com>
	
	* gui/alarm-notify/alarm-notify.h : change the prototype of 
	alarm_notify_add_calendar to take Esource instead of uri 

	* gui/alarm-notify/alarm-notify.c (alarm_notify_add_calendar) :
	use auth_new_cal_from_source instead of _from_uri to create cal
	client also do not try to load the cal backend which require auth
	and for which there is no password availble in e-password seesion
        (list_changed_cb) (load_calendars) : pass Esource insted of uri to
	alarm_notify_add_calendar
	 
2004-08-14  Sivaiah Nallagatla <snallagatla@novell.com>

	* gui/e-tasks.c (e_tasks_init) : initialize priv->default_lcient
        (default_client_cal_opened_cb) : unref priv->default_client and
	make it NULL
	(client_cal_opened_cb) : don't unref client explicitly as removing
	from priv->clients already does that.  Remove client based on uid
	instead of uri
	(backend_died_cb) : Remove client based on uid insted of uri Fixes
	#62869

2004-08-12  JP Rosevear  <jpr@ximian.com>

	* gui/dialogs/calendar-setup.glade: make the button say Add Task
	List instead of Add Group (matches menu item)

2004-08-12  Carlos Garnacho Parro  <carlosg@gnome.org>

	* gui/dialogs/alarm-dialog.glade: added the property
	"use_filechooser" to the GnomeFileEntry

2004-08-10  Not Zed  <NotZed@Ximian.com>

	* gui/e-pub-utils.c (e_pub_publish): 
	* common/authentication.c (auth_func_cb): epasswords api change.

2004-08-11  JP Rosevear  <jpr@ximian.com>

	Fixes #61555
	
	* gui/dialogs/meeting-page.c (existing_attendee): check if an
	attendee was pre-existing
	(remove_attendee): only add the attendee to the cancel comp if it
	was pre-existing

2004-08-10  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-cal-model.c (e_cal_model_set_search_query): guard against
	re-running the same query.

2004-08-10  Rodrigo Moya <rodrigo@novell.com>

	* gui/alarm-notify/alarm-queue.c (tray_icon_destroyed_cb): disconnect
	from signals also when using only the system tray. Fixes a crash when
	removing an event that had an alarm popup recently.

2004-08-09  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-calendar-view.c: re-added 'Make this occurrence movable' menu
	item, gone by mistake.
	(on_unrecur_appointment): new callback for the new menu item.

2004-08-06  JP Rosevear  <jpr@ximian.com>
 
	Fixes #62452
 	
	* gui/e-itip-control.c (find_my_address): take option to retrieve
	current status as well, actually look for the delegator in the
	list so we can retrieve status there as well
	(show_current_event): use find_my_address to get the status so we
	properly handle not finding the address in the list of attendees
	(show_current): pass extra param
	(ok_clicked_cb): ditto

2004-08-06  JP Rosevear  <jpr@ximian.com>
 
	Fixes #62021
 	
	* gui/dialogs/event-page.c (source_changed_cb): set the default
	timezone
 
	* gui/e-itip-control.c (start_calendar_server): set the default
	timezone
 
	* gui/calendar-component.c (setup_create_ecal): set the default
	timezone, as the component view is not alive and hence has not set
	it

	* gui/tasks-component.c (setup_create_ecal): ditto

2004-08-05  Parthasarathi S A   <sparthasarathi@novell.com>

	Fix for bug #61673.
	* calendar/gui/dialogs/save_comp.c(save_component_dialog):
	  The function takes two arguments now, instead of one. The second
	  argument is the pointer to the ECalComponent from which the component
	  type can be determined. Based on the component type the corresponding
	  error message is displayed.
	* calendar/gui/dialogs/save_comp.h:
	  Function definition updated for save_component_dialog.
	* calendar/gui/dialogs/comp_editor.c(prompt_to_save_changes):
	  passing the ECalComponent pointer to the 'save_component_dialog' function
	* calendar/calendar-errors.xml: New error message string for task included
	* calendar/calendar-errors.xml.h

2004-08-05  Rodrigo Moya <rodrigo@novell.com>

	Fixes #62030

	* gui/alarm-notify/alarm-queue.c (tray_icon_destroyed_cb):
	only remove the tray icon blinking timeout if we installed
	it.
	(display_notification): only install the tray icon blinking
	timeout if using the system tray.
	(tray_icon_blink_cb): use g_object_unref instead of the
	deprecated gdk_pixbuf_unref.

	* gui/alarm-notify/alarm.c (alarm_add): added missing argument
	documentation.

2004-08-03  JP Rosevear  <jpr@novell.com>
 
	* gui/gnome-cal.c (gnome_calendar_destroy): clean up all the
 	default clients
 	(default_client_cal_opened_cb): change the if statement to a
 	switch to be consistent with the other code bits and set the
 	default client for the source type
 	(gnome_calendar_add_source): look at the default based on the
 	source type
 	(gnome_calendar_set_default_source): set the default for the
 	source type
 	(gnome_calendar_new_task): bail out if we have no ecal
 
	* gui/gnome-cal.c (set_timezone): set the timezone for all the
 	default clients
 
	* gui/calendar-component.c (update_primary_task_selection): look
	in the task source list, not the plain source list
	
2004-08-05  JP Rosevear  <jpr@novell.com>

	* gui/tasks-control.c (tasks_control_sensitize_commands): kill
 	warning by checking if there is a default client first (can happen
 	when first starting up)
	
2004-08-05  JP Rosevear  <jpr@novell.com>

	Fixes #62363
	
	* gui/calendar-component.c (create_new_event):
	commit the sequence

2004-08-04  Harish Krishnaswamy  <kharish@novell.com>

	* gui/e-itip-control.c: (ok_clicked_cb): Handle decline request by
	using update_item rather than remove_item, so the backend receives
	the notification and can handle it. Also, do not rsvp if the backend
	has the 'save_schedule' capability.

2004-08-01  JP Rosevear  <jpr@novell.com>
 
 	* conduits/todo/todo-conduit.c (todoconduit_load_configuration):
 	get source list and source
 	(todoconduit_dupe_configuration): copy source list and source
 	(todoconduit_destroy_configuration): unref source list and source
 	(start_calendar_server): open the source that was set earlier
 	(fill_widgets): set the source option menu value
 	(create_settings_window): pass source list to pilot settings
 	(save_settings): mark source with pilot-sync property

 	* conduits/calendar/calendar-conduit.c: as above
 	
 	* conduits/todo/Makefile.am: link to and include misc. widgets
 
 	* conduits/calendar/Makefile.am: ditto	
	
2004-07-30  Rodrigo Moya <rodrigo@novell.com>

	Fixes #57622

	* gui/e-cal-model.h: added ECalModelFlags enum type.

	* gui/e-cal-model.c (e_cal_model_set_flags, e_cal_model_get_flags):
	new functions.
	(e_cal_model_init): initialize the new internal field to keep the flags.
	(e_cal_view_objects_added_cb): expand recurrences if the model flags
	contain the EXPAND_RECUR bit.
	(e_cal_view_objects_modified_cb): if EXPAND_RECUR is on, remove all
	recurrences and regenerate them.
	(e_cal_view_objects_removed_cb): remove all instances for given UIDs.
	(add_new_client): killed warning.
	(get_dtstart): use the instance_start time when dealing with recurrences.

	* gui/e-cal-model-calendar.c (get_dtend): use the instance_end time
	when dealing with recurrences.

	* gui/e-cal-list-view.c (e_cal_list_view_new): set the EXPAND_RECUR
	flag on the model for the list view.

	* gui/e-week-view.c (e_week_view_add_event):
	* gui/e-day-view.c (e_day_view_add_event): fill in the instance's
	start and end times in the ECalModelComponent struct.

	* gui/e-calendar-view.c (e_calendar_view_delete_selected_occurrence):
	use the instance_start field to retrieve the RECUR-ID, now that all the
	views fill it in.

2004-07-29  JP Rosevear  <jpr@novell.com>
 
 	* gui/e-calendar-view.c: creating new items no longer needs to be
 	disabled since the user can switch to a writable calendar and the
 	editor ui is disabled properly
	
2004-07-31  JP Rosevear  <jpr@novell.com>
 
 	* gui/dialogs/event-editor.c (show_meeting): use Invitations not
 	Meetings
 	(event_editor_edit_comp): ditto
	
2004-07-31  JP Rosevear  <jpr@novell.com>

	* gui/e-day-view.c (e_day_view_finish_long_event_resize): guard
	with is_instance instead of has_recurrences because most of the
	backends don't support this yet
	(e_day_view_finish_resize): ditto
	(e_day_view_change_event_time): ditto
	(e_day_view_on_editing_stopped): ditto
	(e_day_view_on_top_canvas_drag_data_received): ditto
	(e_day_view_on_main_canvas_drag_data_received): ditto

	* gui/e-week-view.c (e_week_view_change_event_time): ditto
	(e_week_view_on_editing_stopped): ditto
	
2004-07-30  Harish Krishnaswamy  <kharish@novell.com>
	
	* gui/e-tasks.c: (client_cal_opened_cb),
	(default_client_cal_opened_cb):
	* gui/gnome-cal.c: (client_cal_opened_cb),
	(default_client_cal_opened_cb):
	Handle E_CALENDAR_STATUS_BUSY conditions and do not 
	remove the source from the gnome-calendar. The fix
	for #59335 exposed this problem.

2004-07-28  Larry Ewing  <lewing@novell.com>

	* gui/dialogs/calendar-setup.c (dialog_hide_unused_options): hide
	dialog items that don't apply when editing properties.
	(general_update_dialog): check to make sure we have a source
	before checking its state.

2004-07-27  JP Rosevear  <jpr@novell.com>

	Fixes #62006
	
	* gui/e-cal-model.c (add_new_client): don't load the events if we
	are already doing the query

2004-07-25  JP Rosevear  <jpr@ximian.com>
 
 	Fixes #61058
 	
 	* gui/e-week-view.c (process_component_recur_cb): add but don't
 	prepend
 	(process_component): use above as call back so we can pass the
 	prepend bool
 	(e_week_view_add_event): take a prepend bool and prepend to the
 	events array if asked so the event will be shown first when drawn
 	(e_week_view_do_key_press): If the event can't be fit on the
 	screen, ie not even one event can be shown in the day, don't try
 	to edit it
	
2004-07-26  Rodney Dawes  <dobey@novell.com>

	* gui/dialogs/event-page.glade: Fix mnemonic for "Location" to not
	be duplicated with "OK"

	* gui/dialogs/meeting-page.c (get_widgets): Get the "Attendees" label
	(meeting_page_construct): Fix padding of GtkScrolledWindow widget
	Set the mnemonic widget for the "Attendees" label

	* gui/dialogs/meeting-page.glade: Fix HIG spacing to be correct
	Fix the mnemonic for "Organizer" to not conflict
	Add mnemonic for "Attendees"

	* gui/dialogs/task-page.glade: Add mnemonic for "Description"

2004-07-26  JP Rosevear  <jpr@novell.com>
 
 	* gui/dialogs/calendar-setup.c (calendar_setup_edit_calendar): set
 	a different title if we are editing; de-sensitize option menu if
 	we are editing
 	(calendar_setup_edit_task_list): set a different title if we are editing
 
 	* gui/dialogs/calendar-setup.glade: use task list instead of tasks
 	group
 
 	* gui/tasks-component.c (impl__get_userCreatableItems): add
 	assigned task as an item, use task list instead of tasks group
 
 	* gui/calendar--component.c (impl__get_userCreatableItems): fiddle
 	with shortcuts
	
2004-07-25 pchenthill <pchenthill@novell.com>

	Fixes #59983
	If the ecal component is already loaded, check for the participation 
	status of the attendee and display the menu for selecting the 
	calendar.

2004-07-23  JP Rosevear  <jpr@ximian.com>
 
 	Fixes #61571
 	
 	* gui/e-week-view.c (e_week_view_start_editing_event): if the
 	event moves, find it again using the model data as the invariant
 	and then find the span again
	
2004-07-23  JP Rosevear  <jpr@novell.com>
 
 	Fixes #61760
 	
 	* gui/e-cal-model.c (add_new_client): don't check against the URI,
 	just against the client
 
2004-07-23 pchenthill <pchenthill@novell.com>

	* Retracting the commit made below for #59983 as it has
	results in crash some cases

2004-07-23 pchenthill <pchenthill@novell.com>

        Fixes #59983
        * gui/e-itip-control.c (show_current_event):
        If the ecal component is already loaded, check for the participation
        status of the attendee and display the menu for selecting the
        calendar.

2004-07-22  Larry Ewing  <lewing@ximian.com>

	* gui/e-meeting-time-sel.c (e_meeting_time_selector_style_set):
	fix the row heights and tweek the offsets so that things come out
	OK.

2004-07-21  JP Rosevear  <jpr@novell.com>
 
  	Fixes #61776
		
 	* gui/e-calendar-table.c (clipboard_get_text_cb): make sure the
 	text is not NULL
	
2004-07-21  JP Rosevear  <jpr@novell.com>

	Fixes #61738
	
	* gui/dialogs/meeting-page.c (clear_widgets): by default we have a
	user as organizer
	(sensitize_widgets): use user_org to determine widget sensitivity
	(meeting_page_fill_widgets): set user_org value appropriately
	(change_clicked_cb): set user_org to TRUE

2004-07-21  JP Rosevear  <jpr@novell.com>

	Fixes #61779
	
	* gui/dialogs/task-page.c (init_widgets): listen for changes on
	start and due dates

	* gui/dialogs/task-details-page.c (init_widgets): listen for
	changes on completion date

2004-07-20  Not Zed  <NotZed@Ximian.com>

	* gui/e-cal-model.c: 
	* importers/icalendar-importer.c: 
	* gui/dialogs/select-source-dialog.c: 
	* gui/dialogs/copy-source-dialog.c: 
	* gui/alarm-notify/util.c: 
	* common/authentication.c: 
	* gui/migration.c: include config.h.  See #61395.

2004-07-16  JP Rosevear  <jpr@novell.com>

	Fixes #61451

	* gui/e-itip-control.c (get_cancel_options): don't give a cancel
	option if the event is no where to be found
	(show_current_event): pass in kind
	(show_current_todo): ditto

2004-07-16  Larry Ewing  <lewing@ximian.com>

	* gui/e-meeting-time-sel.c (e_meeting_time_selector_style_set):
	fix the row heights and tweek the offsets so that things come out
	OK.

2004-07-16  Larry Ewing  <lewing@ximian.com>

	* gui/calendar-component.c (set_info): use short month forms to
	limit the maximum width of the label.

2004-07-15  Rodrigo Moya <rodrigo@novell.com>

	Fixes #57142

	* gui/e-day-view.c (e_day_view_on_editing_stopped): commit the
	sequence on the object before sending it to the backend.
	(e_day_view_add_event): s/abort_sequence/commit_sequence.

	* gui/e-week-view.c (e_week_view_on_editing_stopped): commit the
	sequence here also.
	(e_week_view_add_event): s/abort_sequence/commit_sequence.

	* gui/comp-util.c (cal_comp_event_new_with_current_time): don't
	commit the sequence here.

2004-07-14  JP Rosevear  <jpr@novell.com>
 
 	Fixes #61572
 	
 	* gui/dialogs/schedule-page.c (times_changed_cb): call notify
 	changed
 
 	* gui/dialogs/comp-editor.c (page_summary_changed_cb): no need to
 	mark the editor changed here, it doesn't do the right thing anyhow
 	(page_dates_changed_cb): ditto
 	
2004-07-14  JP Rosevear  <jpr@novell.com>

	Fixes #60678
	
	* gui/dialogs/cancel-comp.c (cancel_component_dialog): flip the
	messages around, the "deleting" flag means something else is doing
	the deleting

2004-07-12  JP Rosevear  <jpr@novell.com>
 
 	Fixes #57287, 58748
 	
	* gui/tasks-component.c (source_added_cb): if the source was
 	added in the main calendar, select it because the user caused this
 	to happen by creating a task
 	(create_component_view): listen for source_added signal on the
 	tasks
 
 	* gui/gnome-cal.c (view_selection_changed_cb): if the user created
 	a task, make sure we are displaying the relevant event list
 	(set_timezone): set the default zone of the default client
 	(setup_widgets): listen for the user_created signal
 	(gnome_calendar_destroy): clean up default client
 	(client_cal_opened_cb): disconnect from the open signal
 	(default_client_cal_opened_cb): set the default client on the
 	models
 	(open_ecal): make the callback function a param
 	(gnome_calendar_add_source): include the default client when
 	searching for an existing client
 	(gnome_calendar_set_default_source): make the default client
 	independent of the rest of the clients
 
 	* gui/e-week-view.c (e_week_view_on_editing_stopped): emit
 	user_created signal
 
 	* gui/e-tasks.c (user_created_cb): if the user created a task,
 	make sure we are displaying the relevant task list
 	(set_timezone): set the timezone on the client
 	(setup_widgets): listen for user_created signal
 	(e_tasks_destroy): unref default client
 	(default_client_cal_opened_cb): set the default on the model when
 	it opens
 	(open_ecal): open a task list
 	(e_tasks_add_todo_source): include the default client when
 	searching for an existing client
 	(e_tasks_set_default_source): make the default client independent
 	of the rest of the clients
 
 	* gui/e-day-view.c (e_day_view_on_editing_stopped): emit
 	user_created signal
 
 	* gui/e-calendar-view.h: add signal proto
 
 	* gui/e-calendar-view.c (e_calendar_view_class_init): add
 	user_created signal
 
 	* gui/e-calendar-table.h: add signal proto
 
 	* gui/e-calendar-table.c (e_calendar_table_class_init): add
 	user_created signal
 	(row_appended_cb): if row is appended, emit user_created signal
 	(e_calendar_table_init): listen for row_appended signal
 
 	* gui/e-cal-model.h: add signal proto
 
 	* gui/e-cal-model.c (e_cal_model_class_init): add row_appended
	signal
 	(ecm_append_row): don't leak, emit row appended signal
 	(e_cal_model_set_default_client): remove the existing default if
 	it was only used as the default
 	(update_e_cal_view_for_client): short circuit query create
 	(add_new_client): look for an existing client and update its
 	record if found, handle opening things here
 	(e_cal_model_add_client): just call add_new_client
 	(remove_client_objects): just remove a client's objects
 	(remove_client): use above, handle removal of client if its
 	default
 
 	* gui/calendar-component.c (source_added_cb): if the source was
 	added in the main calendar, select it because the user caused this
 	to happen by creating an appointment
 	(create_component_view): listen for source_added signal on the
 	calendar
	
2004-07-08  Radek Doulik  <rodo@ximian.com>

	* gui/e-cal-model.c (e_cal_model_date_value_to_string): as below

	* gui/e-cal-model-calendar.c (ecmc_value_to_string): as below

	* gui/e-cal-model.c (ecm_value_to_string): as below

	* gui/e-cal-model-tasks.c (ecmt_value_to_string): dup the string
	value, it's free-ed later. instead of returning NULL return
	g_strdup ("") as gal does

	Fixes #56271

2004-07-12  Rodney Dawes  <dobey#novell.com>

	* gui/e-tasks.c (pane_realized): Add this callback so we can set the
	paned position on realize
	(setup_widgets): Move the paned widget to the priv structure so that
	we can access it elsewhere
	(display_view_cb): Set the paned position when the view gets displayed

	Fixes #55653

2004-07-12  Rodney Dawes  <dobey@novell.com>

	* gui/dialogs/recur-comp.c (recur_component_dialog):
	Update the layout of the dialog to be more usable

	Partially fixes #56171

2004-07-11  J√Éºrg Billeter <j@bitron.ch>

	* gui/dialogs/event-page.c (event_page_fill_component):
	busy should be opaque, not transparent

2004-07-09  Rodrigo Moya <rodrigo@novell.com>

	Revert my patches from July 5th and 6th.

	* gui/gnome-cal.c (gnome_calendar_init): call setup_config/widgets
	in the previous order.
	(setup_widgets): set the timezone on the views when creating them.
	(set_timezone): no need to set the timezone on the views here.
	(client_cal_opened_cb): removed call to set_timezone().

2004-07-09  Rodney Dawes  <dobey@novell.com>

	* gui/e-day-view-top-item.c (e_day_view_top_item_draw_triangle):
	Add an argument for the event_num so we can get the event object
	Draw the left/right triangles with the right color for the event
	Fix a small alignment bug with the triangle points

	* gui/e-week-view-event-item.c (e_week_view_event_item_draw_triangle):
	Draw the left/right triangles with the right color for the event
	Fix a small alignment bug with the triangle points

2004-07-09  Rodrigo Moya <rodrigo@novell.com>

	Fixes #60289

	* gui/dialogs/select-source-dialog.c (select_source_dialog): set the
	absolute URI on the selected source, so that the ESource we keep
	around has a valid URI.

	* gui/e-calendar-view.c (transfer_item_to): when copying appointments,
	change the UID.
	(transfer_selected_items): don't pass hardcoded values to transfer_item_to.

2004-07-08  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* gui/Makefile.am:
	tarball should ship .schemas.in.in files, not generated files.

2004-07-06  Rodrigo Moya <rodrigo@novell.com>

	* gui/gnome-cal.c (gnome_calendar_init): setup the widgets before
	the configuration.

2004-07-06  JP Rosevear  <jpr@novell.com>

	Fixes #60645
	
	* gui/e-calendar-view.c (e_calendar_view_new_appointment_full):
	guess when an item should be all day based on the selection time

2004-07-05  Rodrigo Moya <rodrigo@novell.com>

	* gui/gnome-cal.c (setup_widgets): don't set the timezone on the views
	here.
	(set_timezone): do it here.
	(client_cal_opened_cb): call set_timezone() here.

2004-07-02  Rodrigo Moya <rodrigo@novell.com>

	* gui/gnome-cal.c (set_view): update the internal current_view_type
	field and focus the newly selected view.

2004-07-02  Rodney Dawes  <dobey@novell.com>

	* gui/dialogs/url-editor-dialog.c (get_widgets):
	Get the label for the calendar list header also
	(init_widgets): Set the border widths for the dialog's vbox and
	action area to be more compliant with the HIG
	Set the mnemonic widget for the calendar label, to the Source Selector
	Remove the unneeded settings for the scrolled window, these are in the
	glade xml for the widget
	Set the icon list on the correct dialog widget, not the settings dialog

	* gui/dialogs/url-editor-dialog.h:
	Add the calendar_list_label widget here so we can access it

	* gui/dialogs/url-editor-dialog.glade:
	Change the dialog's layout to be HIG compliant and fix some strings
	to do the same
	Add mnemonics to all the labels that are associated with widgets

2004-06-29  Sivaiah Nallagatla <snallagatla@novell.com>

        * gui/e-tasks.c (e_tasks_add_todo_source)
         (e_tasks_remove_todo_source) : store and lookup  clients
        based on ESource uid instead of uri in priv->clients

2004-06-28  Not Zed  <NotZed@Ximian.com>

	* gui/tasks-component.c (impl__get_userCreatableItems): same.

	* gui/calendar-component.c (impl__get_userCreatableItems): fix up
	shortcuts.  #56746.

2004-06-25  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/alarm-dialog.glade: don't show option tabs

2004-06-25  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/task-editor.c (task_editor_construct): use "Task"
	instead of "Basic"

	* gui/dialogs/event-editor.c (event_editor_construct): use
	"Invitations" instead of "Meeting"

2004-06-25  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/e-delegate-dialog.glade: use "Contacts..."

	* gui/dialogs/alarm-dialog.glade: add custom message email toggle

	* gui/dialogs/alarm-dialog.c (get_widgets): get custom email
	message toggle
	(check_custom_email): check the custom message when setting
	sensitivity of OK button
	(malarm_message_toggled_cb): check custom email
	(malarm_description_changed_cb): ditto
	(action_selection_done_cb): ditto

2004-06-25  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/alarm-dialog.c (alarm_to_dialog): set the default
	address here if possible
	(dialog_to_alarm): don't set it here
	(check_custom_email): check for To: entries
	(malarm_addresses_changed_cb): update when the text in the to
	entry changes
	(action_selection_done_cb): for the custom email settings
	(init_widgets): listen for email To: changes
	(alarm_dialog_run): only save the alarm if the response was "OK"

2004-06-25  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/event-page.c (event_page_init): init alarm interval
	to -1
	(clear_widgets): give the alarm time option menu a sensible
	default
	(is_custom_alarm): account for the user defined alarm time if it
	doesn't match the default set
	(event_page_fill_widgets): default the option menu to the 15
	minute or user define alarm if no alarm is currently set
	(event_page_fill_component): account for the user defined alarm
	tme
	(init_widgets): add in the user defined alarm time if it doesn't
	match the default set

2004-06-25  JP Rosevaer  <jpr@novell.com>

	* gui/dialogs/alarm-dialog.c (palarm_widgets_to_alarm): the args
	are optional, don't store them if they aren't there
	(check_custom_sound): sensitize the ok button based on whether or
	not there needs to be input
	(check_custom_message): ditto
	(check_custom_program): ditto
	(dalarm_message_toggled_cb): check custom message
	(dalarm_description_changed_cb): ditto
	(aalarm_sound_toggled_cb): check custom sound
	(aalarm_attach_changed_cb): ditto
	(palarm_program_changed_cb): check custom program
	(action_selection_done_cb): use above checks as appropriate
	(init_widgets): listen for changed signals

2004-06-25  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/event-page.c (event_page_finalize): free old_summary
	(is_custom_alarm): take description into account when checking for
	custom alarm
	(is_custom_alarm_uid_list): pass old_summary
	(is_custom_alarm_store): ditto
	(is_custom_alarm_store): ditto
	(sensitize_widgets): ditto
	(event_page_fill_component): ditto
	(event_page_fill_widgets): store the initial summary
	(alarm_changed_cb): make sure the needs description property gets
	set on the default alarm
	(alarm_custom_clicked_cb): copy the current store in case the user
	hits cancel, if all the alarms are erased uncheck the alarm toggle

	* gui/dialogs/alarm-dialog.glade: add toggles for custom messages
	and sound

	* gui/dialogs/alarm-dialog.c (aalarm_widgets_to_alarm): store
	custom sound only if the toggle is checked
	(dalarm_widgets_to_alarm): store custom message only if toggle is
	checked
	(get_widgets): load new widgets
	(aalarm_sound_toggled_cb): sensitize sound entry
	(dalarm_message_toggled_cb): sensitize message entry
	(init_widgets): listen for toggle signals

2004-06-24  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/alarm-list-dialog.c (selection_changed_cb):
	sensitize the buttons
	(init_widgets): listen for selection changes so we can delete
	alarms

2004-06-24  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/event-page.c (event_page_fill_component): store all
	the custom alarms
	(alarm_custom_clicked_cb): emit changed signal if necessary

	* gui/dialogs/alarm-list-dialog.c (alarm_list_dialog_run): return
	true/false based on button pushed

	* gui/dialogs/alarm-dialog.c: move repeat options and per alarm
	type options here

	* gui/dialogs/alarm-dialog.glade: ditto
	
	* gui/dialogs/Makefile.am: remove alarm options dialog

2004-06-24  Rodney Dawes  <dobey@novell.com>

	* gui/calendar-component.c (create_component_view):
	* gui/tasks-component.c (create_component_view):
	Add a call to e_source_selector_set_select_new here so that we can
	select new sources when we create them

2004-06-23  Jeffrey Stedfast  <fejj@novell.com>

	* conduits/todo/todo-conduit.c: Bump the version to 0.1.5 to help
	track down bug #59726.

2004-06-23  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/comp-editor.c (comp_editor_init): set the window
	type hint to normal so it can go below the shell window

2004-06-23  Rodrigo Moya <rodrigo@novell.com>

	* gui/dialogs/comp-editor.c (comp_editor_notify_client_changed):
	fixed gtk-doc comments and made it enable/disable the dialog's
	OK button depending on the selected source.

2004-06-23  Rodney Dawes  <dobey@novell.com>

	* gui/calendar-component.c: Revert previous change to add the
	callbacks for notification of calendar selection changes
	(create_new_view): Update the comment for watching notification on
	the tasks selection to state it is for the mini tasks view

2004-06-23 JP Rosevear  <jpr@novell.com>

	Fixes #57862
	
	* gui/gnome-cal.c (connect_day_view_focus): connect after the
	focus events happen so the day view knows what is selected

2004-06-23  JP Rosevear  <jpr@novell.com>

	* gui/e-itip-control.c (update_attendee_status): tidy up to work
	again
	(ok_clicked_cb): use above when replying

2004-06-23  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/meeting-page.c (remove_attendee): util function to
	do the actual removal
	(remove_attendee_at_row): ditto based on row number
	(remove_clicked_cb): make the remove button work
	(popup_delete_cb): use utility routines to do removal
	(button_press_event): do the icon properly

2004-06-22  Rodney Dawes  <dobey@novell.com>

	* gui/calendar-component.c (config_calendars_selection_changed_cb):
	(config_primary_calendar_selection_changed_cb):
	Add these two callbacks so that we can update the selection in the
	calendar when the gconf key changes, like we do for tasks

	(create_component_view): Register the two callbacks that we created
	for updating the selection in the view, and their notification IDs


2004-06-22  JP Rosevear  <jpr@novell.com>

	* gui/e-meeting-time-sel.c (e_meeting_time_selector_construct):
	clean up mnemonic handling and put the proper icon in the contacts
	button

2004-06-22  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/recurrence-page.glade: fix mnemonics

	* gui/dialogs/event-page.glade: ditto

2004-06-22  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/comp-editor.c: kill warnings

2004-06-22  JP Rosevear  <jpr@novell.com>

	* gui/calendar-component.c (create_new_event): kill warning

2004-06-22  Rodrigo Moya <rodrigo@novell.com>

	* gui/dialogs/Makefile.am: removed alarm-page.*.

2004-06-22  JP Rosevear  <jpr@novell.com>

	 * gui/dialogs/Makefile.am, gui/dialogs/alarm-dialog.c,
	 gui/dialogs/alarm-dialog.glade, gui/dialogs/alarm-dialog.h,
	 gui/dialogs/alarm-list-dialog.c,
	 gui/dialogs/alarm-list-dialog.glade,
	 gui/dialogs/alarm-list-dialog.h, gui/dialogs/alarm-options.c,
	 gui/dialogs/alarm-options.h, gui/dialogs/alarm-page.c,
	 gui/dialogs/alarm-page.glade, gui/dialogs/alarm-page.h,
	 gui/dialogs/comp-editor.c, gui/dialogs/comp-editor.h,
	 gui/dialogs/event-editor.c, gui/dialogs/event-page.c,
	 gui/dialogs/event-page.glade, gui/dialogs/meeting-page.c,
	 gui/dialogs/meeting-page.glade, gui/dialogs/recurrence-page.c,
	 gui/dialogs/recurrence-page.glade,
	 gui/dialogs/task-details-page.c,
	 gui/dialogs/task-details-page.glade, gui/dialogs/task-editor.c,
	 gui/dialogs/task-page.c, gui/dialogs/task-page.glade: HIGify and
	 newer design; alarm page is gone, Cancel/OK buttons for the
	 dialog, no more menus; slightly improve read-only workings for
	 entry areas
	
2004-06-22  JP Rosevear  <jpr@novell.com>

	* gui/e-meeting-time-sel.c (e_meeting_time_selector_construct):
	rename widgets to be consistent with those else where
	(e_meeting_time_selector_set_read_only): cast properly
	(e_meeting_time_selector_on_invite_others_button_expose): remove,
	the widget sensitization is taken care of elsewhere

2004-06-22  Larry Ewing  <lewing@ximian.com>

	Fixes #59824
	
	* gui/e-week-view.h: increase some of the passing so that the text
	does not appear to run together.  Ideally this would be based on
	the font size but this will work for now.

2004-06-21  Rodney Dawes  <dobey@novell.com>

	Fixes #56892

	* gui/dialogs/select-source-dialog.c (row_activated_cb): Add this
	callback to activate the OK button when we double-click or press
	the Enter key on a row
	(select_source_dialog): Change the default size to be reasonable
	Use ensure_style instead of realize on the dialog
	Set the default response for the dialog to OK
	Fix the packing of the group label to not have extraneous padding
	Connect up the callback for row_activated

2004-06-18  Jeffrey Stedfast  <fejj@novell.com>

	Fixes bug #57592

	* conduits/calendar/calendar-conduit.c (pre_sync): Same as below.

	* conduits/todo/todo-conduit.c (pre_sync):
	s/wombat/evolution-data-server/g

2004-06-18  Rodrigo Moya <rodrigo@novell.com>

	Fixes #58747

	* gui/dialogs/comp-editor.c (prompt_to_save_changes): if the source
	is read only, don't prompt the user.

2004-06-18  Rodrigo Moya <rodrigo@novell.com>

	Fixes #56323

	* gui/calendar-component.c (create_new_event): removed read-only
	check, just call the editor with the currently selected client and
	let it do the job.

	* gui/tasks-component.c (create_new_todo): ditto.

2004-06-18  Rodrigo Moya <rodrigo@novell.com>

	Fixes #60293

	* gui/dialogs/recurrence-page.c (type_toggled_cb): make sure
	we enable/disable correctly the 'Add' button.

2004-06-17 Sivaiah Nallagatla <snallagatla@novell.com>

        * gui/itip-utils.c (itip_publish_comp) : check for
        host being non-NULL in soup uri. host can be null
        for uri's of the form file:/foo or http:/foo etc

2004-06-17  Rodrigo Moya <rodrigo@novell.com>

	Fixes #60309

	* gui/meeting-page.c (sensitize_widgets): moved up in the file, to
	be declared before any use.

2004-06-16  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-itip-control.c: use e-util's HTML conversion function,
	instead of camel's.
	(write_html): use e_text_to_html_full().

2004-06-15  JP Rosevear  <jpr@novell.com>

	Fixes #56197
	
	* gui/e-cal-list-view.etspec: add back categories

	* gui/e-calendar-table.etspec: ditto
	
2004-06-15  JP Rosevear  <jpr@novell.com>

	Fixes #59401
	
	* gui/e-week-view.c (e_week_view_on_text_item_event): if we are
	editing the event, don't ignore the right click, stop editing the
	event and continue on

2004-06-15  JP Rosevear  <jpr@novell.com>

	Fixes #57393
	
	* gui/e-week-view.c (e_week_view_set_compress_weekend): redraw the
	titles as well since the spacing is different

2004-06-15  Rodrigo Moya <rodrigo@novell.com>

	* gui/dialogs/meeting-page.c (meeting_page_construct): connect
	to "client_changed" signal on the page.
	(client_changed_cb): new callback.
	(sensitize_widgets): new function.
	(meeting_page_fill_widgets): call sensitize_widgets().

	* gui/e-meeting-time-sel.[ch]
	(e_meeting_time_selector_set_read_only): new function.
	(e_meeting_time_selector_construct): store some missing buttons
	in the EMeetingTimeSelector structure.

	* gui/dialogs/schedule-page.c (schedule_page_construct):
	connect to "client_changed" signal on the page.
	(client_changed_cb): new callback.
	(sensitize_widgets): new function.
	(schedule_page_fill_widgets): call sensitize_widgets().

2004-06-10  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-cal-model.c (e_cal_view_objects_modified_cb): removed
	g_assert call, since we shouldn't crash when getting wrong
	notifications from a backend.

2004-06-10  JP Rosevear  <jpr@novell.com>

	* gui/gnome-cal.c
	(gnome_calendar_on_date_navigator_selection_changed): only do the
	range selected hack in one case

2004-06-10  JP Rosevear  <jpr@novell.com>

	* gui/gnome-cal.c (setup_widgets): set 6 weeks shown
	(display_view): ditto

2004-06-10  Rodrigo Moya <rodrigo@novell.com>

	Fixes #58748

	* gui/gnome-cal.c (setup_widgets): set the timezone on all views
	when creating them.

2004-06-10  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-calendar-table.c (e_calendar_table_init): don't set
	the "bg_color_column" property on the ECellToggle class.

2004-06-10  Rodrigo Moya <rodrigo@novell.com>

	Fixes #58799

	* gui/e-calendar-view.c (e_calendar_view_delete_selected_occurrence):
	Use the timezone for getting the RECUR-ID from the instance start
	date if available. Also, use dates only as the recurrence ID, and
	do nothing if not a recurrent appointment.

2004-06-09  JP Rosevear  <jpr@novell.com>

	Fixes #59242, #57404, ##55394
	
	* gui/gnome-cal.c (get_times_for_views): calculate the work week,
	week, and month views more exactly
	(update_adjustment): update the view based on week view scrolling
	(setup_widgets): listen for the scroll bar moving on the week
	views
	(gnome_calendar_update_date_navigator): adjust for compressed
	weekends in the month view
	(gnome_calendar_on_date_navigator_selection_changed): ditto

	* gui/e-week-view.h: add protos

	* gui/e-week-view.c (time_range_changed_cb): calculate the
	base_date and first_day_shown more simply, allows multi-week
	selection to work better; update the base date when told to do so
	(e_week_view_init): init update_base_value var
	(e_week_view_get_update_base_date): accessor
	(e_week_view_set_update_base_date): ditto

2004-06-08  Rodrigo Moya <rodrigo@novell.com>

	Fixes #57578

	* gui/e-calendar-view.c (on_move_to, on_copy_to): simplified to
	just call transfer_selected_items() with the approppriate
	arguments.
	(transfer_selected_items): new function to transfer all selected
	items to another calendar.
	(transfer_item_to): added missing implementation.

2004-06-08  Rodrigo Moya <rodrigo@novell.com>

	Fixes #57579

	* gui/dialogs/select-source-dialog.c (select_source_dialog): start
	with the OK button disabled.
	(primary_selection_changed_cb): enable/disable the OK button depending
	on the selection on the ESourceSelector.

2004-06-08  Rodrigo Moya <rodrigo@novell.com>

	* gui/dialogs/comp-editor.[ch] (comp_editor_notify_client_changed):
	new function for notifying all pages of the client change.
	(page_client_changed_cb): no need for this callback.
	(comp_editor_append_page): no need to connect to "client_changed"
	signal on the pages.

	* gui/dialogs/comp-editor-page.c
	(comp_editor_page_notify_client_changed): re-added the call to
	comp_editor_page_set_e_cal(), the client was not being set anywhere.

	* gui/dialogs/event-page.c (source_changed_cb): use
	comp_editor_notify_client_changed() so that all pages get informed
	of the client change.

	* gui/dialogs/task-page.c (source_changed_cb): ditto.

2004-06-08  Rodrigo Moya <rodrigo@novell.com>

	* gui/dialogs/comp-editor-page.c
	(comp_editor_page_notify_client_changed): do not set the private
	client here, it is set in comp-editor.c.

	* gui/dialogs/event-page.c (sensitize_widgets): new function.
	(source_changed_cb): call sensitize_buttons().

	* gui/dialogs/recurrence-page.c (sensitize_buttons): new
	function, to deal correctly with the sensitivity of all widgets
	in the page.
	(recurrence_page_fill_widgets, type_toggled_cb, client_changed_cb):
	call sensitize_buttons() instead of sensitize_recur_widgets().
	(recurrence_page_construct): g_signal_connect_after for
	"client_changed", to get notifications after CompEditorPage
	gets his.

	* gui/dialogs/alarm-page.c (sensitize_buttons): sensitize the missing
	widgets in the page.
	(alarm_page_construct): g_signal_connect_after for "client_changed",
	to get notifications after CompEditorPage gets his.

2004-06-08  JP Rosevear  <jpr@novell.com>

	* gui/e-week-view.c (e_week_view_do_key_press): cast week view
	correctly

2004-06-08  Rodrigo Moya <rodrigo@novell.com>

	* gui/dialogs/recurrence-page.c (recurrence_page_construct): connect
	to "client_changed" signal on the page.
	(client_changed_cb): new callback.

	* gui/dialogs/alarm-page.c (sensitize_buttons): fixed missing stuff
	in last commit.

2004-06-08  Rodrigo Moya <rodrigo@novell.com>

	Fixes #59650

	* gui/dialogs/alarm-page.c (alarm_page_construct): connect to
	"client_changed" signal on the page.
	(client_changed_cb): new callback.
	(sensitize_buttons): added code for dealing with read only calendars
	and disable/enable buttons approppriately.

2004-06-07  Dan Winship  <danw@novell.com>

	* gui/dialogs/comp-editor.c (pixmaps): s/stock_save_as/stock_save-as/

2004-06-07  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-tasks.c (e_tasks_add_todo_source): open task lists
	asynchronously.
	(client_cal_opened_cb): callback from the client when opened.

	* gui/gnome-cal.c (client_cal_opened_cb): disconnect from all
	signals of the client when opening it fails. Clean up the status
	messages correctly, based on source type.
	(open_ecal): for tasks, use e_calendar_table_set_status_message
	not e_calendar_view_set_status_message.
	(gnome_calendar_remove_source_by_uid): call update_query only when
	removing calendars, not tasks lists.
	(update_query): set meaningful status messages.

2004-06-06 Vardhman Jain <vardhman@students.iiit.net>

	* Bug #36247
	* gui/e-itip-control.c (write_html, set_date_label):
	Changes to improve the performance of _(str) function call on strings
	str of the type <tar>str</tag> to avoid translation of tag.

2004-06-04    <jpr@novell.com>

	* gui/gnome-cal.c: define G_MAXINT32 if it isn't already

2004-06-04  JP Rosevear  <jpr@novell.com>

	Fixes #58739
	
	* gui/migration.c (migrate_calendars): guard against NULL
	gconf_val

2004-06-04  JP Rosevear  <jpr@novell.com>

	Fixes #59058
	
	* gui/gnome-cal.c (gnome_calendar_purge): make purging actually
	work

2004-06-04  JP Rosevear  <jpr@novell.com>

	* gui/dialogs/task-page.c (task_page_fill_widgets): guard
	against the text value being NULL

	* gui/dialogs/event-page.c (event_page_fill_widgets): add guards
	here as well
	
2004-06-03  Jeffrey Stedfast  <fejj@novell.com>

	* conduits/calendar/calendar-conduit.c
	(calconduit_load_configuration): If the last_uri string value is
	the Evolution 1.4 URI, change it to the new URI. Fixes bug #54134.

2004-06-03  Rodrigo Moya <rodrigo@novell.com>

	Fixes #59481
	
	* gui/e-tasks.c (set_status_message): don't use vsprintf with
	NULL strings, crashes on FreeBSD.

2004-06-03  Rodrigo Moya <rodrigo@novell.com>

	* gui/dialogs/comp-editor-page.c
	(comp_editor_page_notify_client_changed): update the internal client
	when it changes.

2004-06-03  Rodrigo Moya <rodrigo@novell.com>

	Fixes #56875

	* gui/dialogs/event-editor.c (event_editor_construct): connect to
	"client_changed" signal on the EventPage.
	(client_changed_cb): set menu sensibility when the client changes.

	* gui/dialogs/task-editor.c (task_editor_construct): connect to
	"client_changed signal on the TaskPage.
	(client_changed_cb): set menu sensibility when the client changes.

2004-06-02  JP Rosevear  <jpr@novell.com>
	
	* gui/alarm-notify/alarm-notify.c (process_removal_in_hash): free
	the correct uri, preventing bad memory corruption
	(list_changed_cb): track the removals in a list so we don't
	clobber the hash table data during the foreach loop

2004-06-02  Chris Toshok  <toshok@ximian.com>

	* gui/migration.c (migrate_calendars): remove absolute_uri from
	ESource's.
	(migrate_tasks): same.

2004-06-02  Rodrigo Moya <rodrigo@novell.com>

	* gui/e-meeting-list-view.c (start_addressbook_server): removed
	pre-completion code, not needed anymore.
	(emlv_finalize): no need to unref the book anymore.
	(emlv_init): don't call start_addressbook_server.

	* gui/dialogs/copy-source-dialog.c (copy_source): fixed
	leak and pass the correct icalcomponent to e_cal_modify_object.

2004-06-02  Rodrigo Moya <rodrigo@novell.com>

	Fixes #59333

	* gui/dialogs/task-page.c (task_page_fill_widgets): guard against
	list items being NULL.

2004-06-02  Larry Ewing  <lewing@ximian.com>

	* gui/e-tasks.c (table_drag_data_delete): add a drag delete handler.
	(table_drag_data_get): support text/vcard drags.
	(setup_widgets): setup the etable as a drag source.

	* gui/tasks-component.c: add source selector Drag & Drop handlers.

2004-06-01  Larry Ewing  <lewing@ximian.com>

	* gui/dialogs/calendar-setup.c: rename can_add to is_mutable, add
	sensitivity logic for both readonly and mutable cases.  The
	esource attributes are a complete mess and need discussion.

	* gui/dialogs/calendar-setup.glade: remove edit dialogs and name
	the tables.


2004-06-01  Rodrigo Moya <rodrigo@novell.com>

	Fixes #59369

	* gui/e-calendar-view.c (clipboard_get_text_cb): don't pass NULL strings
	to libical functions.

2004-05-31  Priyanshu Raj <Priyanshu@students.iiit.net>

	* Bug #51968 "Invite others.." button confusing in Appointment
	editor dialog(Fixed)"

2004-05-29  Priyanshu Raj <priyanshu@students.iiit.net>

	* Bug #48134: Menu items in Scheduling tab should have sentence
	capitalization (Fixed)
	
2004-05-28  Kidd Wang  <kidd.wang@sun.com>

	* gui/e-week-view.c: (e_week_view_event_move),
	(e_week_view_get_day_offset_of_event): a more straightforward way
	to calculate the offset of a day within the week.

2004-05-26  Jeffrey Stedfast  <fejj@novell.com>

	Fix for bug #57818.

	* gui/e-tasks.c (setup_widgets): Same.

	* gui/gnome-cal.c (setup_widgets): Updated to pass a set of
	bitflags to cal_search_bar_new().

	* gui/cal-search-bar.c (cal_search_bar_new): Now takes a bit flag
	argument specifying which search options to present.
	(cal_search_bar_construct): Same as above. Construct the search
	menu to use based on the bit flags.

	* gui/apps_evolution_calendar.schemas.in.in: Changed the default
	"Tasks due today" colour to be a light-blue (one of the default
	colour values in the colour picker dialog). Fixes bug #53412.

2004-05-26  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #57759

	* gui/gnome-cal.c (gnome_calendar_remove_source_by_uid): remove all
	queries we've got for the removed source.

2004-05-26  Kidd Wang  <kidd.wang@sun.com>

	* gui/e-week-view.c: (e_week_view_event_move),
	(e_week_view_get_day_offset_of_event): a more straightforward way
	to calculate the offset of a day within the week.

2004-05-26  Kidd Wang  <kidd.wang@sun.com>

	* gui/e-week-view.c: (e_week_view_event_move),
	(e_week_view_change_event_time): In week view all-day events should
	keep all-dayness when moved around.

2004-05-25  Larry Ewing  <lewing@ximian.com>

	* gui/dialogs/calendar-setup.c: remove now unused functions.
	(source_group_can_add): fix can add logic, remove more unused
	functions.

	* gui/dialogs/calendar-setup.c (calendar_setup_edit_task_list):
	use the new dialog.
	(calendar_setup_edit_calendar): use the new dialog.
	(key_press_event): look for escape press and destroy dialog.

2004-05-25  Jeffrey Stedfast  <fejj@novell.com>

	* gui/dialogs/url-editor-dialog.c (init_widgets): Use
	gtk_window_set_icon_list() here instead of gtk_window_set_icon().

	* gui/dialogs/select-source-dialog.c (select_source_dialog): Use
	gtk_window_set_icon_list() here instead of gtk_window_set_icon().

	* gui/dialogs/calendar-setup.c (source_to_dialog): Huh?? Why are
	integer colours in an array of char*? Fixed to be an array of
	guint32.

	* gui/dialogs/changed-comp.c (changed_component_dialog): Use
	gtk_window_set_icon_list() here instead of gtk_window_set_icon().

	* gui/dialogs/calendar-setup.c (calendar_setup_new_calendar):
	Don't bother calling tk_window_set_icon() if we are gonna call
	gtk_window_set_icon_list a few lines later.
	(calendar_setup_edit_calendar): Same.
	instead.
	(calendar_setup_new_task_list): Same.
	(calendar_setup_edit_task_list): Same.

	* gui/dialogs/alarm-options.c (alarm_options_dialog_run): Use
	gtk_window_set_icon_list() instead of gtk_window_set_icon() so gtk
	can do the Right Thing (tm).

2004-05-25  Jeffrey Stedfast  <fejj@novell.com>

	* Makefile.am: Make calendar-errors.xml.h and install the xml
	file.

	* calendar-errors.xml: New error definitions file.

	* gui/gnome-cal.c (backend_died_cb): Use e-error

	* gui/e-tasks.c (backend_died_cb): Use e-error

	* gui/dialogs/send-comp.c (send_component_dialog): Use e-error

	* gui/dialogs/save-comp.c (save_component_dialog): Use e-error

	* gui/dialogs/delete-comp.c (delete_component_dialog): Use e-error

	* gui/dialogs/cancel-comp.c (cancel_component_dialog): Use e-error

2004-05-25  Sivaiah Nallagatla <snallagatla@novell.com>

	* common/authentication.c (auth_func_cb): read the "auth-domain"
	property to use as component name for e-password calls instead of
	hard coded component name

2004-05-25  Trent Lloyd  <lathiat@bur.st>

	Fixes: #57472

	* gui/dialogs/alarm-options.c:
	* gui/dialogs/calendar-setup.c:
	* gui/dialogs/cancel-comp.c:
	* gui/dialogs/changed-comp.c:
	* gui/dialogs/delete-comp.c:
	* gui/dialogs/delete-error.c:
	* gui/dialogs/save-comp.c:
	* gui/dialogs/select-source-dialog.c:
	* gui/dialogs/send-comp.c
	* gui/dialogs/url-editor-dialog.c:
	- Add include of e-icon-factory.h
	- Set icon on window to be calendar/tasks icon rather than mail icon

2004-05-21  Larry Ewing  <lewing@ximian.com>

	* gui/dialogs/calendar-setup.c: set the dialog icons appropriately
	for add task and calendar dialogs.

2004-05-21  Larry Ewing  <lewing@ximian.com>

	* gui/dialogs/calendar-setup.c: remove references to the uri
	buttons.

	* gui/dialogs/calendar-setup.glade: remove uri buttons, make add
	task window wider and make the button spacing larger.

2004-05-21  H P Nadig  <hpnadig@pacific.net.in>

       * gui/dialogs/calendar-setup.glade: Adjusted the default size of
       New Calendar Dialog. Fixes 57469.

2004-05-20  JP Rosevear  <jpr@ximian.com>

	* gui/e-itip-control.c (find_server): proper look for figuring out
	if the object is on the server

2004-05-20  JP Rosevear  <jpr@novell.com>

	* gui/tag-calendar.c (tag_calendar_by_comp): pass the client
	properly

2004-05-19  Chris Toshok  <toshok@ximian.com>

	* gui/e-meeting-store.c (start_addressbook_server): use the new
	e_book_new_* and e_book_open apis.

	* gui/e-meeting-list-view.c (start_addressbook_server): use the
	new e_book_new_* and e_book_open apis.

2004-05-19  William Jon McCann  <mccann@jhu.edu>

	* gui/GNOME_Evolution_Calendar.server.in.in: Add menu_label and
	menu_accelerator.

2004-05-18  JP Rosevear  <jpr@novell.com>

	* idl/evolution-calendar.idl: add arg

	* gui/alarm-notify/alarm-queue.c (edit_component): send a mode
	type

	* gui/alarm-notify/alarm-notify.c: add fixme note

	* gui/comp-editor-factory.c (impl_editExisting): take a editor
	mode and twist it into a source type
	(impl_editNew): ditto
	(open_client): take a source type for creating the client
	(lookup_open_client): ditto

2004-05-18  JP Rosevear  <jpr@novell.com>

	* gui/alarm-notify/notify-main.c (init_alarm_service): just set up
	the alarm notify object

	* gui/alarm-notify/alarm-notify.h: update proto

	* gui/alarm-notify/alarm-notify.c (process_removal_in_hash):
	process removals using the source list
	(list_changed_cb): when the list changes, update
	(load_calendars): initially load the calendars
	(alarm_notify_init): load the calendars here and don't listen for
	a selection notification
	(alarm_notify_add_calendar): get the source type when adding a
	calendar

	* gui/alarm-notify/notify-main.c (main): no need to init/shutdown
	gnome vfs

	* gui/alarm-notify/config-data.h: new proto

	* gui/alarm-notify/config-data.c
	(config_data_get_notify_with_tray): routine to get schema value

	* gui/alarm-notify/alarm.c (alarm_ready_cb): no timeout checking
	here, setup_timeout does that
	(queue_alarm): ditto
	(setup_timeout): calculate the timeout better

	* gui/alarm-notify/alarm-queue.c (query_objects_changed_cb): tidy
	(edit_component): clean up exception handling
	(display_notification): don't show the tray icon if we aren't
	notifying with the tray

	* gui/apps_evolution_calendar.schemas.in.in: add notify_with_tray
	option

2004-05-18  Kidd Wang  <kidd.wang@sun.com>

	* gui/e-week-view.c: (e_week_view_do_cursor_key_up),
	(e_week_view_do_cursor_key_down), (e_week_view_do_cursor_key_left),
	(e_week_view_do_cursor_key_right), (e_month_view_do_cursor_key_up),
	(e_month_view_do_cursor_key_down),
	(e_month_view_do_cursor_key_left),
	(e_month_view_do_cursor_key_right), (e_week_view_cursor_key_up),
	(e_week_view_cursor_key_down), (e_week_view_cursor_key_left),
	(e_week_view_cursor_key_right), (e_week_view_do_key_press): make
	the focus movable in week/month view when no events are selected.

2004-05-17  Jeffrey Stedfast  <fejj@novell.com>

	* gui/dialogs/event-editor.c: Same.

	* gui/dialogs/comp-editor.c: Change E_PIXMAP size args
	over to E_ICON_SIZE_* values.

	* gui/alarm-notify/alarm-queue.c (tray_icon_blink_cb): Use
	E_ICON_SIZE enum here.
	(display_notification): Same.

	* gui/alarm-notify/alarm-notify-dialog.c (write_html_heading): Use
	E_ICON_SIZE_DIALOG here.

	* gui/e-week-view.c (e_week_view_realize): Same as below.

	* gui/e-day-view.c (e_day_view_realize): Use E_ICON_SIZE_MENU for
	the icon sizes rather than using pixel values.

	* gui/calendar-commands.c (pixmaps): Change E_PIXMAP size args
	over to E_ICON_SIZE_* values.

	* gui/tasks-component.c (add_popup_menu_item): Use
	E_ICON_SIZE_MENU

	* gui/e-timezone-entry.c (e_timezone_entry_init): Use
	E_ICON_SIZE_BUTTON

	* gui/e-itip-control.c (write_error_html): Use E_ICON_SIZE enums.
	(write_html): Same.

	* gui/e-calendar-view.c (e_calendar_view_set_status_message): Use
	E_ICON_SIZE_STATUS
	(setup_popup_icons): Use E_ICON_SIZE_MENU

	* gui/e-calendar-table.c (e_calendar_table_init): Use
	E_ICON_SIZE_LIST rather than a hard-coded value of 16 pixels.
	(e_calendar_table_set_status_message): Use E_ICON_SIZE_STATUS

	* gui/calendar-component.c (add_popup_menu_item): Use
	E_ICON_SIZE_MENU rather than hard-coding the pixel size.

2004-05-17  JP Rosevear  <jpr@novell.com>

	Fixes #56373
	
	* gui/comp-editor-factory.c (open_client): guess its an event for
	now

2004-05-17  V Ravi Kumar Raju <vravikr@yahoo.co.uk>

	*  gui/e-alarm-list.c (get_alarm_string):
	*  gui/dialogs/alarm-page.glade: Change dropdown list item 'Display
	a message' for reminder types to 'Pop up an alert'

2004-05-17  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-calendar-view.c (e_calendar_view_delete_selected_occurrence):
	if we don't have a RECURRENCE-ID, remove nothing, and use the instance
	start time for the RECURRENCE-ID as the default.

2004-05-17  H P Nadig  <hpnadig@pacific.net.in>

	Fixes #56885
	
	* gui/dialogs/select-source-dialog.c (select_source_dialog): Changed
	the window size of source dialog and a minor naming issue. 

2004-05-14  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-day-view.c (process_component):
	* gui/e-week-view.c (process_component):
	* gui/gnome-cal.c (gnome_calendar_purge):
	* gui/tag-calendar.c (tag_calendar_by_comp):
	* gui/e-cal-model.c (e_cal_model_generate_instances): use
	e_cal_generate_instances_for_object instead of
	e_cal_recur_generate_instances.

2004-05-14  Nicel KM  <mnicel@novell.com>

	* gui/dialogs/alarm-page.c (button_options_clicked_cb): invoke options 
	dialog even if backend does not support email alarms and get email 
	address only if supported.

2004-05-13  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/alarm-page.c (add_clicked_cb): only get the email address
	for alarms if the backend supports email alarms.

2004-05-13  Not Zed  <NotZed@Ximian.com>

	Fixes #57644.

	* gui/e-day-view.c (row_deleted_check_cb): strdup the uid, as
	below.
	(remove_uid_cb): and free it.

	* gui/e-week-view.c (row_deleted_check_cb): strdup the uid, 'cause
	otherwise it can go away later as we delete stuff.
	(remove_uid_cb): free the uid.

	* gui/e-week-view-event-item.c (e_week_view_event_item_draw): add
	some array bounds checking as an attempt to isolate the crash in
	#57644.

2004-05-11  Not Zed  <NotZed@Ximian.com>

	* gui/migration.c (migrate_calendars, migrate_tasks): add GError
	return for error details & return errors.

	* gui/calendar-component.c (impl_upgradeFromVersion): fix for api
	change, and erturn exception if we need to.

2004-05-11  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-itip-control.c (update_item): get error information from
	the call to e_cal_receive_objects, and use that as the error message.

2004-05-11  Dan Winship  <danw@ximian.com>

	* gui/GNOME_Evolution_Calendar.server.in.in: Remove the calendar
	and task list controls

	* gui/main.c (factory): Remove support for the calendar and task
	list controls

	* gui/control-factory.c: Remove the property-bag stuff

	* gui/tasks-control.c: Likewise

2004-05-11  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #53137

	* gui/dialogs/schedule-page.c (schedule_page_fill_widgets): check dates
	from the ECalComponent before using them.

2004-05-11  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-cal-model-tasks.c (set_due): use/set the DUE date, not
	the DTEND date.

2004-05-07  Umeshtej <umeshtej@gawab.com>

	Fixes #58014
	
	* gui/e-meeting-list-view.c (process_section):Run the for loop 
	for the number of elements in cards.
	
2004-05-10  Trent Lloyd  <lathiat@bur.st>

	* gui/dialogs/select-source-dialog.c: Include gtkhbox.h and gtkvbox.h
	to fix implicit declaration
	* gui/dialogs/meeting-page.c: (get_current_page) Cast GTK_ENTRY from
	GTK_COMBO to fix compiler warning
	* gui/dialogs/cal-prefs-dialog.c: Remove lvalue casts, produces
	compiler warnings and are not necessary
	
2004-05-07  JP Rosevear  <jpr@ximian.com>

	Fixes #52294
	
	* gui/e-cal-model.c (set_dtstart): set the tzid properly
	(ecm_is_cell_editable): set check properly

	* gui/e-cal-model-tasks.c (set_due): set the tzid properly
	(ecmt_is_cell_editable): set check properly

	* gui/e-cal-model-calendar.c (set_dtend): set the tzid properly
	(ecmc_is_cell_editable): kill fixme and set check properly

2004-05-07  JP Rosevear  <jpr@ximian.com>

	* gui/e-cal-model.c (ecm_is_cell_editable): fix comment and check

	* gui/e-cal-model-tasks.c (ecmt_set_value_at): set a parent field
	properly
	(ecmt_is_cell_editable): fix comment and check

2004-05-06  Larry Ewing  <lewing@ximian.com>

	* gui/dialogs/calendar-setup.c (source_to_dialog): use random
	color for calendar default.

2004-05-05  JP Rosevear  <jpr@ximian.com>

	Fixes #58025
	
	* gui/gnome-cal.c (set_search_query): kill warning
	(setup_config): don't set time out here
	(setup_widgets): set it here
	(gnome_calendar_destroy): clear the time out

	* gui/e-tasks.c (search_bar_sexp_changed_cb): kill warning
	(setup_config): don't set time out here
	(setup_widgets): set it here and remember the time out id
	(e_tasks_destroy): clear the time out

2004-05-05  Larry Ewing  <lewing@ximian.com>

	* gui/dialogs/calendar-setup.c: make sure that we don't crash if
	there are no sources.
	(calendar_setup_new_task_list): fix the previous fix to work if
	there are sources.

2004-05-04  Larry Ewing  <lewing@ximian.com>

	* gui/dialogs/calendar-setup.c: fix logic error.
	(source_group_can_add): helper function to fix groupwise case.
	I'm still not happy with this but it will work for now.

	* gui/dialogs/calendar-setup.c (source_to_dialog): convert units.
	(dialog_to_source): convert time units.

	* gui/dialogs/calendar-setup.glade. name the unit option menus.

2004-05-03  Rodney Dawes  <dobey@ximian.com>

	* gui/dialogs/select-source-dialog.c (select_source_dialog):
	Make this dialog be HIG-compliant and accessible

2004-05-03  Edgar Luna D√≠az  <eald@linuxuanl.org>

	* gui/dialogs/select-source-dialog.c (select_source_dialog):
	Set the default window size to 276 x 320

	Fixes #57298

2004-05-03  Larry Ewing  <lewing@ximian.com>

	* gui/dialogs/calendar-setup.glade: rename the cancel button.

2004-04-29  Larry Ewing  <lewing@ximian.com>

	* gui/e-cal-model.c (ecm_get_color_for_component): use the source
	color if it is set.  Yay for ugly colors.

	* gui/e-cal-model.h: add a color holder to the ECalModelComponent
	since the return value of the color stuff is const.

2004-05-03  JP Rosevear  <jpr@ximian.com>

	Fixes #51714
	
	* gui/e-cal-list-view.c (setup_e_table): listen for double click
	signal
	(e_cal_list_view_on_table_double_click): edit the appointment that
	was double clicked on

2004-05-03  JP Rosevear  <jpr@ximian.com>

	* gui/calendar-component.c (set_info): set the info label
	(calendar_dates_changed_cb): call back for when the dates of the
	calendar change
	(create_component_view): store the info label for later use;
	listen for date changes to set the info label

2004-05-03  JP Rosevear  <jpr@ximian.com>

	Fixes #57897
	
	* gui/e-tasks.c (setup_widgets): no need to listen for the deleted
	signal, the cursor will change in that case

2004-05-03  JP Rosevear  <jpr@ximian.com>

	* gui/e-cal-model-tasks.c (set_completed): remove useless debug
	statement

2004-05-03  JP Rosevear  <jpr@ximian.com>

	* gui/tasks-component.c (set_info): set the info label message
	(model_changed_cb): call above
	(table_selection_change_cb): ditto
	(model_rows_inserted_cb): ditto
	(model_rows_deleted_cb): ditto
	(create_component_view): remember the info in the view struct;
	listen for events that require the info label to be updated

2004-05-03  JP Rosevear  <jpr@ximian.com>

	Fixes #57899
	
	* gui/e-day-view.c (e_day_view_do_key_press): bail if the client
	is read only (or we get an error trying to find out)

	* gui/e-week-view.c (e_week_view_do_key_press): ditto
	
2004-05-03  JP Rosevear  <jpr@ximian.com>

	Fixes #57894
	
	* gui/gnome-cal.c (gnome_calendar_new_task): make sure we use the
	default component of the correct model

2004-04-30  Rodney Dawes  <dobey@ximian.com>

	* gui/alarm-notify/alarm-notify-dialog.c (alarm_notify_dialog):
	* gui/alarm-notify/alarm-notify.glade:
	Update the alarm notify dialog to be HIG compliant

	Fixes #41224

2004-04-30  Gary Ekker  <gekker@novell.com>

	* gui/e-tasks.c: (e_tasks_init): Set up the model to use the correct 
	query. Setup callbacks for gconf changes. Add an idle timeout to hide 
	completed items.
	Add update_view, update_view_cb, and 
	config_hide_completed_tasks_changed_cb to update the model view.

	* gui/gnome-cal.c: ditto
	
	* gui/calendar-config.h: Add notifications for hide_completed_tasks
	settings.

	* gui/calendar-config.c: ditto

2004-04-30  Not Zed  <NotZed@Ximian.com>

	* gui/dialogs/meeting-page.c (get_widgets): make the entry
	non-editable.  Quick fix for #48132 (could convert to optionmenu
	but then we need to change again for gnome >?2.6).

2004-04-29  Rodney Dawes  <dobey@ximian.com>

	* gui/dialogs/cal-prefs-dialog.glade: Update the prefs dialog pages
	for the calendar and tasks components to be HIG compliant

2004-04-29  JP Rosevear  <jpr@ximian.com>

	* gui/tasks-component.h (tasks_component_peek_source_list): remove
	prototypes

	* gui/tasks-component.c (source_removed_cb):  unselect the
	source in the selector if source removed from calendar
	(create_component_view): create the activity handler and listen to
	source remove signal

	* gui/gnome-cal.h: add signals, protos

	* gui/gnome-cal.c (gnome_calendar_class_init): add source added
	and removed signals
	(client_cal_opened_cb): emit source removed signal
	(open_ecal): set the status message
	(backend_died_cb): emit source removed signal
	(gnome_calendar_set_activity_handler): allow an activity handler
	to be set
	(gnome_calendar_add_source): emit source added signal
	(gnome_calendar_remove_source): emit source removed signal
	(display_view): update the active activity handler
	
	* gui/e-tasks.h: add signal prototypes

	* gui/e-tasks.c (e_tasks_class_init): add source added and removed
	signals
	(backend_died_cb): emit source removed signal
	(e_tasks_add_todo_source): emit source added/removed signals
	(e_tasks_remove_todo_source): emit source removed signal

	* gui/e-calendar-view.h: add proto

	* gui/e-calendar-view.c (e_calendar_view_set_activity_handler):
	allow an activity handler to be set
	(e_calendar_view_set_status_message): use private activity handler
	(if any) to set status message

	* gui/e-calendar-table.h: add data member and proto

	* gui/e-calendar-table.c (e_calendar_table_set_activity_handler):
	allow an activity handler to be set
	(e_calendar_table_set_status_message): use private activity
	handler (if any) to set status message

	* gui/e-calendar-marshal.list: add extra marshallers

	* gui/calendar-component.h: kill protos

	* gui/calendar-component.c (source_removed_cb): unselect the
	source in the selector if source removed from calendar
	(create_component_view): create the activity handler and listen to
	source remove signal

2004-04-29  JP Rosevear  <jpr@ximian.com>

	* gui/dialogs/comp-editor.c (send_timezone): ditto

	* gui/dialogs/task-page.c (task_page_fill_component): kill warning

2004-04-29  JP Rosevear  <jpr@ximian.com>

	* gui/e-cal-model.c (e_cal_model_set_default_client): kill warning

2004-04-29  Jeffrey Stedfast  <fejj@ximian.com>

	* gui/migration.c (migrate_pilot_data): Removed the terminating
	NULL vararg since we don't need it for g_strdup_printf, it was
	only needed when it was g_build_filename(). Gets rid of a gcc
	warning.

2004-04-29  Not Zed  <NotZed@Ximian.com>

	* gui/e-itip-control.c (e_itip_control_set_data): check we find
	any usable components of the icalendar entry before dereferncing
	it.  Fixes crash in #57264.

2004-04-28  Not Zed  <NotZed@Ximian.com>

	* gui/e-itip-control.c (object_requested_cb): dont shadow source
	with another source in the fallback case.  Related to #54094.

2004-04-27  JP Rosevear  <jpr@ximian.com>

	* gui/cal-search-bar.c: disable comment searching which is
	currently useless

2004-04-27  JP Rosevear  <jpr@ximian.com>

	Fixes #52270 and #57593
	
	* gui/e-cal-model-tasks.c (ecmt_set_value_at): remove checks for
	start after due
	(ecmt_duplicate_value): copy the completed and due dates properly
	(ecmt_fill_component_from_model): only set the percent and status
	if the completion isn't set
	(ensure_task_partially_complete): ensure the task is not complete,
	in progress and make the percentage sensible if its 0 or 100
	(set_status): make sure the status and related vars are set
	properly
	(ecmt_set_value_at): handle status
	(ecmt_fill_component_from_model): make sure the click to add
	fields don't clobber each other
	(ecmt_is_cell_editable): status is editable

	* gui/e-cal-model-calendar.c (ecmc_duplicate_value): copy the
	dtend correctly

2004-04-27  Larry Ewing  <lewing@ximian.com>

	* gui/dialogs/calendar-setup.c: hook up the color picker and test
	buttons in the new task dialog.

	* gui/dialogs/calendar-setup.glade: fix visibility and color
	picker names.

2004-04-27  Larry Ewing  <lewing@ximian.com>

	* gui/dialogs/calendar-setup.c (new_calendar_test_uri): add
	handler for test button.
	(calendar_setup_new_calendar): connect test button, fill in color
	picker member.
	(source_to_dialog): set the color picker color if the source has
	one.
	(dialog_to_source): set the source color.
	
2004-04-27  Jeffrey Stedfast  <fejj@ximian.com>

	* gui/migration.c (migrate_tasks): Fixed the version checks for
	migrating pilot data.
	(migrate_calendars): Same.
	(migrate_pilot_data): Doh. Take a third argument to specify what
	component we are migrating ("todo" vs "calendar") so that we can
	compare against the correct filename. Might help :-)
	(migrate_pilot_db_key): Just set an empty value for the data since
	there's no way to actually get it and I don't think it really
	matters anyway.

2004-04-27  Kidd Wang  <kidd.wang@sun.com>

	* gui/e-cal-model-tasks.c: (ecmt_set_value_at): compare the start
	time and the due time only when both are not null.

2004-04-26  Jeffrey Stedfast  <fejj@ximian.com>

	* gui/migration.c (migrate_pilot_data): New function to migrate
	pilot data.
	(migrate_calendars): Migrate pilot data if upgrade version <=1.5.9
	(migrate_tasks): Same.

2004-04-23  Rodney Dawes  <dobey@ximian.com>

	* gui/alarm-notify/notify-main.c (main): Call e_icon_factory_init ()

	Fixes #57497

2004-04-22  Jeffrey Stedfast  <fejj@ximian.com>

	* conduits/calendar/calendar-conduit.c (start_calendar_server):
	Use e_cal_open_default() instead of e_cal_open().
	(map_name): Changed the path for the pilot map filename.
	(pre_sync): Changed the query to "#t" instead of "(#t)" and
	removed a duplicate block of code (seems to have been a paste-o?).

	* conduits/todo/todo-conduit.c (start_calendar_server): Use
	e_cal_open_default() instead of e_cal_open().
	(map_name): Changed the path for the pilot map filename.
	(pre_sync): Changed the query to "#t" instead of "(#t)" and
	removed a duplicate block of code (seems to have been a paste-o?).

2004-04-22  JP Rosevear  <jpr@ximian.com>

	Fixes #56092
	
	* gui/e-day-view.c (e_day_view_show_popup_menu): weak ref for the
	menu to be destroyed
	(popup_destroyed_cb): reset popup_event_num and popup_event_day

	* gui/e-week-view.c (e_week_view_show_popup_menu): weak ref for
	the menu to be destroyed
	(popup_destroyed_cb): reset the popup_event_num

2004-04-21  JP Rosevear  <jpr@ximian.com>

	* gui/calendar-component.c (create_new_event): make sure we don't
	deref a NULL pointer

2004-04-21  JP Rosevear  <jpr@ximian.com>

	Fixes #56504
	
	* gui/gnome-cal.c (gnome_calendar_destroy): no need to destroy the
	creatable item handler
	(gnome_calendar_set_ui_component): don't do the creatable
	item stuff here

	* gui/e-tasks.c (e_tasks_set_ui_component): don't do the creatable
	item stuff here
	(e_tasks_destroy): no need to destroy creatable item handler

	* gui/e-calendar-table.c (e_calendar_table_set_status_message):
	comment out temporarily

	* gui/e-calendar-view.c (e_calendar_view_set_status_message): ditto
	
	* gui/calendar-component.c: switch to using per component view
	information; don't listen for config changes to the primary
	selection and selection so that different windows can have
	different calendar selections; use a local creatable items handler
	so that the new button is associated with the right window when
	setting the default times

	* gui/tasks-component.c: ditto
	
2004-04-21  JP Rosevear <jpr@ximian.com>

	* gui/e-tasks.c (set_timezone): only set the preview zone if the
	preview has been created
	(setup_widgets): set the default zone for the preview pane

2004-04-21  JP Rosevear <jpr@ximian.com>

	Fixes #55797
	
	* gui/calendar-component.c (create_new_event): force an all day
	event if we are viewing the week, month or list view, which mimics
	double click in the view

2004-04-21  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* gui/migration.c: (migrate_calendars):
	Fix crash when gconf value are not existing in the gconf
        database.

2004-04-21  Not Zed  <NotZed@Ximian.com>

	** Fixes #57034.
	
	* gui/dialogs/calendar-setup.c (create_new_source_with_group):
	NULL out source if we can't open the calendar.
	(source_group_menu_add_groups): if the group is readonly, then
	desensitise it.
	(source_group_menu_add_groups): return the first non-readonly
	calendar index.
	(calendar_setup_new_calendar): set the group history to the first
	non-readonly group.
	(calendar_setup_new_task_list): same.

	* gui/gnome-cal.c (gnome_calendar_set_ui_component): fix for
	user_creatable_items api changes.

	* gui/e-tasks.c (e_tasks_set_ui_component): fix for
	user_creatable_items api changes.

2004-04-19  Michael Terry  <mike@mterry.name>

	* gui/GNOME_Evolution_Calendar.server.in.in:
	* gui/calendar-commands.c:
	* gui/calendar-component.c:
	* gui/e-calendar-table.c:
	* gui/e-calendar-view.c:
	* gui/e-day-view-main-item.c:
	* gui/e-day-view-top-item.c:
	* gui/e-day-view.c:
	* gui/e-day-view.h:
	* gui/e-itip-control.c:
	* gui/e-timezone-entry.c:
	* gui/e-week-view-event-item.c:
	* gui/e-week-view.c:
	* gui/e-week-view.h:
	* gui/tasks-component.c:
	* gui/alarm-notify/alarm-notify-dialog.c:
	* gui/alarm-notify/alarm-queue.c:
	* gui/dialogs/comp-editor.c:
	* gui/dialogs/event-editor.c: Update the calendar to use the icon theme
	through the EIconFactory object in e-util

2004-04-19  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.c (set_view): take a range_selected boolean for
	internal use
	(gnome_calendar_set_view): use above
	(display_view): use priv->range_selected, we'll set it correctly
	before this
	(display_view_cb): only pass focus boolean
	(gnome_calendar_on_date_navigator_selection_changed): set the view
	so the view menu is accurate

2004-04-18  JP Rosevear <jpr@ximian.com>

	Fixes #54021
	
	* importers/icalendar-importer.c (update_single_object): ensure
	UID exists

2004-04-18  JP Rosevear <jpr@ximian.com>

	Fixes #53124
	
	* gui/e-tasks.c: remove preview pieces, they are in their own
	class now; use the new class for preview

	* gui/e-cal-component-preview.[hc]: implement a preview area for
	tasks and events

2004-04-17  Trent Lloyd  <lathiat@sixlabs.org>

	* gui/e-calendar-view.c: include libecal/e-cal-component.h to kill
	implicit declaration of e_cal_component_get_recur_id_as_string at line
	869.

2004-04-15 Gary Ekker <gekker@novell.com>

	Fixes #52271

	* gui/e-cal-model-tasks.c: (set_percent): shouldn't call 
	ensure_task_not_complete here, it removes the percent property that 
	we just set.
	

2004-04-15  JP Rosevear  <jpr@ximian.com>

	* gui/dialogs/task-page.c (task_page_fill_component): don't
	actually check if start date is after due date, its perfectly
	valid for that to occur

2004-04-15  JP Rosevear  <jpr@ximian.com>

	Fixes #53903
	
	* gui/dialogs/meeting-page.c (meeting_page_fill_widgets):
	show/hide add button properly
	(change_clicked_cb): ditto

	* gui/dialogs/comp-editor.c (needs_send_cb): call back when "needs_send"
	(page_changed_cb): use accessor
	
2004-04-15  JP Rosevear  <jpr@ximian.com>

	* gui/dialogs/comp-editor.c (save_comp): stop listening to changes
	since we are just going to save and close
	(save_cmd): remove, its ok since we are toasting menus shortly
	anyhow
	(obj_modified_cb): no need to look at update flag
	(obj_removed_cb): ditto

2004-04-15  Gary Ekker  <gekker@novell.com>

	* gui/calendar-component.h: move the calendar publishing initialization
	from createControls to main.c

	* gui/calendar-component.c: (create_controls): Ditto

	* gui/main.c: (initialize): Ditto

	* gui/dialogs/cal-prefs-dialog.c: (url_list_changed): remove a gfree
	that was freeing a before it should have been. Also removed cruft from 
	a previous attempt to fix the crash.

2004-04-15  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/select-source-dialog.c (select_source_dialog): added some
	spacing.

	* gui/e-calendar-view.c (e_calendar_view_delete_selected_occurrence):
	use the DTSTART for the recur-id if it's not available.

2004-04-14  Larry Ewing  <lewing@ximian.com>

	* gui/calendar-component.c (selector_tree_drag_motion): fix
	missing parameters, wow that was a mess.

	* gui/dialogs/calendar-setup.glade: add the new "new" dialogs,
	remove the old druids.

	* gui/dialogs/calendar-setup.c (calendar_setup_new_calendar): use
	the new dialogs, colors are still not functional.
	(calendar_setup_new_task_list): use the new dialogs, with no colors.

2004-04-14  JP Rosevear <jpr@ximian.com>

	Fixes #56613
	
	* gui/gnome-cal.h: add proto

	* gui/gnome-cal.c (client_cal_opened_cb): key the clients by uid
	(backend_died_cb): ditto
	(gnome_calendar_add_source): ditto
	(gnome_calendar_remove_source): use remove_source_by_uid
	(gnome_calendar_remove_source_by_uid): new function to remove a
	source by uid
	(gnome_calendar_set_default_source): key the clients by uid

	* gui/calendar-component.c (update_task_selection): the source
	could be NULL if the source was deleted rather than unchecked
	(update_primary_task_selection): look at the task source list

2004-04-14  JP Rosevear <jpr@ximian.com>

	Fixes #56553
	
	* importers/icalendar-importer.c (prepare_events): don't double
	free or continue, we need to move to the next item
	 (prepare_tasks): don't continue, move to the next item
	
2004-04-14  Not Zed  <NotZed@Ximian.com>

	* gui/tasks-component.c (impl_createControls): Same as below for
	the tasks component.

	* gui/calendar-component.c (impl_createControls): add the info
	area label widget to the sidebar control (c&p the addressbook
	code).

2004-04-12  Gary Ekker  <gekker@novell.com>

        Fixes #56628
	
	* gui/calendar-component.c (create_new_event): Add informational dialog
	when user attempts event creation in read-only calendar.
	

2004-04-09  Gary Ekker  <gekker@novell.com>

	* gui/dialogs/url-editor-dialog.c: Fixed to use e-passwords.

	* gui/dialogs/cal-prefs-dialog.c: Fixed crash and bugs created by 
	changes made for instant apply.

	* gui/itip-utils.c: Fixed to use e-passwords.

	* gui/e-pub-utils.c: Fixed to use e-passwords.
	(just_published): Fixed error in logic.
	(e_pub_publish): Fixed crash if ESource is NULL.
	

2004-04-09  Chris Toshok  <toshok@ximian.com>

	* gui/dialogs/e-delegate-dialog.c (e_delegate_dialog_construct):
	EABDestination -> EDestination.
	(e_delegate_dialog_get_delegate): same.
	(e_delegate_dialog_get_delegate_name): same.

	* gui/dialogs/alarm-options.c (alarm_to_malarm_widgets):
	EABDestination -> EDestination.
	(malarm_widgets_to_alarm): same.

	* gui/e-select-names-editable.c
	(e_select_names_editable_get_address): EABDestination ->
	EDestination.
	(e_select_names_editable_get_name): same.

	* gui/e-meeting-list-view.c (process_section): EABDestination ->
	EDestination.
	(select_names_ok_cb): same.

2004-04-09  Dan Winship  <danw@ximian.com>

	* gui/gnome-cal.c (gnome_calendar_set_ui_component): Create an
	EUserCreatableItemsHandler for the view if there isn't one yet,
	and then activate it.
	(gnome_calendar_destroy): destroy it.

	* gui/calendar-component.c (impl__get_userCreatableItems): add
	object/folder flags to items.

	* gui/e-tasks.c (e_tasks_set_ui_component): Create an
	EUserCreatableItemsHandler for the view if there isn't one yet,
	and then activate it.
	(e_tasks_destroy): destroy it.

	* gui/tasks-component.c (impl__get_userCreatableItems): add
	object/folder flags. Change "Task List" to "Tasks Group" per new
	specs.

	* gui/calendar-commands.c (calendar_control_deactivate): clear the
	GnomeCal's ui_component rather than setting it again

2004-04-07  Jeffrey Stedfast  <fejj@ximian.com>

	* gui/dialogs/cal-prefs-dialog.c: Fixed to be instant-apply.

2004-04-07  JP Rosevear <jpr@ximian.com>

	* gui/e-cal-model.c (e_cal_model_set_default_client): just add the
	client, we have protection against re-adding it any how
	(cal_opened_cb): stop listening to the open signal

2004-04-07  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.c (gnome_calendar_dayjump): remove extra set view
	params
	(gnome_calendar_set_view): simplify, just set the current view id
	and let the gal view stuff do the rest
	(display_view): modify from set_view, don't set the view id here
	or update the default view config setting
	(display_view_cb): update the date navigator
	(gnome_calendar_construct): kill the default view stuff, gal view
	handles that
	(gnome_calendar_on_date_navigator_selection_changed): use display_view

	* gui/e-week-view.c (time_range_changed_cb): ditto
	(e_week_view_set_selected_time_range): just set the selection,
	don't fool with the base date
	(e_week_view_on_button_press): do a full day event if double
	clicked on

	* gui/e-day-view.c (time_range_changed_cb): only set the selection
	if we can't preserve an existing selection

	* gui/control-factory.c (set_prop): allow list view, remove
	default view usage

	* gui/calendar-config.h: remove protos

	* gui/calendar-config.c: remove default view calls

	* gui/calendar-commands.c (show_day_view_clicked): remove extra
	params to gnome_calendar_set_view
	(show_work_week_view_clicked): ditto
	(show_week_view_clicked): ditto
	(show_month_view_clicked): ditto
	(show_list_view_clicked): ditto

	* gui/apps_evolution_calendar.schemas.in.in: remove default view
	setting, gal view remembers this for us

2004-04-05  JP Rosevear <jpr@ximian.com>

	* gui/e-week-view.c (time_range_changed_cb): only select one day

2004-04-05  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/alarm-queue.c: removed commented code.

	* gui/alarm-notify/notify-main.c (main): removed useless call to set
	the POA after construction.

2004-04-05  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #56316

	* gui/dialogs/comp-editor-page.[ch]: added "fill_timezones" virtual
	method to CompEditorPage class.
	(comp_editor_page_fill_timezones): new function.
	(comp_editor_page_class_init): initialize new virtual method.

	* gui/dialogs/event-page.c (event_page_fill_timezones,
	event_page_class_init):
	* gui/dialogs/task-page.c (task_page_fill_timezones,
	task_page_class_init):
	* gui/dialogs/task-details-page.c (task_details_page_fill_timezones,
	task_details_page_class_init): implemented new virtual method for pages
	dealing with timezones.

	* gui/dialogs/comp-editor.c (save_comp): call the "fill_timezones"
	method on all pages, and call...
	(send_timezone): ...this function for each hash table item.

2004-04-01  Rodrigo Moya <rodrigo@ximian.com>

	* gui/gnome-cal.c (client_cal_opened_cb): set the default timezone
	on all clients when opened.

2004-04-01  Radek Doulik  <rodo@ximian.com>

	* gui/e-calendar-view.c
	(e_calendar_view_delete_selected_occurrence): fix small typo

2004-04-01  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/recur-comp.c (recur_component_dialog): return correct
	values (boolean).

2004-03-31  JP Rosevear <jpr@ximian.com>

	* gui/migration.c (migrate_calendars): make sure we unset the
	float value for the panes if converting from 1.4 and earlier

2004-03-31  JP Rosevear  <jpr@ximian.com>

	Fixes #56120
	
	* gui/gnome-cal.c (append_category_cb): update the correct element
	(client_categories_changed_cb): pass the array, not a reference to
	it

2004-03-31  Rodrigo Moya <rodrigo@ximian.com>

	* gui/gnome-cal.c: fixed documentation typos.

2004-03-31  Sarfraaz Ahmed <asarfraaz@novell.com>

	* gui/config-control.c (set_prop) : Replaced add_event_source 
	with add_source and passed the VEVENT type as argument.

2004-03-30  William Jon McCann  <mccann@jhu.edu>

	* gui/dialogs/calendar-setup.glade:
	* gui/dialogs/calendar-setup.c (new_task_list_finish)
	(calendar_setup_new_task_list, calendar_setup_edit_task_list):
	add remote calendar setup page to task list setup assistant and
	edit dialog.  Remove separators from dialog.

2004-03-29  Larry Ewing  <lewing@ximian.com>

	* gui/calendar-component.c (selector_tree_drag_data_received):
	deal with the action type a properly. in the normal case.
	
	* gui/calendar-component.c (selector_tree_drag_data_received):
	call drag_finish properly, change the uid.
	(selector_tree_drag_motion): set drag status properly.

2004-03-29  William Jon McCann  <mccann@jhu.edu>

	* gui/tasks-component.c (delete_task_list_cb): 
	* gui/calendar-component.c (delete_calendar_cb):
	don't require client to be loaded in order to remove the source

	* gui/migration.c (create_task_sources, migrate_tasks): create
	On The Web source group for tasks.

2004-03-29  Hari Prasad Nadig  <hp@ndeepak.info>

	* gui/goto-dialog.glade: Naming issue, Go to Date -> Select Date,
	Go to Today -> Select today. Solves 48293
	
	* gui/e-calendar-view.c: gives aid to the above change.

2004-03-29  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/alarm-queue.c (query_objects_changed_cb): removed
	misplaced return statement that prevented the rest of the objects list
	to be processed.

2004-03-29  Kidd Wang  <kidd.wang@sun.com>

	* gui/e-calendar-view.c: (e_calendar_view_class_init): remove the
 	EVENT_MOVE signal which was binded to Alt + Arrows.
 	* gui/e-calendar-view.h: ditto.
 	* gui/e-day-view.c: (e_day_view_class_init),
	(e_day_view_do_key_press), (e_day_view_event_move): handle Alt + Arrows
	in the more general place e_day_view_do_key_press so that we can avoid
	the conflicting accessible key. When an appointment is selected,
	pressing Alt + Arrows causes it to be moved around. Otherwise, pressing
	Alt + LEFT/RIGHT will move the focus to the same day in the
	previous/next week.
	* gui/e-week-view.c: (e_week_view_class_init),
	(e_week_view_event_move), (e_week_view_do_key_press): ditto.

2004-03-26  JP Rosevear <jpr@ximian.com>

	* gui/e-cal-model.c (update_e_cal_view_for_client): guard against
	the case that we redo queries while still waiting for a client to
	open

2004-03-26  JP Rosevear  <jpr@ximian.com>

	Fixes #53134
	
	* gui/e-cal-model.c (get_description): make sure to set the string
	to NULL so that if this component doesn't have a description we
	don't double free next time we are called

2004-03-26  JP Rosevear <jpr@ximian.com>

	* gui/migration.c (migrate_calendars): no need to explicitly add
	the contacts group, the create function does this properly

2004-03-26  JP Rosevear <jpr@ximian.com>

	* gui/migration.c (migrate_calendars): make sure we always sync
	the source list and just do it once; unref the sources we get
	(migrate_tasks): make sure we always sync
	the source list and just do it once

2004-03-26  JP Rosevear <jpr@ximian.com>

	Fixes #55648
	
	* gui/print.c (print_todo_details): get the default from the model

	* gui/gnome-cal.h: remove and update protos

	* gui/gnome-cal.c (update_query): the clients and client_list
	members are now arrays of source types
	(setup_widgets): default the query to everything for tasks, cast
	the config items
	(gnome_calendar_init): init all the client hashs
	(gnome_calendar_destroy): clean them up, clean up all categories
	(client_cal_opened_cb): handle based on source type
	(append_category_cb): don't track the size in the closure
	(client_categories_changed_cb): do all the merging here
	(backend_died_cb): handle based on source type
	(gnome_calendar_construct): we don't special case the task stuff
	any more
	(gnome_calendar_get_default_client): return the default of the
	current view
	(gnome_calendar_add_source): take a source type argument and
	append accordingly
	(gnome_calendar_remove_source): similar, but remove accordingly
	(gnome_calendar_set_default_source): take a source type argument and
	set the default accordingly
	(gnome_calendar_new_task): use the default of the task model

	* gui/e-calendar-view.c (e_calendar_view_add_event): kill warning

	* gui/calendar-component.c (update_uris_for_selection): pass
	source type when adding/removing
	(update_uri_for_primary_selection): ditto
	(update_task_selection): make sure we show the correct list of
	tasks
	(update_primary_task_selection): make sure we track the primary
	task correctly
	(delete_calendar_cb): pass source type when removing
	(config_primary_selection_changed_cb): config listener callback
	for tasks
	(config_tasks_selection_changed_cb): ditto
	(impl_createControls): load the initial task selection, listen for
	changes
	(calendar_component_init): get the source lists

	* gui/calendar-commands.c (sensitize_taskpad_commands): get the
	task pad and then the default client from that

2004-03-26  JP Rosevear <jpr@ximian.com>

	* gui/e-cal-model.c (find_client_data): finds the client data for
	a client
	(cal_opened_cb): update the query
	(add_new_client): return client data
	(e_cal_model_add_client): add the client immediately no matter
	what, and possibly wait for it to open
	(remove_client): guard against NULL query
	(e_cal_model_remove_client): use find_client_data
	(e_cal_model_dispose): guard against a NULL query

2004-03-25  JP Rosevear <jpr@ximian.com>

	* gui/e-cal-model.c (remove_client): fix off by one error when
	emitting deleted signal

2004-03-25  JP Rosevear <jpr@ximian.com>

	Fixes #53499
	
	* gui/gnome-cal.c (setup_widgets): don't give the state file to
	the list view
	(set_view): ensure that if the list view was in custom mode it
	stays that way
	(display_view_cb): attach to the etable of the list view
	(gnome_calendar_setup_view_menus): use an etable gal view for the
	list view and don't set the view twice

	* gui/e-tasks.c (e_tasks_setup_view_menus): the instance should no
	longer be per task uri since all the uris are shown together

	* gui/e-cal-list-view.h: update/add protos

	* gui/e-cal-list-view.etspec: limit the available columns to what
	product design agreed on

	* gui/e-calendar-table.etspec: ditto

	* gui/e-cal-list-view.c (e_cal_list_view_class_init): ignore
	update query calls
	(e_cal_list_view_load_state): make public
	(e_cal_list_view_save_state): ditto
	(setup_e_table): don't handle state saving ourselves
	(e_cal_list_view_construct): ditto
	(e_cal_list_view_new): ditto
	(e_cal_list_view_destroy): ditto

	* gui/calendar-view.c (calendar_view_get_type_code): we don't
	handle the list view here

	* gui/calendar-view-factory.c
	(calendar_view_factory_get_type_code): we don't handle the list
	view here
	(calendar_view_factory_get_title): ditto

2004-03-24  Rodrigo Moya <rodrigo@ximian.com>

	* gui/gnome-cal.c (update_query): don't create queries for the clients
	that are not loaded yet.

2004-03-24  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.c (client_cal_opened_cb): remove debug code that
	slipped in

2004-03-24  Danilo ≈†egan  <dsegan@gmx.net>

	* gui/e-alarm-list.c (get_alarm_duration_string): Use ngettext for
	handling plural forms (fixes bug #53464). 
	* gui/dialogs/delete-comp.c (delete_component_dialog): Likewise.
	* gui/e-itip-control.c (write_recurrence_piece): Likewise.

2004-03-23  JP Rosevear <jpr@ximian.com>

	Fixes #51948
	
	* gui/dialogs/meeting-page.c (button_press_event): compile this
	again, determine the row with a different method
	(button_press_event): pass mpage
	(meeting_page_construct): listen for button press event

	* gui/e-meeting-list-view.c: remove commit that wasn't supposed to
	go in

2004-03-23  JP Rosevear <jpr@ximian.com>

	* gui/e-calendar-view.c: make the flow control correct

2004-03-23  JP Rosevear <jpr@ximian.com>

	* gui/migration.c (create_calendar_sources, create_task_sources):
	ensure that only one Personal calendar/task list gets created when
	moving between minor versions

2004-03-23  JP Rosevear  <jpr@ximian.com>

	* gui/dialogs/copy-source-dialog.c (copy_source): remove unused
	variable

	* gui/e-cal-model.c (e_cal_model_copy_component_data): make the
	precondition return NULL

	* gui/control-factory.c (get_prop): make sure this code isn't
	reached

	* gui/calendar-component.c
	(calendar_component_peek_source_selector): cast to kill warning

2004-03-23 Umesh Tiwari   <tiwariumesh232@rediffmaiil.com>

	For bug#53417

	* gui/e-tasks.c:
	Clear the preview panel after the last task is deleted.

2004-03-23  Alfred Peng <alfred.peng@sun.com>

	* gui/dialogs/alarm-options.c (malarm_widgets_to_alarm): get
	the mail alarm description message from "malarm_description"
	instead of "dalarm_description".

2004-03-23  Alfred Peng <alfred.peng@sun.com>

	* gui/alarm-notify/alarm-queue.c (audio_notification): If there
	is no attachment for a audio reminder, only a message window
	shows up.
	Get a beep sound even without attachment for audio reminder.

2004-03-22  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-calendar-view.c (e_calendar_view_add_event): get the UID
	from the server on newly created events and set the ECalComponent's
	UID to that, for further operations.

2004-03-20  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-calendar-view.c: added 'Copy/Move to Calendar' menu entries.
	(on_copy_to, on_move_to): callbacks for new menu items.
	(on_print_event): don't leak selection list.

2004-03-19  JP Rosevear  <jpr@ximian.com>

	Fixes #55716
	
	* gui/e-cal-model.c (remove_client): unset the default if the
	client removed was the default

2004-03-19  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (update_uris_for_selection): if
	gnome_calendar_add_event_source fails, don't add the client to the
	internal client list.

2004-03-19  JP Rosevear <jpr@ximian.com>

	Fixes #55723
	
	* gui/e-day-view.c (process_component): compare ecalcomponents,
	not icalcomponents (the compare func is borked), check recurrence
	changes better
	(e_day_view_init): just use the model the parent creates

	* gui/e-week-view.c (process_component): create the temporary item
	from the correct icalcomp
	(e_week_view_init): just use the model the parent creates

2004-03-18  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/select-source-dialog.c (select_source_dialog): create
	an ESourceSelector instead of a ESourceOptionMenu, to be consistent
	with the other components, and create a scrolled window to hold the
	source selector.
	(primary_selection_changed_cb): callback for "primary_selection_changed"
	signal in the ESourceSelector.

2004-03-18  Alfred Peng <alfred.peng@sun.com>

	* Fix #51187 on bugzilla of ximian
	* gui/alarm-notify/alarm-queue.c (query_objects_changed_cb):
	If "alarms" or "alarms->alarms" is NULL after querying a calendar
	for the alarms of a particular object, the reuse of "cqa" will
	probably cause evolution-alarm-notify to crash.
	So remove "cqa" when "alarms" or "alarms->alarms" is NULL. Otherwise
	update it.

2004-03-17  hpnadig  <hp@ndeepak.info>

	* gui/dialogs/task-page.glade: Capitalized words changed. Solves 48115.

	* gui/dialogs/task-details-page.glade: s/Date Completed/Date completed.

	* gui/e-calendar-table.etspec: Capitalization checked. Solves 48130.

2004-03-17 Gary Ekker <gekker@novell.com>

	Fixes #55292
	
	* gui/e-pub-utils.c (e_pub_publish): fix a crash when trying to
	publish a NULL component

2004-03-16  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/select-source-dialog.[ch]: new dialog for allowing the
	user to select a source.

	* gui/dialogs/copy-source-dialog.c (copy_source_dialog): use the
	select_source_dialog function to ask user for the source to use.
	(source_selected_cb): removed unneeded function.

	* gui/dialogs/Makefile.am: added new files.

2004-03-16  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-commands.c
	(calendar_control_sensitize_calendar_commands): check if the selected
	event has its associated ECalModelComponent.

2004-03-15  JP Rosevear  <jpr@ximian.com>

	* gui/e-tasks.c (search_bar_sexp_changed_cb): set the search query
	(e_tasks_init): set the query to be #t by default

	* gui/e-cal-model.c (redo_queries): use the search query if there
	is one (and no time is set), make sure to dup the #f

2004-03-15  JP Rosevear <jpr@ximian.com>

	* gui/dialogs/comp-editor-page.c (comp_editor_page_fill_widgets):
	use right cast macro

2004-03-15  JP Rosevear  <jpr@ximian.com>

	* Rename e-cal-view to e-calendar-view and fix includes
	
	* gui/dialogs/comp-editor-page.c (comp_editor_page_fill_widgets):
	pre-conditions should return FALS

	* gui/e-cal-model.c (copy_ecdv): return the new struct

	* gui/Makefile.am: build renamed files

2004-03-15  JP Rosevear <jpr@ximian.com>

	Fixes #52253
	
	* gui/print.c (print_week_summary_cb): copy component data

	* gui/gnome-cal.c (get_times_for_views): calculate the time range
	for each view
	(set_search_query): set the search query on the model
	(set_week_start): set the week start day
	(week_start_changed_cb): track if it changes
	(setup_config): set its notification
	(setup_widgets): update the view times and date navigator
	(gnome_calendar_init): remove dead values
	(gnome_calendar_goto_date): just calc the new time and let
	update_view_times handle it
	(gnome_calendar_goto): ditto
	(gnome_calendar_direction): ditto
	(gnome_calendar_set_selected_time_range): ditto
	(gnome_calendar_dayjump): ditto
	(update_view_times): set the time ranges on the models
	(set_view): use the new preserve day setting
	(gnome_calendar_set_view): don't update the view times, just
	switch
	(gnome_calendar_get_selected_time_range): get the time range
	(gnome_calendar_on_date_navigator_selection_changed): don't
	re-update the date navigator, centralize the view setting

	* gui/e-week-view.c (time_range_changed_cb): handle the time range
	changing
	(process_component): move here
	(model_changed_cb): handle the model changing
	(update_row): updated a changed row
	(model_row_changed_cb): update a row
	(model_cell_changed_cb): ditto
	(model_rows_inserted_cb): handle events being added
	(row_deleted_check_cb, remove_uid_cb, model_rows_deleted_cb):
	handle events being deleted
	(timezone_changed_cb): handle timezone changing
	(e_week_view_init): create the model and listen to it
	(e_week_view_new): don't create the model here
	(e_week_view_set_selected_time_range): no need to cast
	(e_week_view_set_first_day_shown): ditto
	(e_week_view_set_weeks_shown): ditto
	(e_week_view_update_event_cb): free and copy the data using new
	routines
	(e_week_view_foreach_event): step through every event
	(e_week_view_remove_event_cb): we no longer track allocated status
	(e_week_view_on_button_release): don't set the seleciton in the
	calendar
	(e_week_view_free_events): free the data with the util
	(e_week_view_add_event): no need to track allocated status
	(e_week_view_on_adjustment_changed): no need to cast

	* gui/e-day-view.c (e_day_view_class_init): update query is no
	longer used via class method
	(time_range_changed_cb): handle the time range changing
	(process_component): move here
	(model_changed_cb): handle the model changing
	(update_row): updated a changed row
	(model_row_changed_cb): update a row
	(model_cell_changed_cb): ditto
	(model_rows_inserted_cb): handle events being added
	(row_deleted_check_cb, remove_uid_cb, model_rows_deleted_cb):
	handle events being deleted
	(timezone_changed_cb): handle timezone changing
	(e_day_view_init): create a model, connect to its signals
	(e_day_view_destroy): we don't have our own query anymore
	(e_day_view_update_event_cb): free and copy the data using new
	routines
	(e_day_view_remove_event_cb): we no longer track allocated status
	(e_day_view_set_selected_time_range): actually set the selection
	(e_day_view_recalc_day_starts): no need to cast
	(e_day_view_recalc_work_week): ditto
	(e_day_view_update_calendar_selection_time): don't call back to
	the main calendar
	(e_day_view_free_event_array): use the free util
	(e_day_view_add_event): don't track allocated status

	* gui/e-calendar-marshal.list: add marshaller

	* gui/e-cal-view.h: remove field

	* gui/e-cal-view.c: no longer listen for model signals
	(e_calendar_view_class_init): make the model arg not construct
	time

	* gui/e-cal-model.h: update/add protos

	* gui/e-cal-model.c (e_cal_model_class_init): set the dispose
	handler and add a time_range_changed signal
	(e_cal_model_init): defaults for queries
	(e_cal_model_dispose): dispose of things
	(e_cal_model_finalize): remove bits that are in dispose now
	(search_by_uid_and_client): allow NULL client to find any uid
	(e_cal_view_objects_added_cb): ref the client
	(update_e_cal_view_for_client): use the full query
	(remove_client): pre change for each row and emit deleted signals
	(redo_queries): relaunch the query for each client
	(e_cal_model_get_time_range): get the time range
	(e_cal_model_set_time_range): set the time range and redo the
	queries
	(e_cal_model_set_search_query): get the search query
	(e_cal_model_set_search_query): set the search query and redo the
	queries
	(e_cal_model_get_component_for_uid): get the component info based
	on uid
	(copy_ecdv): copy and ECellDateEditValue
	(e_cal_model_copy_component_data): copy component data
	(e_cal_model_free_component_data): unref the client

2004-03-15  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #48112

	* gui/calendar-commands.c (calendar_control_sensitize_calendar_commands):
	disable the 'Delete' menu item on recurring meetings, since 'Delete all
	Occurrences' already deals with that.

2004-03-15  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #35577

	* gui/e-cal-view.c (e_calendar_view_delete_selected_occurrence):
	if the component is an instance, pass the recurrence ID to
	e_cal_remove_object_with_mod. Also, make the user confirm the
	deletion, and send the cancellation message for meetings.

2004-03-12  Not Zed  <NotZed@Ximian.com>

	* gui/e-cal-model.c (ecm_initialize_value): return "" instead of
	NULL if there is no default_category set.  Fixes #53419.

2004-03-09  Kidd Wang  <kidd.wang@sun.com>

	* gui/e-day-view.c: (e_day_view_finish_long_event_resize): add a call
	to e_cal_component_commit_sequence since we have changed the property
	of the component. Whether the new event is all day should also be
	set properly according to the value of the original event.

2004-03-08  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #48106

	* gui/dialogs/alarm-page.glade: s/Send an Email/Send an email.

2004-03-05  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/alarm-notify.c (alarm_notify_init): set a GConf
	listener callback to list for changes in selected calendars.
	(alarm_notify_finalize): remove the GConf notification listener.
	(conf_changed_cb): callback to react on configuration changes. Process
	the new selected calendars and remove the unselected ones.
	(process_removal_in_hash): callback to remove unselected calendars.

2004-03-04  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #50294

	* gui/e-tasks.c (setup_widgets): connect to "model_rows_deleted" signal
	on the ETable's model.
	(model_rows_deleted_cb): callback for clearing the preview widget when
	the currently selected task is removed.

2004-03-04  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-commands.c (calendar_control_sensitize_calendar_commands):
	set the sensitivity correctly, depending on whether the command applied
	to the currently selected event or the default client.
	(calendar_control_activate): make sure we start with the menu items
	correctly enabled/disabled.

2004-03-04  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #53496

	* gui/dialogs/cal-prefs-dialog.glade: set the same spacing for all
	tabs in the notebook.

2004-03-04  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/comp-editor.c (comp_editor_append_page): always add
	the page.

	* gui/dialogs/event-page.c (event_page_fill_widgets): continue filling
	up all other fields even if there are missing ones, and return the
	validation result.

2004-03-04  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/alarm-notify-dialog.c (alarm_notify_dialog):
	don't make the dialog window sticky, the icon on the system tray
	already shows in all workspaces.

2004-03-04  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #54028

	* gui/alarm-notify/alarm-queue.c (query_objects_changed_cb): fixed the
	time range for the alarm query, to include the end of today.

2004-03-04  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #53137

	* gui/dialogs/comp-editor-page.[ch]: made fill_widgets virtual
	method return a gboolean.
	(comp_editor_page_fill_widgets): return value from virtual method
	implementation.

	* gui/dialogs/event-page.c (event_page_fill_widgets):
	* gui/dialogs/meeting-page.c (meeting_page_fill_widgets):
	* gui/dialogs/recurrence-page.c (recurrence_page_fill_widgets):
	* gui/dialogs/schedule-page.c (schedule_page_fill_widgets):
	* gui/dialogs/task-details-page.c (task_details_page_fill_widgets):
	* gui/dialogs/task-page.c (task_page_fill_widgets):
	* gui/dialogs/alarm-page.c (alarm_page_fill_widgets): return value,
	as expected from the virtual method signature.

	* gui/dialogs/comp-editor.c (comp_editor_append_page): dont add the
	page if there was an error calling the fill_widgets method.

2004-03-03  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-cal-model.c (e_cal_model_add_client): prevent from adding
	the same client more than once.

2004-03-02  Rodrigo Moya <rodrigo@ximian.com>

	* gui/cal-search-bar.c: added support for searching the location
	field also.
	(regen_query): take into account the new search field.

2004-03-02  JP Rosevear <jpr@ximian.com>

	* gui/Makefile.am: remove conduit dir creation

2004-03-02  Larry Ewing  <lewing@ximian.com>

	* gui/calendar-component.c: add untested start of dnd support for
	source selector.

2004-03-01  Dan Winship  <danw@ximian.com>

	* gui/alarm-notify/alarm-notify.c: fix rampant double-freeing.

2004-03-01  Rodrigo Moya <rodrigo@ximian.com>

	* gui/itip-utils.c (comp_server_send): pass the user list and
	returned icalcomponent to e_cal_send_objects().

2004-03-01  Kidd Wang  <kidd.wang@sun.com>

	* gui/print.c: (print_date_label): ignore the timezone info of all-day
	events.

2004-02-27  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.h: remove proto

	* gui/gnome-cal.c (set_query): rename from
	gnome_calendar_set_query and make static

	* gui/e-day-view.h: remove proto for dead function

	* gui/e-day-view.c: guard config.h include

2004-02-26  Rodney Dawes  <dobey@ximian.com>

	* gui/e-meeting-time-sel.c (e_meeting_time_selector_construct):
	Create the arrows in these widgets as GTK_SHADOW_NONE, since the
	default arrow type in GTK+ 2.x is flat triangle arrows, and shadow
	types are generally ignored for arrows anyway, and so we don't look
	ugly with themes that handle shadow types on arrows correctly

2004-02-26  Rodney Dawes  <dobey@ximian.com>

	* gui/alarm-notify/GNOME_Evolution_Calendar_AlarmNotify.server.in.in:
	Fix the repo_id to include the evolution base version

2004-02-26  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.c (client_cal_opened_cb): make sure we unref the
	task pad client and the calendar clients are unreffed by the hash
	table

2004-02-24  JP Rosevear <jpr@ximian.com>

	* gui/migration.c (migrate_calendars): fix float type pane
	position keys (we migrated these improperly in the past), just use
	the default value

	Fixes #53087

2004-02-18  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/alarm-notify.c (free_client_hash): remove the client
	from the queue also.

	* gui/gnome-cal.c (client_cal_opened_cb): set the task pad client to NULL
	if opening it failed. Show more verbose status bar messages.

2004-02-18  Rodrigo Moya <rodrigo@ximian.com>

	* common/authentication.c (auth_func_cb): call first e_passwords_get_password
	before calling _ask_password.

	* gui/alarm-notify/alarm-queue.c (query_objects_changed_cb): add 1 second
	to the last notification time, or we'll get many times the same notification.

2004-02-18  Kidd Wang  <kidd.wang@sun.com>

	* gui/e-cal-view.c: (e_calendar_view_add_event),
	(clipboard_get_text_cb): make copy & paste and drag & drop behave
	the same way described as follows:
	In day view and work week view
		from main canvas to top canvas
			before copy or drag: short event
			after paste or drop: all-day event
		from main canvas to main canvas
			before copy or drag: short event
			after paste or drop: short event
		from top canvas to top canvas
			before copy or drag: all-day event
			after paste or drop: all-day event			
			before copy or drag: long event
			after paste or drop: long event
		from top canvas to main canvas
			before copy or drag: all-day event
			after paste or drop: short event
			before copy or drag: long event
			after paste or drop: short event
	In week view, month view and list view life is pretty simple since
	there's no top canvas in these three views. We just get what we copy
	or drag after we perform paste or drop.

2004-02-18  Kidd Wang  <kidd.wang@sun.com>

	* gui/itip-utils.c: (itip_send_comp): set the string length properly.

2004-02-16  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/alarm-queue.c (tray_icon_clicked_cb): removed buggy
	characters from menu items' texts.

2004-02-16  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/alarm-notify.c (alarm_notify_add_calendar): open the
	calendars asynchonously.
	(cal_opened_cb): callback for "cal_opened" signal. Add the calendars to
	the alarm queue here.

	* gui/alarm-notify/alarm-queue.c (query_objects_changed_cb): get alarms
	since the last notification, only use current time when there is no
	previous notification time.

	* gui/alarm-notify/notify-main.c (init_session): set session restart
	style to RESTART_IF_RUNNING.

2004-02-16  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/notify-main.c: no need to keep the master client.
	(init_session): just set the daemon's restart style, not the restart
	command. Connect to "save_yourself" signal on the session also.
	(save_session_cb): set the restart command here.

2004-02-12  Hans Petter Jansson  <hpj@ximian.com>

	* gui/dialogs/copy-source-dialog.c (copy_source_dialog): Instead
	of saying "Select destination source", we now say "... calendar" or
	"... task list", based on object type.

2004-02-12  Chris Toshok  <toshok@ximian.com>

	* gui/migration.c (CONTACTS_BASE_URI): rename from
	CONTACT_BASE_URI, and change to contacts:// to match e-d-s.
	(create_calendar_contact_source): CONTACT -> CONTACTS.
	(create_calendar_sources): same.

2004-02-13  Bruce Tao  <bruce.tao@sun.com>
                                                                                
        See #51567
	* gui/dialogs/delete-comp.c (delete_component_dialog):
        use "gtk_dialog_add_buttons" to change the response_id of button
        "YES" and "NO".

2004-02-11  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #53886

	* gui/gnome-cal.c (gnome_calendar_paste_clipboard,
	gnome_calendar_delete_selection, gnome_calendar_cut_clipboard,
	gnome_calendar_copy_clipboard): removed g_assert_if_reached calls
	since we might get a different widget getting the focus.
	(get_focus_location): check the canvas's' focused item.

2004-02-11  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #53271

	* gui/calendar-component.c (delete_calendar_cb): remove the source from
	the GnomeCalendar widget also.

	* gui/tasks-component.c (delete_task_list_cb): ditto.

2004-02-11  Kidd Wang  <kidd.wang@sun.com>

	* gui/print.c: (print_date_label): guarantee we do have some timezone
	before the time convertion.

2004-02-10  JP Rosevear <jpr@ximian.com>

	* importers/icalendar-importer.c: remove useless include

	* importers/Makefile.am: remove executable build cruft

2004-02-09  Rodrigo Moya <rodrigo@ximian.com>

	* gui/gnome-cal.c (client_cal_opened_cb): don't add the clients to the
	internal hash/list here, just remove it if opening the calendar fails.
	(gnome_calendar_add_event_source): add the client to the internal
	hash/list here.

2004-02-09  Kidd Wang  <kidd.wang@sun.com>

	* gui/e-cal-model-tasks.c: (ecmt_set_value_at): refuse to update
	the task info if due date is before start date.

2004-02-05  JP Rosevear <jpr@ximian.com>

	* Convert the calendar_config_get_timezone and
	icaltimezone_get_builtin_timezone pair to just
	calendar_config_get_icaltimezone, this also guarantees we will
	have some timezone (even if its just UTC)

	Fixes #53754
	
2004-02-05  JP Rosevear <jpr@ximian.com>

	* gui/calendar-config.h: add proto

	* gui/calendar-config.c (calendar_config_get_icaltimezone): return
	the icaltimezone based on the location and default to utc if we
	can't find one
	(calendar_config_get_hide_completed_tasks_sexp): use above

2004-02-05  JP Rosevear <jpr@ximian.com>

	* gui/dialogs/cal-prefs-dialog.c (set_color_picker): make failure
	not so draconian - make the color black

	Fixes #53547
	
2004-02-05  Kidd Wang  <kidd.wang@sun.com>

	* gui/goto-dialog.glade: add a mnemonic for the 'Go to Today' button
	in the 'Go To Date' dialog.

2004-02-05  Sarfraaz Ahmed <asarfraaz@novell.com>

        Fixes #53388

        * gui/e-itip-control.c (get_next): added a check for NULL

2004-02-04  JP Rosevear <jpr@ximian.com>

	* importers/icalendar-importer.c (gnome_calendar_import_data_fn):
	use new cal auth functions

	* common/authentication.c (auth_new_cal_from_default): get a
	default calendar with auth

	* common/authentication.h: add proto

2004-02-04  JP Rosevear <jpr@ximian.com>

	* importers/icalendar-importer.c (importer_destroy_cb): we only
	have a single client to free
	(prepare_events): make the vtodo list optional
	(button_toggled_cb): handle the type of thing to import switching
	(primary_selection_changed_cb): handle the selected item switching
	(create_control_fn): create a control with types (events, tasks)
	and corresponding source selectors
	(process_item_fn): only import one type of item at a time
	(load_file_fn): load the ecal as dictated by the source and type
	(vcal_importer_new): pass in control function
	(gnome_calendar_import_data_fn): get the default calendars

	* importers/Makefile.am (importersdir): add lib

2004-02-04  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #52970

	* idl/evolution-calendar.idl: added back the AlarmNotify interface.

	* gui/alarm-notify/GNOME_Evolution_Calendar_AlarmNotify.server.in.in:
	changed to have the AlarmNotify component be created via a factory.

	* gui/alarm-notify/alarm-notify.[ch]: converted to implement the
	AlarmNotify interface.

	* gui/alarm-notify/notify-main.c (main): register the factory with
	bonobo_generic_factory_new, not the object itself. Removed redundant
	call to bonobo_object_unref. Call e_passwords_shutdown on exit.

	* gui/alarm-notify/config-data.c (config_data_get_calendars_to_load):
	get only the selected calendars/task lists.

2004-02-04  Rodrigo Moya <rodrigo@ximian.com>

	* gui/gnome-cal.c (gnome_calendar_add_event_source): don't update the
	date navigator query nor the internal lists here...
	(client_cal_opened_cb): do it here.

2004-02-04  Rodrigo Moya <rodrigo@ximian.com>

	* gui/main.c (launch_alarm_daemon_cb): display the exception message
	on error.

	* gui/gnome-cal.c (open_ecal): open calendars asynchronously.
	(client_cal_opened_cb): on success, add the clients to the models here.
	(gnome_calendar_add_event_source, gnome_calendar_construct): not here.

2004-02-04  Kidd Wang  <kidd.wang@sun.com>

	* gui/dialogs/alarm-page.glade: change the access key for adding a
	reminder from Alt+a to Alt+d to avoid conflict with the menuitem.

2004-02-04 Yong Sun <Yong.Sun@sun.com>

	* gui/print.c: Fix a bug in evolution/calendar/gui/print.c:
	bound_text(). It does not break lines with the correct boundary of UTF-8
	characters. So, for non-latin locales, it will cause printing issues.

2004-02-03  Dan Winship  <danw@ximian.com>

	* gui/tasks-component.h: Fix location of e-activity-handler.h
	#include

	* gui/Makefile.am (INCLUDES): add widgets/misc for
	e-activity-handler.h and e-task-bar.h

	* gui/dialogs/Makefile.am (INCLUDES): Likewise

2004-02-02  JP Rosevear <jpr@ximian.com>

	* importers/icalendar-importer.c (support_format_fn): use
	g_file_get_contents
	(load_file_fn): ditto
	(vcal_support_format_fn): ditto
	(load_vcalendar_file): ditto

2004-01-30  JP Rosevear <jpr@ximian.com>

	* remove dead files

2004-01-29 Gary Ekker <gekker@novell.com>

	Fixes #51871

	* gui/dialogs/calendar-setup.c (calendar_setup_edit_calendar): add
	activate handler for name_entry
	(calendar_setup_edit_task_list): ditto

2004-01-30  JP Rosevear <jpr@ximian.com>

	* gui/tasks-component.c (create_new_todo): remove extraneous ;

	Fixes #53418

2004-01-29  JP Rosevear <jpr@ximian.com>

	* gui/migration.c (create_calendar_contact_source): don't set the
	group to be read only until after the source is added.

2004-01-29  JP Rosevear <jpr@ximian.com>

	* gui/migration.c (migrate_ical_folder_to_source): migrate to a
	specific source
	(migrate_ical_folder): create a new source based on the new source
	name/uid
	(create_calendar_contact_source): use the #define for the base uri
	(create_calendar_sources): try and find the right sources if they
	already exist
	(create_task_sources): ditto
	(migrate_calendars): make sure the personal source is the system
	source
	(migrate_tasks): ditto

2004-01-29  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-view.c (calendar_view_get_type_code): added support for
	the list view also.

2004-01-28  Rodrigo Moya <rodrigo@ximian.com>

	* gui/gnome-cal.c (update_query):
	* gui/e-cal-list-view.c (e_cal_list_view_update_query):
	* gui/e-cal-view.c (e_calendar_view_update_query): stop status bar
	messages madness.

2004-01-27  JP Rosevear <jpr@ximian.com>

	* gui/calendar-component.c (delete_calendar_cb): use e_cal_remove

	* gui/tasks-component.c (delete_task_list_cb): ditto

2004-01-27  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #53276

	* gui/dialogs/copy-source-dialog.c (show_error): new function to
	create an error message dialog.
	(copy_source): check if the destination calendar is read only, and
	if so, don't try to copy components over. Fixed leaks. Call show_error
	to display meaningful error messages.

2004-01-26  JP Rosevear <jpr@ximian.com>

	* gui/migration.c (migrate_ical_folder): add the source to the
	group so it actually shows up

2004-01-26  JP Rosevear <jpr@ximian.com>

	* gui/migration.c (migrate_calendars): get the source name with
	out using freed memory
	(migrate_tasks): ditto

2004-01-26  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #53338

	* gui/dialogs/calendar-setup.c (dialog_to_source): set the relative
	URI on the source for remote sources.

2004-01-26  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #52312

	* gui/dialogs/calendar-setup.c (create_new_source_with_group):
	* gui/migration.c (migrate_ical_folder, create_calendar_sources,
	create_task_sources): set the relative URI for local calendars and
	task lists to be the source UID.

2004-01-24  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.[ch]
	(calendar_component_peek_source_selector): new function.

	* gui/tasks-component.[ch]
	(tasks_component_peek_source_selector): new function.

	* gui/e-tasks.c (backend_died_cb):
	* gui/gnome-cal.c (backend_died_cb): don't tell the user to restart
	Evolution, there is no need now, just unselecting and selecting
	back the calendar loads it again. Also, remove the crashed client
	from the list of loaded clients. Also, unselect the source on
	the source selector.

2004-01-24  JP Rosevear <jpr@ximian.com>

	* gui/tasks-component.c (update_primary_selection): use
	e_source_list_peek_source_any
	(setup_create_ecal): ditto
	(create_new_todo): just use the default call directly
	(update_uris_for_selection): just use e-tasks remove/add todo
	source directly

2004-01-24  JP Rosevear <jpr@ximian.com>

	* gui/e-tasks.c (e_tasks_add_todo_source): don't unref and ref,
	the hash table does this
	(e_tasks_remove_todo_source): ditto

	Fixes #53281

2004-01-24  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-calendar-table.c (e_calendar_table_init): use the colors from
	the model as background, not as foreground.

	* gui/e-cal-model-tasks.c (ecmt_get_color_for_component): return the
	color assigned to each URI if it's not overdue.

2004-01-24  JP Rosevear <jpr@ximian.com>

	* gui/tasks-component.c (delete_task_list_cb): sync the source
	list after the source removal

	* gui/calendar-component.c (delete_calendar_cb): ditto

	Fixes #53271
	
2004-01-24  JP Rosevear <jpr@ximian.com>

	* gui/migration.c (setup_progress_dialog): display a progress
	dialog
	(dialog_close): destroy it
	(dialog_set_folder_name): display the folder being migrated
	(dialog_set_progress): update the progress
	(check_for_conflict): make sure we don't name anything the same
	(get_source_name): create a source name
	(migrate_ical): migrate the events/tasks from one ecal to another
	(migrate_ical_folder): migrate a specific folder
	(migrate_calendars): use above
	(migrate_tasks): ditto

2004-01-23  Rodney Dawes  <dobey@ximian.com>

	* gui/e-itip-control.c: Use PUBLISH if no METHOD defined

	Fixes #45564

2004-01-22  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-cal-model.c (e_cal_view_objects_removed_cb): don't assert
	if we can't find the component, just continue with next item in
	the list.

2004-01-22  JP Rosevear <jpr@ximian.com>

	* gui/migration.c (process_old_dir): remove useless e_mkdir_hier
	call.

	Fixes #53065

2004-01-22  JP Rosevear <jpr@ximian.com>

	* gui/e-tasks.c (e_tasks_setup_view_menus): Remove debugging
	statement

2004-01-22  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.c (setup_widgets): use the calendar component
	config dir
	(gnome_calendar_setup_view_menus): use the calendar component base
	dir for the view storage

	* gui/e-tasks.c (e_tasks_setup_view_menus): use the task component
	base dir for the view storage

	Fixes #53133

2004-01-21  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-tasks.c (e_tasks_add_todo_source): check return value
	from auth_new_cal_from_source(). Connect to "backend_died"
	signal on the ECal class.
	(backend_died_cb): callback for "backend_died" that displays
	an error message when that happens.

	* gui/gnome-cal.c (backend_died_cb): use a GtkMessageDialog.

2004-01-21  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-tasks.[ch] (e_tasks_add_todo_uri, e_tasks_remove_todo_uri,
	e_tasks_get_default_uri): renamed to _source and made them work
	with ESource's.

	* gui/tasks-component.c (update_uri_for_primary_selection,
	add_uri_for_source, remove_uri_for_source):
	* gui/tasks-control.c (tasks_control_set_property): updated for
	changes in e-tasks.[ch].

2004-01-21  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/calendar-setup.c (create_new_source_with_group):
	added 'ECalSourceType' argument to be able to create the
	ECal correctly. Added a call to e_cal_open with 'only_if_exists'
	set to FALSE so that the backend creates the calendar.
	(new_calendar_finish, new_task_list_finish): pass new argument
	to create_new_source_with_group.

2004-01-21  Rodrigo Moya <rodrigo@ximian.com>

	* gui/tasks-component.c (delete_task_list_cb): call
	e_cal_remove_calendar to actually remove the task list via
	the backend.

2004-01-21  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #51705

	* gui/calendar-component.c (delete_calendar_cb): call
	e_cal_remove_calendar to actually remove the calendar via
	the backend.

2004-01-21  JP Rosevear <jpr@ximian.com>

	* gui/dialogs/calendar-setup.c (calendar_setup_new_calendar): just
	use the convienence function for the default gconf client (fixes
	leak)
	(calendar_setup_new_task_list): ditto
	(new_task_list_finish): we don't support task uri's
	
2004-01-21  JP Rosevear <jpr@ximian.com>

	* gui/dialogs/calendar-setup.c (source_to_dialog): only block
	widgets that exist

2004-01-19  JP Rosevear <jpr@ximian.com>

	* gui/e-cal-model-tasks.c (ensure_task_not_complete): correct
	property name c/p error

	Fixes # 52269
	
2004-01-19  JP Rosevear <jpr@ximian.com>

	* gui/tasks-component.c (update_primary_selection): handle the
	case where we have a bogus uid

	* gui/calendar-component.c (update_primary_selection): ditto
	
2004-01-19  Radek Doulik  <rodo@ximian.com>

	* gui/print.c (print_day_add_event): uncomment and use
	ECalModelComponent
	(print_day_details): use e_cal_model_generate_instances
	(print_day_details_cb): use ECalModelGenerateInstancesData
	(print_day_long_event): use event color
	(print_day_event): ditto
	(print_month_small): use e_cal_model_generate_instances
	(instance_cb): use ECalModelGenerateInstancesData

2004-01-18  Radek Doulik  <rodo@ximian.com>

	* gui/print.c (print_border_with_triangles): use rgb color as
	fillcolor
	(print_week_day_event): ditto
	(print_table): set page orientation, it may be changed from last
	printing
	(print_comp): ditto

	* gui/e-cal-model.c (e_cal_model_get_rgb_color_for_component): new
	helper function, gets component color as rgb double values

	* gui/print.c (print_week_summary_cb): uncommented and updated for
	e_cal_model_generate_instances
	(print_week_summary): use e_cal_model_generate_instances
	(print_border_with_triangles): pass rgb fillcolor
	(print_border_rgb): new function to print border with rgb color
	background

	* gui/e-cal-model.c (e_cal_model_generate_instances): new
	function, similar to e_cal_generate_instances. see comments to
	understand how to use cb_data

2004-01-17  JP Rosevear <jpr@ximian.com>

	* gui/e-calendar-table.c (e_calendar_table_delete_selected): don't
	create the component if there is a multiple selection

	Fixes #52266
	
2004-01-17  JP Rosevear <jpr@ximian.com>

	* gui/e-cal-view.c (on_print): we are required to pass in the end
	in-out arg

	Fixes #52972
	
2004-01-17  JP Rosevear <jpr@ximian.com>

	* gui/print.h: update protos

	* gui/print.c (print_title): util routine to print a title
	(print_table): print out an etable

	* gui/calendar-commands.c (print): handle printing the list view

	* gui/e-cal-list-view.etspec: draw the grid to mimic tasks

	* gui/tasks-control.c (tasks_control_print_cmd): use print_table

	Fixes #51751, #52958
	
2004-01-16  JP Rosevear <jpr@ximian.com>

	* gui/calendar-commands.c (print): handle list view by printing
	the month

2004-01-16  JP Rosevear <jpr@ximian.com>

	* gui/e-itip-control.c (find_server): we actually want to not
	return on any error as well (like NOT FOUND)

2004-01-16  JP Rosevear <jpr@ximian.com>

	* gui/e-comp-editor-registry.h: convert to GObject

	* gui/e-comp-editor-registry.c (registry_data_free): routine to
	free the registry data
	(dispose): destroy the registry data
	(finalize): finalize it
	(class_init): setup above
	(init): create full hash table
	(e_comp_editor_registry_add): weak ref the editor and strdup the
	hash table key
	(editor_destroy_cb): we get the registry data now, just remove it

	* gui/dialogs/comp-editor.c (close_dialog): disconnect the signal
	handlers, its a bit of a hack but it is a simple fix

2004-01-16  Radek Doulik  <rodo@ximian.com>

	* gui/print.c (print_calendar): don't set old orientation, preview
	needs right orientation even after everything is printed

2004-01-16  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #52920

	* gui/dialogs/calendar-setup.glade: match label's text with the
	button's text.

2004-01-16  Rodrigo Moya <rodrigo@ximian.com>

	* gui/tasks-component.c (impl_dispose): unref the activity
	handler.

2004-01-16  Rodrigo Moya <rodrigo@ximian.com>

	* gui/tasks-component.[ch]
	(tasks_component_peek_activity_handler): new function.
	(impl_createControls): create a task bar also for the tasks
	component. We can't rely on the calendar component's one.
	(tasks_component_init): create the private activity handler.

	* gui/e-calendar-table.c (e_calendar_table_set_status_message):
	use the tasks component's activity handler.

	* gui/e-tasks.c (on_url_cb): new callback to display status
	bar messages when mousing over links.
	(setup_widgets): connect to "on_url" signal on the HTML widget.

2004-01-15  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/comp-editor.c: reverted my changes made on Jan 8th.

2004-01-15  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/save.[ch]: removed.

	* gui/alarm-notify/Makefile.am: removed save.[ch].

	* gui/alarm-notify/notify-main.c: removed obsolete headers.

	* gui/alarm-notify/config-data.[ch]
	(config_data_set_last_notification_time,
	config_data_get_last_notification_time,
	config_data_save_blessed_program, config_data_is_blessed_program):
	new functions.

	* gui/alarm-notify/alarm-queue.c: dont use removed functions.
	(alarm_trigger_cb, procedure_notification_dialog,
	alarm_queue_init):
	use config_data_* functions.
	
	* gui/alarm-notify/alarm-notify.c: dont use removed functions.

2004-01-15  JP Rosevear <jpr@ximian.com>

	* gui/tasks-component.h: update protos
	
	* gui/tasks-component.c (impl_finalize): free base dir
	(impl_upgradeFromVersion): just call migrate_tasks
	(tasks_component_init): set base dir value
	(tasks_component_peek_base_directory): accessor
	(tasks_component_peek_source_list): ditto

	* gui/migration.c (process_old_dir): look for a source with the
	name and fallback to creating it
	(create_calendar_contact_source): create the contacts:// source
	(create_calendar_sources): use above and create all the necessary
	sources
	(create_task_sources): create all the necessary sources
	(migrate_calendars): do all the migration logic here, upgrade
	bonobo-conf to gconf
	(migrate_tasks): ditto

	* gui/calendar-component.h: update prototypes

	* gui/calendar-component.c (impl_finalize): free the base
	directory
	(impl_upgradeFromVersion): just call migrate_calendars
	(calendar_component_init): fill in base dir value
	(calendar_component_peek_base_directory): accessor
	(calendar_component_peek_source_list): ditto

2004-01-15  Radek Doulik  <rodo@ximian.com>

	* gui/calendar-component.c (create_new_event): test priv->calendar
	is not NULL before getting current view

	* gui/tasks-component.c (primary_source_selection_changed_cb):
	reset create_ecal

	* gui/calendar-component.c (impl_requestCreateItem): merge with
	JP's changes
	(primary_source_selection_changed_cb): reset create_ecal

2004-01-14  Radek Doulik  <rodo@ximian.com>

	* gui/e-cal-list-view.c (e_cal_list_view_get_selected_time_range):
	new implementation, use time range from selected event

	* gui/e-cal-view.c (e_calendar_view_get_selected_time_range):
	return gboolean, TRUE if requested time was set, FALSE otherwise
	(e_calendar_view_new_appointment_full): use current time if time
	range is unavailable

	* gui/calendar-component.c (impl_requestCreateItem): use
	e_calendar_view_new_appointment_full instead of
	cal_comp_event_new_with_current_time

	* gui/e-cal-view.c (e_calendar_view_new_appointment_full): new
	helper function

	* gui/comp-editor-factory.c (edit_new): use
	cal_comp_event_new_with_current_time

	* gui/calendar-component.c (impl_requestCreateItem): use
	cal_comp_event_new_with_current_time

	* gui/comp-util.c (cal_comp_event_new_with_current_time): new
	function, cut'n'pasted from get_default_event
	(calendar-component.c and comp-editor-factory.c)

2004-01-14  JP Rosevear <jpr@ximian.com>

	* gui/tasks-component.c (impl_requestCreateItem): new utility
	routine to create new tasks
	(create_new_todo): use above so we don't try to set up the
	creation ecal unless we are actually creating a new item

	* gui/calendar-component.c (create_new_event): new utility routine
	to create new events
	(impl_requestCreateItem): use above so we don't try to set up the
	creation ecal unless we are actually creating a new item

2004-01-14  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-calendar-table.c (e_calendar_table_show_popup_menu):
	use get_selected_objects() instead of get_selected_comp().

2004-01-14  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-cal-model-tasks.c (get_status): removed assertion.

2004-01-14  Rodrigo Moya <rodrigo@ximian.com>

	* common/authentication.c (auth_new_cal_from_source): check
	return value from e_cal_new().

	* gui/gnome-cal.c (gnome_calendar_construct): if there is no
	default tasks folder, don't create the ECal from it.

2004-01-14  JP Rosevear <jpr@ximian.com>

	* gui/tasks-component.c (impl_requestCreateItem): don't try to set
	up the creation ecal unless we are actually creating a new item

2004-01-13  Rodney Dawes  <dobey@ximian.com>

	* gui/Makefile.am: Only link in libsoup where we need it

2004-01-13  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (impl_upgradeFromVersion): free 'base_uri'
	at the end of the function, or it will leak, and removed duplicated
	code to create the birthdays backend.

2004-01-12 Gary Ekker <gekker@novell.com>
 
 	* gui/Makefile.am: add e-pub-utils.[ch]
 	for Free/Busy publishing
 	
 	* gui/apps_evolution_calendar.schemas.in.in: add schema for
 	/apps/evo/calendar/free_busy key
 	
 	* gui/calendar-commands.c (publish_freebusy_cmd): change to
 	publish component rather than attach as email
 	
 	* gui/calendar-config-keys.h: add free_busy/urls key definition
 	
 	* gui/calendar-config.[ch] (calendar_config_get_free_busy): new
   	method for retrieving FB gconf key
 	(calendar_config_set_free_busy): new method for saving FB
 	gconf key
 	
 	* gui/e-cal-view.c (on_publish): change to publish component
 	rather than attach as email
 	
 	* gui/itip-utils.[ch] (itip_publish_begin): new method to process 
 	e_cal_components and aggregate the data if we are publishing
 	for multiple calendars
 	(itip_publish_comp): new method to publish the ical data to an
 	http server via libsoup
 	(comp_fb_normalize): new static method to ensure rfc 2446 compliant 
 	data before publishing icalcomponent_get_uid
 	(fb_sort): new static method to sort FB properties in ascending order
 	
 	* gui/dialogs/Makefile.am: add url-editor-dialog.[ch] and 
 	url-editor-dialog.glade for configure FB publishing
 	
 	* gui/dialogs/cal-prefs-dialog.[ch] (cal_prefs_dialog_url_add_clicked):
 	(cal_prefs_dialog_url_edit_clicked):new method for events in FB tab 
 	of cal-prefs-dialog
 	(cal_prefs_dialog_url_remove_clicked): ditto
 	(cal_prefs_dialog_url_enable_clicked): ditto
 	(cal_prefs_dialog_url_url_list_change): ditto
 	(cal_prefs_dialog_url_url_list_enable_toggled): ditto
 	(cal_prefs_dialog_url_url_list_double_click): ditto
 	(show_fb_config): new method for updating dialog with FB specific
 	data in gconf
 	(update_fb_config): new method for updating gconf with FB specific
 	data from dialogs
 	(setup_changes): detect changes in url_list gtk_tree_view
 	(get_widgets): include new dialog widgets for FB config
 	(init_widgets): connect signals for new FB config widgets
 	
 	* gui/dialogs/cal-prefs-dialog.glade: add new widgets for FB config
 	
 	* gui/dialogs/url-editor-dialog.[ch]: add files for FB url-editor dialog
 	
 	* gui/dialogs/url-editor-dialog.glade: ditto
 	
 	* gui/e-pub-utils.[ch]: add files with FB publishing utilities
 
 	* gui/calendar-component.c (init_calendar_publishing): sets up
 	listeners to publish calendar, g_idle_add, and on gconf change
 	(init_calendar_publishing_cb): ditto
 	(conf_changed_callback): ditto
 	(impl_createControls): ditto

2004-01-12  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (impl_upgradeFromVersion): sync the source
	list after creating the remote source group.

2004-01-12  JP Rosevear <jpr@ximian.com>

	* Revert William McCann's patch of 2003-12-19 until we can get
	consistent across all of evolution

2004-01-12  Hans Petter Jansson  <hpj@ximian.com>

	* gui/dialogs/calendar-setup.c (source_to_dialog): Only update dialog
	widgets if they exist.

2004-01-11  JP Rosevear <jpr@ximian.com>

	* gui/tasks-component.c: Fix copyright notice, its copyright
	Novell not our hackers

	* gui/tasks-component.h: ditto
	
	* gui/calendar-component.c: ditto

	* gui/calendar-component.h: ditto

2004-01-10  Rodrigo Moya <rodrigo@ximian.com>

	* gui/gnome-cal.c (open_ecal): cast the views to E_CALENDAR_VIEW,
	not to E_CAL_VIEW.

2004-01-10  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/notify-main.c: added missing headers.

	* gui/alarm-notify/alarm-notify.c (alarm_notify_remove_calendar):
	use the correct variable when calling alarm_queue_remove_client().

	* gui/calendar-component.c (impl_upgradeFromVersion): removed redundant
	variable declarations.

	* gui/migration.c (process_old_dir):
	* gui/e-timezone-entry.c (e_timezone_entry_mnemonic_activate):
	* gui/e-date-time-list.c (e_date_time_list_finalize):
	* gui/e-alarm-list.c (e_alarm_list_finalize): fixed warnings.

	* gui/e-calendar-table.c: added missing prototypes at the top to
	avoid warnings.

	* gui/e-week-view.c (e_week_view_scroll_a_step):
	* gui/e-day-view.c (e_day_view_event_move): directly return in the
	default: case.

	* gui/e-tasks.c (setup_widgets): connect to changes on the model.
	(model_row_changed_cb): callback to update the HTML detailed view
	when the currently selected task changes.
	(client_obj_updated_cb): removed unused function.
	(set_status_message): changed to accept a variable list of arguments.
	(e_tasks_add_todo_uri): display status messages and get error message
	from backend and display it in a dialog.
	(cal_opened_cb, load_error, method_error, permission_error): removed
	unused functions.

	* gui/gnome-cal.c (open_ecal): added a GnomeCalendar argument, and
	display status messages.
	(gnome_calendar_construct, gnome_calendar_add_event_source):
	adapted to changes in open_ecal().

2004-01-10  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/alarm-queue.c (display_notification): keep
	all the tray icons we create in a list.
	(tray_icon_destroyed_cb): remove the tray icon data from the list.
	(popup_dismiss_cb, popup_dismiss_all_cb): implemented missing
	popup menu items.

2004-01-09  Hans Petter Jansson  <hpj@ximian.com>

	* gui/calendar-component.c (new_calendar_cb): calendar_config ->
	calendar_setup.
	(edit_calendar_cb): Ditto.
	(impl_requestCreateItem): Ditto.

	* gui/tasks-component.c (new_task_list_cb): Use calendar_setup.
	(edit_task_list_cb): Implement properties callback.
	(rename_task_list_cb): Remove.
	(fill_popup_menu_cb): Remove "rename" and add "properties".
	(impl_requestCreateItem): Use calendar_setup.

	* gui/dialogs/Makefile.am (libcal_dialogs_la_SOURCES): calendar_config
	-> calendar_setup. Remove new-task-list.[ch].
	(glade_DATA): calendar_config -> calendar_setup. Remove
	new-task-list.glade.

	* gui/dialogs/new-task-list.[ch]: Remove.

	* gui/dialogs/calendar-config.[ch]: Rename to calendar-setup.[ch].

	* gui/dialogs/calendar-config.glade: Rename to calendar-setup.glade.

2004-01-09  JP Rosevear <jpr@ximian.com>

	* gui/calendar-component.c (impl_upgradeFromVersion): make sure we
	sync the source list when appropriate

	* gui/tasks-component.c (impl_upgradeFromVersion): ditto
	
2004-01-09  ERDI Gergo  <cactus@cactus.rulez.org>

	* gui/calendar-component.c (impl_upgradeFromVersion): Create
	ESource for anniversaries

2004-01-09  Hans Petter Jansson  <hpj@ximian.com>

	* gui/calendar-component.c (new_calendar_cb): Call
	calendar_config_new_calendar().
	(rename_calendar_cb): Remove.
	(edit_calendar_cb): Implement properties callback.
	(fill_popup_menu_cb): Add "Properties..." item and remove "Rename".

	* gui/dialogs/Makefile.am (libcal_dialogs_la_SOURCES): Add
	calendar-config.[ch] and remove new-calendar.[ch].
	(glade_DATA): Add calendar-config.glade and remove new-calendar.glade.

	* gui/dialogs/calendar-config.[ch]: Implement calendar creation and
	editing.

	* gui/dialogs/calendar-config.glade: Add GUI for above.

2004-01-09  JP Rosevear <jpr@ximian.com>

	* gui/tasks-component.c (impl_upgradeFromVersion): return the
	corba values

	* gui/calendar-component.c (impl_upgradeFromVersion): ditto

2004-01-09  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (impl_upgradeFromVersion): only migrate
	old calendars if migrating from <= 1.4.x.

	* gui/tasks-component.c (impl_upgradeFromVersion): ditto for tasks.

2004-01-09  Andrew Wu <Yang.Wu@sun.com>

	* gui/e-cal-view.c (e_calendar_view_class_init):
	add a new signal "event_move" and its key binding.

	* gui/e-cal-view.h:
	add a new type "ECalViewMoveDirection".
	add a new virtual method "event_move" for ECalView.

	* gui/e-day-view.c
	(e_day_view_event_move), (e_day_view_change_event_time):
	Use "Alt + Arrow" to move a selected event through time lines
	or different days.

	* gui/e-day-view.h:
	add a new property "last_edited_comp_string" for EWeekView.

	* gui/e-week-view.c (e_week_view_class_init), (e_week_view_init),
	(e_week_view_reshape_events), (e_week_view_event_move),
	(e_week_view_get_day_offset_of_event), (e_week_view_scroll_a_step),
	(e_week_view_change_event_time), (e_week_view_do_key_press),
	(e_week_view_move_selection_day),
	(e_week_view_get_adjust_days_for_move_up),
	(e_week_view_get_adjust_days_for_move_down),
	(e_week_view_get_adjust_days_for_move_left),
	(e_week_view_get_adjust_days_for_move_right):
	Use "Alt + Arrow" to move a selected event through different days.

	* gui/e-week-view.h:
	add a new property "last_edited_comp_string" for EWeekView.

2004-01-08  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/alarm-queue.c (display_notification): store
	the ECal's associated ECalView, and connect to its "objects_removed"
	signal.
	(notifiy_dialog_cb): disconnect signals from the ECalView, not the
	ECal.
	(on_dialog_objs_removed_cb): adapted to respond to "objects_removed"
	signal on ECalView. Made it destroy the tray bar icon also.
	(add_popup_menu_item): new function to create the popup items.
	(tray_icon_clicked_cb): remove connection to obsolete signal, and
	made it popup a menu on right-click.
	(popup_open_cb, popup_dismiss_cb, popup_dismiss_all_cb): callbacks
	for popup menu.

	* gui/gnome-cal.c (connect_week_view_focus): don't access the
	widget's private fields if NULL.

2004-01-08  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/comp-editor.c (save_comp): moved the line that sets
	priv->updating to FALSE up some lines, to avoid getting callbacks
	with an incorrect value on it.
	(obj_modified_cb): check the UIDs of the objects we get passed to
	see if the one being edited is amongst them.

2004-01-08  Kidd Wang  <kidd.wang@sun.com>

	* gui/e-cal-view.h: delete the ECalViewMoveDirection type declaration
        which was added by mistake yesterday.

        * ChangeLog: add a missed entry for calender-commands.c.

2004-01-07  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/alarm-queue.c (load_alarms): call e_cal_view_start
	to actually start the live query.
	(add_component_alarms): check the 'alarms' parameter before using it.

2004-01-07  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/alarm-queue.c: added an ECalQuery for each loaded
	client.
	(load_alarms): use a live query to the calendar instead of calling
	e_cal_get_alarms_in_range().
	(alarm_queue_add_client): set query initially to NULL.
	(query_objects_changed_cb): renamed and made it manage both
	"objects_added" and "objects_modified" signals of ECalView.
	(query_objects_removed_cb): manage the "objects_removed" signal of
	ECalView.
	(alarm_queue_remove_client): unref the live query.

2004-01-06  JP Rosevear  <jpr@ximian.com>

	* gui/gnome-cal.c (gnome_calendar_add_event_source): remove the
	item from the hash last and don't free its members because the
	hash table does that for us

2004-01-06  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (impl_upgradeFromVersion): new
	method's implementation.
	(calendar_component_class_init): initialize new epv's member.
	(calendar_component_init): moved migration code to
	impl_upgradeFromVersion.
	(update_uri_for_primary_selection): fixed warning.

	* gui/tasks-component.c (impl_upgradeFromVersion): new
	method's implementation.
	(tasks_component_class_init): initialize new epv's member.
	(tasks_component_init): moved migration code to
	impl_upgradeFromVersion.

2004-01-06  JP Rosevear <jpr@ximian.com>

	* gui/e-select-names-renderer.c (esnr_editing_done): disconnect
	the activated signal

2004-01-06  JP Rosevear <jpr@ximian.com>

	* gui/dialogs/comp-editor.c (comp_editor_finalize): we don't put
	any signal handlers on the client or source client now, but we do
	on the view
	(real_set_e_cal): no signal handlers on the client
	(obj_modified_cb): we are guaranteed this is a signal for our
	component
	(obj_removed_cb): ditto
	(listen_for_changes): listen for changes on the object
	(save_comp): use above since the source_client changed
	(real_edit_comp): use above since the comp changed

2004-01-06  JP Rosevear <jpr@ximian.com>

	* gui/e-select-names-renderer.c (esnr_activated): if we are
	de-activated, the editing is done
	(esnr_start_editing): listen for activated signal on the control
	frame

	Fixes #52196
	
2004-01-06  Kidd Wang  <kidd.wang@sun.com>

	* gui/e-calendar-table.[ch] (e_calendar_table_open_selected):
	open a dialog for the selected task.
	* gui/e-tasks.[ch] (e_tasks_open_task): ditto.
	* gui/tasks-control.c (tasks_control_sensitize_commands),
	(tasks_control_open_task_cmd): add a menu item for "Open Task".
	* gui/calender-commands.c: the event should also be allowed to open
	even when it's readonly. 

2004-01-05  Rodrigo Moya <rodrigo@ximian.com>

	* gui/gnome-cal.c (open_ecal): new function to open ECal's, get any
	error information and display it to the user, all-in-one.
	(gnome_calendar_construct, gnome_calendar_add_event_source): use the
	above function, instead of e_cal_open().
	(open_error, method_error, permission_error): removed unneeded
	functions, we just display the error message returned from the
	backend.

2004-01-05  Rodrigo Moya <rodrigo@ximian.com>

	* gui/gnome-cal.c (gnome_calendar_construct): no need to connect to
	the "cal_opened" signal on the task client. Also, added code to
	add the client to the ECalendarTable's model.
	(client_cal_opened_cb, update_e_cal_view_timeout): removed unneeded
	function.

2004-01-05  Rodrigo Moya <rodrigo@ximian.com>

	* gui/gnome-cal.c (gnome_calendar_construct): display the tasks'
	primary selection in the task list, and actually open the tasks
	folder.

	* gui/e-tasks.c (e_tasks_set_default_uri): use the ECalModel to
	get the client for a given URI.

2004-01-04  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (add_uri_for_source,
	remove_uri_for_source): removed redundant functions.
	(update_uris_for_selection): dont call above functions, use
	gnome_calendar_* directly.

2003-12-29  Kidd Wang  <kidd.wang@sun.com>

	* gui/calendar-commands.c (file_open_event_cb): add a menu item
	for "open appointment".

	* gui/e-cal-view.[ch] (e_calendar_view_open_event): add a signal
	"open_event" and bind it to "ctrl+o". When the signal is delivered,
	a dialog will be opened to edit the selected event.

	* gui/e-calendar-table.c (e_calendar_table_on_key_press): press "ctrl-o"
	to open a dialog.

2003-12-24  JP Rosevear <jpr@ximian.com>

	* gui/e-select-names-renderer.c (esnr_start_editing): fix the
	signal name

	* gui/dialogs/meeting-page.glade: add Add Attendee button

	* gui/dialogs/meeting-page.c (get_widgets): extract add button
	(add_clicked_cb): edit the attendee after we add it
	(init_widgets): listen for add clicked
	(meeting_page_construct): the add button is in the glade file now

	* gui/e-select-names-editable.c (esne_start_editing): activate the
	control
	(e_select_names_editable_get_address): handle null dest
	(e_select_names_editable_get_name): ditto

	* gui/e-meeting-store.h: add proto

	* gui/e-meeting-store.c (e_meeting_store_find_attendee_path):
	create the path to a given attendee

	* gui/e-meeting-list-view.h: add proto

	* gui/e-meeting-list-view.c (e_meeting_list_view_edit): start
	editing the address of a particular

2003-12-22  Rodrigo Moya <rodrigo@ximian.com>

	* gui/gnome-cal.[ch] (gnome_calendar_add_event_source,
	gnome_calendar_remove_event_source): renamed from *_uri, to work with
	ESource's rather than with plain URIs.
	(gnome_calendar_set_default_source): ditto.

	* gui/control-factory.c (set_prop):
	* gui/calendar-component.c (add_uri_for_source, remove_uri_for_source,
	update_uri_for_primary_selection):
	use sources instead of uris with the GnomeCalendar widget.

2003-12-22  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/save.c (get_saved_notification_time): if the setting
	is not in the config database, use the current time, to avoid getting
	hundreds of alarms for past events.

2003-12-22  Rodrigo Moya <rodrigo@ximian.com>

	* common/authentication.[ch]: new files for managing interactive
	authentication with backends.

	* common/Makefile.am: build new private library.

	* gui/alarm-notify/alarm-notify.c (alarm_notify_add_calendar):
	* gui/dialogs/event-page.c (source_changed_cb):
	* gui/dialogs/task-page.c (source_changed_cb):
	* gui/dialogs/copy-source-dialog.c (copy_source):
	* gui/calendar-component.c (setup_create_ecal):
	* gui/calendar-offline-handler.c (backend_go_offline,
	backend_go_online, calendar_offline_handler_init):
	* gui/comp-editor-factory.c (open_client):
	* gui/e-itip-control.c (start_calendar_server):
	* gui/e-tasks.c (e_tasks_add_todo_uri):
	* gui/gnome-cal.c (gnome_calendar_construct,
	gnome_calendar_add_event_uri):
	* gui/tasks-component.c (setup_create_ecal):
	* importers/icalendar-importer.c (load_file_fn, vcal_load_file_fn,
	gnome_calendar_import_data_fn): create the ECal's via the
	auth_new_cal_from* functions in the authentication module.

	* gui/alarm-notify/Makefile.am:
	* gui/Makefile.am:
	* importers/Makefile.am: link new private library.
	
	* Makefile.am: added new directory to the build.

2003-12-21  JP Rosevear <jpr@ximian.com>

	* gui/e-itip-control.[hc]: rewrite for new ecal api, cache all
	ecal's by type and minimize loading.  Switch to using the source
	option menu

	* conduits/todo/todo-conduit.c (start_calendar_server): ditto

	* conduits/calendar/calendar-conduit.c (start_calendar_server):
	use ECalSourceType
	
	* importers/icalendar-importer.c (load_file_fn): ditto
	(vcal_load_file_fn): ditto
	(gnome_calendar_import_data_fn): ditto

	* gui/dialogs/task-page.c (source_changed_cb): ditto

	* gui/dialogs/event-page.c (source_changed_cb): ditto

	* gui/dialogs/copy-source-dialog.h: update proto

	* gui/dialogs/copy-source-dialog.c (copy_source_dialog): ditto

	* gui/alarm-notify/alarm-notify.c (alarm_notify_add_calendar): ditto

	* gui/tasks-component.c (copy_task_list_cb): ditto
	(setup_create_ecal): ditto

	* gui/gnome-cal.c (gnome_calendar_construct): ditto
	(gnome_calendar_add_event_uri): ditto

	* gui/e-tasks.c (e_tasks_add_todo_uri): ditto

	* gui/comp-editor-factory.c (open_client): ditto

	* gui/calendar-offline-handler.c (backend_go_offline): ditto
	(backend_go_online): ditto
	(calendar_offline_handler_init): ditto

	* gui/calendar-component.c (copy_calendar_cb): ditto
	(setup_create_ecal): ditto

	* gui/print.c (print_month_small): don't pass type to
	e_cal_generate_instances	
	(print_day_details): ditto
	(print_week_summary): ditto

	* gui/tag-calendar.c (tag_calendar_by_client): ditto
	
2003-12-19  JP Rosevear <jpr@ximian.com>

	* gui/tasks-control.c (tasks_control_sensitize_commands): make
	sure there is a ui container

	* gui/calendar-commands.c (calendar_control_sensitize_calendar_commands): ditto
	
	* gui/tasks-component.c (impl_createControls): update after the
	signals are connected so that the ecal's are actually loaded

	* gui/calendar-component.c: ditto
	
2003-12-19  William Jon McCann  <mccann@jhu.edu>

	* gui/dialogs/task-page.c (source_changed_cb): 
	* gui/dialogs/send-comp.c (send_component_dialog): 
	* gui/dialogs/save-comp.c (save_component_dialog): 
	* gui/dialogs/recur-comp.c (recur_component_dialog): 
	* gui/dialogs/event-page.c (source_changed_cb): 
	* gui/dialogs/delete-error.c (delete_error_dialog): 
	* gui/dialogs/delete-comp.c (delete_component_dialog): 
	* gui/dialogs/changed-comp.c (changed_component_dialog): 
	* gui/dialogs/cancel-comp.c (cancel_component_dialog): 
	* gui/dialogs/alarm-options.glade:
	* gui/dialogs/alarm-page.glade:
	* gui/dialogs/cal-prefs-dialog.glade:
	* gui/dialogs/e-delegate-dialog.glade:
	* gui/dialogs/event-page.glade:
	* gui/dialogs/new-calendar.glade:
	* gui/dialogs/new-task-list.glade:
	* gui/dialogs/recurrence-page.glade:
	* gui/dialogs/task-details-page.glade:
	* gui/dialogs/task-page.glade:
	* gui/tasks-control.c (confirm_purge): 
	* gui/tasks-component.c (delete_task_list_cb) 
	(rename_task_list_cb, setup_create_ecal): 
	* gui/goto-dialog.glade: 
	* gui/e-cal-model-tasks.c (show_geo_warning): 
	* gui/comp-editor-factory.c (cal_opened_cb): 
	* gui/calendar-component.c (delete_calendar_cb) 
	(rename_calendar_cb, setup_create_ecal, delete_calendar_cb): 
	* gui/calendar-commands.c (purge_cmd):
	Remove separators from dialogs.  Use frame style recommended
	by the HIG.

2003-12-18  Rodrigo Moya <rodrigo@ximian.com>

	* gui/tasks-component.c (impl_createControls):
	* gui/calendar-component.c (impl_createControls): make sure we
	connect to the "changed" signals after setting the initial selections
	on the ESourceSelector. Fixes some nasty warnings because of
	calendar_control_sensitize_calendar_commands being called with
	no container yet for the control.

2003-12-17  Hans Petter Jansson  <hpj@ximian.com>

	* gui/dialogs/comp-editor.c: Add the concept of a source client, where
	the object lives currently. The plain client is where it will be
	stored.
	(comp_editor_finalize): If we have a source client, disconnect from
	and unref it.
	(save_comp): Check if the object is being moved, and if so, remove it
	from the source client, and make the target client the new source.
	(comp_editor_append_page): Connect to client_changed signal.
	(real_set_e_cal): Change an old gtk_signal_disconnect_by_data() to
	the GLib equivalent, and don't cast ECal to GtkObject. If the source
	client is not set, make it equivalent to the target client.
	(page_client_changed_cb): Implement. Handles a client change.

	* gui/dialogs/comp-editor-page.c (comp_editor_page_class_init): Add
	a new signal, "client_changed", that notifies that the ECal client
	was changed from one of the editor pages.
	(comp_editor_page_set_e_cal): Fix two bugs in this function; if the
	same client is set twice, its ref count could drop to 0. Additionally,
	it was unreffing the new client instead of the old one.
	(comp_editor_page_notify_client_changed): Implement.

	* gui/dialogs/event-page.c (event_page_fill_widgets): Fill in the
	source menu.
	(get_widgets): Get the source menu.
	(source_changed_cb): Implement. Try to open a client for the new
	source, and if successful, notify of the change. Show a dialog on
	failure, and revert to last selected source.
	(init_widgets): Connect to source menu.
	(event_page_create_source_option_menu): Implement Glade helper.

	* gui/dialogs/task-page.c (task_page_fill_widgets): Fill in the source
	menu.
	(get_widgets): Get the source menu.
	(source_changed_cb): Implement, similar to the event page, but for
	tasks.
	(init_widgets): Connect to source menu.
	(task_page_construct): Fix a message booboo.
	(task_page_create_source_option_menu): Implement Glade helper.

	* gui/dialogs/event-page.glade: Add source menu widget.

	* gui/dialogs/task-page.glade: Add source menu widget.

2003-12-17  Rodrigo Moya <rodrigo@ximian.com>

	* gui/tasks-component.c (add_popup_menu_item):
	* gui/calendar-component.c (add_popup_menu_item): use g_file_test
	to check if the 'pixmap' argument is a file. If so, get the pixmap
	from it, or gtk_image_new_from_stock will return an empty pixmap.

2003-12-17  Rodrigo Moya <rodrigo@ximian.com>

	* gui/gnome-cal.c (client_cal_opened_cb): set a correct status
	message.

	* gui/tasks-component.c (fill_popup_menu_cb):
	* gui/calendar-component.c (fill_popup_menu_cb): use the folder*.png
	icons for folder operations.

	* gui/Makefile.am: removed cal-client directory from $INCLUDES.

2003-12-17  Harry Lu  <harry.lu@sun.com>
 
 	Fixes #51665.
 
 	* gui/e-week-view.c: (e_week_view_focus): call 
 	e_week_view_check_layout() so that the spans won't be NULL.

2003-12-17  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-commands.c: removed the 'NewCalendar' verb.
	(file_new_calendar_cb): removed callback for 'NewCalendar' verb.

	* gui/calendar-component.c: (impl__get_userCreatableItems): added
	'New Calendar' to the list of user creatable items.
	(impl_requestCreateItem): implemented 'New Calendar'.

	* gui/tasks-component.c (impl__get_userCreatableItems): added
	'New Task List' to the list of user creatable items.
	(impl_requestCreateItem): implemented 'New Task List'.

2003-12-17  Rodrigo Moya <rodrigo@ximian.com>

	* gui/tasks-control.[ch] (tasks_control_sensitize_commands): made
	it public.

	* gui/tasks-component.c (update_uri_for_primary_selection): call
	tasks_control_sensitize_commands() when the primary selection
	changes.

2003-12-17  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (update_uri_for_primary_selection): call
	calendar_control_sensitize_calendar_commands when the primary selection
	changes.
	(impl_createControls): keep the view_control in the private structure and
	use control_factory_new_control() to create the control.
	(control_activate_cb): removed unneeded function.

	* gui/tasks-component.c (impl_createControls): use tasks_control_new to
	create the tasks view control.
	(control_activate_cb): removed unneeded function.

	* gui/gnome-cal.c (gnome_calendar_add_event_uri): check the return
	value from e_cal_new_from_uri.

2003-12-17  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/alarm-notify.c (alarm_notify_remove_calendar):
	make sure we free the data stored in the hash table.
	(alarm_notify_add_calendar): call alarm_queue_add_client, or we wont
	have alarms at all.

	* gui/alarm-notify/alarm-queue.c: no need to hold a ref count.
	(alarm_queue_add_client, alarm_queue_remove_client): don't use the
	refcount private member.
	(alarm_queue_add_client): don't connect to non-existing ECal signals.
	(display_notification, free_client_alarms_cb): fixed warnings.

2003-12-16  Rodrigo Moya <rodrigo@ximian.com>

	Fixes part of #41237
	
	* gui/e-calendar-table.c: use GtkClipboard instead of GtkInvisible
	for cut/copy/paste.
	(selection_clear_event, selection_received, selection_get): removed
	unneeded functions.
	(e_calendar_table_init): don't create the invisible widget.
	(e_calendar_table_copy_clipboard): use gtk_clipboard_set_text().
	(e_calendar_table_paste_clipboard): use gtk_clipboard_request_text().
	(clipboard_get_text_cb): callback for gtk_clipboard_request_text().

	* gui/e-cal-view.c (e_calendar_view_init, e_calendar_view_destroy,
	e_calendar_view_copy_clipboard): no need anymore to keep the last
	clipboard selection, GtkClipboard does it for us.

2003-12-16  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/notify-main.c (alarm_notify_factory_fn): return
	a reference to the alarm_notify_service, not NULL and ref the object
	before returning it.

2003-12-15  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.c (setup_widgets): set the list view config
	properly (so we don't blow away the month view config

2003-12-15  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.c (setup_widgets): set the calendar for the day
	view

2003-12-14  JP Rosevear <jpr@ximian.com>

	* gui/calendar-component.c (impl_requestCreateItem): set a proper
	exception if we fail

2003-12-14  JP Rosevear <jpr@ximian.com>
	
	* gui/calendar-config.c
	(calendar_config_get_hide_completed_tasks_units): make sure the
	string is non-null before strcmp'ing it

	Fixes #52033
	
2003-12-10  Rodrigo Moya <rodrigo@ximian.com>

	* gui/gnome-cal.c (gnome_calendar_add_event_uri): remove the client
	from the list if there are errors, instead of re-adding it again.
	Also, unref the ECal object on errors, for not leaking.

2003-12-10  Bolian Yin <bolian.yin@sun.com>

	*gui/e-week-view.c: Fix a event/jump button tabbing bug

2003-12-10  Harry Lu  <harry.lu@sun.com>

        Fix for bugzilla bug #51628.

        * gui/weekday-picker.c: (weekday_picker_class_init): setup focus
        handler.
        (day_clicked): new function to set day_mask when mouse clicked
        or keyboard input of space/enter.
        (handle_key_press_event): new function to handle key press event.
        (day_event_cb): handle key press event too.
        (weekday_picker_init): set widget can be focused.
        (colorize_items): change the box's outline if it is focused.
        (weekday_picker_focus): new function to handler focus event.

2003-12-09  Andrew Wu <Yang.Wu@sun.com>

	* gui/e-week-view-main-item.c (e_week_view_main_item_class_init): init a11y.
	* gui/e-week-view.c: emit signal "selected_time_changed".

2003-12-08  Bolian Yin <bolian.yin@sun.com>

	* gui/e-day-view.c (e_day_view_on_editing_started): remove setting property of "handle_popup".
	* gui/e-week-view.c (e_week_view_on_editing_started): remove setting property of "handle_popup".

2003-12-08 Carl Sun <carl.sun@sun.com>

        Fixes #46351

	* gui/e-timezone-entry.c  (e_timezone_entry_mnemonic_activate):
	new function. override the  member function of GtkWidget to handle
	nemonic_activate signal of custom class ETimezoneEntry.


2003-12-08  Bolian Yin <bolian.yin@sun.com>

	* gui/gnome-cal.c (gnome_calendar_class_init): correct argument mismatch in "goto_date" signal definition.

2003-12-05  Yong Sun <Yong.Sun@Sun.com>

	Fix for #51337

	* gui/dialogs/alarm-page.c
	Change raw string "Action/Trigger" to _("Action/Trigger")
	* gui/dialogs/recurrence-page.c
	Change raw string "Date/Time" to _("Date/Time")

2003-12-04  Harry Lu  <harry.lu@sun.com>

	Fix for bugzilla bug #51627.

	* gui/goto.c: (create_ecal): set calitem's move_selection_when_moving 
	to FALSE so that changing month and year won't send out 
	a "selection_changed" signal.

2003-12-03  Ettore Perazzoli  <ettore@ximian.com>

	* gui/tasks-control.c (tasks_control_activate): Do not call
	control_util_set_folder_bar_label().

	* gui/e-calendar-table.c (e_calendar_table_set_status_message):
	Use e_activity_handler_operation_progressing(), not
	evolution_activity_client_update().

	* gui/e-cal-view.c: Remove settings menu.
	(on_settings): Remove.

	* gui/calendar-commands.c (get_shell_view_interface): Remove.
	(control_util_set_folder_bar_label): Remove.
	(calendar_set_folder_bar_label): Remove.
	(control_util_show_settings): Remove.
	(gcal_calendar_dates_change_cb): Remove.
	(calendar_control_activate): Do not connect, do not call
	calendar_set_folder_bar_label().

2003-12-03  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.c (gnome_calendar_destroy): free the notification
	list
	
	* gui/tasks-component.c (impl_dispose): ditto

	* gui/calendar-component.c (impl_dispose): ditto

2003-12-03  JP Rosevear <jpr@ximian.com>

	* gui/tasks-component.c (impl_dispose): free up the notifications
	and the ecal
	(config_create_ecal_changed_cb): clear the create_ecal if the
	primary selection changes
	(setup_create_ecal): find a default ecal to do creation with
	(impl_requestCreateItem): use above

2003-12-03  JP Rosevear <jpr@ximian.com>

	* gui/tasks-component.c (rename_task_list_cb): cast the parent
	(impl_createControls): add notification for primary tasks
	(config_primary_selection_changed_cb): handle primary selection
	changing in gconf

	* gui/calendar-config-keys.h: fix config key for primary tasks

2003-12-03  JP Rosevear <jpr@ximian.com>

	* gui/calendar-component.c (rename_calendar_cb): cast the parent
	(config_primary_selection_changed_cb): handle the primary
	selection changing elsewhere
	(impl_dispose): remove the list of notifications
	(impl_createControls): add primary calendar notification
	(config_create_ecal_changed_cb): clear create_ecal if the primary
	key changes
	(setup_create_ecal): find an ecal to use for creation
	(impl_requestCreateItem): use above

2003-12-03  Ettore Perazzoli  <ettore@ximian.com>

	* importers/icalendar-importer.c: Do not #include shell stuff.

	* gui/main.c: Do not #include <evolution-shell-client.h>.

	* gui/e-itip-control.c: Do not #include
	<e-folder-selector-button.h> nor <evolution-shell-client.h>.
	(start_default_server): Return FALSE.
	(default_server_started_cb): Do not connect the "selected" signal
	on the button since it's now NULL.
	(button_selected_cb): #if 0 out.

	* gui/e-cal-list-view.h: Do not #include
	"evolution-activity-client.h".

	* gui/tasks-component.c (impl_createControls): Give an empty label
	for the status bar.

	* gui/e-day-view.h: Remove all deps on evolution-activity-client.

2003-12-02  Rodney Dawes  <dobey@ximian.com>

	* gui/Makefile.am: Version the schemas
	* gui/apps_evolution_calendar.schemas: Removed
	* gui/apps_evolution_calendar.schemas.in.in: Added

2003-12-02  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/copy-source-dialog.c (copy_source_dialog): added
	a label to the dialog to make it look less ugly.

2003-12-02  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/copy-source-dialog.c: converted to use an
	ESourceOptionMenu instead of the ESourceSelector.
	(primary_selection_changed_cb): removed.
	(copy_source_dialog): create the ESourceOptionMenu here.
	(source_selected_cb): callback for the "source_selected"
	signal on the ESourceOptionMenu widget.

2003-12-02  Ettore Perazzoli  <ettore@ximian.com>

	* gui/e-calendar-table.h (struct _ECalendarTable): Replace member
	"activity" with an "activity_id".

	* gui/e-cal-view.c (struct _ECalendarViewPrivate): Replace member
	"activity" with "activity_id".
	(e_calendar_view_destroy): Don't unref activity here anymore.
	(e_calendar_view_set_status_message): Report progress using the
	EActivityHandler off the CalendarComponent.

	* gui/calendar-component.c
	(struct _CalendarComponentPrivate): New member activity_handler.
	(calendar_component_init): Init.
	(calendar_component_peek_activity_handler): New.
	(impl_dispose): Unref.
	(impl_createControls): Return an ETaskBar for the statusbar
	control.

2003-12-01  Ettore Perazzoli  <ettore@ximian.com>

	* gui/calendar-component.c (impl_createControls): Pass a label for
	the status bar control for now.

	* gui/tasks-component.c (impl_createControls): Pass a label for
	the status bar control for now.

2003-12-01  Rodney Dawes  <dobey@ximian.com>

	* gui/GNOME_Evolution_Calendar.server.in.in:
	* gui/calendar-commands.c:
	* gui/e-meeting-list-view.c:
	* gui/e-meeting-model.c:
	* gui/e-select-names-editable.c:
	* gui/itip-bonobo-control.c:
	* gui/itip-utils.c:
	* gui/main.c:
	* gui/alarm-notify/GNOME_Evolution_Calendar_AlarmNotify.server.in.in:
	* gui/alarm-notify/alarm-queue.c:
	* gui/alarm-notify/notify-main.c:
	* gui/dialogs/alarm-options.c:
	* gui/dialogs/e-delegate-dialog.c:
	* importers/GNOME_Evolution_Calendar_Importer.server.in.in:
	* importers/main.c: Use BASE_VERSION for repo_ids and OAFIIDs

2003-12-01  JP Rosevear <jpr@ximian.com>

	* conduits/todo/Makefile.am: put the conduits in their own dir

	* conduits/calendar/Makefile.am: ditto
	
	* conduits/todo/e-todo.conduit.in: subst in correct thing

	* conduits/calendar/e-calendar.conduit.in: ditto

2003-12-01  JP Rosevear <jpr@ximian.com>

	* conduits/todo/Makefile.am: install to privlibdir

	* conduits/calendar/Makefile.am: ditto
	
	* conduits/todo/e-todo.conduit.in: subst in correct thing

	* conduits/calendar/e-calendar.conduit.in: subst in correct thing

2003-12-01  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/alarm-notify.c (add_uri_to_load, remove_uri_to_load):
	removed unneeded functions.
	(alarm_notify_add_calendar, alarm_notify_remove_calendar): no need
	anymore to add/remove URIs to load on startup to the configuration.

2003-12-01  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/save.c (save_calendars_to_load): removed this
	function, since we now use the ESourceList to know what calendars
	to load.
	(get_calendars_to_load): moved to config-data.c.
	(save_notification_time, get_saved_notification_time,
	save_blessed_program, is_blessed_program): use the
	shared GConfClient.

	* gui/alarm-notify/config-data.[ch]: use a GConfClient instead of a
	EConfigListener.
	(config_data_get_conf_client): renamed from _get_listener.
	(config_data_get_timezone, config_data_get_24_hour_format): changed
	to use the GConfClient.
	(config_data_get_calendars_to_load): new function.
	(ensure_inited): create the source lists for calendar and tasks here.
	(do_cleanup): cleanup the source lists here.

	* gui/alarm-notify/notify-main.c (load_calendars): use
	config_data_get_calendars_to_load().

2003-11-28  JP Rosevear <jpr@ximian.com>

	* gui/e-tasks.c (e_tasks_delete_completed): we want to skip if it
	*is* read only

2003-11-28  JP Rosevear <jpr@ximian.com>

	* gui/e-meeting-store.c (e_meeting_store_get_type): allocate the
	type information correctly

2003-11-26  Hans Petter Jansson  <hpj@ximian.com>

	* gui/calendar-offline-handler.c (backend_go_offline): e_cal_new () ->
	e_cal_new_from_uri ().
	(backend_go_online): Ditto.
	(calendar_offline_handler_init): Ditto.

	* gui/comp-editor-factory.c (open_client): Ditto.

	* gui/e-itip-control.c (start_calendar_server): Ditto.
	(object_requested_cb): Ditto.

	* gui/e-tasks.c (e_tasks_add_todo_uri): Ditto.

	* gui/gnome-cal.c (gnome_calendar_construct): Ditto.
	(gnome_calendar_add_event_uri): Ditto.

	* gui/alarm-notify/alarm-notify.c (alarm_notify_add_calendar): Ditto.

	* importers/icalendar-importer.c (load_file_fn): Ditto.
	(vcal_load_file_fn): Ditto.
	(gnome_calendar_import_data_fn): Ditto.

	* gui/dialogs/copy-source-dialog.c (copy_source): Pass sources to
	e_cal_new ().

2003-11-24  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/copy-source-dialog.c (copy_source): use the correct
	icalcomponent when calling e_cal_create_object.

	* gui/tasks-control.c (sensitize_commands): no need to have a
	selection for Paste to work.

	* gui/e-calendar-table.c (e_calendar_table_show_popup_menu): disable
	editing items if the selected task list is read only, not if it's not.

2003-11-24  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/new-task-list.glade:
	* gui/dialogs/new-task-list.[ch]: new files containing the
	implementation of the 'New Task List' dialog.

	* gui/dialogs/Makefile.am: added new files.

	* gui/dialogs/new-calendar.c (new_calendar_dialog): use G_STRLOC
	for g_warning messages.

	* gui/tasks-component.c (new_task_list_cb): implemented.

2003-11-24  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/copy-source-dialog.c (copy_source_dialog): actually
	add the source selector to the dialog's box.

2003-11-23  Rodrigo Moya <rodrigo@ximian.com>

	* gui/tasks-component.c:
	* gui/dialogs/copy-source-dialog.[ch]: fixed compilation errors.

	* gui/dialogs/Makefile.am: added missing header directories.

2003-11-23  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/new-calendar.[ch]: fixed copyright notices.

	* gui/dialogs/copy-source-dialog.[ch]: implementation of the
	Copy command for sources.

	* gui/dialogs/Makefile.am: added new files.

	* gui/calendar-component.c (fill_popup_menu_cb, copy_calendar_cb):
	added Copy command.

	* gui/tasks-component.c (fill_popup_menu_cb, copy_task_list_cb):
	added Copy command.

2003-11-23  Ross Burton  <ross@burtonini.com>

	* gui/alarm-notify/GNOME_Evolution_Calendar_AlarmNotify.server.in.in:
	Append "_2" to the OAFIID to avoid conflicting with Evo 1.4.
	
	* gui/main.c:
	* gui/alarm-notify/notify-main.c:
	Updated with new OAFIID.

2003-11-20  JP Rosevear <jpr@ximian.com>

	* Remove a bunch of gal includes that are no longer needed

2003-11-19  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #43556

	* gui/e-cal-view.c (selection_get, selection_clear_event,
	selection_received): removed this unneeded functions.
	(e_calendar_view_init): don't create a GtkInvisible anymore.
	(e_calendar_view_destroy): no need to destroy the GtkInvisible.
	(e_cal_view_copy_clipboard, e_cal_view_paste_clipboard):
	use GtkClipboard.

2003-11-19  JP Rosevear <jpr@ximian.com>

	* gui/e-cal-model-tasks.c (get_due): make sure timezone value is
	sane
	(get_completed): ditto

	* gui/e-cal-model.c (get_dtstart): add more guards

	* gui/e-cal-model-calendar.c (get_dtend): ditto
	
2003-11-19  Rodrigo Moya <rodrigo@ximian.com>

	Fixes #51052

	* importers/icalendar-importer.c (prepare_events, prepare_tasks):
	call icalcompiter_next to move the pointer to the next before
	removing a component avoid breaking the link.

2003-11-18  JP Rosevear <jpr@ximian.com>

	* gui/e-cal-model.c (get_dtstart): make sure the timezone value is
	sane

	* gui/e-cal-model-calendar.c (get_dtend): ditto
	
2003-11-18  JP Rosevear  <jpr@ximian.com>

	* gui/calendar-config.h: add protos

	* gui/calendar-config.c (calendar_config_get_primary_calendar):
	get the primary calendar
	(calendar_config_set_primary_calendar): set it
	(calendar_config_add_notification_primary_calendar): set
	notifications for it
	(calendar_config_get_primary_tasks): get the primary task list
	(calendar_config_set_primary_tasks): set it
	(calendar_config_add_notification_primary_tasks): set
	notifications for it

	* gui/calendar-config-keys.h: add primary keys

	* gui/calendar-component.c (find_first_source): find any source
	(update_uri_for_primary_selection): set the default uri and save
	the source uid
	(update_primary_selection): set the primary selection
	(primary_source_selection_changed_cb): use above
	(impl_createControls): set the primary selection

	* gui/tasks-component.c: as above
	
2003-11-18  JP Rosevear <jpr@ximian.com>

	* gui/Makefile.am: remove db3 include

2003-11-18  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-commands.c
	(calendar_control_sensitize_calendar_commands,
	sensitize_taskpad_commands): removed the 'New...' menu items
	from the UI, it's now implemented in the shell.
	(file_new_appointment_cb, file_new_event_cb, file_new_meeting_cb,
	file_new_task_cb): removed.

2003-11-18  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (add_popup_menu_item): added 'sensitive'
	argument.
	(fill_popup_menu_cb): disable/enable menu items depending on whether
	there is a selection or not.

	* gui/tasks-component.c (add_popup_menu_item, fill_popup_menu_cb):
	ditto.

2003-11-17  JP Rosevear <jpr@ximian.com>

	* Cleanup some ref/unref calls

2003-11-17  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (delete_calendar_cb, rename_calendar_cb):
	* gui/tasks-component.c (delete_task_list_cb, rename_task_list_cb):
	peek the primary selection.

2003-11-17  Rodrigo Moya <rodrigo@ximian.com>

	* gui/tasks-component.c (fill_popup_menu_cb): added 'Delete' and
	'Rename' menu items.
	(delete_task_list_cb, rename_task_list_cb): callbacks for new
	menu items.

2003-11-17  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (add_popup_menu_item): try first to
	create the icon from the stock, and then from a file.
	(fill_popup_menu_cb): set callback for 'Rename' menu item.
	(rename_calendar_cb): callback for 'Rename' menu item.
	(new_calendar_cb): fixed arguments.

	* gui/tasks-component.c (impl_createControls): connect to
	"fill_popup_menu" signal on the source selector.
	(fill_popup_menu_cb): callback to create our menu items.

2003-11-17  Rodrigo Moya <rodrigo@ximian.com>

	* idl/evolution-calendar.idl: remove the AlarmNotify service, no
	more need for it, since the alarm daemon will listen for changes
	on the GConf key.

	* gui/gnome-cal.c (add_alarms): removed function to talk to the
	alarm daemon.
	(client_cal_opened_cb): don't call add_alarms().

	* gui/alarm-notify/alarm-notify.[ch]: made it a basic GObject.
	(AlarmNotify_addCalendar, AlarmNotify_removeCalendar): removed
	AlarmNotify interface implementation.
	(alarm_notify_class_init): no epv to initialize.
	(alarm_notify_remove_calendar): new function, copied from the
	CORBA method implementation.
	(alarm_notify_factory_fn): return NULL, since there is no objects
	that can be created via this factory now.

	* gui/alarm-notify/notify-main.c (main): now the factory is the alarm
	notification service itself.
	(load_calendars): no need to use exceptions here.

	* gui/alarm-notify/GNOME_Evolution_Calendar_AlarmNotify.server.in.in:
	now the factory is the alarm notification service itself.

	* gui/main.c (launch_alarm_daemon_cb): dont use the AlarmNotify CORBA
	types.

2003-11-17  Harry Lu  <harry.lu@sun.com>

        * gui/dialogs/recurrence-page.c (make_ending_count_special):
        Make ending count of occurrences of Recurrence tab numeric only.

2003-11-16  JP Rosevear <jpr@ximian.com>

	* gui/tasks-control.c (tasks_control_set_property): add a uri

	* gui/e-tasks.c: kill e_tasks_open

	* gui/e-tasks.h: remove proto

2003-11-16  JP Rosevear <jpr@ximian.com>

	* gui/e-cal-model.c (e_cal_view_objects_added_cb): emit the added
	signal for the correct rows

2003-11-16  JP Rosevear <jpr@ximian.com>

	* gui/tasks-component.c (is_in_uids): copy in here
	(update_uris_for_selection): save the selection
	(update_selection): update the selection when its changed
	somewhere else
	(config_selection_changed_cb): update the selection if the
	configuration changes
	(impl_createControls): store the source selector

	* gui/calendar-config.h: add protos

	* gui/calendar-config.c (calendar_config_get_tasks_selected): get
	the list of task lists selected
	(calendar_config_set_tasks_selected): save it
	(calendar_config_add_notification_tasks_selected): get notified
	about it

2003-11-16  JP Rosevear <jpr@ximian.com>

	* gui/tasks-component.c (add_uri_for_source): add it via e-tasks
	(remove_uri_for_source): remove it via e-tasks
	(get_default_task): provide a default for editing
	(impl_createControls): create the control directly
	(impl_requestCreateItem): implement

	* gui/gnome-cal.c (gnome_calendar_purge): don't let the two list
	iterators clobber each other

	* gui/e-tasks.h: add protos

	* gui/e-tasks.c (e_tasks_destroy): free the client list and the
	hash, disconnect signals
	(e_tasks_new_task): use the default client
	(e_tasks_add_todo_uri): add a uri
	(e_tasks_remove_todo_uri): remove a uri
	(e_tasks_set_default_uri): set default uri
	(e_tasks_get_default_client): get default client
	(e_tasks_delete_completed): expunge from all clients
	(e_tasks_setup_view_menus): use default client uri

	* gui/e-tasks.c (set_timezone): set the timezone for all clients
	(e_tasks_init): set up the clients has table

	* gui/e-calendar-table.etspec: yank some useless display columns

	* gui/e-cal-model.c (remove_client): remove objects in reverse
	order so we don't clobber ourselves

	* gui/calendar-component.c: add FIXME

2003-11-16  JP Rosevear <jpr@ximian.com>

	* gui/calendar-component.c (get_default_event): set up a event to
	be edited
	(impl_requestCreateItem): implement

2003-11-14  JP Rosevear <jpr@ximian.com>

	* gui/*.[hc]: include e-source* from e-d-s

2003-11-14  JP Rosevear <jpr@ximian.com>

	* gui/calendar-config.c (calendar_config_get_calendars_selected):
	config accessor
	(calendar_config_set_calendars_selected): ditto
	(calendar_config_add_notification_calendars_selected): config
	notification

	* gui/calendar-config.h: add protos

	* gui/calendar-config-keys.h: add new key

	* gui/calendar-component.c (is_in_uids): util function
	(update_uris_for_selection): save the selection in the
	configuration
	(update_selection): update the selection from the config info
	(source_selection_changed_cb): only pass one param
	(config_selection_changed_cb): listen for config changes
	(impl_dispose): remove config notification
	(impl_createControls): use bonobo_exception_set; add a config
	notification

2003-11-13  Ettore Perazzoli  <ettore@ximian.com>

	* gui/tasks-component.c (impl__get_userCreatableItems): New.
	(impl_requestCreateItem): New.
	(tasks_component_class_init): Install.

	* gui/calendar-component.c (impl__get_userCreatableItems): New.
	(impl_requestCreateItem): New, for now just a stub.
	(calendar_component_class_init): Install into the EPV.

2003-11-13  Ettore Perazzoli  <ettore@ximian.com>

	* gui/GNOME_Evolution_Calendar.server.in.in: Add a component_alias
	of "calendar" for the calendar and "tasks" for the tasks.

2003-11-12  Hans Petter Jansson  <hpj@ximian.com>

	* gui/calendar-component.c (add_popup_menu_item): Use non-deprecated
	gtk_menu_shell_append ().

2003-11-11  Bolian Yin <bolian.yin@sun.com>
                                                                                
        Fixes #50808
                                                                                
        * gui/goto.c (goto_dialog): set initial selection to current day.
                                                                                
2003-11-11  JP Rosevear <jpr@ximian.com>

	* gui/calendar-offline-handler.c (backend_cal_opened_offline): use
	a standard calendar status
	(backend_cal_opened_online): ditto
	
	* gui/alarm-notify/alarm-queue.c (cal_opened_cb): ditto

	* gui/gnome-cal.c (client_cal_opened_cb): ditto

	* gui/e-tasks.c (cal_opened_cb): ditto

	* gui/e-itip-control.c (default_server_started_cb): ditto

	* gui/e-cal-model.c (cal_opened_cb): ditto

	* gui/comp-editor-factory.c (cal_opened_cb): ditto

2003-11-11  JP Rosevear <jpr@ximian.com>

	* conduits/todo/todo-conduit.c (start_calendar_server): load the
	calendar synchronously

	* conduits/calendar/calendar-conduit.c (start_calendar_server): ditto
	
2003-11-10  JP Rosevear <jpr@ximian.com>

	* importers/icalendar-importer.c (update_single_object): return
	boolean not ECalStatus
	(update_objects): ditto
	(process_item_fn): handle above returns

2003-11-10  JP Rosevear <jpr@ximian.com>

	* gui/e-cal-model-tasks.c (get_due_status): just check the boolean

2003-11-10  JP Rosevear <jpr@ximian.com>

	* conduits/calendar/calendar-conduit.c
	(e_calendar_context_destroy): use proper change list free function
	name
	(post_sync): ditto

	* conduits/todo/todo-conduit.c: same
	
2003-11-10  Dan Winship  <danw@ximian.com>

	* gui/e-tasks.c (e_tasks_delete_completed): Remove get-vtype check
	from the completed-tasks query (and don't leak the sexp string).

	* gui/e-cal-model.c (update_e_cal_view_for_client): Don't adjust
	the sexp to use get-vtype.

	* gui/gnome-cal.c (adjust_e_cal_view_sexp, gnome_calendar_purge):
	Remove get-vtype check from queries

2003-11-07  JP Rosevear <jpr@ximian.com>

	* gui/Makefile.am: remove includes for toplevel libical dir

	* gui/dialogs/Makefile.am: ditto

	* importers/Makefile.am: ditto

2003-11-07  JP Rosevear <jpr@ximian.com>

	* In the gui this is a search and replace commit for moving the
	calendar to evolution-data-server; it also deletes the old backend
	files; e-cal-view was rename to e-calendar-view to remove name
	conflict
	
2003-11-05  JP Rosevear <jpr@ximian.com>

	* gui/migration.c: fix typo

2003-11-05  Larry Ewing  <lewing@ximian.com>

	* gui/migration.c (process_old_dir): add a unimplemented warning
	so we at least avoid relocation errors.

2003-11-04  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (fill_popup_menu_callback): added more
	menu items.
	(delete_calendar_cb): callbacks for new popup menu items.
	(impl_createControls): add the source selector widget to the
	CalendarComponentPrivate structure.

	* gui/migration.[ch] (migrate_old_tasks): new function to migrate
	old tasks setups.
	(process_old_dir): renamed and added a "filename" argument, so that
	the same function can be used for tasks and calendar directories.
	(migrate_old_calendars): added new argument when calling
	process_old_dir().

	* gui/tasks-component.c (tasks_component_init): call
	migrate_old_tasks() if there are no groups defined.

2003-11-04  Bolian Yin <bolian.yin@sun.com>

	* gui/e-cal-view.c: add new signal "selected_time_changed" 
	* gui/e-day-view-main-item.c (e_day_view_main_item_class_init):
	a11y initialization
	* gui/e-day-view-top-item (e_day_view_top_item_get_day_label):
	new public function.
	* gui/e-day-view.c (e_day_view_ensure_rows_visible,
	e_day_view_update_calendar_selection_time): make static functions public
	(e_day_view_cursor_key_up, e_day_view_cursor_key_down,
	e_day_view_cursor_key_left, e_day_view_cursor_key_right): emit
	"selected_time_changed".

2003-11-03  Ettore Perazzoli  <ettore@ximian.com>

	* gui/e-meeting-model.c (SELECT_NAMES_OAFID): Append "_2".
	* gui/e-select-names-editable.c (SELECT_NAMES_OAFIID): Likewise.
	* gui/e-meeting-list-view.c (SELECT_NAMES_OAFID): Likewise.
	* gui/dialogs/alarm-options.c (SELECT_NAMES_OAFID): Likewise.
	* gui/dialogs/e-delegate-dialog.c (SELECT_NAMES_OAFID): Likewise

2003-11-03  Ettore Perazzoli  <ettore@ximian.com>

	* gui/GNOME_Evolution_Calendar.server.in.in: use
	"evolution2:config_item" properties instead of
	"evolution:config_item" ones.

2003-11-03  Harry Lu  <harry.lu@sun.com>

	Fix for #50387.

	* importers/icalendar-importer.c (support_format_fn):
	Call icalcomponent_is_valid() to check whether the returned
	icalcomponent is valid.

2003-10-31  Hans Petter Jansson  <hpj@ximian.com>

	* gui/calendar-component.c (calendar_component_init): Add the webcal
	source group.

	* gui/dialogs/new-calendar.c (print_uri_noproto): Implement.
	(group_is_remote): Implement.
	(create_new_source_with_group): Implement webcal case.
	(new_calendar_dialog): Get optional location from dialog.

	* gui/dialogs/new-calendar.glade: Add location entry.

	* pcs/Makefile.am: Build http backend.

	* pcs/cal-backend-http.[ch]: Add skeleton based on cal-backend-file.

2003-10-31  Dan Winship  <danw@ximian.com>

	* cal-util/cal-util.h: Add CAL_STATIC_CAPABILITY_NO_THISANDFUTURE
	and CAL_STATIC_CAPABILITY_NO_THISANDPRIOR

	* gui/dialogs/recur-comp.c (recur_component_dialog): Add a
	CalClient argument. Use cal_client_get_static_capability to decide
	whether or not to offer THISANDFUTURE and THISANDPRIOR options

	* gui/dialogs/comp-editor.c (prompt_to_save_changes, save_cmd,
	save_close_cmd): Pass a CalClient to recur_component_dialog.

	* gui/e-day-view.c (e_day_view_finish_long_event_resize,
	e_day_view_finish_resize, e_day_view_on_editing_stopped,
	e_day_view_on_top_canvas_drag_data_received,
	e_day_view_on_main_canvas_drag_data_received): Likewise

	* gui/e-week-view.c (e_week_view_on_editing_stopped): Likewise

	* gui/calendar-component.c (impl_createControls): set an exception
	if we fail, so evo won't crash.

2003-10-31  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-calendar-table.c (e_calendar_table_show_popup_menu): fixed
	mismatched condition in if/else statement.

2003-10-30  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-tasks.[ch] (e_tasks_get_cal_client): removed.

	* gui/tasks-control.c (sensitize_commands): fixed to work correctly
	with the ECalView's model.
	(tasks_control_set_property): don't use e_tasks_get_cal_client.

	* gui/alarm-notify/alarm-notify.c (free_client_hash): new function
	to remove items from the CalClient's hash table.
	(alarm_notify_finalize): call free_client_hash() for each item
	in the hash table.

2003-10-30  Rodrigo Moya <rodrigo@ximian.com>

	* gui/alarm-notify/notify-main.c (client_die_cb): use
	bonobo_main_quit, not gtk_main_quit.

	* gui/alarm-notify/alarm-queue.c (free_client_alarms_cb): callback
	for freeing ClientAlarms stored in the hash table.
	(alarm_queue_done): call free_client_alarms_cb() for each opened
	client.

2003-10-30  Rodrigo Moya <rodrigo@ximian.com>

	* pcs/cal-backend-file.c (mark_dirty, save_idle): removed, since
	we dont save the file anymore in idle callbacks.
	(cal_backend_file_dispose): removed all traces of the idle saving.
	(check_dup_uid, create_cal, cal_backend_file_add_timezone,
	cal_backend_file_create_object, cal_backend_file_modify_object,
	cal_backend_file_remove_object, cal_backend_file_receive_objects):
	call save() directly instead of mark_dirty().

2003-10-30  Rodrigo Moya <rodrigo@ximian.com>

	* pcs/cal-backend-file.c (cal_backend_file_modify_object):
	implemented THIS and ALL recurrences cases, blowing away or detaching
	recurrences from the main component as required.
	(get_rid_string): make it return const.
	(get_rid_timetype): new convenience function for getting
	libical's recurrence ID from a CalComponent.
	(cal_backend_file_is_read_only, remove_recurrence_cb,
	remove_component): fixed warnings.
	(remove_object_instance_cb): callback to remove the instances
	from the hash on the THISANDPRIOR and THISANDFUTURE cases.
	(cal_backend_file_remove_object): replaced mismatched if/else
	statement with proper management of each of the recurrence cases.

2003-10-29  JP Rosevear <jpr@ximian.com>

	* gui/Makefile.am: build new files

	* gui/dialogs/comp-editor-util.c (date_edit_destroy_cb): unref the
	config manager
	(comp_editor_new_date_edit): set up a config manager for the date
	editor

	* gui/e-date-edit-config.[hc]: config manager for e-date-edit

2003-10-29  JP Rosevear <jpr@ximian.com>

	* gui/dialogs/cal-prefs-dialog.c (update_config): no need to
	update config settings everywhere explicitly

	* gui/tasks-component.c (update_uris_for_selection): cast the
	widget

	* gui/gnome-cal.h: remove proto

	* gui/gnome-cal.c (setup_widgets): don't update config settings
	explicitly
	(gnome_calendar_update_config_settings): kill

	* gui/e-week-view.c: remove null chars

	* gui/e-tasks.h: remove proto

	* gui/e-tasks.c (set_timezone): set the timezone on the client
	(timezone_changed_cb): changed timezone callback
	(setup_config): setup config stuff
	(e_tasks_init): setup config and widgets here
	(e_tasks_new): construct is dead, no need to track all widgets
	(cal_opened_cb): set the timezone upon opening
	(e_tasks_update_all_config_settings): kill

	* gui/control-factory.c (control_factory_new_control): create the
	calendar ourselves

	* gui/calendar-config.c (on_timezone_set): don't update the
	settings everywhere here, we have config managers now

	* gui/calendar-component.c (impl_createControls): create the
	calendar ourselves

	* gui/calendar-commands.h: remove protos

	* gui/calendar-commands.c: remove dead functions

2003-10-29  JP Rosevear <jpr@ximian.com>

	* gui/e-day-view-config.c (set_twentyfour_hour): set the format on
	the cal view

	* gui/e-week-view-config.c (set_twentyfour_hour): ditto
	
	* gui/e-cal-list-view-config.c (set_twentyfour_hour): set the 24
	hour format on the view
	(twentyfour_hour_changed_cb): 24 hour format change callback
	(e_cal_list_view_config_set_view): handle 24 hour format changes

2003-10-29  JP Rosevear <jpr@ximian.com>

	* gui/dialogs/recurrence-page.c (recurrence_page_finalize): unref
	config manager
	(init_widgets): create config manager for the e-calendar

	* gui/e-tasks.c (setup_widgets): create config manager for the
	table view
	(e_tasks_destroy): unref config manager
	(e_tasks_open): return FALSE not NULL
	(e_tasks_update_all_config_settings): don't configure the calendar
	table here, we have a manager

	* gui/calendar-config.c: remove dead config functions (handled by
	config managers now)

2003-10-29  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.c (set_timezone): set the timezone for all clients
	(timezone_changed_cb): callback for changes
	(setup_config): setup the configuration
	(setup_widgets): setup up configuration managers for the list
	view, task list and date navigator
	(gnome_calendar_init): setup config
	(gnome_calendar_destroy): destroy configuration managers and
	notifications
	(gnome_calendar_update_config_settings): remove dead bits

	* gui/e-mini-calendar-config.[hc]: manage configuration of an
	e-calendar

	* gui/e-day-view-config.h: remove extraneous comment, type the
	parent class correctly

	* gui/e-week-view-config.h: ditto
	
	* gui/e-day-view-config.c (e_day_view_config_class_init): type the
	class correctly
	(set_timezone): set timezone
	(timezone_changed_cb): timezone changed callback
	(e_day_view_config_set_view): track timezone changes

	* gui/e-week-view-config.c: ditto
	
	* gui/e-cell-date-edit-config.[hc]: manage configuration of a date
	edit cell

	* gui/e-calendar-table-config.[hc]: manage configuration of a
	e-calendar-table

	* gui/e-cal-list-view.c (get_current_time_cb): use the view
	timezone to compute

	* gui/e-cal-list-view-config.[hc]: manage configuration of a
	list view

	* gui/calendar-config.h: update protos

	* gui/calendar-config.c
	(calendar_config_add_notification_timezone): notify of timezone
	change
	(calendar_config_add_notification_dnav_show_week_no): notify of
	show week number setting change

	* gui/calendar-component.c (calendar_component_peek): remove bad
	comma

	* gui/Makefile.am: build new config classes

2003-10-29  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (fill_popup_menu_callback): fixed
	typo in menu item label.

	* gui/e-cal-model.[ch] (e_cal_model_get_use_24_hour_format): new
	function.

	* gui/e-cal-view.[ch]: no need to keep the 'use_24_hour' setting,
	it's already in the model.
	(e_cal_view_get_use_24_hour_format,
	e_cal_view_set_use_24_hour_format): new functions.

	* gui/e-day-view.[ch] (e_day_view_get_24_hour_format,
	(e_day_view_set_24_hour_format): removed.
	(e_day_view_convert_time_to_display, e_day_view_update_event_label,
	e_day_view_get_time_string_width): use the ECalView's function to
	get the 24 hour format.

	* gui/e-week-view.[ch] (e_week_view_get_24_hour_format,
	e_week_view_set_24_hour_format): removed.
	(e_week_view_convert_time_to_display,
	e_week_view_get_time_string_width): use the ECalView's function
	to get the 24 hour format.

	* gui/e-day-view-top-item.c (e_day_view_top_item_draw_long_event):
	* gui/e-day-view-time-item.c (e_day_view_time_item_draw):
	* gui/e-week-view-event-item.c (e_week_view_draw_time):
	don't use the view's use_24_hour_format, but the ECalView method.

2003-10-28  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (impl_createControls): connect to
	"fill_popup_menu" on the ESourceSelector.
	(fill_popup_menu_callback): add popup menu items here.
	(add_popup_menu_item): new function to add items to the
	popup menu.
	(new_calendar_cb): callbacks for the popup menu items.

2003-10-28  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-cal-view.c: no need to keep the timezone here, it is
	already stored in the model.
	(e_cal_view_get_timezone): call e_cal_model_get_timezone().
	(e_cal_view_set_timezone): call e_cal_model_set_timezone().
	(e_cal_view_new_appointment_for): use the model's timezone.

2003-10-27  Dan Winship  <danw@ximian.com>

	* pcs/cal-backend.c (cal_backend_notify_object_created,
	cal_backend_notify_object_modified,
	cal_backend_notify_object_removed): New; tell each query about a
	created/modified/removed object.

	* pcs/cal.c (cal_notify_object_created): Use
	cal_backend_notify_object_created.
	(cal_notify_object_modified, cal_notify_object_removed): Likewise
	for modified/removed
	(cal_notify_objects_received): we need both the before and after
	forms for the modified objects so they can be resolved as
	adds/modifies/removes per-query. But the caller can just call the
	cal_backend_* routines for each object anyway, so just remove the
	created/modified/removed lists.

	* pcs/cal-backend-sync.c (cal_backend_sync_receive_objects):
	Remove created/modified/removed list arguments.
	(_cal_backend_receive_objects): Likewise.

	* pcs/cal-backend-file.c (cal_backend_file_receive_objects):
	Remove created/modified/removed list arguments. Replace the one
	use of *removed with a call to cal_backend_notify_object_removed.

2003-10-27  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.c (setup_widgets): store config objects as well
	(gnome_calendar_set_default_uri): return FALSE if the
	pre-condition fails
	(gnome_calendar_update_config_settings): remove settings that are
	now handled by the config objects

	* gui/e-week-view.c (e_week_view_set_compress_weekend): queue a
	draw

	* gui/e-itip-control.c (start_default_server): comment out

	* gui/e-day-view-config.[hc]: a class to track config changes of
	interest to day views

	* gui/e-week-view.[hc]: ditto for week views
	
	* gui/calendar-config.h: add protos

	* gui/calendar-config.c: use the #defines for the keys and add
	notification routines

	* gui/calendar-config-keys.h: a list of defines for gconf keys

	* gui/Makefile.am: build new files

2003-10-27  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-cal-model.h: changed fill_component_from_model virtual
	method to get an ETableModel, not an ECalModel.

	* gui/e-cal-model.c (ecm_append_row): the source model sent from
	ETable is an ETableModel, not an ECalModel.

	* gui/e-cal-model-calendar.c (ecmc_fill_component_from_model):
	get an ETableModel for the 'source_model' argument.

	* gui/e-cal-model-tasks.c (ecmt_fill_component_from_model): ditto.

2003-10-27  Rodrigo Moya <rodrigo@ximian.com>

	* gui/tasks-component.c (add_uri_for_source): pass FALSE as the
	'only_if_exists' parameter, so that the calendar gets created when
	it still does not exist.

2003-10-24  Rodrigo Moya <rodrigo@ximian.com>

	* gui/tasks-component.c (tasks_component_init): initialize private
	structure on TasksComponent.

2003-10-24  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (calendar_component_class_init): removed
	repeated initialization.
	(calendar_component_peek): use G_STRLOC for g_warning's.

	* gui/tsaks-control.[ch] (tasks_control_activate,
	tasks_control_deactivate): made these 2 functions public.

	* gui/tasks-component.[ch]: implementation of the tasks component.

	* gui/Makefile.am:
	* gui/GNOME_Evolution_Calendar.server.in.in: added tasks component.

	* gui/main.c: ditto.
	(factory): added code to create the tasks component when requested.

2003-10-24  Dan Winship  <danw@ximian.com>

	* cal-client/cal-client.c (cal_client_get_changes): Remove type arg

	* conduits/calendar/calendar-conduit.c (pre_sync, post_sync):
	Update for that

	* conduits/todo/todo-conduit.c (pre_sync, post_sync): Likewise

	* idl/evolution-calendar.idl (getChanges): Remove type arg.

	* pcs/cal.c (impl_Cal_getChanges): Likewise

	* pcs/cal-backend.c (cal_backend_get_changes): Likewise

	* pcs/cal-backend-sync.c (cal_backend_sync_get_changes): Likewise

	* pcs/cal-backend-file.c (cal_backend_file_get_changes): Update
	for that

	* pcs/Makefile.am: build libpcs.la and libpcsfile.la instead of
	just .a.
	(libpcs_la_LIBADD): depend on libcal-util.la and libeutil.la
	(libpcsfile_la_LIBADD): depend on libpcs.la

2003-10-24  Rodrigo Moya <rodrigo@ximian.com>

	* cal-util/cal-util.[ch] (cal_util_construct_instance,
	cal_util_remove_instances): new functions for individual
	instances management.

	* pcs/cal-backend-file.c (cal_backend_file_get_object): if we
	dont have a recurrence in our hash table, generate one for the
	specified recurrence ID.
	(match_recurrence_sexp): new function to match recurrences on
	regular expresessions.
	(match_object_sexp): call match_recurrence_sexp() for all recurrences.
	(cal_backend_file_modify_object): handle mod_types.
	(cal_backend_file_remove_object): handle mod_types.

2003-10-24  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.h: update protos

	* gui/gnome-cal.c (gnome_calendar_set_default_uri): set the
	default client based on uri

	* gui/calendar-component.c (add_uri_for_source): rename from
	load_uri_for_source and take a calendar
	(remove_uri_for_source): utility routine to remove the source's
	uri from the calendar
	(is_in_selection): checks to see if the uid of the given source
	matches any of those in the given selection
	(update_uris_for_selection): remove any uris no longer in the
	selection, add those that still exist
	(source_selection_changed_callback): call above
	(primary_source_selection_changed_callback): we have the calendar
	easily now; set the default by uri
	(control_activate_cb): handle activation and de-activation
	(impl_createControls): create the calendar control ourselves so we
	have access to the calendar
	(impl_dispose): release the source selection

2003-10-23  Rodrigo Moya <rodrigo@ximian.com>

	* pcs/cal-backend-file.c (add_component): if the component received
	is an instance, add it to the recurrences hash table.
	(free_recurrence): callback for g_hash_table_foreach() to free
	the recurrences in the CalBackendFileObject structure.
	(free_object): call free_recurrence for each recurrence.
	(remove_recurrence_cb): g_hash_table_foreach() callback to
	remove recurrences from the calendar.
	(remove_component): remove all recurrences.
	(cal_backend_file_open): check write access on the file, and
	set read_only flag appropriately.
	(cal_backend_file_is_read_only): return the private flag.
	(cal_backend_file_init): initialize read_only flag.
	(cal_backend_file_get_object): deal with recurrences.

	* gui/alarm-notify/notify-main.c (main): unref the alarm
	notification service when terminating.
	(client_die_cb): call bonobo_main_quit instead of gtk_main_quit.

2003-10-23    <jpr@ximian.com>

	* gui/gnome-cal.c (gnome_calendar_get_current_view_widget): just
	uses the views array and the current view type
	(setup_widgets): ditto
	(set_view): ditto
	(backend_died_cb): ditto
	(gnome_calendar_get_calendar_model): ditto
	(gnome_calendar_update_config_settings): ditto

2003-10-23  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-day-view.c: accept also text/calendar for D&D.

2003-10-23  JP Rosevear <jpr@ximian.com>

	* gui/e-day-view.c (e_day_view_on_top_canvas_drag_data_received):
	fix typo
	(e_day_view_on_main_canvas_drag_data_received): fix C99 issue, fix
	typo

2003-10-23  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.c (update_query): use the internal client list to
	create the queries
	(gnome_calendar_destroy): use the internal client list to
	disconnect signal handlers
	(gnome_calendar_add_event_uri): add the client to the internal
	list
	(gnome_calendar_remove_event_uri): remove the client from the
	internal list and lookup the client
	(gnome_calendar_update_config_settings): use the internal client
	list to update the config settings

2003-10-23  Harry Lu  <harry.lu@sun.com>

	* cal-client/cal-client.c: (cal_client_get_timezone): remove and free
	op before return.

	* gui/e-cal-view.c (e_cal_view_add_event): modified from
	selection_received_add_event() so that it call be called out of
	e-cal-view.c.
	(selection_received): modified to call e_cal_view_add_event().

	* gui/e-cal-view.h: add declaration for e_cal_view_add_event().

	* gui/e-day-view.c (e_day_view_on_drag_data_get): Provide a
	icalcomponent for both TARGET_CALENDAR_EVENT and TARGET_VCALENDAR.
	(e_day_view_on_top_canvas_drag_data_received): If dragging between
	different windows, make it works like a copy and paste.
	(e_day_view_on_main_canvas_drag_data_received): ditto.

2003-10-23  JP Rosevear <jpr@ximian.com>

	* cal-util/cal-recur.c: update g_date calls to non-deprecated
	calls

	* cal-util/Makefile.am: turn off deprecated funcs

	* cal-client/Makefile.am: turn off deprecated funcs

	* cal-client/cal-client.c (cal_client_get_error_message): add OK
	message

	* pcs/cal-backend.[hc]: remove dead funcs

	* pcs/query.c: tidy headers

2003-10-23  JP Rosevear <jpr@ximian.com>

	* pcs/query.c (query_notify_objects_removed_1): Fix c/p typo -
	call removed instead of modify

2003-10-23  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-cal-view.c (e_cal_view_init): connect also to ETableModel's
	"model_cell_changed" signal.
	(e_cal_view_set_model): likewise.
	(model_cell_changed_cb): callback for "model_cell_changed".
	(e_cal_view_destroy): use g_signal_handlers_disconnect_matched instead
	of g_signal_handlers_disconnect_by_func, so that all handlers are
	disconnected.

2003-10-23  JP Rosevear <jpr@ximian.com>
 
 	* pcs/cal.c (cal_notify_object_modified): guard against irrelevant
 	args (ie if there was an error) 
 	(cal_notify_object_removed): ditto
 	(cal_notify_timezone_added): ditto
 
 	* pcs/cal-backend-sync.c (_cal_backend_is_read_only): init value
 	to something known
 	(_cal_backend_get_cal_address): ditto
 	(_cal_backend_get_alarm_email_address): ditto
 	(_cal_backend_get_ldap_attribute): ditto
 	(_cal_backend_get_static_capabilities): ditto
 	(_cal_backend_modify_object): ditto
 	(_cal_backend_remove_object): ditto
 	(_cal_backend_get_object_list): ditto
 
2003-10-22  JP Rosevear <jpr@ximian.com>
 
 	* gui/e-cal-list-view.c (e_cal_list_view_new): create a model and
 	pass it as an arg during creation
 
 	* gui/e-day-view.c (e_day_view_new): unref the model
 
 	* gui/e-week-view.c (e_week_view_new): ditto
	
2003-10-22  JP Rosevear <jpr@ximian.com>
 
 	* cal-client/cal-client.c (cal_client_get_object): only change to
 	invalid object error code if we got the object but couldn't parse
 	it, and only check for timezones if we had success
 
 	* gui/comp-util.c (cal_comp_is_on_server): don't throw a warning
 	if the object simply does not exist
	
2003-10-22  Rodrigo Moya <rodrigo@ximian.com>

	* gui/gnome-cal.[ch] (gnome_calendar_remove_event_uri): new
	function to remove calendars from the views.

2003-10-22  Ettore Perazzoli  <ettore@ximian.com>

	* gui/GNOME_Evolution_Calendar.server.in.in: Add an
	"evolution:button_icon" attribute.

2003-10-22  Ettore Perazzoli  <ettore@ximian.com>

	* gui/GNOME_Evolution_Calendar.server.in.in: Add an
	"evoution:button_sort_order" attribute.

2003-10-22  Ettore Perazzoli  <ettore@ximian.com>

	* gui/calendar-component.c (impl_createControls): Make the
	scrolled window have a GTK_SHADOW_IN shadow.
	* gui/dialogs/meeting-page.c (meeting_page_construct): Likewise.

2003-10-22  Ettore Perazzoli  <ettore@ximian.com>

	* gui/calendar-component.c (impl_createControls): Set the
	scrollbar policy to "automatic" for both the horizontal and
	vertical scrollbars around the source selector.

2003-10-22  Ettore Perazzoli  <ettore@ximian.com>

	* gui/GNOME_Evolution_Calendar.server.in.in: Add an
	"evolution:button_label" property on the component for use in the
	shell.

2003-10-21  Rodney Dawes  <dobey@ximian.com>

	* cal-client/Makefile.am: Fix typo in libcal_client_la_SOURCES
	
2003-10-21  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (calendar_component_init): fixed
	a leak caused by only freeing 'base_uri' in some cases.

2003-10-21  JP Rosevear <jpr@ximian.com>

	* gui/control-factory.c (get_prop): fix parse error
	(set_prop): gnome_calendar_open was renamed

	* conduits/todo/todo-conduit.c (start_calendar_server): adapt to
	the cal_client_new changes and the lack of a default calendar
	routine
	(pre_sync): don't have to pass a type for the default object any
	more

	* conduits/calendar/calendar-conduit.c (start_calendar_server):
	adapt to the cal_client_new changes and the lack of a default
	calendar routine
	(pre_sync): don't have to pass a type for the default object any
	more

	* cal-client/cal-client.c (cal_client_open_async): add FIXME
	comment

2003-10-21  Rodrigo Moya <rodrigo@ximian.com>

	* pcs/cal-backend-file.c: store recurrences per object.
	(free_object): free correctly the CalBackendFileObject's
	contained in 'priv->comp_uid_hash'.
	(lookup_component, check_dup_uid, add_component, remove_component,
	match_object_sexp):
	adapted to changes in comp_uid_hash.
	
2003-10-20  Rodrigo Moya <rodrigo@ximian.com>

	* gui/gnome-cal.[ch] (gnome_calendar_add_event_uri): renamed
	from gnome_calendar_open.

	* gui/calendar-component.c (load_uri_for_source): call
	gnome_calendar_add_event_uri instead of setting the URI property on
	the Bonobo control.

2003-10-17  Rodrigo Moya <rodrigo@ximian.com>

	* gui/migration.c (process_calendar_dir): process subfolders.

2003-10-17  Rodrigo Moya <rodrigo@ximian.com>

	* gui/migration.[ch] (migrate_old_calendars): new function.

	* gui/calendar-component.c (calendar_component_init): call
	the above function to migrate from old setups.

	* gui/Makefile.am: added new files.

2003-10-17  Jeffrey Stedfast <fejj@ximian.com>
	
	* conduits/calendar/Makefile.am: Fixed for libical build changes.

	* conduits/todo/Makefile.am: Same.

2003-10-17  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-cal-view.c (on_print): call
	e_cal_view_get_visible_time_range, not the gnome_calendar_
	version.
	(e_cal_view_new_appointment_for, e_cal_view_new_appointment,
	e_cal_view_edit_appointment): new functions.

	* gui/gnome-cal.[ch] (gnome_calendar_new_appointment_for,
	gnome_calendar_new_appointment, gnome_calendar_edit_object):
	removed these functions, now available in e-cal-view.

	* gui/calendar-commands.c:
	* gui/e-day-view.c:
	* gui/e-week-view-event-item.c:
	* gui/e-week-view.c: replaced calls to gnome_calendar_* with
	e_cal_view_* equivalents.

2003-10-17  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-cal-view.[ch] (e_cal_view_get_default_category):
	(e_cal_view_set_default_category): new functions.
	(e_cal_view_destroy): free the default_category field.

	* gui/e-day-view.[ch] (e_day_view_set_default_category):
	removed obsolete function.
	(e_day_view_init, e_day_view_destroy, e_day_view_do_key_press):
	use the ECalView's default_category.

	* gui/e-week-view.[ch] (e_week_view_set_default_category):
	removed obsolete function.
	(e_week_view_init, e_week_view_destroy, e_week_view_do_key_press):
	use the ECalView's default_category.

	* gui/gnome-cal.c (gnome_calendar_set_query): set the query
	also on the list view by using the priv->views array.
	(search_bar_category_changed_cb, gnome_calendar_set_default_client):
	use the priv->views array.
	(gnome_calendar_get_calendar_model): return the model for the
	current view widget.
	(gnome_calendar_open): removed tasks opening code.

2003-10-16  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/new-calendar.c (new_calendar_dialog): if the user
	presses Cancel, just terminate.

2003-10-16  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (calendar_component_init): create
	directories for the newly-created calendars.

	* gui/dialogs/new-calendar.c (create_new_source_with_group): use
	e_mkdir_hier instead of mkdir.

2003-10-16  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-component.c (calendar_component_init): if no groups
	are present in the configuration, create the "On This Computer"
	group and the "Personal" and "Work" calendars on it.

	* gui/dialogs/new-calendar.c (new_calendar_dialog): moved the
	source creation...
	(create_new_source_with_group): ...here, and made the code create
	the directory for the new calendar.

2003-10-15  Hans Petter Jansson  <hpj@ximian.com>

	* gui/e-select-names-editable.c (e_selct_names_editable_get_address):
	EDestination -> EABDestination.

	* gui/gnome-cal.c (setup_widgets): evolution_dir -> ".evolution".

2003-10-15  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-select-names-editable.c (e_select_names_editable_get_address):
	use EABDestination instead of EDestination.

	* gui/gnome-cal.c (gnome_calendar_open): disabled tasks opening code.

2003-10-15  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-meeting-list-view.c: adapted to new addressbook API.

	* gui/e-meeting-store.c: adapted to new addressbook API.
	(find_zone): fixed usage of icalcomponent where an icalproperty
	is expected.
	(refresh_busy_periods): fixed call to cal_client_get_free_busy().

	* gui/e-meeting-time-sel.c (e_meeting_time_selector_construct):
	added missing variable.
	
2003-10-15  Jeffrey Stedfast  <fejj@ximian.com>

	* gui/dialogs/meeting-page.c: #include <gal/e-table/e-table.h>

2003-10-15  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-meeting-list-view.c (start_addressbook_server):
	updated to new addressbook API.
	(book_open_cb): removed unneeded function, since we load
	the local addressbook synchronously.

2003-10-15  Rodrigo Moya <rodrigo@ximian.com>

	* pcs/Makefile.am: added missing header directories.

	* pcs/cal-factory.h: include <libical/ical.h>, not <ical.h>.

	* gui/dialogs/meeting-page.c: added missing headers.
	(meeting_page_construct): free 'backend_address' as returned
	by cal_client_get_cal_address(). Removed code to create the
	meeting model's ETable not removed with the merge.

	* gui/e-meeting-list-view.c: updated addressbook headers.

	* gui/gnome-cal.h: added missing ',' in the GnomeCalendarViewType
	enum.
	
2003-10-14  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-day-view.c (e_day_view_update_query): dont set status
	messages here, already set in e_cal_view_update_query.
	(update_query): removed this function.
	(e_day_view_recalc_day_starts): call e_day_view_update_query,
	not update_query.

	* gui/e-week-view.c (e_week_view_update_query): dont set status
	messages here, already set in e_cal_view_update_query.

	* gui/gnome-cal.c (adjust_query_for_view): new function to adjust
	the query for the visible time range on a given view.
	(gnome_calendar_set_query): call adjust_query_for_view for each
	one of the views.

2003-10-14  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-cal-view.c (e_cal_view_init): connect to signals on the
	model we create here, so that we get notifications for changes.

	* gui/gnome-cal.c (gnome_calendar_set_query): set the query
	on all models.
	(gnome_calendar_open): update the date navigator query.

2003-10-14  Rodrigo Moya <rodrigo@ximian.com>

	* pcs/cal.c (cal_notify_timezone_requested): never send NULL
	strings to ORBit.

	* gui/e-cal-view.c (e_cal_view_create_popup_menu): removed
	unneeded variables. Also, fixed a typo that was making the
	menu options be disabled when they should be enabled.

2003-10-13  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-cal-model.[ch] (e_cal_model_get_client_for_uri): new function.

	* gui/gnome-cal.[ch] (gnome_calendar_set_default_client): new function.

	* gui/calendar-component.c (primary_source_selection_changed_callback):
	set the default client on the calendar view to be the primary
	selection on the source list.

2003-10-13  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/new-calendar.c (new_calendar_dialog): set a default group
	on the calendar group option menu and create the source if all checks
	are passed.

2003-10-12  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/new-calendar.c (new_calendar_dialog): set up widgets
	loaded from the Glade file.

2003-10-10  Hans Petter Jansson  <hpj@ximian.com>

	* gui/Makefile.am (etspec_DATA): Add e-cal-list-view.etspec.
	(libevolution_calendar_la_SOURCES): Add e-cal-list-view.[ch].

	* gui/calendar-commands.c (show_list_view_clicked): Implement.
	(calendar_get_text_for_folder_bar_label): Add case for list view.
	Use month case and tweak it so it doesn't show "%d - %d" if the
	time span contains only one day.
	(verbs): Add list view.
	(pixmaps): Add list view.

	* gui/calendar-view-factory.c (calendar_view_factory_get_title):
	Add list view case.
	(calendar_view_factory_get_type_code): Add list view case.

	* gui/control-factory.c (get_prop): Add list view case.

	* gui/e-cal-model.c (get_classification): Fix to conform to updated
	libical.
	(ecm_set_value_at): Add missing break statements.
	(ecm_get_color_for_component): Add braces for clarity.

	* gui/gnome-cal.c (gnome_calendar_get_current_view_widget): Add
	list view case.
	(get_focus_location): Add list view case.
	(connect_list_view_focus): Implement.
	(setup_widgets): Set up list view.
	(gnome_calendar_direction): Add list view case.
	(set_view): Add list view case.
	(gnome_calendar_setup_view_menus): Add list view factory.
	(gnome_calendar_construct): Account for list view.
	(gnome_calendar_update_config_settings): Account for list view.
	(get_days_shown): Implement list view case.

	* gui/gnome-cal.h (GnomeCalendarViewType): Add list view.

	* gui/e-cal-list-view.[ch]: Implement ECalListView, subclassing
	ECalView.

2003-10-10  Rodrigo Moya <rodrigo@ximian.com>

	* gui/dialogs/new-calendar.[ch]: added new widget, which implements
	the dialog to create new calendars.

	* gui/dialogs/new-calendar.glade: basic mockup of the dialog.

	* gui/dialogs/Makefile.am: added new files.

	* gui/calendar-commands.c (file_new_calendar_cb): open the new calendar
	dialog to allow user to create a new cal.

2003-10-10  Rodrigo Moya <rodrigo@ximian.com>

	* gui/control-factory.c (calendar_properties_init): pass the
	BonoboControl to get_prop/set_prop.
	(get_prop): obtain the GnomeCalendar from the control.
	(set_prop): ditto, and when the URI property is changed,
	sensitize the UI as approppriate.

	* gui/calendar-commands.c (calendar_control_sensitize_calendar_commands):
	made this function public.

	* gui/calendar-commands.h: added new prototype.

2003-10-10  Rodrigo Moya <rodrigo@ximian.com>

	* gui/calendar-commands.c (file_new_calendar_cb,
	file_new_appointment_cb, file_new_event_cb, file_new_meeting_cb,
	file_new_task_cb): callbacks for "New..." verbs.
	(sensitize_calendar_commands): sensitize new verbs, and made it
	sensitize correctly based on the set of clients currently loaded.
	(sensitize_taskpad_commands): likewise.

2003-10-09  Hans Petter Jansson  <hpj@ximian.com>

	* gui/e-cal-model.c (get_classification): Adapt to libical API changes.
	(ecm_set_value_at): Break after each case, so we don't set the passed value
	in more than one field.

2003-10-09  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-cal-view.c (e_cal_view_delete_selected_occurrence):
	* cal-client/cal-client.c (cal_client_remove_object): added missing
	argument when calling cal_client_remove_object_with_mod().

2003-10-09  Rodrigo Moya <rodrigo@ximian.com>

	* idl/evolution-calendar.idl: added missing 'rid' argument to the
	removeObject method.

	* cal-client/cal-client.c (cal_client_remove_object_with_mod):
	* pcs/cal-backend.h:
	* pcs/cal-backend.c (cal_backend_remove_object):
	* pcs/cal-backend-sync.h:
	* pcs/cal-backend-sync.c (cal_backend_sync_remove_object,
	_cal_backend_remove_object):
	* pcs/cal-backend-file.c (cal_backend_file_remove_object):
	* pcs/cal.c (impl_cal_removeObject): adapted to changes in IDL.

2003-10-09  Jeffrey Stedfast  <fejj@ximian.com>

	* cal-client/Makefile.am: INCLUDE path fixes for changes made to
	libical build.

	* cal-util/Makefile.am: INCLUDE path fixes for changes made to
	libical build.

	* cal-util/*.[c,h]: #include <libical/ical.h> instead of <ical.h>

	* gui/Makefile.am: INCLUDE path fixes for changes made to libical
	build.

	* gui/*.[c,h]: #include <libical/ical.h> instead of <ical.h>

	* gui/alarm-notify/Makefile.am: INCLUDE path fixes for changes
	made to libical build.

	* gui/alarm-notify/config-data.h: #include <libical/ical.h>
	instead of <ical.h>

	* gui/dialogs/Makefile.am: INCLUDE path fixes for changes made to
	libical build.

	* gui/dialogs/comp-editor-util.c: #include <libical/ical.h>
	instead of <ical.h>

	* gui/dialogs/e-delegate-dialog.c: #include <libical/ical.h>
	instead of <ical.h>

	* importers/Makefile.am: INCLUDE path fixes for changes made to
	libical build.

	* pcs/Makefile.am: INCLUDE path fixes for changes made to libical
	build.

	* pcs/cal.c: #include <libical/ical.h> instead of <ical.h>

2003-10-08  Harry Lu  <harry.lu@sun.com>

	* gui/dialogs/alarm-options.glade: Make repeat-quantity and
	repeat-value of alarm option dialog numeric only.

	* gui/dialogs/task-details-page.glade: Make percent-complete of
	task details dialog numeric only.

2003-10-08  Chris Toshok  <toshok@ximian.com>

	* gui/dialogs/e-delegate-dialog.c (e_delegate_dialog_construct):
	EDestination => EABDestination, and e_destination =>
	eab_destination.
	(e_delegate_dialog_get_delegate): same.
	(e_delegate_dialog_get_delegate_name): same.

	* gui/dialogs/comp-editor-util.c: remove unnecessary #include of
	e-destination.h.

	* gui/dialogs/alarm-options.c (alarm_to_malarm_widgets):
	EDestination => EABDestination, and e_destination =>
	eab_destination.
	(malarm_widgets_to_alarm): same.

	* gui/e-meeting-model.c (book_open_cb): track change to error
	return codes.
	(start_addressbook_server): use
	e_book_async_get_default_addressbook.
	(contacts_cb): rename cursor_cb to this, as we no longer get
	passed a cursur, and we don't need to check the email address
	since the query is now "is" instead of "contains".
	(refresh_busy_periods): use an "is" query, and use
	e_book_async_get_contacts instead of getting a CardCursor.
	(process_section): this takes an EABDestination** instead of a
	SimpleCardList*, which is gone.
	(select_names_ok_cb): get "destinations" instead of
	"simple_card_list".

2003-10-08  Rodrigo Moya <rodrigo@ximian.com>

	* cal-client/cal-client.c (cal_client_is_read_only): fixed
	documentation comments.

	* gui/calendar-commands.c (sensitize_calendar_commands): figure
	out read-only menu items to disable based on the currently
	selected object's CalClient.

2003-10-08  Rodrigo Moya <rodrigo@ximian.com>

	* cal-client/cal-client.c: set better error m,essages on the
	E_CALENDAR_CHECK_STATUS macro.
	(cal_client_get_error_message): new function.

	* cal-client/cal-client.h: added new prototype.

	* gui/dialogs/comp-editor.c (save_comp): use the GError argument
	for the cal_client_create/_modify_object calls, and display the
	error message coming from the backend.

	* gui/comp-util.c (cal_comp_is_on_server): likewise.

2003-10-07  Dan Winship  <danw@ximian.com>

	* idl/evolution-calendar.idl (getDefaultObject): Remove the "type"
	arg; the backend knows what type it is

	* pcs/cal.c (impl_Cal_getDefaultObject): Likewise

	* pcs/cal-backend.c (cal_backend_get_default_object): Likewise

	* pcs/cal-backend-sync.c (cal_backend_sync_get_default_object,
	_cal_backend_get_default_object): Likewise

	* pcs/cal-backend-file.c (cal_backend_file_get_default_object):
	Likewise. (Use cal_backend_get_kind() instead.)

	* cal-client/cal-client.c (cal_client_get_default_object):
	Likewise

	* gui/comp-util.c (cal_comp_event_new_with_defaults,
	cal_comp_task_new_with_defaults): Update calls to
	cal_client_get_default_object().

	* pcs/cal-backend-sync.c (_cal_backend_get_static_capabilities):
	Use the right cal notification

2003-10-07  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-cal-model.c (e_cal_model_create_component_with_defaults):
	dont clone NULL icalcomponent's.

2003-10-07  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-cal-model.c (e_cal_model_get_default_client): make sure we
	always return a default client, if possible, since we rely on having
	a default client in many places.

	* gui/e-day-view.c (e_day_view_do_key_press): dont create event if
	e_cal_model_create_component_with_defaults returns NULL.

	* gui/e-week-view.c (e_week_view_do_key_press): dont create event if
	e_cal_model_create_component_with_defaults returns NULL.
	
2003-10-06  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-cal-model.c (e_cal_model_create_component_with_defaults):
	make sure the component has always an UID.

	* gui/e-day-view.c  (e_day_view_find_event_from_uid):
	* gui/e-week-view.c (e_week_view_find_event_from_uid): check
	pointers passed to strcmp().

2003-10-06  Rodrigo Moya <rodrigo@ximian.com>

	* gui/gnome-cal.c (gnome_calendar_open): added missing call to
	cal_client_open().

	* cal-client/cal-client.c (cal_client_new): fixed documentation
	comments.
	(cal_client_open): emit CAL_OPENED signal with appropriate status codes.
	(open_sync): dont emit CAL_OPENED signal, it's already emitted in
	cal_client_open().

2003-10-06  Rodrigo Moya <rodrigo@ximian.com>

	* gui/comp-editor-factory.c (open_client):
	* gui/gnome-cal.c (gnome_calendar_open, gnome_calendar_construct):
	* gui/calendar-offline-handler.c (backend_go_offline, backend_go_online,
	calendar_offline_handler_init): adapted to changes in cal_client and
	manage GError's returned by cal_client_open.

	* gui/e-itip-control.c: dont run anymore sub event loops.
	(start_calendar_server): use synchronous interface for opening calendars.
	(start_default_server): renamed it from *_async.
	(start_calendar_server_cb): removed unneeded function.
	(object_requested_cb): use sync interface.

	* gui/e-tasks.c (e_tasks_construct): dont create the CalClient here.
	(e_tasks_open): do it here, where we've got all the info needed.

	* importers/icalendar-importer.c (update_single_object): killed warning.
	(ical_importer_new, vcal_importer_new): don't create CalClient's here.
	(load_file_fn): create them here.
	(vcal_load_file_fn): and here.
	(gnome_calendar_import_data_fn): fixed usage of cal_client_*.

	* */*: integrated JP's changes for synchronous open's in cal_client
	and one model per view instead of one model for all views.
	
2003-10-02  Rodrigo Moya <rodrigo@ximian.com>

	* cal-client/cal-client.c (cal_client_modify_object): return FALSE
	if the icalcomponent is NULL.

	* gui/e-day-view.c (e_day_view_finish_resize): commit sequence on
	CalComponent after changing start/end dates.

2003-10-01  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-day-view.c (process_component):
	* gui/e-week-view.c (process_component): expand recurrences here.

2003-09-30  Rodrigo Moya <rodrigo@ximian.com>

	* pcs/cal-backend-file.c (match_recurrence_sexp): removed.
	(match_object_sexp): dont expand recurrences here.

2003-09-30  Mike Kestner <mkestner@ximian.com>

	* cal-util/cal-util-marshal.list : new VOID:STRING,STRING,STRING
	* gui/Makefile.am : build the new view/store/renderer/editable
	* gui/e-select-names-renderer.* : new completion cell renderer
	* gui/e-select-names-editable.* : new completion cell editable
	* gui/e-meeting-model.* : killed. code reused in list-view/store
	* gui/e-meeting-store.* : port of EMeetingModel to GtkTreeModel
	* gui/e-meeting-list-view.* : GtkTreeView subclass for attendee lists
	* gui/e-meeting-time-sel.c : Use the new store/view
	* gui/e-meeting-time-sel-item.c : Use the new store/view
	* gui/dialogs/Makefile.am : don't install the etspec anymore.
	* gui/dialogs/event-editor.c : Use the new store/view.
	* gui/dialogs/meeting-page.c : Use the new store/view.
	* gui/dialogs/shedule-page.c : Use the new store/view.
	* gui/dialogs/task-editor.c : Use the new store/view.

2003-09-29  JP Rosevear <jpr@ximian.com>

	* conduits/todo/Makefile.am: link to libical-evolution

	* conduits/calendar/Makefile.am: ditto	
	
2003-09-26  JP Rosevear <jpr@ximian.com>

	* pcs/cal-backend.c (cal_backend_class_init): remove cal_added
	signal

2003-09-26  JP Rosevear <jpr@ximian.com>

	* pcs/cal.h: add protos

	* pcs/cal.c (cal_get_backend): accessor
	(cal_get_listener): ditto

	* pcs/cal-factory.c (impl_CalFactory_getCal): update to new
	routine name

	* pcs/cal-backend.h: add protos
	
	* pcs/cal-backend.c (cal_backend_init): init client mutex
	(cal_backend_finalize): destroy client mutex
	(cal_destroy_cb): just remove the client
	(listener_died_cb): remove the client, the listener died so it
	can't really do anything
	(last_client_gone): signal the last client gone
	(cal_backend_add_client): add a client with locking and listen for
	the death of the listener
	(cal_backend_remove_client): remove client

2003-09-26  Rodrigo Moya <rodrigo@ximian.com>

	* pcs/cal-backend-sync.c (_cal_backend_create_object): only free the
	returned UID if it's not NULL.

	* pcs/cal.c (cal_notify_object_created): dont send NULL strings to
	ORBit code.

2003-09-26  Rodrigo Moya <rodrigo@ximian.com>

	* gui/comp-util.c (cal_comp_is_on_server): free the icalcomponent
	returned from cal_client_get_object, and return TRUE if we find
	the component on the backend.

	* gui/e-day-view.c (process_component):
	* gui/e-week-view.c (process_component): added missing case, so that
	we also display recurrent meetings starting before the time range and
	ending after the time range.

	* cal-client/cal-listener.c (impl_notifyReadOnly): pass the
	'read_only' argument to the signal callback correctly (a gboolean
	not a 'gboolean *').

	* gui/comp-editor-factory.c (resolve_pending_requests): removed
	the g_assert on 'oc->pending != NULL', since there are now cases
	(local calendar) where we get to call this function (cal_opened_cb)
	with no pending requests yet.

2003-09-25  JP Rosevear <jpr@ximian.com>

	* gui/calendar-commands.c (publish_freebusy_cmd): adapt to new
	get_free_busy api

	* conduits/calendar/calendar-conduit.c (post_sync): ditto
	(pre_sync): ditto

	* conduits/todo/todo-conduit.c (pre_sync): ditto
	(post_sync): ditto

	* gui/e-meeting-model.c (refresh_busy_periods): ditto

	* gui/e-itip-control.c (send_freebusy): ditto

	* gui/e-cal-view.c (on_publish): ditto

	* cal-client/cal-listener.h: add signals

	* cal-client/cal-listener.c (build_change_list): move here from
	cal-client.c
	(impl_notifyChanges): implement
	(build_free_busy_list): util to create the GList of free busy
	objects
	(impl_notifyFreeBusy): implement
	(cal_listener_class_init): set free busy and changes epv methods,
	add signals

	* cal-client/cal-client.h: update protos

	* cal-client/cal-client.c (cal_get_changes_cb): get changes call
	back
	(cal_get_free_busy_cb): get free busy call back
	(cal_client_init): listen for free busy and changes signals
	(cal_client_get_changes): convert to new threaded sync api
	(cal_client_get_free_busy): ditto

	* pcs/cal.h: add protos

	* pcs/cal.c: remove dead type conversion function
	(impl_Cal_getChanges): implement by just calling, no return stuff
	(impl_Cal_getFreeBusy): ditto
	(cal_notify_changes): do getChanges callback
	(cal_notify_free_busy): do getFreeBusy callback

	* pcs/cal-backend.h: update protos, vmethods
	
	* pcs/cal-backend.c (cal_backend_get_free_busy): call through
	(cal_backend_get_changes): ditto

	* pcs/cal-backend-sync.h: add vmethods, protos

	* pcs/cal-backend-sync.c (cal_backend_sync_get_changes): call
	through
	(cal_backend_sync_get_free_busy): ditto
	(_cal_backend_get_changes): backend implementation, notify
	(_cal_backend_get_free_busy): ditto
	(cal_backend_sync_class_init): set free busy and changes
	implementations

	* pcs/cal-backend-file.c (cal_backend_file_get_free_busy): convert
	to sync backend method
	(cal_backend_file_compute_changes_foreach_key): remove from the
	hash here
	(cal_backend_file_compute_changes): no need to build the sequence
	here
	(cal_backend_file_get_changes): convert to sync backend method
	(cal_backend_file_class_init): set sync backend methods for free
	busy and changes

	* idl/evolution-calendar.idl: convert getChanges and getFreeBusy
	to new async api

2003-09-25  JP Rosevear  <jpr@ximian.com>

	* pcs/cal-backend.h: remove dead result enums

	* pcs/cal-backend.c: fix comments

	* idl/evolution-calendar.idl: remove dead exceptions

2003-09-25  JP Rosevear <jpr@ximian.com>

	* pcs/cal.c (cal_notify_default_object): send back the empty
	string if the object is NULL
	(cal_notify_object): ditto

2003-09-25  JP Rosevear <jpr@ximian.com>

	* gui/comp-editor-factory.c (edit_existing): convert to api
	changes

	* conduits/todo/todo-conduit.c (local_record_from_uid): ditto
	(pre_sync): ditto

	* conduits/calendar/calendar-conduit.c (local_record_from_uid):
	ditto
	(pre_sync): ditto

	* importers/icalendar-importer.c (update_single_object): ditto

	* gui/dialogs/comp-editor.c (obj_updated_cb): ditto

	* gui/e-itip-control.c (get_real_item): ditto
	(find_server): ditto

	* gui/comp-util.c (cal_comp_is_on_server): ditto
	(cal_comp_event_new_with_defaults): ditto
	(cal_comp_task_new_with_defaults): ditto

	* cal-client/cal-listener.h: add signals

	* cal-client/cal-listener.c (impl_notifyDefaultObjectRequested):
	implement
	(impl_notifyObjectRequested): ditto
	(cal_listener_class_init): set above epv implementations, add signals

	* cal-client/cal-client.h: update protos

	* cal-client/cal-client.c (cal_default_object_requested_cb): get
	default object callback
	(cal_object_requested_cb): get object callback
	(cal_client_init): listen for get and get default object signals
	(cal_client_get_default_object): convert to new sync api
	(cal_client_get_object): ditto

	* pcs/cal.h: add protos

	* pcs/cal.c (impl_Cal_getDefaultObject): just call the backend, it
	does the notification now
	(impl_Cal_getObject): ditto
	(cal_notify_default_object): do getDefaultObject response
	(cal_notify_object): do getObject response

	* pcs/cal-backend.h: remove vmethods, protos

	* pcs/cal-backend.c: remove a couple of dead functions
	(cal_backend_class_init): get_object_component is no longer a
	vmethod
	(cal_backend_get_default_object): call through
	(cal_backend_get_object): ditto

	* pcs/cal-backend-sync.h: add protos, vmethods

	* pcs/cal-backend-sync.c (cal_backend_sync_get_default_object):
	call through
	(cal_backend_sync_get_object): ditto
	(_cal_backend_discard_alarm): pass correct params to
	cal_notify_discard_alarm
	(_cal_backend_get_default_object): call through and notify
	(_cal_backend_get_object): ditto
	(cal_backend_sync_class_init): set backend implementations

	* pcs/cal-backend-file.c (cal_backend_file_get_default_object):
	convert to sync backend method
	(cal_backend_file_get_object): ditto
	(cal_backend_file_compute_changes_foreach_key): just look up the
	component rather than using the backend vmethod
	(cal_backend_file_remove_object): return valid sync status codes
	(cal_backend_file_class_init): move get_object, get_default_object
	to sync class

	* idl/evolution-calendar.idl: convert getObject and
	getDefaultObject to new async idl

2003-09-25  JP Rosevear  <jpr@ximian.com>

	* pcs/cal.c (impl_Cal_discardAlarm): just call the backend
	function, it does the notification
	(cal_notify_alarm_discarded): notify of discard alarm call

	* pcs/cal-backend.h: update proto

	* pcs/cal-backend.c (cal_backend_discard_alarm): call through

	* pcs/cal-backend-sync.h: add proto, vmethod

	* pcs/cal-backend-sync.c (cal_backend_sync_discard_alarm): call
	through
	(_cal_backend_discard_alarm): call through and notify
	(cal_backend_sync_class_init): set discard alarm implementation

	* pcs/cal-backend-file.c (cal_backend_file_discard_alarm): match
	sync backend vmethod
	(cal_backend_file_class_init): set alarm vmethod implementation

	* idl/evolution-calendar.idl: switch discardAlarm to new api

	* gui/alarm-notify/alarm-queue.c (remove_queued_alarm): match new
	api

	* cal-client/cal-listener.h: add signal

	* cal-client/cal-listener.c (impl_notifyAlarmDiscarded): implement
	(cal_listener_class_init): add alarm, send, receive epv functions,
	alarm signal

	* cal-client/cal-client.h: update proto

	* cal-client/cal-client.c (cal_alarm_discarded_cb): discardAlarm
	callback
	(cal_client_init): listen to discard alarm signal
	(cal_client_discard_alarm): implement with new threaded sync api

2003-09-25  JP Rosevear <jpr@ximian.com>

	* idl/evolution-calendar.idl: remove unused user exceptions

2003-09-24  Rodrigo Moya <rodrigo@ximian.com>

	* pcs/cal-backend-util.[ch] (cal_backend_util_fill_alarm_instances_seq):
	removed unneeded function.

2003-09-24  JP Rosevear  <jpr@ximian.com>

	* conduits/*/*.c: adjust to new timezone api calls

	* gui/*.c: ditto

	* gui/dialogs/*.c: ditto

	* cal-client/cal-listener.h: add new signals

	* cal-client/cal-listener.c (convert_status): convert invalid
	object as well
	(impl_notifyTimezoneRequested): implement
	(impl_notifyDefaultTimezoneSet): ditto
	(cal_listener_class_init): set epv implementations for timezone
	functions
	(cal_listener_class_init): create timezone response signals

	* cal-client/cal-client.h: update protos

	* cal-client/cal-client.c: fix return values all over the place
	(cal_get_timezone_cb): getTimezone response
	(cal_query_cb): setDefaultTimezone response
	(cal_client_init): listen for new response signals
	(cal_client_get_timezone): implement using new thread sync api
	(cal_client_ensure_timezone_on_server): use add timezone call
	(cal_client_set_default_timezone): oimplement using new thread sync
	api

	* cal-client/cal-client-types.h: add invalid object status code

	* idl/evolution-calendar.idl: getQuery no longer raises any user
	exceptions, remove dead types and exceptions

2003-09-24  JP Rosevear <jpr@ximian.com>

	* pcs/cal.h: new protos

	* pcs/cal.c (impl_Cal_getTimezone): call backend implementation
	(impl_Cal_addTimezone): ditto
	(impl_Cal_setDefaultTimezone): ditto
	(cal_class_init): set epv implementations of timezone functions
	(cal_notify_timezone_requested): notify of get timezone response
	(cal_notify_default_timezone_set): notify of default timezone
	being set

	* pcs/cal-backend.h: new vmethods, protos

	* pcs/cal-backend.c (cal_backend_class_init): init new timezone
	vmethods
	(cal_backend_get_timezone): call through
	(cal_backend_set_default_timezone): ditto
	(cal_backend_add_timezone): ditto
	(cal_backend_internal_get_default_timezone): ditto
	(cal_backend_internal_get_timezone): ditto

	* pcs/cal-backend-sync.h: add vmethods, protos

	* pcs/cal-backend-sync.c (cal_backend_sync_get_timezone): call
	through
	(cal_backend_sync_set_default_timezone): ditto
	(_cal_backend_set_default_timezone): call through and notify
	(_cal_backend_get_timezone): ditto
	(cal_backend_sync_class_init): set backend implementations for new
	funcs

	* pcs/cal-backend-object-sexp.c (func_occur_in_time_range): get
	time_t values based on the zone

	* pcs/cal-backend-file.c: reorg so we don't have to prototype
	everything
	(cal_backend_file_get_timezone): implement the sync backend way
	(cal_backend_file_add_timezone): ditto
	(cal_backend_file_set_default_timezone): ditto
	(cal_backend_file_internal_get_default_timezone): internal method,
	for sexp comparison
	(cal_backend_file_internal_get_timezone): ditto

	* idl/evolution-calendar.idl: convert timezone routines to async
	api

2003-09-23  Rodrigo Moya <rodrigo@ximian.com>

	* pcs/cal-backend-object-sexp.c (func_occur_in_time_range): dont expand
	recurrences, since they are supposed to be expanded in the backends.
	(instance_occur_cb, resolve_tzid): removed unneeded functions.

	* pcs/cal-backend-file.c (cal_backend_file_add_timezone): guard against
	adding the timezone if it's already there.

2003-09-23  JP Rosevear <jpr@ximian.com>

	* pcs/cal.c (cal_notify_object_created): notify with the object,
	not the uid

	* gui/e-cal-model.c (add_new_client): don't listen for
	non-existent signal

2003-09-23  JP Rosevear <jpr@ximian.com>

	* cal-client/cal-client.h: remove dead proto

2003-09-23  JP Rosevear <jpr@ximian.com>

	* cal-client/cal-client.h: remove send result enum

	* gui/itip-utils.c (comp_server_send): use the new send_objects
	routine

2003-09-23  JP Rosevear <jpr@ximian.com>

	* cal-client/cal-client.h: remove send result enum

2003-09-23  JP Rosevear <jpr@ximian.com>

	* cal-client/cal-client.h: remove enum, protos

	* cal-client/cal-client.c: remove remove status enum typing

2003-09-23  Rodrigo Moya <rodrigo@ximian.com>

	* importers/icalendar-importer.c (update_objects): new function
	to manage the update of components, taking into account
	VTIMEZONE components.
	(process_item_fn, gnome_calendar_import_data_fn): use
	update_objects instead of cal_client_update_objects.

2003-09-23  JP Rosevear <jpr@ximian.com>

	* pcs/cal.h: update proto

	* pcs/cal.c (impl_Cal_addTimezone): just call add_timezone, it
	does the notification
	(cal_notify_object_created): only notify the query if the object
	matches
	(cal_notify_object_removed): ditto

	* pcs/cal-backend.h: update proto, vmethod

	* pcs/cal-backend.c (cal_backend_add_timezone): returns void

	* pcs/cal-backend-sync.h: update proto, vmethod

	* pcs/cal-backend-sync.c (cal_backend_sync_remove_object): add the
	object as an out param
	(_cal_backend_remove_object): get the object and pass it in the
	notification

	* pcs/cal-backend-file.c (cal_backend_file_create_object): kill
	cal_backend_file_update_objects call, its more efficient to create
	the comp ourselves; stamp the creation time, add the component to
	the toplevel
	(cal_backend_file_modify_object): kill the
	cal_backend_file_update_objects call, add the component to the
	toplevel
	(cal_backend_file_remove_object): pass back the object when
	removing

2003-09-23  JP Rosevear  <jpr@ximian.com>

	* cal-client/cal-query.c (cal_query_finalize): disconnect the
	signal handlers

	* cal-client/cal-client.c (cal_client_get_query): unref the
	listener when done

2003-09-23  Rodrigo Moya <rodrigo@ximian.com>

	* gui/e-cal-view.c (selection_received): add VTIMEZONE components
	contained in the clipboard data to the backend.

2003-09-22  JP Rosevear <jpr@ximian.com>

	* gui/dialogs/comp-editor.c (save_comp): modify and create instead
	of update, simplify mod code

2003-09-22  JP Rosevear <jpr@ximian.com>

	* gui/e-day-view.c (e_day_view_finish_long_event_resize): modify
	the object instead of update, simplify the instance handling
	(e_day_view_finish_resize): ditto
	(e_day_view_on_top_canvas_drag_data_received): ditto
	(e_day_view_on_main_canvas_drag_data_received): ditto

2003-09-22  Rodrigo Moya <rodrigo@ximian.com>

	* cal-client/cal-client.c (cal_client_get_alarms_in_range): use
	'has-alarms' function in the search expression.

	* pcs/cal-backend-object-sexp.c (func_has_alarms): new SExp function.

2003-09-22  JP Rosevear <jpr@ximian.com>

	* gui/e-day-view.c (e_day_view_on_editing_stopped): create the
	object if its not on the server or modify it if it is

	* gui/e-week-view.c (e_week_view_on_editing_stopped): we return if
	there is no text and it *not* on the server

2003-09-22  JP Rosevear <jpr@ximian.com>

	* gui/e-week-view.c (e_week_view_on_editing_stopped): create the
	object if its not on the server or modify it if it is

2003-09-22  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.h: remove proto

	* gui/gnome-cal.c: remove gnome_calendar_unrecur_selection

	* gui/e-week-view.h: remove proto

	* gui/e-week-view.c: remove e_week_view_unrecur_appointment

	* gui/e-day-view.h: remove proto

	* gui/e-day-view.c: remove e_day_view_unrecur_appointment

	* gui/e-cal-view.c: remove on_unrecur_appointment (this is handled
	better via recurrence id's now)

2003-09-22  JP Rosevear <jpr@ximian.com>

	* gui/e-itip-control.c (update_attendee_status): ifdef out, leave
	temporarily for reference, but otherwise it shouldn't be needed
	(update_item): switch to using receive objects
	(ok_clicked_cb): update item when receiving a reply

	* gui/e-calendar-table.c (selection_received): switch to using
	create object from update_objects

	* gui/e-cal-view.c (selection_received_add_event): util routine to
	prevent duplication
	(selection_received): use above

	* gui/e-cal-model.c (ecm_set_value_at): switch to using modify
	object from update_objects
	(ecm_append_row): switch to using create object from
	update_objects

	* gui/e-cal-model-calendar.c (ecmc_set_value_at): switch to using
	modify object from update_objects

	* gui/e-cal-model-tasks.c (ecmt_set_value_at): ditto

2003-09-22  Hans Petter Jansson  <hpj@ximian.com>

	* cal-util/Makefile.am (libical_util_la_LIBADD):
	libical.la -> libical-evolution.la

	* importers/Makefile.am (libevolution_calendar_importers_la_LIBADD):
	libicalvcal.la -> libicalvcal-evolution.la

	
2003-09-19  Rodrigo Moya <rodrigo@ximian.com>

	* idl/evolution-calendar.idl: removed getAlarmsInRange and
	getAlarmsForObject methods.

	* pcs/cal.c (impl_Cal_getAlarmsInRange, impl_Cal_getAlarmsForObject):
	removed unneeded CORBA methods.
	(cal_class_init): dont set removed methods in the epv.

	* pcs/cal-backend.[ch]: removed get_alarms_in_range and
	get_alarms_for_object virtual methods.
	(cal_backend_get_alarms_in_range, cal_backend_get_alarms_for_object):
	removed.
	(cal_backend_class_init): dont set removed virtual methods.

	* pcs/cal-backend-file.c (cal_backend_file_get_alarms_in_range,
	cal_backend_file_get_alarms_for_object): removed.
	(cal_backend_file_class_init): dont set removed virtual methods.

2003-09-19  Rodrigo Moya <rodrigo@ximian.com>

	* cal-client/cal-client.c (cal_client_get_alarms_in_range): changed
	to use queries.
	(build_component_alarms_list): create the alarm list from a list
	of iCalendar strings.
	(build_alarm_instance_list): removed.
	(cal_client_get_alarms_for_object): dont call the CORBA methods,
	just get alarms by itself.

2003-09-18  Rodrigo Moya <rodrigo@ximian.com>

	* cal-client/cal-listener.[ch]: added "add_timezone" signal.
	(impl_notifyTimezoneAdded): implemented new CalListener method.
	(cal_listener_class_init): create "add_timezone" signal for the class.

	* cal-client/cal-client.[ch] (cal_client_add_timezone): new function.
	(cal_client_init): connect to "add_timezone" signal on the
	CalListener.
	(cal_add_timezone_cb): callback for the "add_timezone" signal.

2003-09-18  Rodrigo Moya <rodrigo@ximian.com>

	* idl/evolution-calendar.idl: added 'notifyTimezoneAdded' method
	to the Calendar::Listener interface.

	* pcs/cal-backend-sync.[ch] (cal_backend_sync_add_timezone):
	(_cal_backend_add_timezone): new functions for the new virtual
	method implementation.

	* pcs/cal.[ch] (cal_notify_timezone_added): new function.

	* pcs/cal-backend-file.c (cal_backend_add_timezone): converted to
	return a CalBackendSyncStatus.
	(cal_backend_file_class_init): the 'add_timezone' method we implement
	is the one in the CalBackendSync class.
	(cancel_receive_object): added missing 'return'.
	(free_cal_component): removed unused function.

2003-09-17  Rodrigo Moya <rodrigo@ximian.com>

	* pcs/cal-backend-file.c (cal_backend_add_timezone): added new
	virtual method implementation.

	* pcs/cal.c (impl_Cal_addTimezone): check return value from
	cal_backend_add_timezone, and set an exception if an error is
	returned.

2003-09-16  Rodrigo Moya <rodrigo@ximian.com>

	* idl/evolution-calendar.idl: added addTimezone method.

	* pcs/cal.c (impl_Cal_addTimezone): implemented new method.
	(cal_class_init): set new method on the epv.

	* pcs/cal-backend.[ch]: added 'add_timezone' virtual method.
	(cal_backend_add_timezone): implemented new virtual method.

	* pcs/cal-backend-file.c (cal_backend_file_modify_object): it's
	cal_component_get_as_string, not cal_component_as_string.

	* cal-client/cal-client.c (cal_client_ensure_timezone_on_server):
	dont use anymore updateObjects method, use addTimezone instead.
	
2003-09-16  Rodrigo Moya <rodrigo@ximian.com>

	* conduits/todo/Makefile.am: removed libwombat reference.

2003-09-15  Rodrigo Moya <rodrigo@ximian.com>

	* pcs/cal-backend-file.c (cal_backend_file_create_object): return
	the UID of the added object.
	(cal_backend_file_remove_object): ditto for old_object.

2003-09-15  JP Rosevear <jpr@ximian.com>

	* conduits/todo/todo-conduit.c (replace_record): switch to modify
	object
	(add_record): switch to using create object

	* conduits/calendar/calendar-conduit.c (process_multi_day): switch
	to using create object
	(add_record): switch to using create object
	(replace_record): switch to modify object

	* cal-client/cal-listener.h: add signals

	* cal-client/cal-listener.c (impl_notifyObjectsReceived):
	implement listener method
	(build_object_list): ditto
	(cal_listener_class_init): create receive_objects and send_objects
	signals

	* cal-client/cal-client.h: add, update protos

	* cal-client/cal-client.c (cal_objects_received_cb):
	receive_objects callback
	(cal_objects_sent_cb): send_objects callback
	(cal_client_init): listen for above signals
	(cal_client_create_object): pass back uid
	(cal_client_receive_objects): implement
	(cal_client_send_objects): ditto

	* idl/evolution-calendar.idl: add receive/send objects methods and
	yank updateObjects

	* pcs/cal.h: add protos

	* pcs/cal.c (impl_Cal_receiveObjects): implement
	(impl_Cal_sendObjects): ditto
	(cal_class_init): add epv methods
	(cal_notify_objects_received): notify of objects received call,
	updating queries
	(cal_notify_objects_sent): notify of objects sent

	* pcs/cal-backend.h: remove proto

	* pcs/cal-backend.c (cal_backend_class_init): remove obj_updated
	signal
	(cal_backend_class_init): init vmethods properly
	(cal_backend_receive_objects): call through
	(cal_backend_send_objects): ditto

	* pcs/cal-backend-sync.h: add protos, vmethods

	* pcs/cal-backend-sync.c (cal_backend_sync_receive_objects): call
	through
	(cal_backend_sync_send_objects): ditto
	(_cal_backend_receive_objects): call backend method and notify
	(_cal_backend_send_objects): ditto
	(cal_backend_sync_class_init): override send/receive object
	vmethods

	* pcs/cal-backend-file.c (cal_backend_file_class_init): set
	remove/send objects sync vmethods
	(cal_backend_file_create_object): remove call to dead method
	(cal_backend_file_remove_object): ditto
	(cal_backend_file_modify_object): ditto
	(cancel_received_object): cancel an object
	(check_tzids): check we have all the tzid's for the object
	(cal_backend_file_receive_objects): receive a bunch of objects via
	itip
	(cal_backend_file_send_objects): skeleton implementation

2003-09-15  Rodrigo Moya <rodrigo@ximian.com>

	* idl/evolution-calendar.idl: added InvalidObject CallStatus.

	* pcs/cal-backend-file.c (cal_backend_file_create_object): implemented.
	(cal_backend_file_modify_object): implemented.

2003-09-15  Harry Lu  <harry.lu@sun.com>

	* gui/apps_evolution_calendar.schemas: change last_notification_time's
	type from string to int.

2003-09-12  Bolian Yin <bolian.yin@sun.com>

	* e-week-view.c (e_week_view_focus): make jump button focusable
	 (e_week_view_on_jump_button_event): key_press and focus event for jump button
	 (e_week_view_jump_to_button_item): new function, jump to the day view.
	 (e_week_view_is_jump_button_visible): new function.

	
2003-09-12  Rodrigo Moya <rodrigo@ximian.com>

	* pcs/cal.c (cal_notify_cal_address, cal_notify_alarm_email_address,
	cal_notify_ldap_attribute, cal_notify_static_capability):
	make sure we always notify listeners, regardless of whether the
	string is empty or not.

	* cal-client/cal-client.c (check_capability): guard against using
	NULL strings with strstr.

2003-09-12  JP Rosevear <jpr@ximian.com>

	* cal-client/client-test.c (cal_opened_cb): listen for other query
	signals

	* cal-client/cal-listener.h: add signals

	* cal-client/cal-listener.c (impl_notifyObjectCreated): implement
	(impl_notifyObjectModified): implement
	(cal_listener_class_init): assign epv implementations
	(cal_listener_class_init): add create/modify object signals

	* cal-client/cal-client.h: add protos

	* cal-client/cal-client.c (cal_object_created_cb): object created
	callback
	(cal_object_modified_cb): object modified callback
	(cal_client_init): listen for create/modify object signals from
	the listener
	(cal_client_create_object): call the create object method
	(cal_client_modify_object): call the modify object method

	* cal-client/client-test.c (cal_opened_cb): listen for all the
	query signals, tidy

2003-09-12  JP Rosevear <jpr@ximian.com>

	* pcs/cal.c (impl_Cal_createObject): implement
	(impl_Cal_modifyObject): ditto
	(cal_class_init): set epv methods for create/modify

	* pcs/cal-backend.h: add protos, vmethod

	* pcs/cal-backend.c (cal_backend_class_init): init new vmethods
	(cal_backend_create_object): call through
	(cal_backend_modify_object): ditto

	* pcs/cal-backend-sync.h: add protos, vmethods

	* pcs/cal-backend-sync.c (cal_backend_sync_create_object): call
	through
	(cal_backend_sync_modify_object): ditto
	(_cal_backend_create_object): create object and notify
	(_cal_backend_modify_object): modify object and notify

	* pcs/cal-backend-file.c (cal_backend_file_create_object):
	skeleton routine for creating objects
	(cal_backend_file_modify_object): ditto for modifying

	* idl/evolution-calendar.idl: add createObject and modifyObject
	calls

2003-09-12  JP Rosevear  <jpr@ximian.com>

	* pcs/cal.c (cal_notify_object_removed): its uid, not uids

2003-09-12  JP Rosevear <jpr@ximian.com>

	* pcs/query.h: add protos

	* pcs/query.c (query_object_matches): use the sexp to check for a
	match
	(query_notify_objects_added_1): notify of one object added to
	query
	(query_notify_objects_modified_1): ditto for modification
	(query_notify_objects_removed_1): ditto for removal

	* pcs/cal.h: add protos

	* pcs/cal.c (cal_notify_object_created): notify of object creation
	(cal_notify_object_modified): notify of object modification
	(cal_notify_object_removed): use the _1 routines

	* pcs/cal-backend-file.c (match_recurrence_sexp): this returns a
	boolean
	(cal_backend_file_update_objects): don't signal removals here now

	* idl/evolution-calendar.idl: add object created and modified
	responses

	
2003-09-11  JP Rosevear <jpr@ximian.com>

	* pcs/cal.h: update proto

	* pcs/cal.c (cal_notify_object_removed): notify relevant queries
	of removal

	* pcs/cal-backend.c (cal_backend_get_queries): ref the list before
	passing it back

	* pcs/cal-backend-sync.c (_cal_backend_remove_object): pass uid to
	notification

2003-09-11  JP Rosevear <jpr@ximian.com>

	* pcs/cal-backend-file.c (match_recurrence_sexp): don't unref the
	component

	* cal-client/client-test.c (cal_opened_cb): listen to objects
	added signal
	(objects_added_cb): print the object uid
	
2003-09-11  JP Rosevear <jpr@ximian.com>

	* pcs/cal-backend-object-sexp.c (cal_backend_object_sexp_text):
	return the base text

2003-09-11  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.c (update_query): fix c/p typo

2003-09-11  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.c (update_query): start the query

	* gui/e-cal-model.c (update_query_for_client): ditto

	* cal-client/client-test.c (cal_opened_cb): ditto
	
2003-09-11  JP Rosevear <jpr@ximian.com>

	* cal-client/cal-query.h: add proto

	* cal-client/cal-query.c (cal_query_start): start the query

2003-09-11  JP Rosevear <jpr@ximian.com>

	* gui/dialogs/delete-error.c (delete_error_dialog): accept GError
	and base error messages on that

	* gui/dialogs/delete-error.h: update proto

	* gui/e-tasks.c (e_tasks_delete_completed): pass extra param to
	cal_client_remove_object

	* conduits/todo/todo-conduit.c (delete_record): ditto

	* conduits/calendar/calendar-conduit.c (process_multi_day): ditto
	(delete_record): ditto
	
	* gui/gnome-cal.c (gnome_calendar_purge): ditto

	* gui/dialogs/comp-editor.c (delete_comp): ditto
	
	* gui/e-cal-view.c (e_cal_view_cut_clipboard): pass the error to
	delete_error_dialog
	(delete_event): ditto
	(e_cal_view_delete_selected_occurrence): ditto
	
	* gui/e-itip-control.c (remove_item): ditto

	* gui/e-calendar-table.c (delete_selected_components): ditto

	* cal-client/cal-listener.h: add signal

	* cal-client/cal-listener.c (impl_notifyObjectRemoved): implement
	(cal_listener_class_init): set object removed implementation and
	create signal

	* cal-client/cal-client.h: update protos

	* cal-client/cal-client.c (cal_object_removed_cb): object removal
	callback
	(cal_client_init): listen for object removal signal
	(cal_client_remove_object_with_mod): make call synchronous
	(cal_client_remove_object): pass new params

	* pcs/cal.h: add proto

	* pcs/cal.c (impl_Cal_removeObject): just call the backend
	function
	(cal_notify_object_removed): notify of removal

	* pcs/cal-backend.h: remove and update protos, remove signal

	* pcs/cal-backend.c (cal_backend_class_init): kill obj_removed
	signal
	(cal_backend_remove_object): there is no return value now

	* pcs/cal-backend-sync.h: add vmethod, proto

	* pcs/cal-backend-sync.c (cal_backend_sync_remove_object): call
	through
	(_cal_backend_remove_object): remove the object and then do the
	notification

	* pcs/cal-backend-file.c (cal_backend_file_class_init): remove
	object is not part of the sync class
	(cal_backend_file_update_objects): there is no more removed signal
	(cal_backend_file_remove_object): return sync status codes

	* idl/evolution-calendar.idl: make removeObject oneway and and a
	notification method in the listener

2003-09-11  Rodrigo Moya <rodrigo@ximian.com>

	* pcs/query.[ch] (query_get_text): new function.
	(query_get_object_sexp): new function.

	* pcs/cal-backend-file.c (cal_backend_file_start_query): implemented.

2003-09-11  Hans Petter Jansson  <hpj@ximian.com>

	* cal-util/Makefile.am (libcal_util_la_LIBADD):
	libical-evolution.la -> libical.la

	* cal-util/cal-component.c (cal_component_get_classification)
	(cal_component_set_classification)
	(get_text_list)
	(get_icaltimetype)
	(get_datetime)
	(get_period_list)
	(get_recur_list)
	(cal_component_get_transparency)
	(cal_component_set_transparency): Adapt to new libical.

	* cal-util/cal-util.c (cal_util_event_dates_match): Ditto.

	* pcs/cal-backend-file.c (create_user_free_busy): Ditto.

	* gui/e-cal-model-tasks.c (get_completed)
	(get_due)
	(get_due_status): Ditto.

	* gui/e-cal-model.c (get_dtstart)
	(set_classification): Ditto.

	* gui/e-cal-model-calendar.c (get_dtend)
	(get_transparency)
	(set_transparency): Adapt to new libical and fix a comparison bug.

	* importers/Makefile.am (libevolution_calendar_importers_la_LIBADD):
	libical-evolution.la -> libical.la

2003-09-11  Dan Winship  <danw@ximian.com>

	* cal-util/Makefile.am (privlib_LTLIBRARIES): Remove
	libcal-util-static.la

	* cal-client/Makefile.am (noinst_LTLIBRARIES): Remove
	libcal-client-static.la

	* conduits/calendar/Makefile.am (libecalendar_conduit_la_LIBADD):
	use non-static libraries. The static ones were only needed for
	libtool 1.3.

	* conduits/todo/Makefile.am (libetodo_conduit_la_LIBADD): Likewise

        * gui/Makefile.am (IDL_GENERATED): Don't compile the calendar idl
        here. It's already in libcal-client.

2003-09-11  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* conduits/todo/Makefile.am:
	Statically link with wombat. Fix ETodo conduit.
	(Mdk bug #5348)

	
2003-09-10  JP Rosevear  <jpr@ximian.com>

	* pcs/cal.h: update proto

	* pcs/cal.c (impl_Cal_getObjectList): just call the backend, it
	will do the notification now
	(cal_notify_object_list): the list is a list of strings

	* pcs/cal-backend.h: update vmethod, proto

	* pcs/cal-backend.c (cal_backend_get_object_list): call through

	* pcs/cal-backend-sync.h: add proto, vmethod

	* pcs/cal-backend-sync.c (cal_backend_sync_get_object_list): call
	through
	(_cal_backend_get_object_list): get the list of objects from the
	sync backend and do the notification
	(cal_backend_sync_class_init): set vmethod implementation

	* pcs/cal-backend-file.c (cal_backend_file_class_init): the get
	object list call is now part of the sync backend
	(cal_backend_file_get_object_list): return a status and put the
	object list in the passed in param

2003-09-10  JP Rosevear  <jpr@ximian.com>

	* pcs/cal-backend.c (cal_backend_finalize): unref the elist
	(cal_backend_init): init the query elist

2003-09-10  JP Rosevear <jpr@ximian.com>

	* gui/gnome-cal.c (dn_query_objects_added_cb): match new query
	signals - just tag here
	(dn_query_objects_modified_cb): always retag
	(dn_query_objects_removed_cb): ditto
	(update_query): connect to new signals
	(gnome_calendar_destroy): we don't keep a list of expunging
	queries
	(gnome_calendar_purge): no need to do the
	expunge async, just get the object list immediately

	* gui/e-tasks.c (e_tasks_delete_completed): no need to do the
	expunge asyn

